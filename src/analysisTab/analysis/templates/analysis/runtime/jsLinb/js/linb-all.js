var undefined,_=window._=function(){return +new Date()},Namespace=window.Namespace=function(e){var d=e.split("."),c=window;return _.get(c,d)||_.set(c,d,{})},Class=window.Class=function(D,q,h){var c,z=[],n=Class,g=window,y=n._fun,d=n._reg,e,s,x,l,B;h=h||{};if(l=_.get(g,D.split("."))){return l}q=(!q?[]:typeof q=="string"?[q]:q);for(x=0;l=q[x];x++){if(!(z[x]=(_.get(g,l.split("."))||(linb&&linb.SC&&linb.SC(l))))){throw new Error("errNoParent:"+l)}}if(h.Dependency){for(x=0;l=h.Dependency[x];x++){if(!(_.get(g,l.split("."))||(linb&&linb.SC&&linb.SC(l)))){throw new Error("errNoDependency:"+l)}}}e=z[0];c=h.Static||{};l={};for(x in c){if(d[x]){l[x]=1}}for(x in l){delete c[x]}c.Before=h.Before||(e&&e.Before);c.After=h.After||(e&&e.After);c.$End=h.$End||(e&&e.$End);c.__gc=h.__gc||c.__gc||(e&&e.__gc)||function(){Class.__gc(this.$key)};var m=function(){if(typeof this.initialize=="function"){this.initialize()}};if(typeof h.Constructor=="function"){s=y(h.Constructor,"Constructor",D,e||m,"constructor");s.Constructor=String(h.Constructor)}else{if(e){var A=m,p=e.Constructor;if(p){A=new Function(p.slice(p.indexOf("(")+1,p.indexOf(")")).split(","),p.slice(p.indexOf("{")+1,p.lastIndexOf("}")))}s=y(A,"Constructor",D,e.upper,"constructor");s.Constructor=p}else{s=m}}B=_.fun();for(x=z.length-1;l=z[x--];){_.merge(B,l);_.merge(B.prototype,l.prototype)}s.KEY=s.$key=s.prototype.KEY=s.prototype.$key=D;n._wrap(s,c,0,B,"static");if(l=h.Instance){n._wrap(s.prototype,l,1,B.prototype,"instance")}n._inherit(s,B);n._inherit(s.prototype,B.prototype);B=null;if(_.tryF(s.Before,arguments,s)===false){return false}for(x=0;l=z[x];x++){l=(l.$children||(l.$children=[]));for(var u=0,r=l.length,C;u<r;u++){if(l[r]==D){C=true;break}}if(!C){l[l.length]=D}}s.$linb$=1;s.$children=[];s.$parent=z;s.prototype.constructor=s;s.prototype.$linb$=1;s[D]=s.prototype[D]=true;_.set(g,D.split("."),s);_.tryF(s.After,[],s);_.tryF(h.Initialize,[],s);_.tryF(s.$End,[],s);_.breakO([h.Static,h.Instance,h],2);return s},linb=window.linb=function(d,c){return linb.Dom.pack(d,c)};_.merge=function(h,g,d){var c,e;if(typeof d=="function"){e=d;d="fun"}switch(d){case"fun":for(c in g){if(true===e(g[c],c)){h[c]=g[c]}}break;case"all":for(c in g){h[c]=g[c]}break;case"with":for(c in g){if(c in h){h[c]=g[c]}}break;default:for(c in g){if(!(c in h)){h[c]=g[c]}}}return h};_.merge(_,{fun:function(){return function(){}},exec:function(c){var g=this,i=document,f=i.getElementsByTagName("head")[0]||i.documentElement,e=i.createElement("script");e.type="text/javascript";if(linb.browser.ie){e.text=c}else{e.appendChild(i.createTextNode(c))}f.insertBefore(e,f.firstChild);f.removeChild(e)},get:function(f,e){if(!e){return f}else{if(typeof e=="string"){return f[e]}else{for(var d=0,c=e.length;d<c;){if(!f||(f=f[e[d++]])===undefined){return}}return f}}},set:function(k,h,g){if(typeof h!="string"){var d,e=0,c,f=h.length-1;for(;e<f;){d=h[e++];if(k[d]&&((c=typeof k[d])=="object"||c=="function")){k=k[d]}else{k=k[d]={}}}h=h[f]}if(g===undefined){if(k.hasOwnProperty&&k.hasOwnProperty(h)){delete k[h]}else{k[h]=undefined}}else{return k[h]=g}},tryF:function(c,d,e,f){return(c&&typeof c=="function")?c.apply(e||{},d||[]):f},asyRun:function(c,f,d,e){return setTimeout(typeof c=="string"?c:function(){c.apply(e,d||[]);c=d=null},f||0)},asyHTML:function(e,h,f,d){var g=document.createElement("div"),c=document.createDocumentFragment();g.innerHTML=e;(function(){var k=d||10;while(--k&&g.firstChild){c.appendChild(g.firstChild)}if(g.firstChild){setTimeout(arguments.callee,f||0)}else{h(c)}})()},isEmpty:function(d){for(var c in d){return false}return true},resetRun:function(g,c,l,f,h){var i=arguments.callee,e=g,d=i.$cache||((i.exists=function(m){return this.$cache[m]})&&(i.$cache={}));if(d[e]){clearTimeout(d[e])}if(typeof c=="function"){d[e]=setTimeout(function(){delete d[e];c.apply(h||null,f||[])},l||0)}else{delete d[e]}},observableRun:function(e,c,d){linb.Thread.observableRun(e,c,d)},breakO:function(k,m){var p=m||1,c=1+(arguments[2]||0),d=arguments.callee,g="___gc_",f;if(k&&(typeof k=="object"||typeof k=="function")&&k!==window&&k!==document&&k.nodeType!==1){if(k.hasOwnProperty(g)){return}else{try{k[g]=null}catch(h){return}}for(f in k){if(k.hasOwnProperty(f)&&k[f]){if(typeof k[f]=="object"||typeof k[f]=="function"){if(c<p){d(k[f],p,c)}}try{k[f]=null}catch(h){}}}if(k.length){k.length=0}delete k[g]}},each:function(f,c,e){e=e||f;for(var d in f){if(false===c.call(e,f[d],d,f)){break}}return f},copy:function(d,c){return _.clone(d,c,1)},clone:function(g,d,r){if(g&&typeof g=="object"){var m=g.constructor,p=m==Array;if(p||m==Object){var n=arguments.callee,k=p?[]:{},q,f=0,e;if(!r){if(r===0){return g}else{r=100}}if(p){e=g.length;for(;f<e;f++){if(typeof d=="function"&&false===d.call(g,g[f],f)){continue}k[k.length]=((q=g[f])&&r&&typeof q=="object")?n(q,d,r-1):q}}else{for(f in g){if(d===true?f.charAt(0)=="_":typeof d=="function"?false===d.call(g,g[f],f):0){continue}k[f]=((q=g[f])&&r&&typeof q=="object")?n(q,d,r-1):q}}return k}else{return g}}else{return g}},filter:function(g,d,c){if(!c&&g&&g.constructor==Array){var h,f,m,k=[],e;for(h=0,f=g.length;h<f;h++){k[k.length]=g[h]}g.length=0;for(h=0,f=k.length;h<f;h++){if(typeof d=="function"?false!==d.call(k,k[h],h):1){g[g.length]=k[h]}}}else{var h,n={};for(h in g){if(d===true?h.charAt(0)=="_":typeof d=="function"?false===d.call(g,g[h],h):0){n[h]=1}}for(h in n){delete g[h]}}return g},toArr:function(g,e){if(!g){return[]}var c=[];if(typeof e=="boolean"){for(var f in g){c[c.length]=e?f:g[f]}}else{if(typeof g=="string"){c=g.split(e||",")}else{for(var f=0,d=g.length;f<d;++f){c[f]=g[f]}}}return c},toUTF8:function(c){return c.replace(/[^\x00-\xff]/g,function(e,d){return"\\u"+((d=e.charCodeAt())<16?"000":d<256?"00":d<4096?"0":"")+d.toString(16)})},fromUTF8:function(c){return c.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,function(e,d,f){return String.fromCharCode((parseInt(d,16)*16+parseInt(f,16)))})},urlEncode:function(e){var c=[],d,f;for(d in e){if(_.isDefined(f=e[d])){c.push(encodeURIComponent(d)+"="+encodeURIComponent(typeof f=="string"?f:_.serialize(f)))}}return c.join("&")},urlDecode:function(m,p){if(!m){return p?"":{}}var h,f={},n=m.split("&"),c;for(var g=0,d=n.length;g<d;g++){c=n[g];h=c.split("=");try{f[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}catch(k){f[h[0]]=h[1]}}return p?f[p]:f},isDefined:function(c){return c!==undefined},isNull:function(c){return c===null},isSet:function(c){return c!==undefined&&c!==null},isObj:function(c){return !!c&&(typeof c=="object"||typeof c=="function")},isBool:function(c){return typeof c=="boolean"},isNumb:function(c){return typeof c=="number"&&isFinite(c)},isFinite:function(c){return(c||c===0)&&isFinite(c)},isDate:function(c){return Object.prototype.toString.call(c)==="[object Date]"&&isFinite(+c)},isFun:function(c){return Object.prototype.toString.call(c)==="[object Function]"},isArr:function(c){return Object.prototype.toString.call(c)==="[object Array]"},isHash:function(c){return !!c&&typeof c=="object"&&(c.constructor==Object||(c.constructor&&Object.prototype.toString.call(c)=="[object Object]"&&/^\s*function\s+Object\(\s*\)/.test(c.constructor.toString())))},isReg:function(c){return Object.prototype.toString.call(c)==="[object RegExp]"},isStr:function(c){return typeof c=="string"},isArguments:function(c){return !!(c&&c.callee&&c.callee.arguments===c)},str:{startWith:function(d,c){return d.indexOf(c)===0},endWith:function(d,e){var c=d.length-e.length;return c>=0&&d.lastIndexOf(e)===c},repeat:function(d,c){return new Array(c+1).join(d)},initial:function(c){return c.charAt(0).toUpperCase()+c.substring(1)},trim:function(c){return c.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ltrim:function(c){return c.replace(/^[\s\xa0]+/,"")},rtrim:function(c){return c.replace(/[\s\xa0]+$/,"")},toDom:function(h){var g=linb.$getGhostDiv(),f=[];g.innerHTML=h;for(var e=0,d=g.childNodes,c=d.length;e<c;e++){f[f.length]=d[e]}g=null;return linb(f)}},arr:{subIndexOf:function(c,f,g){if(g===undefined){return -1}for(var e=0,d=c.length;e<d;e++){if(c[e]&&c[e][f]===g){return e}}return -1},removeFrom:function(c,d,e){c.splice(d,e||1);return c},removeValue:function(c,f){for(var d=c.length,e=d-1;e>=0;e--){if(c[e]===f){c.splice(e,1)}}return c},insertAny:function(c,h,g,f){var e=c.length;f=h.constructor!=Array||f;if(g===0){if(f){c.unshift(h)}else{c.unshift.apply(c,h)}}else{var d;if(!g||g<0||g>e){g=e}if(g!=e){d=c.splice(g,e-g)}if(f){c[c.length]=h}else{c.push.apply(c,h)}if(d){c.push.apply(c,d)}}return g},indexOf:function(c,f){for(var e=0,d=c.length;e<d;e++){if(c[e]===f){return e}}return -1},each:function(c,f,h,k){var g,e,d=c;if(!d){return d}if(d.constructor!=Array){if((d=d._nodes)||d.constructor!=Array){throw new Error("errNotArray")}if(k===undefined){k=1}}e=d.length;h=h||c;if(!k){for(g=0;g<e;g++){if(f.call(h,d[g],g,d)===false){break}}}else{for(g=e-1;g>=0;g--){if(f.call(h,d[g],g,d)===false){break}}}return c},removeDuplicate:function(c,g){var e=c.length,d=c.concat();c.length=0;for(var f=e-1;f>=0;f--){if(g?this.subIndexOf(d,g,d[f][g])===f:this.indexOf(d,d[f])===f){c.push(d[f])}}return c.reverse()}}});_.merge(_.fun,{body:function(fun){with(String(fun)){return slice(indexOf("{")+1,lastIndexOf("}"))}},args:function(fun){with(String(fun)){return slice(indexOf("(")+1,indexOf(")")).split(",")}},clone:function(c){return new Function(_.fun.args(c),_.fun.body(c))}});_.merge(Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{nodeType:1,constructor:1,prototype:1,toString:1,valueOf:1,hasOwnProperty:1,isPrototypeOf:1,propertyIsEnumerable:1,toLocaleString:1},_fun:function(c,d,e,g,f){c.$name$=d;c.$original$=e;if(f){c.$type$=f}if(g){c.upper=g}return c},_other:["toString","valueOf"],_o:{},_inherit:function(f,h,c){var d,g,e=this._reg;for(d in h){if(d in f||(!c&&e[d])||d.charAt(0)=="$"){continue}g=h[d];if(g&&g.$linb$){continue}f[d]=g}},_wrap:function(s,d,w,u,h){var x=this,n,m,g,l=s.KEY,c=x._reg,e=x._reg2,q=x._fun,p=x._other;for(n in d){if(e[n]||(!w&&c[n])){continue}g=d[n];s[n]=(typeof g!="function")?g:q(g,n,l,typeof u[n]=="function"&&u[n],h)}for(m=0;n=p[m++];){g=d[n];if(g&&(g==x._o[n])){continue}s[n]=(typeof g!="function")?g:q(g,n,l,typeof u[n]=="function"&&u[n],h)}},__gc:function(f){if(typeof f=="object"){f=f.KEY||""}var e=_.get(window,f.split(".")),g,d,c;if(e){if(g=_.get(window,["linb","$cache","SC"])){delete g[f]}if(e.$parent){e.$parent.length=0}if(g=e.$children){for(var d=0,h;h=g[d];d++){if(h=_.get(window,h.split("."))){h.__gc()}}g.length=0}for(d in e){if(d!="upper"&&typeof e[d]=="function"){for(c in e[d]){if(e[d].hasOwnProperty(c)){delete e[d][c]}}}}_.breakO(e);e=e.prototype;for(d in e){if(d!="upper"&&typeof e[d]=="function"){for(c in e[d]){if(e[d].hasOwnProperty(c)){delete e[d][c]}}}}_.breakO(e);_.set(window,f.split("."))}},destroy:function(c){Class.__gc(c)}});_.merge(linb,{$DEFAULTHREF:"javascript:;",$IEUNSELECTABLE:' unselectable="on" ',SERIALIZEMAXLAYER:99,SERIALIZEMAXSIZE:9999,$localeKey:"en",$localeDomId:"linblid",$dateFormat:"",Locale:{en:{}},$cache:{thread:{},SC:{},hookKey:{},snipScript:{},ghostDiv:[],domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{}},setDateFormat:function(c){linb.$dateFormat=c},getDateFormat:function(){return linb.$dateFormat},setAppLangKey:function(c){linb.$appLangKey=c},getAppLangKey:function(c){return linb.$appLangKey},getLang:function(){return linb.$localeKey},setLang:function(r,u){var d=linb.Locale,k=linb.getRes,w,s,h,e,n,c,p,q=[];linb.$localeKey=r;s=linb.browser.ie?document.all.tags("span"):document.getElementsByTagName("span");for(h=0;w=s[h];h++){if(w.id==linb.$localeDomId){q[q.length]=w}}n=function(){(function(){e=q.splice(0,100);for(h=0;w=e[h];h++){if(typeof(s=k(w.className))=="string"){w.innerHTML=s}}if(q.length){setTimeout(arguments.callee,0)}_.tryF(u)}())},p="linb.Locale."+r,c=function(){var f=linb.$appLangKey;if(f){linb.include(p+"."+f,linb.getPath("Locale."+r,".js"),n,n)}else{n()}};linb.include(p,linb.getPath(p,".js"),c,c)},_langParamReg:/\x24(\d+)/g,getRes:function(f){var c,d,e,g=arguments;if(typeof f=="string"){if(f.indexOf("-")!=-1){e=f.split("-");f=e[0];g=e}c=f.split(".")}else{c=f}d=_.get(linb.Locale[linb.$localeKey],c);return(e=typeof d)=="string"?(g.length>1?d.replace(linb._langParamReg,function(i,l,h){h=g[1+ +l];return(h===null||h===undefined)?i:h}):d):e=="function"?d.apply(null,g):d?d:c[c.length-1]},wrapRes:function(f){var c=f,d,e;if(c.charAt(0)=="$"){arguments[0]=c.substr(1,c.length-1)}d=f;e=linb.getRes.apply(null,arguments);if(d==e){e=c}return'<span id="'+linb.$localeDomId+'" class="'+d+'" '+linb.$IEUNSELECTABLE+">"+e+"</span>"},request:function(d,e,g,h,f,c){return((typeof e=="object"&&((function(l){for(var k in l){if(l[k]&&l[k].nodeType==1){return 1}}})(e)))?linb.IAjax:(c&&c.method&&c.method.toLowerCase()=="post")?linb.absIO.isCrossDomain(d)?linb.IAjax:linb.Ajax:linb.absIO.isCrossDomain(d)?linb.SAjax:linb.Ajax).apply(null,arguments).start()},include:function(f,c,d,e){if(f&&linb.SC.get(f)){_.tryF(d)}else{linb.SAjax(c,"",d,e,0,{rspType:"script",checkKey:f}).start()}},_m:[],main:function(c){linb._m.push(c)},getPath:function(h,c,k){h=h.split(".");if(k){var e=[h[0],k];for(var g=1,d=h.length;g<d;g++){e.push(h[g])}h.length=0;h=e}var m,f=linb.ini;if(h[0]=="linb"){m=f.path;h.shift();if(h.length==(k?1:0)){h.push("linb")}}else{m=f.appPath;if(h.length==((k?1:0)+1)&&c==".js"){h.push("index")}if(f.verPath){m+=f.verPath+"/"}if(f.ver){m+=f.ver+"/"}}if(m.slice(-1)!="/"){m+="/"}return m+h.join("/")+(c||"/")},log:_.fun(),message:_.fun(),_pool:[],getObject:function(c){return linb._pool["$"+c]},_ghostDivId:"linb.ghost::",$getGhostDiv:function(){var e=linb.$cache.ghostDiv,d=0,c=e.length,f;do{f=e[d++]}while(d<c&&(f&&f.firstChild));if(!f||f.firstChild){f=document.createElement("div");f.id=linb._ghostDivId;e.push(f)}return f},$linbid:0,$registerNode:function(e){var f,d,c=linb.$cache.domPurgeData;if(!(e.$linbid&&(d=c[e.$linbid])&&d.element==e)){f="!"+linb.$linbid++;d=c[f]||(c[f]={});d.element=e;e.$linbid=d.$linbid=f}e=null;return d},getId:function(c){if(typeof c=="string"){c=document.getElementById(c)}return c?window===c?"!window":document===c?"!document":(c.$linbid||""):""},getNode:function(c){return linb.use(c).get(0)},getNodeData:function(c,d){if(!c){return}return _.get(linb.$cache.domPurgeData[typeof c=="string"?c:linb.getId(c)],d)},setNodeData:function(c,e,d){if(!c){return}return _.set(linb.$cache.domPurgeData[typeof c=="string"?c:linb.getId(c)],e,d)},$purgeChildren:function(h){var d=linb.$cache,p=d.profileMap,c=d.UIKeyMapEvents,q=d.domPurgeData,g=h.getElementsByTagName("*"),k=g.length,u=[],n,m,f,x,s,r,e;for(n=0;n<k;n++){if(!(s=g[n])){continue}if(x=s.$linbid){if(f=q[x]){if(r=f.eHandlers){for(m in r){s[m]=null}}for(m in f){f[m]=null}delete q[x]}if(linb.browser.ie){s.removeAttribute("$linbid")}else{delete s.$linbid}}if(e=s.id){if(e in p){f=p[e];if(!f){continue}x=f.renderId;if("!window"===x||"!document"===x){continue}f.__gc();u[u.length]=n;if(f.$domId&&f.$domId!=f.domId){u[u.length]=f.$domId}}}}for(n=0;n<u.length;){delete p[u[n++]]}h.innerHTML=""},create:function(d){var c,m,h,k=arguments.callee,f=k.r1||(k.r1=/</);if(typeof d=="string"){if(h=linb.absBox.$type[d]){c=[];for(var g=1,e=arguments.length;g<e;g++){c[g-1]=arguments[g]}m=new (linb.SC(h))(false);if(m._ini){m._ini.apply(m,c)}}else{if(f.test(d)){m=_.str.toDom(d)}else{m=document.createElement(d);m.id=typeof id=="string"?id:_.id();m=linb(m)}}}else{m=new (linb.SC(d.key))(d)}return m},use:function(f){var e=linb._tempBox||(linb._tempBox=linb()),d=e._nodes;d[0]=f;if(d.length!=1){d.length=1}return e}});new function(){var p=window,r=navigator.userAgent.toLowerCase(),m=document,n=linb.browser={kde:/webkit/.test(r),opr:/opera/.test(r),ie:/msie/.test(r)&&!/opera/.test(r),gek:/mozilla/.test(r)&&!/(compatible|webkit)/.test(r),isStrict:m.compatMode=="CSS1Compat",isChrome:/chrome/.test(r),isSafari:/safari/.test(r),isWin:/(windows|win32)/.test(r),isMac:/(macintosh|mac os x)/.test(r),isAir:/adobeair/.test(r),isLinux:/linux/.test(r),isSecure:location.href.toLowerCase().indexOf("https")==0},q=function(d,e){return d+(n.ver=r.split(e)[1].split(".")[0])};linb.$secureUrl=n.isSecure&&n.ie?'javascript:""':"about:blank";_.filter(n,function(d){return !!d});if(n.ie){n[q("ie","msie ")]=true;if(n.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(k){}p.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}}else{if(n.gek){n[q("gek",/.+\//)]=true}else{if(n.opr){n[q("opr","opera/")]=true}else{if(n.kde){n[q("kde","webkit/")]=true}}}}n.contentBox=function(d){return(n.ie||n.opr)?!/BackCompat|QuirksMode/.test(m.compatMode):(d=(d=d||m.documentElement).style["-moz-box-sizing"]||d.style["box-sizing"])?(d=="content-box"):true}();var y=linb.ini={};if(window.linb_ini){_.merge(y,window.linb_ini)}if(!y.path){var x,h=document.getElementsByTagName("script"),c=/js\/linb(-[\w]+)?\.js$/,g=h.length;while(--g>=0){x=h[g].src;if(x.match(c)){y.path=x.replace(c,"");break}}}_.merge(y,{appPath:location.href.split("?")[0].replace(/[^\\\/]+$/,""),img_bg:y.path+"bg.gif",img_busy:y.path+"busy.gif",img_blank:n.ie&&n.ver<=7?(y.path+"bg.gif"):"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",dummy_tag:"$_dummy_$"});if(!y.path){y.path=y.appPath+"/jsLinb"}var i=function(){if(m.addEventListener&&!n.kde){m.removeEventListener("DOMContentLoaded",arguments.callee,false)}try{for(var f=0,d=linb._m.length;f<d;f++){_.tryF(linb._m[f])}linb._m.length=0;linb.isDomReady=true}catch(s){_.asyRun(function(){throw s})}};if(m.addEventListener&&!n.kde){m.addEventListener("DOMContentLoaded",i,false)}else{if(n.ie){(function(){try{m.activeElement.id;m.documentElement.doScroll("left");i()}catch(d){setTimeout(arguments.callee,1)}})()}else{(function(){/loaded|complete/.test(m.readyState)?i():setTimeout(arguments.callee,1)})()}}};Class("linb.Thread",null,{Constructor:function(d,e,g,i,k,c,f){if(arguments.callee.upper){arguments.callee.upper.call(this)}var m=this,h=arguments.callee,l=linb.$cache.thread;if(m.constructor!==h||!!m.id){return new h(d,e,g,i,k,c,f)}if(typeof d!="string"){d="$"+(m.constructor.$linbid++)}m.id=d;m.profile=l[d]||(l[d]={id:d,_start:false,time:0,_left:0,_asy:-1,index:0,tasks:e||[],delay:g||0,callback:i,onStart:k,onEnd:c,cache:{},status:"run",cycle:!!f})},Instance:{_fun:_.fun(),__gc:function(){var c=linb.$cache.thread,e=c[this.id];if(e){delete c[this.id];e.tasks.length=0;for(var d in e){e[d]=null}}},_task:function(){var c=this,k=c.profile,e={args:[]},h=k.tasks[k.index],g,d,f=typeof h;k._asy=-1;if(!k.status){return}if(f=="function"){e.task=h}else{if(f=="object"){for(d in h){e[d]=h[d]}}}if(typeof e.task!="function"){e.task=c._fun}if(typeof e.callback!="function"){e.callback=k.callback}e.args.push(k.id);k.index++;k.time=_();g=_.tryF(e.task,e.args||[k.id],e.scope||c,null);if(!k.status){return}if(e.id){k.cache[e.id]=g}if(e.callback){if(false===_.tryF(e.callback,[k.id],c,true)){c.abort();return}}if(k.status!=="run"){return}if(!k||k.status!=="run"){return}c.start()},start:function(g){var d=this,f=d.profile,c,e;if(f._start===false){f._start=true;if(false===_.tryF(f.onStart,[f.id],d)){return d.abort()}}if(!f.tasks.length){return d.abort()}if(f.index>=f.tasks.length){if(f.cycle===true){d.profile.index=0}else{return d.abort()}}c=f.tasks[f.index];e=typeof c=="number"?c:typeof c.delay=="number"?c.delay:f.delay;f._left=(g||g===0)?g:e;if(f._asy!=-1){clearTimeout(f._asy)}f._asy=_.asyRun(d._task,f._left,[],d);f.time=_();return d},suspend:function(){var d,c=this.profile;if(c.status=="pause"){return}c.status="pause";if(c._asy!==-1){clearTimeout(c._asy);if(c.index>0){c.index--}}d=c._left-(_()-c.time);c._left=(d>=0?d:0);return this},resume:function(d){var c=this;if(c.profile.status=="run"){return}d=d===undefined?c.profile._left:d===true?c.profile.delay:d===false?0:(Number(d)||0);c.profile.status="run";c.start(d);return c},abort:function(){var c=this.profile;c.status="stop";clearTimeout(c._asy);_.tryF(c.onEnd,[c.id]);this.__gc()},links:function(c){var e=this.profile,d=e.onEnd,f=e.id;e.onEnd=function(){_.tryF(d,[f]);c.start()};return this},insert:function(c,g){var f=this,h=f.profile.tasks,e=h.length,d;if(c.constructor!=Array){c=[c]}g=g||f.profile.index;if(g<0){g=-1}if(g==-1){Array.prototype.push.apply(h,c)}else{if(g>e){g=e}d=h.splice(g,e-g);h.push.apply(h,c);h.push.apply(h,d)}return f},getCache:function(c){return this.profile.cache[c]},setCache:function(c,d){this.profile.cache[c]=d;return this},isAlive:function(){return !!linb.$cache.thread[this.id]}},After:function(){var e=this,h=function(f){e[f]=function(k){var i;if(linb.$cache.thread[k]){(i=linb.Thread(k))[f].apply(i,Array.prototype.slice.call(arguments,1))}}},d="start,suspend,resume,abort".split(",");for(var g=0,c=d.length;g<c;g++){h(d[g])}},Static:{$asFunction:1,$linbid:1,__gc:function(){linb.$cache.thread={}},isAlive:function(c){return !!linb.$cache.thread[c]},observableRun:function(g,d,e){var c=linb.Thread,f=linb.Dom;if(!_.isArr(g)){g=[g]}if(linb.$cache.thread[e]){if(typeof d=="function"){g.push(d)}c(e).insert(g)}else{c(e,g,0,null,function(h){if(f){f.busy(h)}},function(h){_.tryF(d,arguments,this);if(f){f.free(h)}}).start()}},group:function(d,k,l,m,c){var n={},h=linb.Thread,g=function(s,p,r){if(typeof s=="string"){s=h(s)}if(s){var q=function(){var f=arguments.callee;_.tryF(f.onEnd,arguments,this);f.onEnd=null;delete n[p];_.tryF(l,[p,r],this);if(_.isEmpty(n)){h.resume(r)}};q.onEnd=s.profile.onEnd;s.profile.onEnd=q;s.start()}};for(var e in k){n[e]=1}return h(d,[function(p){if(!_.isEmpty(k)){h.suspend(p);for(var f in k){g(k[f],f,p)}}}],0,null,m,c)},repeat:function(e,d,c,f){return linb.Thread(null,[_.fun()],d||0,e,c,f,true).start()}}});Class("linb.absIO",null,{Constructor:function(e,m,k,c,g,r){if(arguments.callee.upper){arguments.callee.upper.call(this)}if(typeof e=="object"){r=e}else{r=r||{};_.merge(r,{uri:e,query:m,onSuccess:k,onFail:c,threadid:g})}var q=this,n=arguments.callee,d=q.constructor;if((d!==n)||q.id){return new n(r)}_.merge(r,{id:r.id||(_()+""+(d._id++)),uri:r.uri||"",query:r.query||"",asy:r.asy!==false,method:"POST"==(r.method||d.method).toUpperCase()?"POST":"GET"},"all");var p="retry,timeout,reqType,rspType,optimized,customQS".split(",");for(var h=0,f=p.length;h<f;h++){r[p[h]]=(p[h] in r)?r[p[h]]:d[p[h]]}_.merge(q,r,"all");if(q.reqType=="xml"){q.method="POST"}if(d.events){_.merge(q,d.events)}q.query=q.customQS(q.query);if(typeof q.query=="object"&&q.reqType!="xml"){q.query=_.clone(q.query,function(i){return i!==undefined})}if(!q._useForm&&typeof q.query!="string"&&q.reqType!="xml"){q.query=d._buildQS(q.query,q.reqType=="json",q.method=="POST")}return q},Instance:{_fun:_.fun(),_flag:0,_response:"",_retryNo:0,_time:function(){var d=this,e=d.constructor;d._clear();if(d._retryNo<d.retry){d._retryNo++;_.tryF(d.onRetry,[d._retryNo],d);d.start()}else{if(false!==_.tryF(d.onTimeout,[],d)){d._onError(new Error("Request timeout"))}}},_onEnd:function(){var c=this;if(!c._end){c._end=true;if(c._flag>0){clearTimeout(c._flag);c._flag=0}linb.Thread.resume(c.threadid);_.tryF(c.onEnd,[],c);c._clear()}},_onStart:function(){var c=this;linb.Thread.suspend(c.threadid);_.tryF(c.onStart,[],c)},_onResponse:function(){var c=this;if(false!==_.tryF(c.beforeSuccess,[c._response,c.rspType,c.threadid],c)){_.tryF(c.onSuccess,[c._response,c.rspType,c.threadid],c)}c._onEnd()},_onError:function(d){var c=this;if(false!==_.tryF(c.beforeFail,[d,c.threadid],c)){_.tryF(c.onFail,[d.name+": "+d.message,c.rspType,c.threadid],c)}c._onEnd()},isAlive:function(){return !this._end},abort:function(){this._onEnd()}},Static:{$abstract:true,_id:1,method:"GET",retry:0,timeout:60000,reqType:"form",rspType:"text",optimized:false,type:"type",randkey:"id",callback:"callback",_buildQS:function(e,c,d){return c?((c=_.serialize(e))&&(d?c:encodeURIComponent(c))):_.urlEncode(e)},customQS:function(c){return c},_if:function(g,i,d){var f=linb.browser.ie&&parseInt(linb.browser.ver)<9,h=g.createElement(f?"<iframe name='"+i+"' "+(d?"onload='linb.IAjax._o(\""+i+"\")'":"")+">":"iframe"),c;if(i){h.id=h.name=i}if(!f&&d){h.onload=d}h.style.display="none";g.body.appendChild(h);c=frames[frames.length-1];return[h,c,c.document]},isCrossDomain:function(f){f=f||"";var e=arguments.callee,d=e.r||(e.r=/(http(s)?\:\/\/)?([\w\.]+(:[\d]+)?)(.*)/),c;if((c=f.indexOf(":"))==-1||c>f.indexOf("/")){return false}if(f.indexOf("file:")===0){return !!location.host}return location.host!=f.replace(d,"$3")},groupCall:function(k,l,c,d,h){var e,g=function(n,f,m){m[f]=linb.Thread(null,[function(i){n.threadid=i;n.start()}])};for(e in k){g(k[e],e,k)}return linb.Thread.group(null,k,l,function(){linb.Thread(h).suspend();_.tryF(c,arguments,this)},function(){_.tryF(d,arguments,this);linb.Thread(h).resume()}).start()}}});Class("linb.Ajax","linb.absIO",{Instance:{_XML:null,_header:function(d,c){if(this._XML){this._XML.setRequestHeader(d,c)}},start:function(){var self=this;if(false===_.tryF(self.beforeStart,[],self)){self._onEnd();return}if(!self._retryNo){self._onStart()}try{with(self){self._XML=new window.XMLHttpRequest();if(asy){self._XML.onreadystatechange=function(){if(self&&self._XML&&self._XML.readyState==4){self._complete.apply(self);self._clear()}}}if(!_retryNo&&method!="POST"){if(query){uri=uri.split("?")[0]+"?"+query}query=null}self._XML.open(method,uri,asy);self._header("Content-type",method=="POST"?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8");self._header("X-Requested-With","XMLHttpRequest");var cookie="",ac;if(optimized){try{self._header("User-Agent",null);self._header("Accept",null);self._header("Accept-Language",null);self._header("Connection","keep-alive");self._header("Keep-Alive",null);self._header("Cookie",null);self._header("Cookie","")}catch(e){}}if(false===_.tryF(self.beforeSend,[self._XML],self)){self._onEnd();return}try{self._XML.send(query)}catch(e){}if(asy){if(self._XML&&timeout>0){_flag=_.asyRun(function(){if(self&&!self._end){self._time()}},self.timeout)}}else{_complete()}}}catch(e){self._onError(e)}return self},abort:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML.abort();c._XML=null}arguments.callee.upper.call(c)},_clear:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML=null}},_complete:function(){with(this){var ns=this,status=ns._XML.status;_response=rspType=="text"?ns._XML.responseText:ns._XML.responseXML;if(status===undefined||status===0||status==304||(status>=200&&status<300)){_onResponse()}else{_onError(new Error("XMLHTTP returns : "+status))}}}},Static:{$asFunction:1}});Class("linb.SAjax","linb.absIO",{Instance:{start:function(){var e=this,l,k=e.constructor,g,i,f=false;if(false===_.tryF(e.beforeStart,[],e)){e._onEnd();return}if(!e._retryNo){e._onStart()}if(e.rspType=="script"){e.retry=0}l=e.id;if(k._pool[l]){k._pool[l].push(e)}else{k._pool[l]=[e]}var d=k._n=document,h=function(){if(!f){f=true;if(e.rspType=="script"){if(typeof e.checkKey=="string"){_.asyRun(function(){_.exec("if(linb.SC.get('"+e.checkKey+"'))linb.SAjax._pool['"+l+"'][0]._onResponse();else linb.SAjax._pool['"+l+"'][0]._loaded();")})}else{e._onResponse()}}else{e._loaded()}}};i=e.node=d.createElement("script");i.src=e.uri+(e.query?"?"+e.query:"");i.type="text/javascript";i.charset="utf-8";i.id="linb:script:"+e.id;i.onload=i.onreadystatechange=function(){if(f){return}var c=this.readyState;if(!c||c=="loaded"||c=="complete"){h()}if(c=="interactive"&&linb.browser.opr){linb.Thread.repeat(function(){if(f){return false}if(/loaded|complete/.test(document.readyState)){h();return false}},50)}};if(linb.browser.gek){i.onerror=h}d.body.appendChild(i);i=null;if(e.timeout>0){e._flag=_.asyRun(function(){if(e&&!e._end){e._time()}},e.timeout)}},_clear:function(){var e=this,h=e.node,g=e.constructor,d=e.constructor._pool;d.length=0;delete d[e.id];if(h){e.node=h.id=h.onload=h.onreadystatechange=h.onerror=null;var f=g._n.createElement("div");f.appendChild(h.parentNode&&h.parentNode.removeChild(h)||h);if(linb.browser.ie){_.asyRun(function(){f.innerHTML=h.outerHTML="";h=f=null})}else{f.innerHTML="";h=f=null}}},_loaded:function(){var c=this;_.asyRun(function(){if(c.id&&c.constructor._pool[c.id]){c._onError(new Error("SAjax return script doesn't match"))}},500)}},Static:{$asFunction:1,_pool:{},$response:function(h){var d=this;try{if(h&&(o=d._pool[h[d.randkey]])){for(var f=0,c=o.length;f<c;f++){o[f]._response=h;o[f]._onResponse()}}else{d._onError(new Error("SAjax return value formatting error, or no matched 'id': "+h))}}catch(g){linb.Debugger&&linb.Debugger.trace(g)}},customQS:function(i){var l=this.constructor,f=l.type,e=l.randkey,d=l.callback,h=(this.rspType!="script"),g=h?e+"="+this.id+"&type=script&":"";if(typeof i=="string"){return(i&&i+"&")+g+(h?d+"=linb.SAjax.$response":"")}else{if(h){i[f]="script";i[e]=this.id;i[d]="linb.SAjax.$response"}return i}}}});Class("linb.IAjax","linb.absIO",{Instance:{_useForm:true,start:function(){var u=this,p=u.constructor,m,e,s,g,l,f,q,d,h;if(false===_.tryF(u.beforeStart,[],u)){u._onEnd();return}if(!u._retryNo){u._onStart()}e=u.id;if(p._pool[e]){p._pool[e].push(u)}else{p._pool[e]=[u]}u._onload=h=function(z){if(u.OK){return}if(!u.node){return}var i=u.node.contentWindow,y=linb.IAjax,x,k;if(linb.browser.opr){try{if(i.location=="about:blank"){return}}catch(n){}}u.OK=1;i.location.replace(y._getDummy()+"#"+linb.ini.dummy_tag);_.asyRun(function(){if(linb.browser.kde&&i.name===undefined){_.asyRun(arguments.callee);return}else{try{i.name}catch(B){_.asyRun(arguments.callee);return}}var A;if(u.id==i.name){u._clear();u._onError(new Error("IAjax no return value"));return}else{A=i.name}if(A&&(x=_.unserialize(A))&&(k=y._pool[x[y.randkey]])){for(var w=0,c=k.length;w<c;w++){k[w]._response=x;k[w]._onResponse()}}else{u._clear();u._onError(new Error("IAjax return value formatting error, or no matched 'id': "+A))}})};var r=p._if(document,e,h);u.node=r[0];u.frm=r[1];d=u.form=document.createElement("form");d.style.display="none";d.action=u.uri;d.method=u.method;d.target=e;l=u.query||{};for(m in l){if(l[m]&&l[m].nodeType==1){l[m].id=l[m].name=m;d.appendChild(l[m]);q=true}else{if(_.isDefined(l[m])){s=document.createElement("input");s.id=s.name=m;s.value=typeof l[m]=="string"?l[m]:_.serialize(l[m],function(c){return c!==undefined});d.appendChild(s)}}}if(u.method=="POST"&&q){d.enctype="multipart/form-data";if(d.encoding){d.encoding=d.enctype}}document.body.appendChild(d);d.submit();s=d=null;if(u.timeout>0){u._flag=_.asyRun(function(){if(u&&!u._end){u._time()}},u.timeout)}},_clear:function(){var g=this,p=g.node,h=g.form,m=g.constructor,l=document.createElement("div");if(linb.browser.gek&&p){try{p.onload=null;var k=p.contentWindow.document;k.write(" ");k.close()}catch(i){}}g.form=g.node=g.frm=null;if(p){l.appendChild(p.parentNode.removeChild(p))}if(h){l.appendChild(h.parentNode.removeChild(h))}l.innerHTML="";h=l=null}},Static:{$asFunction:1,method:"POST",_pool:{},_o:function(f){var c=this,d=c._pool[f],e=d[d.length-1];_.tryF(e._onload)},_getDummy:function(l){l=l||window;var q=this,k,c,p=l.document,s=linb.ini,r=linb.browser,m=q.isCrossDomain;if(q.dummy){return q.dummy}if(s.dummy){return q.dummy=s.dummy}if(r.gek){k=p.getElementsByTagName("link");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.rel=="stylesheet"&&!m(c.href)){return q.dummy=c.href.split("#")[0]}}}if(!m(s.path)){if(!p.getElementById("linb:img:bg")){c=p.createElement("img");c.id="linb:img:bg";c.src=s.img_bg;c.style.display="none";p.body.appendChild(c);c=null}}if(c=p.getElementById("linb:img:bg")){return q.dummy=c.src.split("#")[0]}else{k=p.getElementsByTagName("img");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.src&&!m(c.src)){return q.dummy=c.src.split("#")[0]}}}try{if(l!=l.parent){if((l=l.parent)&&!m(""+l.document.location.href)){return q._getDummy(l)}}}catch(n){}return"/favicon.ico"},customQS:function(f){var e=this,g=e.constructor,d=g.type;f[d]="iframe";f[g.randkey]=e.id;return f}}});Class("linb.SC",null,{Constructor:function(h,i,c,g,d){if(arguments.callee.upper){arguments.callee.upper.call(this)}var f=linb.$cache.SC,e;if(e=f[h]||(f[h]=_.get(window,h.split(".")))){_.tryF(i,[h,null,g],e)}else{d=d||{};d.$cb=i;if(c){d.threadid=g}e=f[h]=linb.SC._call(h||"",d,c)}return e},Static:{$asFunction:1,__gc:function(c){linb.$cache.SC={}},get:function(d,c){return _.get(c||window,(d||"").split("."))},_call:function(u,w,m){m=!!m;var g,p,c,e,l=[],q=linb.SC.get,h=linb.$cache.snipScript,k=function(s,x,r){var f=this;if(s){if(!q(u)){if(f.$p){(f.$cache||h)[f.$tag]=s}else{try{_.exec(s)}catch(i){throw new Error(i.name+": "+i.message+" "+f.$tag)}}}}_.tryF(f.$cb,[f.$tag,s,r],q(u)||{})},d=function(i){var f=this;_.tryF(f.$cb,[null,null,f.threadid],f)};if(!(c=q(u))){if(p=h[u]){m=false;k.call({$cb:w.$cb},p);delete h[u]}if(!(c=q(u))){e=linb.getPath(u,".js","js");w=w||{};w.$tag=u;var n;if(m&&!w.$p){w.rspType="script";n=linb.SAjax}else{w.asy=m;n=linb.Ajax}n(e,"",k,d,null,w).start();if(!m){c=q(u)}}}else{if(w.$cb){k.call(w)}}return c},loadSnips:function(h,d,k,c,f){if(!h||!h.length){_.tryF(c,[f]);return}var m={},p={$p:1,$cache:d||linb.$cache.snipScript};for(var g=0,e=h.length;g<e;g++){m[h[g]]=1}if(k||c){p.$cb=function(i){if(k){_.tryF(k,arguments,this)}delete m[i||this.$tag];if(_.isEmpty(m)){_.tryF(c,[f]);c=null;linb.Thread.resume(f)}}}linb.Thread.suspend(f);for(var g=0,n;n=h[g++];){this._call(n,_.merge({$tag:n},p),true)}},runInBG:function(g,h,k,c){var e=0,d,l,m=this,f=function(i){while(g.length>e&&(l=m.get(d=g[e++]))){}if(!l){m._call(d,{threadid:i},true)}if(g.length<e){linb.Thread(i).abort()}if(g.length==e){e++}};linb.Thread(null,[f],1000,h,k,c,true).start()},execSnips:function(c){var d,f=c||linb.$cache.snipScript;for(d in f){try{_.exec(f[d])}catch(g){throw g}}f={}},groupCall:function(e,g,d,f){if(e){var c=this;c.execSnips();linb.Thread.suspend(f);c.loadSnips(e,0,g,function(){c.execSnips();_.tryF(d,[f]);d=null;linb.Thread.resume(f)})}else{_.tryF(d,[f])}}}});new function(){var M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/","\x0B":"\\u000b"},H={"@window":"window","@this":"this"},A=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2})(\d{2}))|Z)?$/,E=function(t,i,a,v,m,n,p){for(i in t){if((a=typeof(v=t[i]))=="string"&&(v=D.exec(v))){m=v[8]&&v[8].charAt(0);if(m!="Z"){n=(m=="-"?-1:1)*((+v[9]||0)*60)+(+v[10]||0)}else{n=0}m=new Date(+v[1],+v[2]-1,+v[3],+v[4],+v[5],+v[6],+v[7]||0);n+=m.getTimezoneOffset();if(n){m.setTime(m.getTime()+n*60000)}t[i]=m}else{if(a=="object"&&t[i]&&(t[i].constructor===Object||t[i].constructor===Array)){E(t[i])}}}return t},R=function(n){return n<10?"0"+n:n},F="function",N="number",L="boolean",S="string",O="object",T={},MS=function(x,s){return"."+((s=x[s]())?s<10?"00"+s:s<100?"0"+s:s:"000")},Z=(function(a,b){a=-(new Date).getTimezoneOffset()/60;b=a>0?"+":"-";a=""+Math.abs(a);return b+(a.length==1?"0":"")+a+"00"})();T["undefined"]=function(){return"null"};T[L]=function(x){return String(x)};T[N]=function(x){return((x||x===0)&&isFinite(x))?String(x):"null"};T[S]=function(x){return H[x]||'"'+(A.test(x)?x.replace(A,function(a,b){if(b=M[a]){return b}return"\\u"+((b=a.charCodeAt())<16?"000":b<256?"00":b<4096?"0":"")+b.toString(16)}):x)+'"'};T[O]=function(x,filter,dateformat,deep,max){var me=arguments.callee,map=me.map||(me.map={prototype:1,constructor:1,toString:1,valueOf:1});deep=deep||1;max=max||0;if(deep>linb.SERIALIZEMAXLAYER||max>linb.SERIALIZEMAXSIZE){return'"too much recursion!"'}max++;if(x){var a=[],b=[],c=x.constructor,f,i,l,v;if(x===window){return"window"}if(x===document){return"document"}if((typeof x==O||typeof x==F)&&typeof c!=F){return x.nodeType?"document.getElementById('"+x.id+"')":"$alien"}else{if(c==Array){a[0]="[";l=x.length;for(i=0;i<l;++i){if(typeof filter=="function"&&false==filter.call(x,x[i],i)){continue}if(f=T[typeof(v=x[i])]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=v}}}a[2]="]"}else{if(c==Date){if(dateformat=="utc"){return'"'+x.getUTCFullYear()+"-"+R(x.getUTCMonth()+1)+"-"+R(x.getUTCDate())+"T"+R(x.getUTCHours())+":"+R(x.getUTCMinutes())+":"+R(x.getUTCSeconds())+MS(x,"getUTCMilliseconds")+'Z"'}else{if(dateformat=="gmt"){return'"'+x.getFullYear()+"-"+R(x.getMonth()+1)+"-"+R(x.getDate())+"T"+R(x.getHours())+":"+R(x.getMinutes())+":"+R(x.getSeconds())+MS(x,"getMilliseconds")+Z+'"'}else{return"new Date("+[x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds()].join(",")+")"}}}else{if(c==RegExp){return String(x)}else{if(typeof x.serialize==F){x=x.serialize()}if(typeof x==O){if(x.nodeType){return"document.getElementById('"+x.id+"')"}else{a[0]="{";for(i in x){if(map[i]||(filter===true?i.charAt(0)=="_":typeof filter=="function"?false===filter.call(x,x[i],i):0)){continue}if(f=T[typeof(v=x[i])]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=T.string(i)+":"+v}}}a[2]="}"}}else{return String(x)}}}}}a[1]=b.join(", ");return a[0]+a[1]+a[2]}return"null"};T[F]=function(x){return x.$path?x.$path:String(x)};_.serialize=function(obj,filter,dateformat){return T[typeof obj](obj,filter,dateformat||(linb&&linb.$dateFormat))||""};_.stringify=function(obj,filter,dateformat){return _.fromUTF8(_.serialize(obj,filter,dateformat))};_.unserialize=function(str,dateformat){try{str=eval("({_:"+str+"})");if(dateformat||(linb&&linb.$dateFormat)){E(str)}return str._}catch(e){return false}}};_.id=function(){var c=this,d=arguments.callee;if(c.constructor!==d||c.a){return(d._||(d._=new d)).next()}c.a=[-1];c.b=[""];c.value=""};_.id.prototype={constructor:_.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(i){with(this){i=(i||i===0)?i:b.length-1;var m,k,l;if((m=a[i])>=25){m=0;if(i===0){a.splice(0,0,1);b.splice(0,0,"a");l=a.length;for(k=1;k<l;++k){a[k]=0;b[k]="0"}++i}else{next(i-1)}}else{++m}a[i]=m;b[i]=_chars[m];return value=b.join("")}}};Class("linb.absProfile",null,{Constructor:function(){if(arguments.callee.upper){arguments.callee.upper.call(this)}if(!this.$linbid){this.$linbid=linb.absProfile.$linbid.next()}},Instance:{getId:function(){return this.$linbid},link:function(f,g,e){var c=this,d="$"+c.$linbid;e=e||c;if(f[d]){c.unLink(g)}f[d]=e;if(_.isArr(f)){f.push(e)}c._links[g]=f;return c},unLink:function(f){var c=this,e,d="$"+c.$linbid;if(!c._links){return}if(!(e=c._links[f])){return}if(_.isArr(e)){_.arr.removeValue(e,e[d])}delete e[d];delete c._links[f];return c},unLinkAll:function(){var d=this,g="$"+d.$linbid,c=d._links,f,e;for(e in c){f=c[e];if(_.isArr(f)){_.arr.removeValue(f,f[g])}delete f[g]}d._links={};return d}},Static:{$linbid:new _.id,$abstract:true}});(linb.Locale.en||(linb.Locale.en={})).inline={ok:"O K",cancel:"Cancel",set:"SET",today:"Today",yes:"Yes",no:"No",noFlash:"No Flash PlugIn!"};linb.Locale.en.date={WEEKS:{"0":"Su","1":"Mo","2":"Tu","3":"We","4":"Th","5":"Fr","6":"Sa","7":"WK"},VIEWS:{"10 ms":"10 millisecond","100 ms":"100 milliseconds","1 s":"1 second","10 s":"10 seconds","1 n":"1 minute","5 n":"5 minutes","10 n":"10 minutes","30 n":"30 minutes","1 h":"1 hour","2 h":"2 hours","6 h":"6 hours","1 d":"1 day","1 w":"1 week","15 d":"15 days","1 m":"1 month","1 q":"1 quarter","1 y":"1 year","1 de":"10 years","1 c":"1 century"},MONTHS:{"1":"Jan.","2":"Feb.","3":"Mar.","4":"Apr.","5":"May.","6":"Jun.","7":"Jul.","8":"Aug.","9":"Sep.","10":"Oct.","11":"Nov.","12":"Dec."},MS:"ms",S:"s",N:"n",H:"h",D:"d",W:"w",M:"m",Q:"q",Y:"y",DE:"de",C:"c",HN:function(e,d,c){return(d.length==1?"0":"")+d+":"+(c.length==1?"0":"")+c},DHN:function(g,e,d,f){return e+"th "+(d.length==1?"0":"")+d+":"+(f.length==1?"0":"")+f},MDHN:function(i,f,e,h,g){return e+"th "+linb.getRes("date.MONTHS."+f)+" "+(h.length==1?"0":"")+h+":"+(g.length==1?"0":"")+g},HNS:function(g,e,d,f){return(e.length==1?"0":"")+e+":"+(d.length==1?"0":"")+d+":"+(f.length==1?"0":"")+f},HNSMS:function(i,f,e,h,g){return(f.length==1?"0":"")+f+":"+(e.length==1?"0":"")+e+":"+(h.length==1?"0":"")+h+" "+(g.length==1?"00":g.length==2?"0":"")+g},YM:function(e,d,c){return linb.getRes("date.MONTHS."+c)+" "+d},YQ:function(e,d,c){return c+"Q "+d},YMD:function(g,e,d,f){return e+"-"+(d.length==1?"0":"")+d+"-"+(f.length==1?"0":"")+f},YMD2:function(g,e,d,f){return linb.getRes("date.MONTHS."+d)+" "+f+", "+e},MD:function(e,d,c){return linb.getRes("date.MONTHS."+d)+" "+c},YMDH:function(i,f,e,h,g){return f+"-"+(e.length==1?"0":"")+e+"-"+(h.length==1?"0":"")+h+" "+(g.length==1?"0":"")+g+":00"},YMDHN:function(l,g,f,k,i,h){return g+"-"+(f.length==1?"0":"")+f+"-"+(k.length==1?"0":"")+k+" "+(i.length==1?"0":"")+i+":"+(h.length==1?"0":"")+h},YMDHNS:function(p,h,g,m,l,k,i){return h+"-"+(g.length==1?"0":"")+g+"-"+(m.length==1?"0":"")+m+" "+(l.length==1?"0":"")+l+":"+(k.length==1?"0":"")+k+":"+(i.length==1?"0":"")+i},ALL:function(r,i,h,q,p,m,l,k){return i+"-"+(h.length==1?"0":"")+h+"-"+(q.length==1?"0":"")+q+" "+(p.length==1?"0":"")+p+":"+(m.length==1?"0":"")+m+":"+(l.length==1?"0":"")+l+" "+(k.length==1?"00":k.length==2?"0":"")+k}};linb.Locale.en.color={LIST:{FFFFFF:"White",FFFFF0:"Ivory",FFFFE0:"Light Yellow",FFFF00:"Yellow",FFFAFA:"Snow",FFFAF0:"Floral White",FFFACD:"Lemon Chiffon",FFF8DC:"Cornislk",FFF5EE:"Sea Shell",FFF0F5:"Lavender Blush",FFEFD5:"Papaya Whip",FFEBCD:"Blanched Almond",FFE4E1:"Misty Rose",FFE4C4:"Bisque",FFE4B5:"Moccasin",FFDEAD:"Navajo White",FFDAB9:"Peach Puff",FFD700:"Gold",FFC0CB:"Pink","FFB6C1 ":"Light Pink",FFA500:"Orange",FFA07A:"Light Salmon",FF8C00:"Dark Orange",FF7F50:"Coral",FF69B4:"Hot Pink",FF6347:"Tomato",FF4500:"Orange Red",FF1493:"Deep Pink",FF00FF:"Magenta",FF00FF:"Fuchsia",FF0000:"Red",FDF5E6:"Old Lace",FAFAD2:"Light Goldenrod Yellow",FAF0E6:"Linen",FAEBD7:"Antique White",FA8072:"Salmon",F8F8FF:"Ghost White",F5FFFA:"Medium Spring Green",F5F5F5:"White Smoke",F5DEB3:"Wheat",F4A460:"Sandy Brown",F0FFFF:"Azure",F0FFF0:"Honeydew",F0F8FF:"Alice Blue",F0E68C:"Khaki",F08080:"Light Coral",EEE8AA:"Pale Godenrod",EE82EE:"Violet",E9967A:"Dark Salmon",E6E6FA:"Lavender",E1FFFF:"Light Cyan",DEB887:"Bruly Wood",DDA0DD:"plum",DCDCDC:"Gainsboro",DC143C:"Crimson",DB7093:"Pale Violet Red",DAA520:"Gold Enrod",DA70D6:"Orchid",D8BFD8:"Thistle",D3D3D3:"Light Grey",D2B48C:"Tan",D2691E:"Chocolate",CD853F:"Peru",CD5C5C:"Indian Red",C71585:"Medium Violet Red",C0C0C0:"Silver",BDB76B:"Dark Khaki",BC8F8F:"Rosy Brown",BA55D3:"Medium Orchid",B22222:"Fire Brick",B0E0E6:"Pow Der Blue",B0C4DE:"Light Steel Blue",AFEEEE:"Pale Turquoise",ADFF2F:"Green Yellow",ADD8E6:"Light BLue",A9A9A9:"Dark Gray",A52A2A:"Brown",A0522D:"Sienna","9932CC":"Dark Orchid","98FB98":"Pale Green","9400D3":"Dark Voilet","9370DB":"Medium Purple","90EE90":"Light Green","8FBC8F":"Dark Sea Green","8B4513":"Saddle Brown","8B008B":"Dark Magenta","8B0000":"Dark Red","8A2BE2":"Blue Violet","87CEFA":"Light Sky Blue","87CEEB":"Sky Blue","808080":"Gray","808000":"Olive","800080":"Purple","800000":"Maroon","7FFFAA":"Auqamarin","7FFF00":"Chartreuse","7CFC00":"Lawn Green","7B68EE":"Medium Slate Blue","778899":"Light Slate Gray","708090":"Slate Gray","6B8E23":"Beige","6A5ACD":"Slate Blue","696969":"Dim Gray","6495ED":"Cornflower Blue","5F9EA0":"Cadet Blue","556B2F":"Olive Drab","4B0082":"Indigo","48D1CC":"Medium Turquoise","483D8B":"Dark Slate Blue","4682B4":"Steel Blue","4169E1":"Royal Blue","40E0D0":"Turquoise","3CB371":"Spring Green","32CD32":"Lime Green","2F4F4F":"Dark Slate Gray","2E8B57":"Sea Green","228B22":"Forest Green","20B2AA":"Light Sea Green","1E90FF":"Doder Blue","191970":"Midnight Blue","00FFFF":"Cyan","00FFFF":"Aqua","00FF7F":"Mint Cream","00FF00":"Lime","00FA9A":"Medium Aquamarine","00CED1":"Dark Turquoise","00BFFF":"Deep Sky Blue","008B8B":"Dark Cyan","008080":"Teal","008000":"Green","006400":"Dark Green","0000FF":"Blue","0000CD":"Medium Blue","00008B":"Dark Blue","000080":"Navy","000000":"Black"}};linb.Locale.en.editor={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",forecolor:"Font Color",bgcolor:"Background Color",left:"Align Left",center:"Align Center",right:"Align Right",justify:"Justify",indent:"Indent",outdent:"Outdent",ol:"Ordered List",ul:"Unordered List",hr:"Insert Horizontal Rule",unlink:"Remove Link",removeformat:"Remove Formatting",html:"HTML Editor",insertimage:"Insert Image",insertimage2:"Image URL:",createlink:"Insert Link",createlink2:"Link URL:",fontsize:"Font Size",fontname:"Font Family",formatblock:"Font Block",fontsizeList:"1,1(8pt);2,2(10pt);3,3(12pt);4,4(14pt);5,5(18pt);6,6(24pt);...,...",fontnameList:"Arial;Arial Black;Comic Sans MS;Courier New;Impact;Tahoma;Times New Roman;Trebuchet MS;Verdana;...",formatblockList:"p,Normal;h1,Heading1;h2,Heading2;h3,Heading3;h4,Heading4;h5,Heading5;h6,Heading6;...,..."};Class("linb.Event",null,{Constructor:function(x,s,c,z){var n=linb.Event,C=0,q,l,g=linb.DragDrop,e,d,p,k;if(!(x=x||window.event)||!(e=s)){e=s=null;return false}s=null;d=x.type;if("mouseover"==d||"mouseout"==d){C=(g&&g._profile.isWorking)?1:2;if(C!=1&&c){e=null;return n.$FALSE}if(!n._handleMouseHover(x,e,C==1)){e=null;return n.$FALSE}if(C==1){p=g&&g._dropElement}}else{if((k=n._tabHookStack).length&&n._kb[d]&&(x.$key||x.keyCode||x.charCode)==9&&false===n._handleTabHook(n.getSrc(x),k=k[k.length-1])){e=null;return}}q=z||n.getId(e);if(k=n._getProfile(q)){if(d=="DOMMouseScroll"){d="mousewheel"}if(d=="mousedown"||d=="mousewheel"){_.tryF(linb.Dom._blurTrigger,[k,x])}else{if(d=="resize"){d="size";if(linb.browser.ie&&window===e){var i=linb.browser.contentBox&&document.documentElement.clientWidth||document.body.clientWidth,y=linb.browser.contentBox&&document.documentElement.clientHeight||document.body.clientHeight;if(k._w==i&&k._h==y){e=null;return}k._w=i;k._h=y}}}var u,A,D,m=true,B=[];for(u=0;u<=2;++u){if(C==1&&u!==0&&!x.$force){break}if(C==2&&u===0){continue}D=n._type[d+u]||(n._type[d+u]=n._getEventName(d,u));if(!x.$e||x.$all||(D==x.$name)){k._getEV(B,q,D,e.$linbid)}}A=function(h,f){for(var w=0,r;r=arguments.callee.tasks[w++];){if(false===r(k,h,f)){return false}}return true};A.tasks=B;m=A(x,e.$linbid);if(g){if(d=="drag"){g._onDrag=A}else{if(d=="dragover"){g._onDragover=A}}}else{A.tasks.length=0;delete A.tasks;A=null}if(C==1){if("mouseover"==d&&g._dropElement==e.$linbid&&p&&p!=e.$linbid){l=linb.use(p).get(0);n({type:"mouseout",target:l,$e:true,$name:"beforeMouseout",preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}},l);g.setDropElement(e.$linbid)}if("mouseout"==d&&!g._dropElement&&p&&p==e.$linbid){n._preDroppable=q;_.asyRun(function(){delete linb.Event._preDroppable})}if(e.$linbid==g._dropElement){m=false}}if(m===false){n.stopBubble(x)}e=null;return m}},Static:{$FALSE:linb.browser.opr?undefined:false,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return linb.Event(arguments[0],this)},$eventhandler2:function(){return linb.Event(arguments[0],this,1)},$eventhandler3:function(){return linb.Event(arguments[0],linb.Event.getSrc(arguments[0]||window.event))},_events:("mouseover,mouseout,mousedown,mouseup,mousemove,mousewheel,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,change,select,submit,error,move,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop").split(","),_getEventName:function(c,d){return(c=this._map1[c])&&((d===0||d==1||d==2)?c[d]:c)},_getProfile:function(e,d,c){return e&&((d=(c=linb.$cache.profileMap)[e])?d["linb.UIProfile"]?d:(c=c[e.replace(this._reg,"")])?c:d:c[e.replace(this._reg,"")])},_handleTabHook:function(g,f){if(g===document){return true}var e=g,d,c=e.tabIndex;do{if(linb.getId(e)==f[0]){e=g=null;return true}}while(e&&(e=e.parentNode)&&e!==document&&e!==window);d=_.tryF(f[1],[f[0],c],g);e=g=null;return false},_handleMouseHover:function(c,g,k){if(g==document){g=null;return true}var e=(c.type=="mouseover"?c.fromElement:c.toElement)||c.relatedTarget;if(k&&c.type=="mouseover"&&this._preDroppable){try{do{if(e&&e.id&&e.id==this._preDroppable){g=e=null;return true}}while(e&&(e=e.parentNode)&&e!==document&&e!==window)}catch(i){}}if(linb.browser.gek){try{do{if(e==g){g=e=null;return false}}while(e&&(e=e.parentNode))}catch(i){var h=this.getPos(c),e=linb([g]),d=e.offset(),l=e.cssSize(),f=(h.left<d.left||h.left>d.left+l.width||h.top<d.top||h.top>d.top+l.height);g=e=null;return c.type=="mouseover"?!f:f}}else{do{if(e==g){g=e=null;return false}}while(e&&(e=e.parentNode))}g=e=null;return true},_tabHookStack:[],pushTabOutTrigger:function(d,c){this._tabHookStack.push([linb(d)._nodes[0],c]);return this},popTabOutTrigger:function(c){if(c){this._tabHookStack=[]}else{this._tabHookStack.pop()}return this},getSrc:function(d){var c;return((c=d.target||d.srcElement||null)&&linb.browser.kde&&c.nodeType==3)?c.parentNode:c},getId:function(c){return window===c?"!window":document===c?"!document":c.id},getBtn:function(c){return linb.browser.ie?c.button==4?"middle":c.button==2?"right":"left":c.which==2?"middle":c.which==3?"right":"left"},getPos:function(g){g=g||window.event;if("pageX" in g){return{left:g.pageX,top:g.pageY}}else{var i=document,h=i.documentElement,c=i.body,e=(h&&h.scrollLeft||c&&c.scrollLeft||0)-(h.clientLeft||0),f=(h&&h.scrollTop||c&&c.scrollTop||0)-(h.clientTop||0);return{left:g.clientX+e,top:g.clientY+f}}},getKey:function(c){c=c||window.event;var h=[],p,e=c.$key||c.keyCode||c.charCode||0;if(typeof e=="string"){h[0]=e}else{var n=String.fromCharCode(e),m=c.type;if((m=="keypress"&&e>=33&&e<=128)||((e>=48&&e<=57)||(e>=65&&e<=90))){h[0]=n}else{if(!(p=arguments.callee.map)){p=arguments.callee.map={};var e,g=("3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print").split(",");for(var f=1,d=g.length;f<d;f=f+2){p[g[f-1]]=g[f]}g.length=0;p[188]=","}h[0]=p[e]||n}}if((c.modifiers)?(c.modifiers&Event.CONTROL_MASK):(c.ctrlKey||c.ctrlLeft||e==17||e==57391)){if(e==17||e==57391){h[0]=""}h.push("1")}else{h.push("")}if((c.modifiers)?(c.modifiers&Event.SHIFT_MASK):(c.shiftKey||c.shiftLeft||e==16||e==57390)){if(e==16||e==57390){h[0]=""}h.push("1")}else{h.push("")}if((c.modifiers)?false:(c.altKey||c.altLeft||e==18||e==57388)){if(e==18||e==57388){h[0]=""}h.push("1")}else{h.push("")}h[0]=h[0];h.key=h[0];h.type=m;h.ctrlKey=!!h[1];h.shiftKey=!!h[2];h.altKey=!!h[3];if(m=="keypress"){if(this.$keydownchar&&this.$keydownchar.length>1){h.key=this.$keydownchar}}else{if(m=="keydown"){if(h[0].length>1){this.$keydownchar=h[0]}else{if(this.$keydownchar){this.$keydownchar=null}}}else{if(m=="keyup"){if(this.$keydownchar){this.$keydownchar=null}}}}return h},getEventPara:function(g,c){if(!c){c=linb.Event.getPos(g)}var f=this.getKey(g),e={pageX:c&&c.left,pageY:c&&c.top,keyCode:f.key,ctrlKey:f.ctrlKey,shiftKey:f.shiftKey,altKey:f[3].altKey};for(var d in g){if(d.charAt(0)=="$"){e[d]=g[d]}}return e},stopBubble:function(c){c=c||window.event;if(c.stopPropagation){c.stopPropagation()}c.cancelBubble=true;this.stopDefault(c)},stopDefault:function(c){c=c||window.event;if(c.preventDefault){c.preventDefault()}c.returnValue=false},keyboardHook:function(l,c,e,g,i,h,m){if(l){var d=linb.$cache.hookKey,f=(l||"").toLowerCase()+":"+(c?"1":"")+":"+(e?"1":"")+":"+(g?"1":"");if(typeof i!="function"){delete d[f]}else{d[f]=[i,h,m]}}return this},getWheelDelta:function(c){return c.wheelDelta?c.wheelDelta/120:-c.detail/3}},Initialize:function(){var g=this;var d={move:null,size:null,drag:null,dragstop:null,dragover:null,mousewheel:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},c=["before","on","after"],h,f,e;h=g._map1={};_.arr.each(g._events,function(i){e=_.str.initial(i);h[i]=[c[0]+e,c[1]+e,c[2]+e]});h=g._eventMap={};f=g._eventHandler={};_.arr.each(g._events,function(i){e=_.str.initial(i);h[i]=h[c[1]+i]=h[c[0]+e]=h[c[1]+e]=h[c[2]+e]=i;f[i]=f[c[1]+i]=f[c[0]+e]=f[c[1]+e]=f[c[2]+e]=(i in d)?d[i]:("on"+i)});window.onresize=g.$eventhandler;if(window.addEventListener){window.addEventListener("DOMMouseScroll",g.$eventhandler3,false)}document.onmousewheel=window.onmousewheel=g.$eventhandler3}});Class("linb.Date",null,{Initialize:function(){var f=this;f._mapKeys(f.$TIMEUNIT);var e=f._key1,c=f._key2,g=f.$UNIT={};for(var h=0,d=e.length;h<d;h++){g[e[h]]=1}for(var h=0,d=c.length;h<d;h++){g[c[h]]=1}g.w=1},Static:{_key1:"MILLISECOND,SECOND,MINUTE,HOUR,DAY,WEEK,MONTH,QUARTER,YEAR,DECADE,CENTURY".split(","),_key2:"ms,s,n,h,d,ww,m,q,y,de,c".split(","),$TIMEUNIT:{MILLISECOND:1,SECOND:1000,MINUTE:60000,HOUR:3600000,DAY:86400000,WEEK:604800000,MONTH:2592000000,QUARTER:7776000000,YEAR:31557600000,DECADE:315576000000,CENTURY:3155760000000},$TEXTFORMAT:{utciso:function(g,c,e){e=linb.Date._fix;return g.getUTCFullYear()+"-"+e(g.getUTCMonth()+1)+"-"+e(g.getUTCDate())+"T"+e(g.getUTCHours())+":"+e(g.getUTCMinutes())+":"+e(g.getUTCSeconds())+"Z"},iso:function(g,c,e){e=linb.Date._fix;return g.getFullYear()+"-"+e(g.getMonth()+1)+"-"+e(g.getDate())+"T"+e(g.getHours())+":"+e(g.getMinutes())+":"+e(g.getSeconds())},ms:function(e,c){return linb.Date._fix(e.getMilliseconds(),3)+(c?"":linb.wrapRes("date.MS"))},s:function(e,c){return e.getSeconds()+(c?"":linb.wrapRes("date.S"))},ss:function(e,c){return linb.Date._fix(e.getSeconds())+(c?"":linb.wrapRes("date.S"))},n:function(e,c){return e.getMinutes()+(c?"":linb.wrapRes("date.N"))},nn:function(e,c){return linb.Date._fix(e.getMinutes())+(c?"":linb.wrapRes("date.N"))},h:function(e,c){return e.getHours()+(c?"":linb.wrapRes("date.H"))},hh:function(e,c){return linb.Date._fix(e.getHours())+(c?"":linb.wrapRes("date.H"))},d:function(e,c){return e.getDate()+(c?"":linb.wrapRes("date.D"))},dd:function(e,c){return linb.Date._fix(e.getDate())+(c?"":linb.wrapRes("date.D"))},w:function(g,e,f){var c=(g.getDay()-f+7)%7;return e?c:linb.wrapRes("date.WEEKS."+c)},ww:function(f,c,e){return linb.Date.getWeek(f,e)+(c?"":linb.wrapRes("date.W"))},m:function(e,c){return(e.getMonth()+1)+(c?"":linb.wrapRes("date.M"))},mm:function(e,c){return linb.Date._fix(e.getMonth()+1)+(c?"":linb.wrapRes("date.M"))},q:function(e,c){return(parseInt((e.getMonth()+3)/3-1)+1)+(c?"":linb.wrapRes("date.Q"))},y:function(e,c){return e.getYear()+(c?"":linb.wrapRes("date.Y"))},yyyy:function(e,c){return e.getFullYear()+(c?"":linb.wrapRes("date.Y"))},de:function(e,c){return parseInt(e.getFullYear()/10)+(c?"":linb.wrapRes("date.DE"))},c:function(e,c){return parseInt(e.getFullYear()/100)+(c?"":linb.wrapRes("date.C"))},hn:function(e,c){return linb.wrapRes("date.HN-"+e.getHours()+"-"+e.getMinutes())},dhn:function(e,c){return linb.wrapRes("date.DHN-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},mdhn:function(e,c){return linb.wrapRes("date.MDHN-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},hns:function(e,c){return linb.wrapRes("date.HNS-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds())},hnsms:function(e,c){return linb.wrapRes("date.HNSMS-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()+"-"+e.getMilliseconds())},yq:function(e,c){return linb.wrapRes("date.YQ-"+e.getFullYear()+"-"+(parseInt((e.getMonth()+3)/3-1)+1))},ym:function(e,c){return linb.wrapRes("date.YM-"+e.getFullYear()+"-"+(e.getMonth()+1))},md:function(e,c){return linb.wrapRes("date.MD-"+(e.getMonth()+1)+"-"+e.getDate())},ymd:function(e,c){return linb.wrapRes("date.YMD-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate())},ymd2:function(e,c){return linb.wrapRes("date.YMD2-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate())},ymdh:function(e,c){return linb.wrapRes("date.YMDH-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours())},ymdhn:function(e,c){return linb.wrapRes("date.YMDHN-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes())},ymdhns:function(e,c){return linb.wrapRes("date.YMDHNS-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds())},all:function(e,c){return linb.wrapRes("date.ALL-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()+"-"+e.getMilliseconds())}},$TIMEZONE:[{id:"Asia(East,North)",sub:[{id:"Brunei",v:"+0800"},{id:"Burma",v:"+0630"},{id:"Cambodia",v:"+0700"},{id:"China",v:"+0800"},{id:"China(HK,Macau)",v:"+0800"},{id:"China(TaiWan)",v:"+0800"},{id:"China(Urumchi)",v:"+0700"},{id:"East Timor",v:"+0800"},{id:"Indonesia",v:"+0700"},{id:"Japan",v:"+0900"},{id:"Kazakhstan(Aqtau)",v:"+0400"},{id:"Kazakhstan(Aqtobe)",v:"+0500"},{id:"Kazakhstan(Astana)",v:"+0600"},{id:"Kirghizia",v:"+0500"},{id:"Korea",v:"+0900"},{id:"Laos",v:"+0700"},{id:"Malaysia",v:"+0800"},{id:"Mongolia",v:"+0800",tag:"03L03|09L03"},{id:"Philippines",v:"+0800"},{id:"Russia(Anadyr)",v:"+1300",tag:"03L03|10L03"},{id:"Russia(Kamchatka)",v:"+1200",tag:"03L03|10L03"},{id:"Russia(Magadan)",v:"+1100",tag:"03L03|10L03"},{id:"Russia(Vladivostok)",v:"+1000",tag:"03L03|10L03"},{id:"Russia(Yakutsk)",v:"+0900",tag:"03L03|10L03"},{id:"Singapore",v:"+0800"},{id:"Thailand",v:"+0700"},{id:"Vietnam",v:"+0700"}]},{id:"Asia(South,West)",sub:[{id:"Afghanistan",v:"+0430"},{id:"Arab Emirates",v:"+0400"},{id:"Bahrain",v:"+0300"},{id:"Bangladesh",v:"+0600"},{id:"Bhutan",v:"+0600"},{id:"Cyprus",v:"+0200"},{id:"Georgia",v:"+0500"},{id:"India",v:"+0530"},{id:"Iran",v:"+0330",tag:"04 13|10 13"},{id:"Iraq",v:"+0300",tag:"04 13|10 13"},{id:"Israel",v:"+0200",tag:"04F53|09F53"},{id:"Jordan",v:"+0200"},{id:"Kuwait",v:"+0300"},{id:"Lebanon",v:"+0200",tag:"03L03|10L03"},{id:"Maldives",v:"+0500"},{id:"Nepal",v:"+0545"},{id:"Oman",v:"+0400"},{id:"Pakistan",v:"+0500"},{id:"Palestine",v:"+0200"},{id:"Qatar",v:"+0300"},{id:"Saudi Arabia",v:"+0300"},{id:"Sri Lanka",v:"+0600"},{id:"Syria",v:"+0200",tag:"04 13|10 13"},{id:"Tajikistan",v:"+0500"},{id:"Turkey",v:"+0200"},{id:"Turkmenistan",v:"+0500"},{id:"Uzbekistan",v:"+0500"},{id:"Yemen",v:"+0300"}]},{id:"North Europe",sub:[{id:"Denmark",v:"+0100",tag:"04F03|10L03"},{id:"Faroe Is.(DK)",v:"+0100"},{id:"Finland",v:"+0200",tag:"03L01|10L01"},{id:"Iceland",v:"+0000"},{id:"Jan Mayen(Norway)",v:"-0100"},{id:"Norwegian",v:"+0100"},{id:"Svalbard(NORWAY)",v:"+0100"},{id:"Sweden",v:"+0100",tag:"03L01|10L01"}]},{id:"Eastern Europe",sub:[{id:"Armenia",v:"+0400"},{id:"Austria",v:"+0100",tag:"03L01|10L01"},{id:"Azerbaijan",v:"+0400"},{id:"Belarus",v:"+0200",tag:"03L03|10L03"},{id:"Czech",v:"+0100"},{id:"Estonia",v:"+0200"},{id:"Georgia",v:"+0500"},{id:"Germany",v:"+0100",tag:"03L01|10L01"},{id:"Hungarian",v:"+0100"},{id:"Latvia",v:"+0200"},{id:"Liechtenstein",v:"+0100"},{id:"Lithuania",v:"+0200"},{id:"Moldova",v:"+0200"},{id:"Poland",v:"+0100"},{id:"Rumania",v:"+0200"},{id:"Russia(Moscow)",v:"+0300",tag:"03L03|10L03"},{id:"Slovakia",v:"+0100"},{id:"Switzerland",v:"+0100",tag:"03L01|10L01"},{id:"Ukraine",v:"+0200"},{id:"Ukraine(Simferopol)",v:"+0300"}]},{id:"Western Europe",sub:[{id:"Andorra",v:"+0100",tag:"03L01|10L01"},{id:"Belgium",v:"+0100",tag:"03L01|10L01"},{id:"Channel Is.(UK)",v:"+0000",tag:"03L01|10L01"},{id:"France",v:"+0100",tag:"03L01|10L01"},{id:"Gibraltar(UK)",v:"+0100",tag:"03L01|10L01"},{id:"Ireland",v:"+0000",tag:"03L01|10L01"},{id:"Isle of Man(UK)",v:"+0000",tag:"03L01|10L01"},{id:"Luxembourg",v:"+0100",tag:"03L01|10L01"},{id:"Monaco",v:"+0100"},{id:"Netherlands",v:"+0100",tag:"03L01|10L01"},{id:"United Kingdom",v:"+0000",tag:"03L01|10L01"}]},{id:"South Europe",sub:[{id:"Albania",v:"+0100"},{id:"Bosnia",v:"+0100"},{id:"Bulgaria",v:"+0200"},{id:"Croatia",v:"+0100"},{id:"Greece",v:"+0200",tag:"03L01|10L01"},{id:"Holy See",v:"+0100"},{id:"Italy",v:"+0100",tag:"03L01|10L01"},{id:"Macedonia",v:"+0100"},{id:"Malta",v:"+0100"},{id:"Montenegro",v:"+0100"},{id:"Portugal",v:"+0000",tag:"03L01|10L01"},{id:"San Marino",v:"+0100"},{id:"Serbia",v:"+0100"},{id:"Slovenia",v:"+0100"},{id:"Span",v:"+0100",tag:"03L01|10L01"}]},{id:"North America",sub:[{id:"Canada(AST)",v:"-0400",tag:"04F02|10L02"},{id:"Canada(CST)",v:"-0600",tag:"04F02|10L02"},{id:"Canada(EST)",v:"-0500",tag:"04F02|10L02"},{id:"Canada(MST)",v:"-0700",tag:"04F02|10L02"},{id:"Canada(NST)",v:"-0330",tag:"04F02|10L02"},{id:"Canada(PST)",v:"-0800",tag:"04F02|10L02"},{id:"Greenland(DK)",v:"-0300"},{id:"US(Central)",v:"-0600",tag:"03S02|11F02"},{id:"US(Eastern)",v:"-0500",tag:"03S02|11F02"},{id:"US(Mountain)",v:"-0700",tag:"03S02|11F02"},{id:"US(Pacific)",v:"-0800",tag:"03S02|11F02"},{id:"US(Alaska)",v:"-0900"},{id:"US(Arizona)",v:"-0700"}]},{id:"South America",sub:[{id:"Anguilla(UK)",v:"-0400"},{id:"Antigua&amp;Barbuda",v:"-0400"},{id:"Antilles(NL)",v:"-0400"},{id:"Argentina",v:"-0300"},{id:"Aruba(NL)",v:"-0400"},{id:"Bahamas",v:"-0500"},{id:"Barbados",v:"-0400"},{id:"Belize",v:"-0600"},{id:"Bolivia",v:"-0400"},{id:"Brazil(AST)",v:"-0500",tag:"10F03|02L03"},{id:"Brazil(EST)",v:"-0300",tag:"10F03|02L03"},{id:"Brazil(FST)",v:"-0200",tag:"10F03|02L03"},{id:"Brazil(WST)",v:"-0400",tag:"10F03|02L03"},{id:"British Virgin Is.(UK)",v:"-0400"},{id:"Cayman Is.(UK)",v:"-0500"},{id:"Chilean",v:"-0300",tag:"10F03|03F03"},{id:"Chilean(Hanga Roa)",v:"-0500",tag:"10F03|03F03"},{id:"Colombia",v:"-0500"},{id:"Costa Rica",v:"-0600"},{id:"Cuba",v:"-0500",tag:"04 13|10L03"},{id:"Dominican",v:"-0400"},{id:"Ecuador",v:"-0500"},{id:"El Salvador",v:"-0600"},{id:"Falklands",v:"-0300",tag:"09F03|04F03"},{id:"Grenada",v:"-0400"},{id:"Guadeloupe(FR)",v:"-0400"},{id:"Guatemala",v:"-0600"},{id:"Guiana(FR)",v:"-0300"},{id:"Guyana",v:"-0400"},{id:"Haiti",v:"-0500"},{id:"Honduras",v:"-0600"},{id:"Jamaica",v:"-0500"},{id:"Martinique(FR)",v:"-0400"},{id:"Mexico(Mazatlan)",v:"-0700"},{id:"Mexico(Tijuana)",v:"-0800"},{id:"Mexico(Mexico)",v:"-0600"},{id:"Montserrat(UK)",v:"-0400"},{id:"Nicaragua",v:"-0500"},{id:"Panama",v:"-0500"},{id:"Paraguay",v:"-0400",tag:"10F03|02L03"},{id:"Peru",v:"-0500"},{id:"Puerto Rico(US)",v:"-0400"},{id:"So. Georgia&amp;So. Sandwich Is.(UK)",v:"-0200"},{id:"St. Kitts&amp;Nevis",v:"-0400"},{id:"St. Lucia",v:"-0400"},{id:"St. Vincent&amp;Grenadines",v:"-0400"},{id:"Suriname",v:"-0300"},{id:"Trinidad&amp;Tobago",v:"-0400"},{id:"Turks&amp;Caicos Is.(UK)",v:"-0500"},{id:"Uruguay",v:"-0300"},{id:"Venezuela",v:"-0400"},{id:"Virgin Is.(US)",v:"-0400"}]},{id:"Africa(North)",sub:[{id:"Algeria",v:"+0100"},{id:"Egypt",v:"+0200",tag:"04L53|09L43"},{id:"Libyan",v:"+0200"},{id:"Morocco",v:"+0000"},{id:"Sudan",v:"+0200"},{id:"Tunisia",v:"+0100"}]},{id:"Africa(Western)",sub:[{id:"Benin",v:"+0100"},{id:"Burkina Faso",v:"+0000"},{id:"Canary Is.(SP)",v:"-0100"},{id:"Cape Verde",v:"-0100"},{id:"Chad",v:"+0100"},{id:"Gambia",v:"+0000"},{id:"Ghana",v:"+0000"},{id:"Guinea",v:"+0000"},{id:"Guinea-Bissau",v:"+0000"},{id:"Ivory Coast",v:"+0000"},{id:"Liberia",v:"+0000"},{id:"Mali",v:"+0000"},{id:"Mauritania",v:"+0000"},{id:"Niger",v:"+0100"},{id:"Nigeria",v:"+0100"},{id:"Senegal",v:"+0000"},{id:"Sierra Leone",v:"+0000"},{id:"Togo",v:"+0000"},{id:"Western Sahara",v:"+0000"}]},{id:"Africa(Central)",sub:[{id:"Cameroon",v:"+0100"},{id:"Cen.African Rep.",v:"+0100"},{id:"Congo,Democratic",v:"+0100"},{id:"Congo,Republic",v:"+0100"},{id:"Equatorial Guinea",v:"+0100"},{id:"Gabon",v:"+0100"},{id:"Sao Tome&amp;Principe",v:"+0000"}]},{id:"Africa(East)",sub:[{id:"Burundi",v:"+0200"},{id:"Comoros",v:"+0300"},{id:"Djibouti",v:"+0300"},{id:"Eritrea",v:"+0300"},{id:"Ethiopia",v:"+0300"},{id:"Kenya",v:"+0300"},{id:"Madagascar",v:"+0300"},{id:"Malawi",v:"+0200"},{id:"Mauritius",v:"+0400"},{id:"Mayotte(FR)",v:"+0300"},{id:"Mozambique",v:"+0200"},{id:"Reunion(FR)",v:"+0400"},{id:"Rwanda",v:"+0200"},{id:"Seychelles",v:"+0300"},{id:"Somalia",v:"+0300"},{id:"Tanzania",v:"+0300"},{id:"Uganda",v:"+0300"}]},{id:"Africa(South)",sub:[{id:"Angola",v:"+0100"},{id:"Botswana",v:"+0200"},{id:"Lesotho",v:"+0200"},{id:"Namibia",v:"+0200",tag:"09F03|04F03"},{id:"Saint Helena(UK)",v:"-0100"},{id:"South Africa",v:"+0200"},{id:"Swaziland",v:"+0200"},{id:"Zambia",v:"+0200"},{id:"Zimbabwe",v:"+0200"}]},{id:"Oceania",sub:[{id:"American Samoa(US)",v:"-1100"},{id:"Australia(Adelaide)",v:"+0930",sub:"10L03|03L03"},{id:"Australia(Brisbane)",v:"+1000"},{id:"Australia(Darwin)",v:"+0930"},{id:"Australia(Hobart)",v:"+1000",sub:"10L03|03L03"},{id:"Australia(Perth)",v:"+0800"},{id:"Australia(Sydney)",v:"+1000",sub:"10L03|03L03"},{id:"Cook Islands(NZ)",v:"-1000"},{id:"Eniwetok",v:"-1200"},{id:"Fiji",v:"+1200",sub:"11F03|02L03"},{id:"Guam",v:"+1000"},{id:"Hawaii(US)",v:"-1000"},{id:"Kiribati",v:"+1100"},{id:"Marshall Is.",v:"+1200"},{id:"Micronesia",v:"+1000"},{id:"Midway Is.(US)",v:"-1100"},{id:"Nauru Rep.",v:"+1200"},{id:"New Calednia(FR)",v:"+1100"},{id:"New Zealand",v:"+1200",sub:"10F03|04F63"},{id:"New Zealand(CHADT)",v:"+1245",sub:"10F03|04F63"},{id:"Niue(NZ)",v:"-1100"},{id:"Nor. Mariana Is.",v:"+1000"},{id:"Palau",v:"+0900"},{id:"Papua New Guinea",v:"+1000"},{id:"Pitcairn Is.(UK)",v:"-0830"},{id:"Polynesia(FR)",v:"-1000"},{id:"Solomon Is.",v:"+1100"},{id:"Tahiti",v:"-1000"},{id:"Tokelau(NZ)",v:"-1100"},{id:"Tonga",v:"+1300",tag:"10F63|04F63"},{id:"Tuvalu",v:"+1200"},{id:"Vanuatu",v:"+1100"},{id:"Western Samoa",v:"-1100"},{id:"Data Line",v:"-1200"}]}],_mapKeys:function(h){var e=this,g=e._key2,c=e._key1;for(var f=0,d=c.length;f<d;f++){h[g[f]]=h[c[f]]}},_validUnit:function(c){return this.$UNIT[c]?c:"d"},_isDate:function(c){return !!c&&c.constructor==Date},_date:function(c,d){return this._isDate(c)?c:((c||c===0)&&isFinite(c))?new Date(parseInt(c)):this._isDate(d)?d:new Date},_isNumb:function(c){return typeof c=="number"&&isFinite(c)},_numb:function(c,d){return this._isNumb(c)?c:this._isNumb(d)?d:0},_timeZone:-((new Date).getTimezoneOffset()/60),get:function(e,f,d){var c=this;e=c._date(e);f=c._validUnit(f);d=c._numb(d);var g=arguments.callee.map||(arguments.callee.map={ms:function(h){return h.getMilliseconds()},s:function(h){return h.getSeconds()},n:function(h){return h.getMinutes()},h:function(h){return h.getHours()},d:function(h){return h.getDate()},ww:function(i,h){return linb.Date.getWeek(i,h)},w:function(i,h){return(7+i.getDay()-h)%7},m:function(h){return h.getMonth()},q:function(h){return parseInt((h.getMonth()+3)/3-1)},y:function(h){return h.getFullYear()},de:function(h){return parseInt(h.getFullYear()/10)},c:function(h){return parseInt(h.getFullYear()/100)}});return g[f](e,d)},_fix:function(f,c,e){c=c||2;e=e||"0";f+="";if(f.length<c){for(var d=f.length;d<c;d++){f=e+f}}return f},add:function(d,f,g){var c=this,e=c.$TIMEUNIT,i,h;d=c._date(d);f=c._validUnit(f);if(!(i=arguments.callee.map)){i=arguments.callee.map={MILLISECOND:function(k,l){k.setTime(k.getTime()+l*e.ms)},SECOND:function(k,l){k.setTime(k.getTime()+l*e.s)},MINUTE:function(k,l){k.setTime(k.getTime()+l*e.n)},HOUR:function(k,l){k.setTime(k.getTime()+l*e.h)},DAY:function(k,l){k.setTime(k.getTime()+l*e.d)},WEEK:function(k,l){k.setTime(k.getTime()+l*e.ww)},MONTH:function(m,n){var l=m.getDate(),k;n=m.getMonth()+n;this.YEAR(m,Math.floor(n/12));m.setMonth((n%12+12)%12);if((k=m.getDate())!=l){this.DAY(m,-k)}},QUARTER:function(k,l){this.MONTH(k,l*3)},YEAR:function(m,n){var l=m.getDate(),k;m.setFullYear(m.getFullYear()+n);if((k=m.getDate())!=l){this.DAY(m,-k)}},DECADE:function(k,l){this.YEAR(k,10*l)},CENTURY:function(k,l){this.YEAR(k,100*l)}};c._mapKeys(i)}i[f](h=new Date(d),g);return h},diff:function(f,c,h,e){var d=this;f=d._date(f);c=d._date(c);h=d._validUnit(h);e=d._numb(e);var g=d.$TIMEUNIT,i;if(!(i=arguments.callee.map)){i=arguments.callee.map={MILLISECOND:function(l,k){return k.getTime()-l.getTime()},SECOND:function(l,k){var l=d.getTimSpanStart(l,"s"),k=d.getTimSpanStart(k,"s"),m=k.getTime()-l.getTime();return m/g.s},MINUTE:function(l,k){var l=d.getTimSpanStart(l,"n"),k=d.getTimSpanStart(k,"n"),m=k.getTime()-l.getTime();return m/g.n},HOUR:function(l,k){var l=d.getTimSpanStart(l,"h"),k=d.getTimSpanStart(k,"h"),m=k.getTime()-l.getTime();return m/g.h},DAY:function(l,k){var l=d.getTimSpanStart(l,"d",1),k=d.getTimSpanStart(k,"d",1),m=k.getTime()-l.getTime();return m/g.d},WEEK:function(m,k,l){var m=d.getTimSpanStart(m,"ww",1,l),k=d.getTimSpanStart(k,"ww",1,l),n=k.getTime()-m.getTime();return n/g.ww},MONTH:function(l,k){return(k.getFullYear()-l.getFullYear())*12+(k.getMonth()-l.getMonth())},QUARTER:function(l,k){return(k.getFullYear()-l.getFullYear())*4+parseInt((k.getMonth()-l.getMonth())/3)},YEAR:function(l,k){return parseInt((k.getFullYear()-l.getFullYear()))},DECADE:function(l,k){return parseInt((k.getFullYear()-l.getFullYear())/10)},CENTURY:function(l,k){return parseInt((k.getFullYear()-l.getFullYear())/100)}};d._mapKeys(i)}return i[h](new Date(f),new Date(c),e)},getTimSpanStart:function(e,i,h,c){var m=this,k=m.$TIMEUNIT,d,l;e=m._date(e);i=m._validUnit(i);c=m._numb(c);h=m._numb(h,1);if(!(d=arguments.callee.map)){var g=function(n){n.setMilliseconds(0);n.setSeconds(0);n.setMinutes(0);n.setHours(0)},f=function(n){g(n);n.setDate(1);n.setMonth(0)};d=arguments.callee.map={MILLISECOND:function(p,q){var n=p.getMilliseconds();p.setMilliseconds(n-(n%q))},SECOND:function(p,q){p.setMilliseconds(0);var n=p.getSeconds();p.setSeconds(n-(n%q))},MINUTE:function(p,q){p.setMilliseconds(0);p.setSeconds(0);var n=p.getMinutes();p.setTime(p.getTime()-(n%q)*k.n)},HOUR:function(p,q){p.setMilliseconds(0);p.setSeconds(0);p.setMinutes(0);var n=p.getHours();p.setHours(n-(n%q))},DAY:function(p,q){g(p);var n=p.getDate();p.setDate(n-(n%q))},WEEK:function(r,s,q){g(r);var w=(r.getDay()+7-q)%7,u,n,p=new Date();r.setTime(r.getTime()-w*k.d);f(p);p.setFullYear(r.getFullYear());u=(p.getDay()+7-q)%7;p.setTime(p.getTime()-u*k.d);n=(r.getTime()-p.getTime())/k.d/7;r.setTime(r.getTime()-(n%s)*k.ww)},MONTH:function(p,q){g(p);p.setDate(1);var n=p.getMonth();p.setMonth(n-(n%q))},QUARTER:function(n,p){p=m._numb(p,1);return this.MONTH(n,p*3)},YEAR:function(p,q){f(p);var n=p.getFullYear();p.setFullYear(n-(n%q))},DECADE:function(n,p){f(n);n.setFullYear(Math.floor(n.getFullYear()/10)*10)},CENTURY:function(n,p){f(n);n.setFullYear(Math.floor(n.getFullYear()/100)*100)}};m._mapKeys(d)}d[i](l=new Date(e),h,c);return l},getTimSpanEnd:function(e,f,g,d){var c=this;e=c._date(e);f=c._validUnit(f);d=c._numb(d);g=c._numb(g,1);var i=e.getTime(),h=c.getTimSpanStart(e,f,g,d);if(h.getTime()<i){h=c.add(h,f,g)}return h},offsetTimeZone:function(e,f,d){var c=this;e=c._date(e);return new Date(e.getTime()+(d?-1:1)*(f-c._timeZone)*c.$TIMEUNIT.h)},getWeek:function(e,d){var c=this,f,g;e=c._date(e);d=c._numb(d),g=e.getFullYear();e=c.add(c.getTimSpanStart(e,"ww",1,d),"d",6);if(e.getFullYear()!=g){return 1}f=c.getTimSpanStart(e,"y",1);f=c.add(c.getTimSpanStart(f,"ww",1,d),"d",6);return c.diff(f,e,"ww")+1},parse:function(u,z){var q;if(_.isDate(u)){q=u}else{u+="";if(isFinite(u)){q=new Date(parseInt(u))}else{if(typeof z=="string"){var y=z.split(/[^ymdhns]+/),w=u.split(/[^0-9]+/),d={y:0,m:0,d:0,h:0,n:0,s:0,ms:0};if(y.length&&y.length===w.length){for(var k=0;k<y.length;k++){if(y[k].length){d[y[k]=="ms"?"ms":y[k].charAt(0)]=parseInt(w[k].replace(/^0*/,""))}}q=new Date(d.y,d.m-1,d.d,d.h,d.n,d.s,d.ms)}else{q=null}}else{var B=this,x,s=arguments.callee,g=s.dp||(s.dp={FullYear:2,Month:4,Date:6,Hours:8,Minutes:10,Seconds:12,Milliseconds:14}),p=u.match(s.iso||(s.iso=/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})((\d{2}))?|Z)?$/)),f=new Date(0);if(p){if(p[4]){p[4]--}if(p[15]>=5){p[14]++}x=p[16]||p[18]?"UTC":"";for(var k in g){var A=p[g[k]];if(!A){continue}f["set"+x+k](A);if(f["get"+x+k]()!=p[g[k]]){q=null}}if(p[18]){var l=Number(p[17]+p[18]),e=Number(p[17]+(p[20]||0));f.setUTCMinutes(f.getUTCMinutes()+(l*60)+e)}q=f}else{if(/^((-\d+|\d{4,})(-(\d{1,2})(-(\d{1,2}))))/.test(u)){u=u.replace(/-/g,"/")}var c=Date.parse(u);q=c?f.setTime(c)&&f:null}}}}return q===null?null:isFinite(+q)?q:null},getText:function(e,f,d){var c=this,g=c.$TEXTFORMAT;e=c._date(e);d=c._numb(d);return g[f]?g[f](e,false,d):f},format:function(e,g,d){var c=this,f=c.$TEXTFORMAT;e=c._date(e);d=c._numb(d);return g.replace(/(utciso|iso|yyyy|mm|ww|dd|hh|nn|ss|ms|de|c|y|q|m|w|d|h|n|s)/g,function(i,h){return f[h]?f[h](e,true,d):h})}}});Class("linb.CSS",null,{Static:{_r:linb.browser.ie?"rules":"cssRules",_baseid:"linb:css:base",_firstid:"linb:css:first",_lastid:"linb:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(d){var c=this;return d.replace(c._reg1,".$1").replace(c._reg2,"#$1").replace(c._reg3,"$1").replace(c._reg4," ").replace(c._reg5,"").replace(c._reg6,",").toLowerCase()},_createCss:function(l,g){var f=this,d=this._getHead(),i=f._firstid,h=f._lastid,e,k;e=document.createElement("style");e.type="text/css";e.id=l;if(!g){k=document.getElementById(i)||d.firstChild;while((k=k.nextSibling)&&!/^(script|link|style)$/i.test(""+k.tagName)){}if(k){d.insertBefore(e,k)}else{if(k=document.getElementById(h)){d.insertBefore(e,k)}else{d.appendChild(e)}}}else{d.appendChild(e)}return e},_getCss:function(d,c){return document.getElementById(d)||this._createCss(d,c)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,true)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(!linb.browser.ie){return}var g=0;for(var f=this._getHead(),e=0,d=f.childNodes,c;c=d[e++];){if(c.type=="text/css"){g++}}return g>20},get:function(h,g){for(var f=this._getHead(),e=0,d=f.childNodes,c;c=d[e++];){if(c.type=="text/css"&&h in c&&c[h]==g){return c}}},addStyleSheet:function(c,l,d){var i,g=this,f=g._getHead(),h=function(m,s,n){var r=document.createElement("style");r.type="text/css";if(s){r.id=s}if(linb.browser.ie){r.styleSheet.cssText=m||""}else{try{r.appendChild(document.createTextNode(m||""))}catch(q){r.styleSheet.cssText=m||""}}f.insertBefore(r,n?g._getLast():g._getBase());r.disabled=true;r.disabled=false;return r},k=function(m,n){var p=n?g._getLast():g._getBase();p.styleSheet.cssText+=m;return p};if(l&&(l=l.replace(/[^\w\-\_\.\:]/g,"_"))&&(i=g.get("id",l))){return i}if(g._check()){return k(c,d)}else{return h(c,l,d)}},includeLink:function(d,k,h,c){var i,g=this,f=g._getHead();if(d&&(i=g.get("href",d))){}else{i=document.createElement("link");i.type="text/css";i.rel="stylesheet";i.href=d;if(k){i.id=k}i.media="all";_.each(c,function(l,e){i.setAttribute(e,l)})}f.insertBefore(i,h?g._getBase():g._getLast());i.disabled=true;i.disabled=false;return i},remove:function(e,d){var c=this._getHead();if(d=this.get(e,d)){d.disabled=true;c.removeChild(d)}},replaceLink:function(c,m,h,d){var i=this,k=i._getHead(),g={},f,l;g[m]=d;f=i.includeLink(c,null,false,g);if(l=i.get(m,h)){k.replaceChild(f,l)}f.disabled=true;f.disabled=false},_build:function(c,f,d){var e="";_.each(f,function(h,g){e+=g.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+h+";"});return d?e:c+"{"+e+"}"},setStyleRules:function(g,p,d){var n=this,u=true,f=document.styleSheets,m,i,c,r,k,l,s,q;g=_.str.trim(g.replace(/\s+/g," "));if(!(p&&d)){r=g.toLowerCase();_.arr.each(_.toArr(f),function(w){try{w[n._r]}catch(h){return}_.arr.each(_.toArr(w[n._r]),function(e,x){if(!e.selectorText){return}if(e.disabled){return}c=n._rep(e.selectorText);q=c.split(",");if(!p){u=false;if(_.arr.indexOf(q,r)!=-1&&q.length>1){q=_.arr.removeFrom(q,_.arr.indexOf(q,r)).join(",");s=e.cssText.slice(e.cssText.indexOf("{")+1,e.cssText.lastIndexOf("}"));if(w.insertRule){w.insertRule(q+"{"+s+"}",w[n._r].length)}else{if(w.addRule){w.addRule(q,s)}}if(w.deleteRule){w.deleteRule(x)}else{w.removeRule(x)}w.disabled=true;w.disabled=false}else{if(c==r){if(w.deleteRule){w.deleteRule(x)}else{w.removeRule(x)}w.disabled=true;w.disabled=false}}}else{if(c==r){m=e;return false}if(_.arr.indexOf(q,r)!=-1){i=e;return false}}},null,true);if(m){u=false;try{_.each(p,function(x,e){e=e.replace(/(-[a-z])/gi,function(y,z){return z.charAt(1).toUpperCase()});m.style[e]=typeof x=="function"?x(m.style[e]):x})}catch(h){}w.disabled=true;w.disabled=false;return false}else{if(i){u=false;w.insertRule(n._build(g,p),w[n._r].length);w.disabled=true;w.disabled=false;return false}}},null,true)}if(d||u){n._addRules(g,p)}return n},$getCSSValue:function(n,g){var s=this,p=s._r,e=document.styleSheets,h=e.length,f,d,u,r,q,c;n=_.str.trim(n.replace(/\s+/g," "));for(r=h-1;r>=0;r--){f=(d=e[r][p]).length;for(q=f-1;q>=0;q--){if((u=d[q]).selectorText&&!u.disabled){c=s._rep(u.selectorText);if(_.arr.indexOf(c.split(","),n)!=-1){return u.style[g]}}}}},_addRules:function(c,e){var d=this,f=d._getLast(),g=f.sheet||f.styleSheet;if(g.insertRule){g.insertRule(d._build(c,e),g[d._r].length)}else{if(g.addRule){g.addRule(c,d._build(c,e,true))}}f.disabled=true;f.disabled=false;return d}},Initialize:function(){var c=linb.browser;this.addStyleSheet("html{color:#000;background:#FFF;}body{cursor:default;font:13px/1.231 arial,helvetica,clean,sans-serif;}"+(linb.browser.ie?"body{font-size:small;font:x-small;}":"")+"body *{line-height:1.22em;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;"+(linb.browser.ie?"font:100%;":"")+"}fieldset,img,body,html{border:0;}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal;}ol,ul,li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym {border:0;font-variant:normal;}sup {vertical-align:text-top;}sub {vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}"+(c.ie?"input,textarea,select{font-size:100%;}":"")+"legend{color:#000;}del,ins{text-decoration:none;}pre,code,kbd,samp,tt{font-family:monospace;"+(c.ie?"font-size:108%;":"")+"line-height:100%;}select,input,button,textarea{font:99% arial,helvetica,clean,sans-serif;border-width:1px;}"+(linb.browser.ie6?("#"+linb.$localeDomId+"{vertical-align:baseline;}"):"")+"a{color:#0000ee;text-decoration:none;}a:hover{color:red}"+(c.gek?"a:focus{outline-offset:-1px;-moz-outline-offset:-1px !important}":"")+"div{font-size:12px;}span{outline-offset:-1px;"+(c.gek?parseFloat(linb.browser.ver)<3?"-moz-outline-offset:-1px !important;display:-moz-inline-block;display:-moz-inline-box;display:inline-block;":"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":"")+"}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong {font-weight:bold;}em{font-style:italic;}","linb.CSS")}});Class("linb.DomProfile","linb.absProfile",{Constructor:function(c){if(arguments.callee.upper){arguments.callee.upper.call(this)}linb.$cache.profileMap[this.domId=c]=this},Instance:{__gc:function(){delete linb.$cache.profileMap[this.domId]},_getEV:function(d,h,e){var g=linb.$cache.profileMap[h];if(g&&(g=g.events)&&(g=g[e])){for(var f=0,c=g.length;f<c;f++){if(typeof g[g[f]]=="function"){d[d.length]=g[g[f]]}}}}},Static:{get:function(c){return linb.$cache.profileMap[c]},$abstract:true}});Class("linb.absBox",null,{Constructor:function(){if(arguments.callee.upper){arguments.callee.upper.call(this)}this._nodes=[]},Before:function(d){var c=linb.absBox;if(c){(c=c.$type)[d.replace("linb.","")]=c[d]=d}},Instance:{__gc:function(){this._nodes=0},_get:function(c){var d=this._nodes;return _.isNumb(c)?d[c]:d},_empty:function(){this._nodes.length=0;return this},get:function(c){return this._get(c)},_each:function(d){var e=this,h;for(var g=0,f=e._nodes,c=f.length;g<c;g++){if(h=f[g]){if(false===d.call(e,h,g)){break}}}h=null;return e},each:function(c){return this._each(c)},isEmpty:function(){return !this._nodes.length},merge:function(g){if(this==linb.win||this==linb.doc||this==linb("body")){return this}var d=this,k=d.constructor,g=g._nodes,f=0,e,h=d._nodes;if(g.length){for(;e=g[f++];){h[h.length]=e}d._nodes=k._unique(h)}return d},reBoxing:function(f,c){var d=this,e=linb.absBox.$type[f||"Dom"];if(!e){return linb.UI.pack([])}if(e==d.KEY){return d}if(e=linb.SC(e)){return e.pack(d._nodes,c)}}},Static:{$abstract:true,$type:{},pack:function(c,d){var e=new this(false);e._nodes=!c?[]:d===false?c.constructor==Array?c:[c]:typeof this._ensureValues=="function"?this._ensureValues(c):c.constructor==Array?c:[c];return e},_unique:function(c){var l={},d=[],g=0,f,e;for(;f=c[g++];){e=typeof f=="string"?f:f.$linbid;if(!l[e]){l[e]=1;d[d.length]=f}}return d},plugIn:function(d,c){this.prototype[d]=c;return this}}});Class("linb.Dom","linb.absBox",{Instance:{get:function(f){var e=linb.$cache.domPurgeData,h=this._nodes,k;if(_.isNumb(f)){return(k=h[f])&&(k=e[k])&&k.element}else{var d=[],c=h.length;for(var g=0;g<c;g++){d[d.length]=(k=e[h[g]])&&k.element}return d}},each:function(d){var h=this,e=linb.$cache.domPurgeData,k;for(var g=0,f=h._nodes,c=f.length;g<c;g++){if((k=e[f[g]])&&(k=k.element)){if(false===d.call(h,k,g)){break}}}k=null;return h},serialize:function(){var c=[];this.each(function(d){c[c.length]=d.id});return"linb(['"+c.join("','")+"'])"},linbid:function(){return linb.getId(this.get(0))},id:function(f,g){var e,d,c=linb.$cache.profileMap;if(typeof f=="string"){return this.each(function(h){if((d=h.id)!==f){if(!g&&(e=c[d])){c[f]=e;delete c[d]}h.id=f}})}else{return this.get(0).id}},$sum:function(d,e){var c=[],g,f;this.each(function(h){g=d.apply(h,e||[]);if(g){if(_.isArr(g)){for(f=0;h=g[f];f++){c[c.length]=h}}else{c[c.length]=g}}});return linb(c)},children:function(){return this.$sum(function(){return _.toArr(this.childNodes)})},clone:function(c){return this.$sum(function(){var h=this.cloneNode(c?true:false),e=h.getElementsByTagName("*"),g=linb.browser.ie,d=0,f;if(g){h.removeAttribute("$linbid")}else{delete h.$linbid}for(;f=e[d];d++){if(g){f.removeAttribute("$linbid")}else{delete f.$linbid}}return h},arguments)},$iterator:function(e,d,g,c,f){return this.$sum(function(r,k,w,s,u){var y=arguments.callee;if(typeof s!="function"){var l=s||0;s=function(z,m){return m==l}}var p=0,i,h=this,q=0,x;while(h){if(h.nodeType==1){if(s(h,p++)===true){break}}if(r=="x"){h=k?h.nextSibling:h.previousSibling}else{if(r=="y"){h=k?y.call(k===1?h.lastChild:h.firstChild,"x",(k!==1),true,0,u):h.parentNode}else{w=_.isBool(w)?w:true;i=null;h=k?(x=w&&h.firstChild)?x:(x=h.nextSibling)?x:(i=h.parentNode):(x=w&&h.lastChild)?x:(x=h.previousSibling)?x:(i=h.parentNode);if(i){while(!(i=k?h.nextSibling:h.previousSibling)){h=h.parentNode;if(!h){if(q){return null}else{q=true;i=k?document.body.firstChild:document.body.lastChild;break}}}h=i}w=true}}}return h},arguments)},query:function(d,n,m){d=d||"*";var k="getElementsByTagName",l=arguments.callee,i=l.f1||(l.f1=function(q,p,u){var s=this[k](q),f=[];if(u.test(this[p])){f[f.length]=this}for(var w,r=0;w=s[r];r++){if(u.test(w[p])){f[f.length]=w}}return f}),h=l.f2||(l.f2=function(q,p,u){var s=this[k](q),f=[];if(this[p]==u){f[f.length]=this}for(var w,r=0;w=s[r];r++){if(w[p]==u){f[f.length]=w}}return f}),g=l.f3||(l.f3=function(q,p,u){var s=this[k](q),f=[];if(this[p]){f[f.length]=this}for(var w,r=0;w=s[r];r++){if(w[p]){f[f.length]=w}}return f}),e=l.f4||(l.f4=function(f){return _.toArr(this[k](f))}),c=l.f5||(l.f5=function(q,p){var s=this[k](q),f=[];if(p(this)){f[f.length]=this}for(var u,r=0;u=s[r];r++){if(p(u)){f[f.length]=u}}return f});return this.$sum(n?typeof n=="function"?c:m?m.constructor==RegExp?i:h:g:e,[d,n,m])},$add:function(r,n,k){if(_.isHash(n)||_.isStr(n)){n=linb.create(n)}if(k){k=linb(n);n=this}else{n=linb(n);k=this}if(n._nodes.length){var m=k.get(0),s=n.get(),g=linb.Dom,c=linb.$cache.profileMap,q,w,d,h,e,f,u,w,l=[];n.each(function(i){w=(d=i.id)&&(d=c[d])&&d.LayoutTrigger&&g.getStyle(m,"display")!="none"&&d.LayoutTrigger;if(w){l.push([w,d])}});if(s.length==1){q=s[0]}else{q=document.createDocumentFragment();for(h=0;e=s[h];h++){q.appendChild(e)}}r.call(m,q);for(h=0;e=l[h];h++){for(f=0;u=e[0][f];f++){u.call(e[1])}if(e[1].onLayout){e[1].boxing().onLayout(e[1])}}l.length=0;m=e=q=null}return this},prepend:function(c,d){return this.$add(function(e){if(this.previousSibling!=e){if(this.firstChild){this.insertBefore(e,this.firstChild)}else{this.appendChild(e)}}},c,d)},append:function(c,d){return this.$add(function(e){if(this.lastChild!=e){this.appendChild(e)}},c,d)},addPrev:function(c,d){return this.$add(function(e){if(this.firstChild!=e){this.parentNode.insertBefore(e,this)}},c,d)},addNext:function(c,d){return this.$add(function(e){if(this.nextSibling!=e){if(this.nextSibling){this.parentNode.insertBefore(e,this.nextSibling)}else{this.parentNode.appendChild(e)}}},c,d)},replace:function(k,h){k=linb(k);var e,f,m=this.get(0),g=k.get(),d=g.length;if(d>0&&(e=g[d-1])){m.parentNode.replaceChild(e,m);for(f=0;f<d-1;f++){e.parentNode.insertBefore(g[f],e)}if(h){this.remove()}}m=e=null;return k},swap:function(e){var c=this,d=linb.Dom.getEmptyDiv().html("*",false);e=linb(e);c.replace(d,false);e.replace(c,false);d.replace(e,false);d.get(0).innerHTML="";document.body.insertBefore(d.get(0),document.body.firstChild);return c},remove:function(d){var e=linb.$getGhostDiv();if(d===false){this.each(function(f,c){if(f.parentNode){f.parentNode.removeChild(f)}})}else{this.each(function(c){e.appendChild(c)});linb.$purgeChildren(e);e.innerHTML="";e=null}return this},empty:function(c){return this.each(function(d){linb([d]).html("",c)})},html:function(m,d,k){var p="",n,g=this.get(0);d=d!==false;if(m!==undefined){if(g){if(g.nodeType==3){g.nodeValue=m}else{if(!g.firstChild&&m===""){return this}if(!d&&linb.browser.ie){while(n=g.firstChild){g.removeChild(n)}}if(d){linb.$purgeChildren(g)}if(k){var i=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,h=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,f=/\ssrc=([\'\"])(.*?)\1/i,e,l,c;while((e=i.exec(m))){l=e[1];c=l?l.match(f):false;if(c&&c[2]){linb.include(null,c[2])}else{if(e[2]&&e[2].length>0){_.exec(e[2])}}}m=m.replace(h,"")}g.innerHTML=m}g=null}return this}else{if(g){p=(g.nodeType==3)?g.nodeValue:g.innerHTML;g=null}return p}},outerHTML:function(h,c){var k=this,i,l="",e=k.get(0),d=e.id;if(h!==undefined){var f=k.replace(_.str.toDom(h),false);k._nodes[0]=f._nodes[0];linb([e]).remove(c);return k}else{if(linb.browser.gek){var g=linb.$getGhostDiv();g.appendChild(k.get(0).cloneNode(true));l=g.innerHTML;g.innerHTML="";g=null}else{l=e.outerHTML}e=null;return l}},text:function(e){if(e!==undefined){var d=this,c=[];d.each(function(g){var f=g.firstChild;if(f&&f.nodeType!=1){f.nodeValue=e}else{c[c.length]=g}});if(c.length){linb(c).empty().each(function(f){f.appendChild(document.createTextNode(e))})}return d}else{return(function(n){var h,g=n.childNodes,f=g.length,m="",k=arguments.callee;for(h=0;h<f;h++){if(g[h].nodeType!=8){m+=(g[h].nodeType!=1)?g[h].nodeValue:k(g[h])}}return m})(this.get(0))}},attr:function(d,m){var p=this,l=arguments.callee,h=l.map1||(l.map1={"class":"className",readonly:"readOnly",tabindex:"tabIndex","for":"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),g=l.map2||(l.map2={href:1,src:1,style:1});if(typeof d=="object"){for(var f in d){l.call(p,f,d[f])}return p}var n=linb.browser.ie&&d=="style",k=!g[d=h[d]||d];if(m!==undefined){return p.each(function(q){if(m===null){if(n){q.style.cssText=""}else{if(k){try{q[d]=null;if(q.nodeType==1){q.removeAttribute(d)}}catch(i){}}}}else{if(n){q.style.cssText=""+m}else{if(k){q[d]=m;if(q.nodeType==1&&d!="value"&&typeof m=="string"){q.setAttribute(d,m)}}else{q.setAttribute(d,m)}}}})}else{var c,e=p.get(0);if(n){return e.style.cssText}if(d=="selected"&&linb.browser.kde){e.parentNode.selectedIndex}c=((d in e)&&k)?e[d]:e.getAttribute(d,linb.browser.ie&&!k?2:undefined);e=null;return c}},css:function(c,d){return(typeof c=="object"||d!==undefined)?this.each(function(e){linb.Dom.setStyle(e,c,d)}):linb.Dom.getStyle(this.get(0),c)},caret:function(g,n){var x=this.get(0),z=x.tagName.toLowerCase(),u=typeof g,f=linb.browser.ie,w;if(!/^(input|textarea)$/i.test(z)){return}if(z=="input"&&x.type.toLowerCase()!="text"&&x.type.toLowerCase()!="password"){return}x.focus();if(u=="number"){if(f){var c=x.createTextRange();c.collapse(true);c.moveEnd("character",n);c.moveStart("character",g);c.select()}else{x.setSelectionRange(g,n)}return this}else{if(u=="string"){var c=this.caret(),k=0,i=0,s,y=x.value,h=/\r/g;if(f){k=y.substr(0,c[0]).match(h);k=(k&&k.length)||0;i=g.match(h);i=(i&&i.length)||0}if(linb.browser.opr){k=g.match(/\n/g);k=(k&&k.length)||0;i=g.match(/\r\n/g);i=(i&&i.length)||0;i=k-i;k=0}x.value=y.substr(0,c[0])+g+y.substr(c[1],y.length);s=c[0]-k+i+g.length;this.caret(s,s);return s}else{if(f){var c=document.selection.createRange(),p=c.text,k=p.length,q,i;if(z.toLowerCase()=="input"){c.moveStart("character",-x.value.length);q=c.text.length;return[q-k,q]}else{var d=c.duplicate();d.moveToElementText(x);d.setEndPoint("EndToEnd",c);q=d.text.length;return[q-k,q]}}else{return[x.selectionStart,x.selectionEnd]}}}},show:function(h,g){var e,d,i="auto",c=linb.Dom.HIDE_VALUE,f;return this.each(function(k){if(k.nodeType!=1){return}e=k.style;f=linb.getNodeData(k);if(d=(g||(e.top==c&&(f._top||i)))){e.top=d}if(d=(h||(e.left==c&&(f._left||i)))){e.left=d}if(d=f._position){if(e.position!=d){e.position=d}}f._linbhide=0;if(e.visibility!="visible"){e.visibility="visible"}})},hide:function(){var d,c,e;return this.each(function(f){if(f.nodeType!=1){return}d=f.style;c=linb([f]);e=linb.getNodeData(f);if(e._linbhide!==1){e._position=d.position;e._top=d.top;e._left=d.left;e._linbhide=1}if(d.position!="absolute"){d.position="absolute"}d.top=d.left=linb.Dom.HIDE_VALUE})},cssRegion:function(r,s){var x=this;if(typeof r=="object"){var l,w,e,d=x.get(0),k=linb.Dom,n=k._setPxStyle,e={};for(var h=0,p=k._boxArr;l=p[h++];){e[l]=((l in r)&&r[l]!==null)?n(d,l,r[l]):false}if(s){var n=k.$hasEventHandler;if(n(d,"onsize")&&(e.width||e.height)){x.onSize(true,{width:e.width,height:e.height})}if(n(d,"onmove")&&(e.left||e.top)){x.onMove(true,{left:e.left,top:e.top})}}return x}else{var g=r,u=s,q=g?x.offset(null,u):x.cssPos(),y=x.cssSize();return{left:q.left,top:q.top,width:y.width,height:y.height}}},cssSize:function(n,i){var m=this,d=m.get(0),c,e=linb.Dom,g=e._setPxStyle,k,h;if(n){var l;k=n.width!==null?g(d,"width",n.width):false;h=n.height!==null?g(d,"height",n.height):false;if(i&&(k||h)&&e.$hasEventHandler(d,"onsize")){m.onSize(true,{width:k,height:h})}c=m}else{c={width:m._W(d,1)||0,height:m._H(d,1)}}return c},cssPos:function(h,k){var d=this.get(0),e=linb.Dom,g=e._setPxStyle,l,i,c;if(h){var m;l=h.left!=null?g(d,"left",h.left):false;i=h.top!==null?g(d,"top",h.top):false;if(k&&(l||i)&&e.$hasEventHandler(d,"onmove")){this.onMove(true,{left:l,top:i})}c=this}else{g=e.getStyle;c={left:parseInt(g(d,"left"))||0,top:parseInt(g(d,"top"))||0}}d=null;return c},offset:function(h,u){var n,l,A=linb.browser,E=this,q=E.get(0),x=q,k=q.parentNode,i=q.offsetParent,D=q.ownerDocument,z=D.documentElement,B=D.body,e=/^inline|table.*$/i,g=linb.Dom.getStyle,f=g(q,"position")=="fixed",C=arguments.callee,m=C.add||(C.add=function(F,d,r){F.left+=parseInt(d,10)||0;F.top+=parseInt(r,10)||0}),s=C.border||(C.border=function(d,r){m(r,g(d,"borderLeftWidth"),g(d,"borderTopWidth"))}),p=C.TTAG||(C.TTAG={TABLE:1,TD:1,TH:1}),w=C.HTAG||(C.HTAG={BODY:1,HTML:1}),c=C.posDiff||(C.posDiff=function(G,F){var r=G.cssPos(),d=G.offset(null,F);return{left:d.left-r.left,top:d.top-r.top}});u=u?linb(u).get(0):D;if(h){if(h.left===null&&h.top===null){return E}var y=c(E,u);E.cssPos({left:h.left===null?null:(h.left-y.left),top:h.top===null?null:(h.top-y.top)});n=E}else{if(!(linb.browser.gek&&q===document.body)&&q.getBoundingClientRect){l=q.getBoundingClientRect();h={left:l.left,top:l.top};if(u.nodeType==1&&u!==document.body){m(h,-(l=u.getBoundingClientRect()).left+u.scrollLeft,-l.top+u.scrollTop)}else{m(h,Math.max(z.scrollLeft,B.scrollLeft)-z.clientLeft,Math.max(z.scrollTop,B.scrollTop)-z.clientTop)}}else{h={left:0,top:0};m(h,q.offsetLeft,q.offsetTop);while(i&&i!=u&&i!=u.offsetParent){m(h,i.offsetLeft,i.offsetTop);if(A.kde||(A.gek&&!p[i.tagName])){s(i,h)}if(!f&&g(i,"position")=="fixed"){f=true}if(i.tagName!="BODY"){x=i.tagName=="BODY"?x:i}i=i.offsetParent}while(k&&k.tagName&&k!=u&&!w[k.tagName]){if(!e.test(g(k,"display"))){m(h,-k.scrollLeft,-k.scrollTop)}if(A.gek&&g(k,"overflow")!="visible"){s(k,h)}k=k.parentNode}if((A.gek&&g(x,"position")!="absolute")){m(h,-B.offsetLeft,-B.offsetTop)}if(f){m(h,Math.max(z.scrollLeft,B.scrollLeft),Math.max(z.scrollTop,B.scrollTop))}}n=h}return n},hasClass:function(d){var c=this.get(0).className.split(/\s+/);return _.arr.indexOf(c,d)!=-1},addClass:function(d){var c,e,g=arguments.callee,f=(g.reg||(g.reg=/\s+/));return this.each(function(h){c=(e=h.className).split(f);if(_.arr.indexOf(c,d)==-1){h.className=e+" "+d}})},removeClass:function(c){var g,f,e,k,n,m=typeof c=="string",h=arguments.callee,d=(h.reg||(h.reg=/\s+/));return this.each(function(i){g=i.className.split(d);e=g.length;k=[];for(f=0;n=g[f];f++){if(m?(n!=c):(!c.test(String(n)))){k[k.length]=n}}if(e!=k.length){i.className=k.join(" ")}})},replaceClass:function(e,c){var f,d;return this.each(function(g){d=(f=g.className).replace(e,c);if(f!=d){g.className=d}})},tagClass:function(c,g){var f=this,h=arguments.callee,e=h["_r1_"+c]||(h["_r1_"+c]=new RegExp("([-\\w]+"+c+"[-\\w]*)")),d=h._r2||(h._r2=/([-\w]+)/g);f.removeClass(e);return(false===g)?f:f.replaceClass(d,"$1 $1"+c)},$addEventHandler:function(c){var f=linb.Event,e,d=f.$eventhandler;return this.each(function(g){if(g.nodeType==3){return}linb.setNodeData(g,["eHandlers","on"+f._eventMap[c]],d);if(e=f._eventHandler[c]){g[e]=d;linb.setNodeData(g,["eHandlers",e],d)}})},$removeEventHandler:function(c){var e=linb.Event,d;return this.each(function(f){if(d=e._eventHandler[c]){f[d]=null}if(f=linb.getNodeData(f,"eHandlers")){delete f["on"+e._eventMap[c]]}})},$addEvent:function(e,l,n,i){var r=this,d=linb.Event,h=_.arr.removeValue,p=_.arr.insertAny,f,k,q,g;if(!i&&i!==0){i=-1}if(typeof n=="string"){n="$"+n}else{n=undefined}r.$addEventHandler(e).each(function(c){if(c.nodeType==3){return}if(!(f=d.getId(c))){f=c.id=linb.Dom._pickDomId()}if(!(k=linb.$cache.profileMap[f])){k=new linb.DomProfile(f)}q=k.events||(k.events={});g=q[e]||(q[e]=[]);if(n===undefined){g.length=0;g=q[e]=[];i=-1;n="_"}g[n]=l;h(g,n);if(i==-1){g[g.length]=n}else{p(g,n,i)}if(linb.Event&&(k=linb.Event._getProfile(f))&&k.clearCache){k.clearCache()}});return r},$removeEvent:function(e,q,g){var s=this,p,r,h,f,m,n,d=linb.Event,l=linb.$cache.profileMap,n=d._eventMap[e];s.each(function(c){if(!(f=d.getId(c))){return}if(!(p=l[f])){return}if(!(r=p.events)){return}if(g){_.arr.each(d._getEventName(n),function(i){delete r[i]})}else{if(typeof q=="string"){q="$"+q;if(h=r[e]){if(_.arr.indexOf(h,q)!=-1){_.arr.removeValue(h,q)}delete h[q]}}else{delete r[e]}}if(linb.Event&&(p=linb.Event._getProfile(f))&&p.clearCache){p.clearCache()}});return s},$getEvent:function(e,d){var g;if(!(g=linb.Event.getId(this.get(0)))){return}if(d){return _.get(linb.$cache.profileMap,[g,"events",e,"$"+d])}else{var f=[],c=_.get(linb.$cache.profileMap,[g,"events",e]);_.arr.each(c,function(k,h){f[f.length]={o:c[k]}});return f}},$clearEvent:function(){return this.each(function(c){if(!(c=linb.Event.getId(c))){return}if(!(c=linb.$cache.profileMap[c])){return}_.breakO(c.events,2);delete c.events;_.arr.each(linb.Event._events,function(d){c["on"+d]=null})})},$fireEvent:function(c,i){var l=linb.Event._eventMap[c],n,p="on"+l,m,g,k=arguments.callee,h=linb.Event.$eventhandler,e=k.f1||(k.f1=function(){this.returnValue=false}),d=k.f2||(k.f2=function(){this.cancelBubble=true});return this.each(function(q){if(!(m=linb.getNodeData(q,["eHandlers",p]))){return}if("blur"==l||"focus"==l){try{q[l]()}catch(f){}}else{g=_.copy(i);_.merge(g,{type:l,target:q,button:1,$e:true,$name:c,preventDefault:e,stopPropagation:d},"all");m.call(q,g)}})},$canFocus:function(){var f=arguments.callee,c=linb.Dom.getStyle,g=f.map||(f.map={a:1,input:1,select:1,textarea:1,button:1,object:1}),d,e;return !!((e=this.get(0))&&e.focus&&(((d=g[e.tagName.toLowerCase()])&&!(parseInt(e.tabIndex)<=-1))||(!d&&parseInt(e.tabIndex)>=(linb.browser.ie?1:0)))&&c(e,"display")!="none"&&c(e,"visibility")!="hidden"&&e.offsetWidth>0&&e.offsetHeight>0)},focus:function(d){var c=this;if(d||c.$canFocus()){try{c.get(0).focus()}catch(f){}}return c},setSelectable:function(d){var c=arguments.callee,e=c._f||(c._f=function(){return false});return this.each(function(f){if(linb.browser.gek){f.style.MozUserSelect=d?"text":"none"}else{f.unselectable=d?"off":"on";f.onselectstart=d?null:e}})},setInlineBlock:function(){var c=this;if(linb.browser.gek){if(parseFloat(linb.browser.ver)<3){c.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block")}else{c.css("display","inline-block")}}else{if(linb.browser.ie6){c.css("display","inline-block").css({display:"inline",zoom:"1"})}else{c.css("display","inline-block")}}return c},topZindex:function(c){var g=1000,e=0,d,h=this.get(0),l=h.offsetParent,f,m;if(h.nodeType!=1||!l){return 1}f=l.childNodes;for(d=0;m=f[d];d++){if(m==h||m.nodeType!=1||!m.$linbid||m.style.display=="none"||m.style.visibility=="hidden"||linb.getNodeData(m,"zIndexIgnore")){continue}e=parseInt(m.style&&m.style.zIndex)||0;g=g>e?g:e}g++;if(g>=linb.Dom.TOP_ZINDEX){linb.Dom.TOP_ZINDEX=g+1000}if(c){h.style.zIndex=g}else{e=parseInt(h.style.zIndex)||0;return g>e?g:e}return this},nextFocus:function(f,e,d){f=_.isBool(f)?f:true;var c=this.get(0),g=this.$iterator("",f,e,function(h){return h!==c&&linb([h]).$canFocus()});if(!g.isEmpty()&&d!==false){g.focus()}c=null;return g},animate:function(l,q,c,e,d,n,f,p){var m=arguments.callee,h=m.lib||(m.lib={linear:function(u,w){return u/w},expoIn:function(u,w){return(u/w==0)?0:Math.pow(2,10*(u/w-1))},expoOut:function(u,w){return(u/w==1)?1:-Math.pow(2,-10*u/w)+1},expoInOut:function(u,w){if(u==0){return 0}else{if(u==w){return 1}else{if((u/=w/2)<1){return 1/2*Math.pow(2,10*(u-1))}}}return 1/2*(-Math.pow(2,-10*--u)+2)},sineIn:function(u,w){return -1*Math.cos(u/w*(Math.PI/2))+1},sineOut:function(u,w){return Math.sin(u/w*(Math.PI/2))},sineInOut:function(u,w){return -1/2*(Math.cos(Math.PI*u/w)-1)},backIn:function(u,w){var y=1.70158;return(u/=w)*u*((y+1)*u-y)},backOut:function(u,w){var y=1.70158;return((u=u/w-1)*u*((y+1)*u+y)+1)},backInOut:function(u,w){var y=1.70158;if((u/=w/2)<1){return 1/2*(u*u*(((y*=(1.525))+1)*u-y))}return 1/2*((u-=2)*u*(((y*=(1.525))+1)*u+y)+2)},bounceOut:function(u,w){if((u/=w)<(1/2.75)){return 7.5625*u*u}else{if(u<(2/2.75)){return 7.5625*(u-=(1.5/2.75))*u+0.75}else{if(u<(2.5/2.75)){return 7.5625*(u-=(2.25/2.75))*u+0.9375}else{return 7.5625*(u-=(2.625/2.75))*u+0.984375}}}}}),g=m.color||(m.color=function(y,x,s,u){var w,z,C=0+(100-0)*h[y](u,s),B=x[0],A=x[1];if(typeof B!="string"||typeof A!="string"){return"#fff"}if(C<0){return B}else{if(C>100){return A}}w=function(D){return(D.charAt(0)!="#")?("#"+D):D};B=w(B);A=w(A);w=function(F,E,D){return parseInt(F.slice(E,D),16)||0};z=function(D){return{red:w(D,1,3),green:w(D,3,5),blue:w(D,5,7)}};B=z(B);A=z(A);w=function(H,G,E,F){var D=H[F]+Math.round((E/100)*(G[F]-H[F]));return(D<16?"0":"")+D.toString(16)};return"#"+w(B,A,C,"red")+w(B,A,C,"green")+w(B,A,C,"blue")});e=e||100;d=d||5;n=h[n]!==undefined?n:"expoIn";var r=this,k=0,i=[function(s){if(++k>d){linb.Thread(s).abort();return false}_.each(l,function(x,u){if(typeof x=="function"){x(h[n](k,d))}else{var w=String(_.str.endWith(u.toLowerCase(),"color")?g(n,x,d,k):(x[0]+(x[1]-x[0])*h[n](k,d)));(r[u])?(r[u](w+(p||""))):(r.css(u,w+(p||"")))}})}];return linb.Thread(f||_.id(),i,Math.max(e/d-9,0),null,q,c,true)},popToTop:function(l,k,p){var m,i=this,q;p=linb(p);if(p.isEmpty()){p=linb("body")}i.css({position:"absolute",left:linb.Dom.HIDE_VALUE,top:linb.Dom.HIDE_VALUE,display:"block",zIndex:linb.Dom.TOP_ZINDEX});if(l["linb.Dom"]||l.nodeType==1||typeof l=="string"){k=(k||1).toString();var e=linb(l),r=e.offset(null,p);m={left:r.left,top:r.top,width:e.offsetWidth(),height:e.offsetHeight()}}else{k=k?"3":"0";q=k=="0"?0:8;m=l.region||{left:l.left-q,top:l.top-q,width:q*2,height:q*2}}l={left:0,top:0};var q=(p.get(0)===document.body||p.get(0)===document||p.get(0)===window)?linb.win:p,g={};g.left=q.scrollLeft();g.top=q.scrollTop();g.width=q.width()+g.left;g.height=q.height()+g.top;var n=i.offsetWidth(),f=i.offsetHeight(),d,c;switch(k){case"1":d=false;c=true;break;case"2":d=true;c=false;break;case"3":d=false;c=false;break;case"4":d=c=true;break}if(d){if(m.top+f<g.height){l.top=m.top}else{l.top=m.top+m.height-f}}else{if(m.top+m.height+f<g.height){l.top=m.top+m.height}else{l.top=m.top-f}}if(c){if(m.left+n<g.width){l.left=m.left}else{l.left=m.left+m.width-n}}else{if(m.left+m.width+n<g.width){l.left=m.left+m.width}else{l.left=m.left-n}}if(l.left+n>g.width){l.left=g.width-n}if(l.left<g.left){l.left=g.left}if(l.top+f>g.height){l.top=g.height-f}if(l.top<g.top){l.top=g.top}i.cssPos(l).css({visibility:"visible",display:"block"});p.append(i);return this},setBlurTrigger:function(c,e,l){var i=this,k=document,d="$blur_triggers$",h=linb.Dom._blurTrigger||(linb.Dom._blurTrigger=function(m,r){var s=arguments.callee,m=linb.Event.getPos(r),q=s.arr,y=_.copy(q),x,u,z,n,A;_.arr.each(y,function(p){x=true;if(!(A=q[p].target)){x=false}else{A.each(function(w){if(!linb.Dom.byId(w.id)){return x=false}})}if(!x){_.arr.removeValue(q,p);delete q[p]}});y=_.copy(q);_.arr.each(y,function(p){A=q[p];x=true;A.target.each(function(w){if(w.parentNode&&(z=w.offsetWidth)&&(n=w.offsetHeight)){u=linb([w]).offset();if(m.left>=u.left&&m.top>=u.top&&m.left<=(u.left+z)&&m.top<=(u.top+n)){return x=false}}});if(x){_.tryF(A.trigger,[],A.target);_.arr.removeValue(q,p);delete q[p]}else{return false}},null,true);y.length=0}),f=h.arr||(h.arr=[]),g;if(l){if(l["linb.Dom"]){g=l}else{if(_.isArr(l)){g=linb();g._nodes=l}}}else{g=i}if(!k.onmousedown){k.onmousedown=linb.Event.$eventhandler}g.each(function(m){if(!m.id){m.id=linb.Dom._pickDomId()}});if(!e){_.arr.removeValue(f,c);delete f[c]}else{if(f[c]){_.arr.removeValue(f,c);delete f[c]}}f[c]={trigger:e,target:g};f.push(c);return this},$firfox2:function(){if(!linb.browser.gek2){return this}var c=this;c.css("overflow","hidden");_.asyRun(function(){c.css("overflow","auto")});return c},ieRemedy:function(){if(linb.browser.ie){var e=this.get(),c=[],d=e.length;_.asyRun(function(){for(var f=0;f<d;f++){if((c[f]=e[f].style.WordWrap)=="break-word"){e[f].style.WordWrap="normal"}else{e[f].style.WordWrap="break-word"}}});_.asyRun(function(){for(var f=0;f<d;f++){e[f].style.WordWrap=c[f]}e.length=c.length=0})}return this},fixPng:function(c){if(linb.browser.ie6){c=c||"crop";return this.each(function(f){if(f.tagName=="IMG"&&/\.png$/i.test(f.src)){f.style.height=f.height;f.style.width=f.width;f.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+f.src+", sizingMethod="+c+")";f.src=linb.ini.img_bg}var e=f.currentStyle.backgroundImage||f.style.backgroundImage,d=e.match(/^url[("']+(.*\.png[^\)"']*)[\)"']+[^\)]*$/i);if(d){f.style.backgroundImage="url("+linb.ini.img_bg+")";f.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+d[1]+", sizingMethod="+c+")"}})}}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:10000,_boxArr:_.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var c;do{c="linb_"+_.id()}while(document.getElementById(c));return c},_map:{html:1,head:1,body:1},_getTag:function(c){return c?c.$linbid?c.$linbid:c.nodeType==1?linb.$registerNode(c).$linbid:0:0},_ensureValues:function(h){var f,e,g=this._map,d=[],c=h===window?["!window"]:h===document?["!document"]:h.constructor==Array?h:h["linb.Dom"]?h._nodes:h._toDomElems?h._toDomElems():typeof h=="function"?h():[h];for(e=0;e<c.length;e++){if(f=!(f=c[e])?0:f===window?"!window":f===document?"!document":(typeof f=="string"||(f["linb.DomProfile"]&&(f=f.domId)))?f.charAt(0)=="!"?f:this._getTag(g[f]?document.getElementsByTagName(f)[0]:document.getElementById(f)):((f=c[e])["linb.UIProfile"]||f["linb.Template"])?f.renderId?f.renderId:(f.boxing().render()&&f.renderId):this._getTag(f)){d[d.length]=f}}return d.length<=1?d:this._unique(d)},_scrollBarSize:0,getScrollBarSize:function(d){var c=this;if(d||!c._scrollBarSize){var e;linb("body").append(e=linb.create('<div style="width:50px;height:50px;visibility:hidden;position:absolute;margin:0;padding:0;left:-10000px;overflow:scroll;"></div>'));c._scrollBarSize=50-e.get(0).clientWidth+2;e.remove()}return c._scrollBarSize},getStyle:function(e,d){if(!e||e.nodeType!=1){return""}var l,k;if(d=="opacity"&&linb.browser.ie){k=d="filter"}l=e.style[d];if(!l){var i=arguments.callee,m,c=i.map||(i.map={"float":1,cssFloat:1,styleFloat:1}),g=i._c1||(i._c1={}),f=i._c2||(i._c2={}),d=g[d]||(g[d]=d.replace(/\-(\w)/g,function(p,n){return n.toUpperCase()})),h=f[d]||(f[d]=d.replace(/([A-Z])/g,"-$1").toLowerCase());if(c[d]){d=linb.browser.ie?"styleFloat":"cssFloat"}l=((m=document.defaultView)&&m.getComputedStyle)?(m=m.getComputedStyle(e,null))?m.getPropertyValue(h):"":(e.currentStyle&&(e.currentStyle[d]||e.currentStyle[h]))}return k?l?(parseFloat(l.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:(l||"")},setStyle:function(h,d,k){if(h.nodeType!=1){return}if(typeof d=="string"){var g=this.getStyle,f=g._c1||(g._c1={}),c=g._r1||(g._r1=/alpha\([^\)]*\)/ig);d=f[d]||(f[d]=d.replace(/\-(\w)/g,function(l,i){return i.toUpperCase()}));if(d=="opacity"){k=parseFloat(k)||0;k=k>0.9999?"":linb.browser.ie?"alpha(opacity="+100*k+")":k;if(linb.browser.ie){h.zoom=1;d="filter";k=h.style.filter.replace(c,"")+k}}h.style[d]=k}else{for(var e in d){arguments.callee.call(this,h,e,d[e])}}},_setPxStyle:function(e,c,f){if(e.nodeType!=1){return false}var d=e.style;if(f||f===0){f=((""+parseFloat(f))==(""+f))?(parseInt(f)||0)+"px":f+"";if((c=="width"||c=="height")&&f.charAt(0)=="-"){f="0"}if(d[c]!=f){d[c]=f;return true}}return false},_emptyDivId:"linb.empty::",getEmptyDiv:function(g){var h=1,d,f,c,e,n,l=0,m=document,k=m.body,p=function(i){i.id=d;linb([i]).attr("style","position:absolute;visibility:hidden;overflow:visible;left:"+linb.Dom.HIDE_VALUE+";top:"+linb.Dom.HIDE_VALUE+";")};g=g||1;while(1){d=this._emptyDivId+h;if(e=linb.Dom.byId(d)){if(!e.firstChild&&++l==g){return linb([e])}}else{e=m.createElement("div");p(e,d);if(k.firstChild){k.insertBefore(e,k.firstChild)}else{k.appendChild(e)}f=linb([e]);k=e=null;return f}h++}k=e=null},setCover:function(e,i){var h=arguments.callee,c="linb.temp:cover:",k="linb.temp:message:",g=typeof e=="string"?e:"",f,d;if((f=linb(c)).isEmpty()){linb("body").prepend(f=linb.create('<div id="'+c+'" style="position:absolute;display:none;left:0;top:0;background-image:url('+linb.ini.img_bg+')"><div id="'+k+'" style="position:absolute;font-size:12px"></div></div>'));linb.setNodeData(f.get(0),"zIndexIgnore",1)}d=linb(k);if(!e){if(typeof h._label=="string"&&h._label!==i){return}if(h._showed){d.empty(false);f.css({zIndex:0,cursor:"",display:"none"});h._showed=false}delete h._label}else{if(typeof i=="string"){h._label=i}var l=linb.win;if(!h._showed){f.css({zIndex:linb.Dom.TOP_ZINDEX*2,display:"",width:l.scrollWidth()+"px",height:l.scrollHeight()+"px",cursor:"progress"});h._showed=true}if(g){d.css({left:l.scrollLeft()+l.width()/2+"px",top:l.scrollTop()+l.height()/2+"px"});d.html(g+"",false)}}},byId:function(c){return document.getElementById(c||"")},$hasEventHandler:function(d,c){return linb.getNodeData(d,["eHandlers",c])},submit:function(g,f,k,h,e){f=_.isHash(f)?f:{};f=_.clone(f,function(d){return d!==undefined});k=k||"get";g=g||"";h=h||"_blank";var c=[];_.each(f,function(l,d){if(_.isDefined(l)){c.push('<textarea name="'+d+'">'+(typeof l=="object"?_.serialize(l):l)+"</textarea>")}});if(!_.isEmpty(f)){c.push('<input type="hidden" name="rnd" value="'+_()+'">')}var i=_.str.toDom('<form target="'+h+'" action="'+g+'" method="'+k+(e?'" enctype="'+e:"")+'">'+c.join("")+"</form>");linb.Dom.getEmptyDiv().append(i);i.get(0).submit();i.remove()},busy:function(c){linb.Dom.setCover(true,c)},free:function(c){linb.Dom.setCover(false,c)},animate:function(h,i,m,c,f,d,k,g,l){var e=document.createElement("div");_.merge(h,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX+10});linb.Dom.setStyle(e,h);document.body.appendChild(e);return linb([e]).animate(i,m,function(){_.tryF(c);if(e.parentNode){e.parentNode.removeChild(e)}e=null},f,d,k,g,l)},$enableEvents:function(d){if(!_.isArr(d)){d=[d]}var c=this,e;_.arr.each(d,function(f){e=function(h,k,g){if(typeof h=="function"){return this.$addEvent(f,h,k,g)}else{if(h===null){return this.$removeEvent(f,k,g)}}var i=arguments[1]||{};i.$all=(arguments[0]===true);return this.$fireEvent(f,i)};e.$event$=1;c.plugIn(f,e)})}},After:function(E){var x=this;_.each({parent:["y",false],prev:["x",false],next:["x",true],first:["y",true],last:["y",1]},function(d,c){x.plugIn(c,function(h){return this.$iterator(d[0],d[1],true,h||1)})});_.arr.each(_.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),function(c){x.plugIn(c,function(){var p=this.get(0),m=window,r=document;if(p==m||p==r){if("scrollWidth"==c||"scrollHeight"==c){var l=r.documentElement,h=r.body;return Math.max(l[c],h[c])}else{p=linb.browser.contentBox?r.documentElement:r.body}}return p[c]})});var y="padding",A="margin",G="border",F="inner",z="offset",s="outer",n="width",D="height",e="Width",k="Height",f="Top",i="Left",q="top",C="left",g="Right",u="Bottom";_.arr.each([["_"+y+"H",y+f,y+u],["_"+y+"W",y+i,y+g],["_"+G+"H",G+f+e,G+u+e],["_"+G+"W",G+i+e,G+g+e],["_"+A+"W",A+i,A+g],["_"+A+"H",A+f,A+u]],function(h){var d,c=linb.Dom.getStyle;x.plugIn(h[0],function(){d=this.get(0);return(parseInt(c(d,h[1]))+parseInt(c(d,h[2])))||0})});_.arr.each([["_W",n,"_"+y+"W","_"+G+"W","_"+A+"W",F+e,z+e],["_H",D,"_"+y+"H","_"+G+"H","_"+A+"H",F+k,z+k]],function(c){x.plugIn(c[0],function(N,w,M){var L,J,H,P=N.style,U=arguments.callee,I=linb.browser.contentBox,O=U.r1||(U.r1=/%$/),m=linb.Dom.getStyle,Q=linb.Dom._setPxStyle,l=typeof M,B;if(l=="undefined"||l=="boolean"){if(M===true){L=(m(N,"display")=="none");if(L){var S=linb.Dom.getEmptyDiv().html("*",false);linb([N]).swap(S);var T,K,R;T=P.visibility,K=P.position,R=P.display;K=K||"";T=T||"";R=R||"";P.visibility="hidden";P.position="absolute";P.display="block"}}H=linb([N]);switch(w){case 1:J=m(N,c[1]);if(isNaN(parseInt(J))||O.test(J)){J=U(N,2)-(I?H[c[2]]():0)}J=parseInt(J)||0;break;case 2:J=N[c[6]]-H[c[3]]();break;case 3:J=N[c[6]];if(!J){J=U(N,1)+(I?H[c[2]]():0)+H[c[3]]()}break;case 4:J=U(N,3);J+=H[c[4]]();break}if(L){P.display=R;P.position=K;P.visibility=T;H.swap(S);S.empty(false)}return parseInt(J)||0}else{switch(w){case 1:if(Q(N,c[1],M)){if(linb.Dom.$hasEventHandler(N,"onsize")){var h={};h[c[1]]=1;linb([N]).onSize(true,h)}}break;case 2:U(N,1,M-(I?linb([N])[c[2]]():0));break;case 3:U(N,1,M-(H=linb([N]))[c[3]]()-(I?H[c[2]]():0));break;case 4:U(N,1,M-(H=linb([N]))[c[4]]()-H[c[3]]()-(I?H[c[2]]():0));break}}})});_.arr.each([[F+e,"_W",2],[z+e,"_W",3],[s+e,"_W",4],[F+k,"_H",2],[z+k,"_H",3],[s+k,"_H",4]],function(c){x.plugIn(c[0],function(h){var d=typeof h;if(d=="undefined"||d=="boolean"){return this[c[1]](this.get(0),c[2])}else{return this.each(function(l){this[c[1]](l,c[2],h)})}})});_.arr.each([[C+"By",C],[q+"By",q],[n+"By",n],[D+"By",D]],function(c){x.plugIn(c[0],function(w,r){if(w===0){return this}var d,p,l=c[1],h=linb.Dom.getStyle;return this.each(function(m){d=h(m,l);d=(parseInt(d)||0)+w;if(l=="width"||l=="height"){d=d>0?d:0}m.style[l]=d+"px";if(r){p={};p[l]=1;var B=linb.Dom.$hasEventHandler;if((l=="left"||l=="top")&&B(m,"onmove")){linb([m]).onMove(true,p)}if((l=="width"||l=="height")&&B(m,"onsize")){linb([m]).onSize(true,p)}}},this)})});_.arr.each(["scrollLeft","scrollTop"],function(c){x.plugIn(c,function(m){if(m!==undefined){return this.each(function(p){p[c]=m})}else{var l=this.get(0);if(l===window||l===document){var h=document.documentElement,d=document.body;if("scrollTop"==c){return window.pageYOffset||Math.max(h[c],d[c])}if("scrollLeft"==c){return window.pageXOffset||Math.max(h[c],d[c])}}return l[c]}})});_.arr.each("width,height,left,top".split(","),function(c){x.plugIn(c,function(w){var H=this,d=H.get(0),m=linb.browser,l=typeof w,r=document,B;if(!d||d.nodeType==3){return}if(l=="undefined"||l=="boolean"){if((c=="width"&&(B="Width"))||(c=="height"&&(B="Height"))){if(r===d){return Math.max(r.body["scroll"+B],r.body["offset"+B],r.documentElement["scroll"+B],r.documentElement["offset"+B])}if(window===d){return m.opr?Math.max(r.body["client"+B],window["inner"+B]):m.kde?window["inner"+B]:(linb.browser.contentBox&&r.documentElement["client"+B])||r.body["client"+B]}}if(c=="width"){w=parseInt(d.style.width)||H._W(d,1,w)}else{if(c=="height"){w=parseInt(d.style.height)||H._H(d,1,w)}else{w=linb.Dom.getStyle(d,c)}}return w=="auto"?w:(parseInt(w)||0)}else{var h=linb.Dom._setPxStyle,B,p;return H.each(function(I){if(I.nodeType!=1){return}if(I.style[c]!==w){if(c=="width"){H._W(I,1,w)}else{if(c=="height"){H._H(I,1,w)}else{if(h(I,c,w)){if((c=="top"||c=="left")&&linb.Dom.$hasEventHandler(d,"onmove")){p={};p[c]=1;linb([I]).onMove(true,p)}}}}}})}})});_.arr.each(linb.Event._events,function(c){_.arr.each(linb.Event._getEventName(c),function(d){x.$enableEvents(d)})})},Initialize:function(){_.set(linb.$cache.domPurgeData,"!window",{$linbid:"!window",element:window});_.set(linb.$cache.domPurgeData,"!document",{$linbid:"!document",element:document});linb.win=linb(["!window"],false);linb.doc=linb(["!document"],false);linb.$inlineBlock=linb.browser.gek?parseFloat(linb.browser.ver)<3?["-moz-inline-block","-moz-inline-box","inline-block"]:"inline-block":linb.browser.ie6?["inline-block","inline"]:"inline-block",linb.doc.onKeydown(function(f,d){var c=linb.Event,h,g=c.$keyboard=c.getKey(d);if(g){if(g[0].length==1){g[0]=g[0].toLowerCase()}h=linb.$cache.hookKey[g.join(":")];if(h){if(_.tryF(h[0],h[1],h[2])===false){c.stopBubble(d);return false}}}return true},"document").onKeyup(function(d,c){delete linb.Event.$keyboard},"document");linb.doc.onClick(function(k,h,m){if(!linb.History){return}var g=location.href.split("#")[0],f=linb.Event,l=f.getSrc(h),c,d=0,c;do{if(l.tagName=="A"){c=true;break}if(++d>8){break}}while(l=l.parentNode);if(c){if(l.href.indexOf("javascript:")==0){return false}if(!f.getKey(h).shiftKey&&f.getBtn(h)=="left"&&(l.href.indexOf(g+"#")==0||l.href.indexOf("#")==0)){linb.History.setFI(l.href.replace(g,""));return false}}},"hookA",0);if(linb.browser.ie||linb.browser.kde){document.onselectstart=function(){try{var d=event.srcElement;if(d.tagName=="INPUT"||d.tagName=="TEXTAREA"||d.tagName=="PRE"||d.tagName=="CODE"){return event.srcElement.unselectable!="on"}return false}catch(c){return false}}}linb.win.afterUnload(function(){window.onresize=null;if(window.removeEventListener){window.removeEventListener("DOMMouseScroll",linb.Event.$eventhandler3,false)}document.onmousewheel=window.onmousewheel=null;if(linb.browser.ie||linb.browser.kde){document.onselectstart=null}linb.SC.__gc();linb.Thread.__gc();linb([window,document]).$clearEvent();linb("body").empty();_.breakO(linb.$cache,2);_.breakO([linb,Class,_],3);window.Class=window.Namespace=window.linb=window._=undefined},"window",-1)}});Class("linb.Template","linb.absProfile",{Constructor:function(f,e,d,g){arguments.callee.upper.apply(this,arguments);var c=this;c.$domId=c.KEY+":"+(c.serialId=c._pickSerialId())+":";c.domId=typeof g=="string"?g:c.$domId;c._links={};c.template={root:[["<div></div>"],[]]};c.properties={};c.events={};c.$template={};c.link(c.constructor._cache,"self").link(linb._pool,"linb");c.box=c.constructor;c.boxing=function(){return this};if(f){c.setTemplate(typeof f=="string"?{root:f}:f)}if(d){c.setEvents(d)}if(e){c.setProperties(e)}return c},Instance:{renderId:null,__gc:function(){var c=this,d=linb.$cache.reclaimId;if(!c.$noReclaim){(d[c.KEY]||(d[c.KEY]=[])).push(c.serialId)}else{delete c.$noReclaim}delete linb.$cache.profileMap[c.domId];delete linb.$cache.profileMap[c.$domId];c.unLinkAll();_.breakO([c.properties,c.event,c],2)},_reg0:/^\w[\w_-]*$/,show:function(c){if(!c){c=linb("body")}c=linb(c);c.append(this);return this},getRootNode:function(){return linb.getNodeData(this.renderId,"element")},getRoot:function(){return linb([this.renderId],false)},setDomId:function(g){var d=this,f=linb.$cache.profileMap,e=d._reg0;if(typeof g=="string"&&e.test(g)&&!document.getElementById(g)){if(d.domId!=d.$domId){delete f[d.domId]}d.domId=g;if(d.renderId){d.getRootNode().id=g}if(f[d.$domId]){f[g]=d}}return d},destroy:function(){if(this.renderId){var c=this.getRootNode();linb.$purgeChildren(c);if(c.parentNode){c.parentNode.removeChild(c)}c=null}else{this.__gc()}},setEvents:function(d,e){var c=this;if(typeof d=="object"){c.events=d}else{c.events[d]=e}return c},setTemplate:function(f,k){var c=this,e=c.template,l=c.$template,g;if(typeof f=="object"){c.template=f;g={};for(var d in f){g[d||"root"]=c._buildTemplate(f[d])}c.$template=g}else{if(typeof k=="string"){l[f]=c._buildTemplate(e[f]=k)}else{l.root=c._buildTemplate(e.root=f)}}return c},setProperties:function(d,e){var c=this;if(typeof d=="object"){c.properties=d}else{c.properties[d]=e}return c},getItem:function(h){var g=linb.getNodeData(h);if(!g){return}var i=g.tpl_evid,d=g.tpl_evkey;if(!i||!d){return}var c=arguments.callee,e=c.f||(c.f=function(n,m,q){var l,p,k,f;for(k in n){p=n[k];if(_.isArr(p)&&(m==k||m.indexOf((n.tpl_evkey||k)+".")===0)){for(l=0;f=p[l];l++){if(f.tpl_evkey==m&&f.id==q){return f}else{if(f=e(f,m,q)){return f}}}}}});return e(this.properties,d,i)},_pickSerialId:function(){var c=linb.$cache.reclaimId[this.KEY];if(c&&c[0]){return c.shift()}return this.constructor._ctrlId.next()},render:function(){var z=this;if(!z.renderId){var d=linb.$getGhostDiv();linb.$cache.profileMap[z.domId]=linb.$cache.profileMap[z.$domId]=this;d.innerHTML=z.toHtml();var c=z.events,q=linb.Event._eventHandler,h=d.getElementsByTagName("*"),n=z.$domId,u=function(){return linb.Event(arguments[0],this,0,n)},s,m,r,p,g,x,e,y,w;if(m=h.length){for(s=0;s<m;s++){if((g=h[s]).nodeType!=1){continue}x=g.getAttribute("tpl_evkey");e=g.getAttribute("tpl_evid");if(x!==null&&e!==null){w=linb.$registerNode(g);w.tpl_evkey=x;w.tpl_evid=e;if(y=c[x]){w=w.eHandlers||(w.eHandlers={});for(r in y){w[r]=u;if(p=q[r]){w[p]=g[p]=u}}}g.removeAttribute("tpl_evkey");g.removeAttribute("tpl_evid")}}if(!d.firstChild.$linbid){linb.$registerNode(d.firstChild)}z.renderId=d.firstChild.$linbid}g=d=null}return z},refresh:function(){var e=this;if(e.renderId){var d=document.createElement("span"),f=e.getRootNode(),c=linb.$cache.profileMap;delete c[e.domId];delete c[e.$domId];if(f.parentNode){f.parentNode.replaceChild(d,f)}e.destroy();delete e.renderId;e.render();if(d.parentNode){d.parentNode.replaceChild(e.getRootNode(),d)}d=f=null}return e},renderOnto:function(g){var c=this,h,f,e="style",d;if(typeof g=="string"){g=document.getElementById(g)}h=g.id||c.domId;if(!c.renderId){c.render()}f=c.getRootNode();g.parentNode.replaceChild(f,g);if(f.tabIndex!=g.tabIndex){f.tabIndex!=g.tabIndex}if(g.className){f.className+=g.className}if(linb.browser.ie&&(d=g.style.cssText)){f.style.cssText+=d+""}else{if(d=g.getAttribute(e)){f.setAttribute(e,(f.getAttribute(e)||"")+d)}}this.setDomId(h)},toHtml:function(c){var d=_.copy(c||this.properties||{});d.tpl_evkey="root";return this._doTemplate(d)},_reg1:/([^{}]*)\{([\w]+)\}([^{}]*)/g,_reg2:/\[event\]/g,_buildTemplate:function(f){if(typeof f=="string"){var e=[[],[]],d=e[0],c=e[1];f=f.replace(this._reg2,' tpl_evid="{id}" tpl_evkey="{tpl_evkey}" ');f.replace(this._reg1,function(h,g,k,i){if(g){d[d.length]=g}c[d.length]=d[d.length]=k;if(i){d[d.length]=i}return""});return e}else{return f}},_getEV:function(h,d,c,k){var f=linb.getNodeData(k);if(!f){return}var l=this.events,e=f.tpl_evkey,g=(e&&l&&l[e])||l,i=g&&g[c];if(i){h.push(i)}},_reg3:/(^\s*<\w+)(\s|>)(.*)/,_doTemplate:function(k,z,A){if(!k){return""}var w=this,m=arguments.callee,y,u,f,x=k.constructor==Array,p=w.$template,q=p[z||"root"],c=!A;A=A||[];if(x){if(typeof q!="function"){q=m}for(var h=0;u=k[h++];){u.tpl_evkey=z;q.call(w,u,z,A)}}else{if(typeof q=="function"){q.call(w,k,z,A)}else{z=z?z+".":"";var e=q[0],d=q[1];for(var h=0,g=e.length;h<g;h++){if(f=d[h]){if(f in k){u=typeof k[f]=="function"?k[f].call(w,f,k):k[f];if(p[y=z+f]){m.call(w,u,y,A)}else{A[A.length]=u}}}else{A[A.length]=e[h]}}}}if(c){return A.join("").replace(w._reg3,'$1 id="'+w.$domId+'" $2$3')}},serialize:function(){var c=this,f=_.serialize,e=linb.absObj.$specialChars,d=_.isEmpty(c.properties)?null:_.clone(c.properties,function(h,g){return !e[(g+"").charAt(0)]});return"new linb.Template("+f(c.template||null)+","+f(d)+","+f(_.isEmpty(c.events)?null:c.events)+","+f(c.$domId!=c.domId?c.domId:null)+")"}},Static:{getFromDom:function(c){if((c=typeof c=="string"?c:(c&&c.id))&&(c=linb.$cache.profileMap[c])&&c["linb.Template"]){return c.boxing()}},_cache:[],_ctrlId:new _.id()}});Class("linb.Com",null,{Constructor:function(e,d,f){var c=this;c._nodes=[];c.host=f||c;c.$linbid=c.constructor._ctrlId.next();c.properties=e||(c.properties?_.clone(c.properties):{});c.events=_.copy(c.events)||{};if(d){_.merge(c.events,d,"all")}c._ctrlpool={};c._innerCall("initialize")},Instance:{autoDestroy:true,_toDomElems:function(){var c=this;if(!c.created){c.create(null,false)}c.render();return c.getUIComponents()._toDomElems()},setAlias:function(g){var d=this,c=d.alias;if(c&&d.host&&d.host!==d){try{delete d.host[c]}catch(f){d.host[c]=undefined}}if(d.host&&d.host!==d){d.host[g]=d}return d},getAlias:function(){return this.alias},setHost:function(e,d){var c=this;c.host=e;if(d){c.setAlias(d)}return c},getHost:function(){return this.host},setProperties:function(d,e){var c=this;if(!d){c.properties={}}else{if(typeof d=="string"){c.properties[d]=e}else{_.merge(c.properties,d,"all")}}return c},getProperties:function(c){return c?this.properties[c]:this.properties},setEvents:function(d,e){var c=this;if(!d){c.events={}}else{if(typeof d=="string"){c.events[d]=e}else{_.merge(c.events,d,"all")}}return c},getEvents:function(c){return c?this.events[c]:this.events},fireEvent:function(e,d,g){var f,c=this;if(c.events&&(f=c.events[e])){if(typeof f=="string"){f=c[f]}if(typeof f=="function"){return f.apply(g||c.host||c,d||[])}}},_fireEvent:function(e,d){var f,c=this;if(c.events&&(f=c.events[e])){if(typeof f=="string"){f=c[f]}c.$lastEvent=e;if(typeof f=="function"){d=d||[];d.splice(0,0,c,c.threadid);return f.apply(c.host||c,d)}}},_innerCall:function(d){var c=this;return _.tryF(c[d],[c,c.threadid],c)},customAppend:function(d,c,g,f,e){return false},show:function(e,g,d,l,k,i){var c=this,h=function(){if(g&&g["linb.UI"]&&!g.get(0).renderId){}else{if(false===_.tryF(c.customAppend,[g,d,k,i,l],c)){(g||linb("body")).append(c.getUIComponents(),d)}c.render();_.tryF(e,[c,l],c.host)}};c.threadid=l;if(c.created){h()}else{c.create(h,l)}return c},render:function(d){var c=this;if(c.renderId!="ok"){c.getUIComponents().render(d);c._fireEvent("onRender");c.renderId="ok"}return c},create:function(e,g){var d=this;if(d.created){_.tryF(e,[d,g],d.host);return}var f,c=[];d.threadid=g;if(false===d._fireEvent("beforeCreated")){return}c.push(function(h){if(h){d.threadid=h}d._fireEvent("onCreated")});if((f=d.base)&&f.length){c.push(function(h){linb.SC.groupCall(d.base,function(i){d._fireEvent("onLoadBaseClass",[i])},null,h)})}if((f=d.required)&&f.length){c.push(function(h){linb.SC.groupCall(d.required,function(i){d._fireEvent("onLoadReqiredClass",[i])},null,h)})}if(d.iniComponents){c.push(function(){d._createInnerComs()})}if(d.iniResource){c.push(function(){d._fireEvent("onIniResource");d._innerCall("iniResource")})}if(d.iniExComs){c.push(function(){d._innerCall("iniExComs")})}c.push(function(h){if(d.background){linb.SC.runInBG(d.background)}d._fireEvent("onReady")});c.push(function(h){d.created=true;_.tryF(e,[d,h],d.host)});if(g===false){_.arr.each(c,function(h){h.call()})}else{linb.Thread.observableRun(c,null,g)}return d},_createInnerComs:function(){var c=this;if(c._innerComsCreated){return}if(false===c._fireEvent("beforeIniComponents")){return}Array.prototype.push.apply(c._nodes,c._innerCall("iniComponents")||[]);if(c.autoDestroy){_.arr.each(c._nodes,function(d){if(d.box&&d.box["linb.UI"]&&!d.box.$noDomRoot){d.$afterdestory=function(){if(!c.$destroyed){c.destroy()}c=null};return false}})}c._fireEvent("afterIniComponents");c._innerComsCreated=true},iniComponents:function(){},getAllComponents:function(){if(!this._innerComsCreated){this._createInnerComs()}var c=[];_.each(this._ctrlpool,function(d){c.push(d)});return linb.absObj.pack(c,false)},getUIComponents:function(){if(!this._innerComsCreated){this._createInnerComs()}var d=_.copy(this._nodes),e,c="linb.UI";_.filter(d,function(f){return !!(f.box[c])});return linb.UI.pack(d,false)},getComponents:function(){if(!this._innerComsCreated){this._createInnerComs()}return linb.absObj.pack(_.copy(this._nodes),false)},setComponents:function(e){var c=this,d;_.arr.each(c._nodes,function(f){if((d=c[f.alias])&&d.get(0)==f){delete c[f.alias]}});_.arr.each(c._nodes=e.get(),function(f){f.boxing().setHost(c,f.alias)});return c},AddComponents:function(e){var c=this,d=c._nodes;_.arr.each(e.get(),function(f){f.boxing().setHost(c,f.alias);c._nodes.push(f)});return c},destroy:function(e){var c=this,d=c._nodes;c.threadid=e;c._fireEvent("onDestroy");c.$destroyed=true;if(d&&d.length){_.arr.each(d,function(f){if(f&&f.box){f.boxing().destroy()}},null,true)}if(d&&d.length){c._nodes.length=0}c._ctrlpool=null;_.breakO(c);c.$destroyed=true}},Static:{_ctrlId:new _.id(),load:function(d,e,g,f){var c=function(){linb.SC(d,function(k){if(k){var h=this,i=function(){var l=new h();if(f!==false){l.show(e)}else{_.tryF(e,[l],l)}};if(g){linb.setLang(g,i)}else{i()}}else{throw new Error(d+" doesnt exists!")}},true)};if(linb.isDomReady){c()}else{linb.main(c)}},$EventHandlers:{beforeCreated:function(c,d){},onLoadBaseClass:function(c,e,d){},onIniResource:function(c,d){},beforeIniComponents:function(c,d){},afterIniComponents:function(c,d){},onLoadRequiredClass:function(c,e,d){},onReady:function(c,d){},onRender:function(c,d){},onDestroy:function(c){}}}});Class("linb.Cookies",null,{Static:{set:function(c,f,h,g,e,d){if(c){document.cookie=escape(c)+"="+escape(f)+(h?";expires="+(new Date((new Date()).getTime()+(24*60*60*1000*h))).toGMTString():"")+(g?";path="+g:"")+(e?";domain="+e:"")+(d?";secure":"")}return this},get:function(e){var f,d,c=document.cookie.split("; ");for(f=0;f<c.length;f++){d=c[f].split("=");if(d[0]==escape(e)){return d[1]?unescape(d[1]):""}}return null},remove:function(c){return this.set(c,"",-1).set(c,"/",-1)},clear:function(){_.arr.each(document.cookie.split(";"),function(c){linb.Cookies.remove(_.str.trim(c.split("=")[0]))})}}});Class("linb.XML",null,{Static:{json2xml:function(h,e,d){var c=[],g=function(q,r,m){if(typeof r=="object"){if(_.isArr(r)){if(r.length){for(var p=0,n=r.length;p<n;p++){m.push(g(q,r[p],m))}}else{m.push("<"+(e?e(q):q)+">__[]__</"+(e?e(q):q)+">")}}else{var k;m.push("<"+(e?e(q):q));for(var p in r){if(p.charAt(0)=="@"){m.push(" "+p.substr(1)+'="'+(d?d(r[p]):r[p])+'"')}else{k=1}}m.push(k?">":"/>");if(k){for(var p in r){if(p=="#text"){m.push((d?d(r[p]):r[p]))}else{if(p=="#cdata"){m.push("<![CDATA["+(d?d(r[p]):r[p])+"]]>")}else{if(p.charAt(0)!="@"){m.push(g(p,r[p],m))}}}}m.push("</"+(e?e(q):q)+">")}}}else{m.push("<"+(e?e(q):q)+">"+(d?d(r):r)+"</"+(e?e(q):q)+">")}};for(var f in h){g(f,h[f],c)}return'<?xml version="1.0" encoding="UTF-8" ?>'+c.join("")},xml2json:function(h){if(h.nodeType==9){h=h.documentElement}var c={},i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e=/^-?(\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,d={"__[]__":[],"null":null,"false":false,"true":true},g=function(m){return m.replace(/[\s\S]/g,function(p,n){return(n=i[p])?n:p})},k=function(p){var q,m;p.normalize();for(q=p.firstChild;q;){m=q;if(q.nodeType==1){k(q)}q=q.nextSibling;if(m.nodeType==3&&!m.nodeValue.match(/\S/)){p.removeChild(m)}}return p},l=function(u){if("innerHTML" in u){u=u.innerHTML;u=u in d?d[u]:e.test(u)?parseFloat(u):u}else{var q=[],r,s=function(z){if(z.nodeType==1){q.push("<"+z.nodeName);var w=z.attributes;for(var y=0,x=w.length;y<x;y++){q.push(" "+w[y].nodeName+'="'+(w[y].nodeValue||"")+'"')}if(z.firstChild){q.push(">");for(w=z.firstChild;w;w=w.nextSibling){q.push(s(w))}q.push("</"+z.nodeName+">")}else{q.push("/>")}}else{if(z.nodeType==3){z=z.nodeValue;q.push(z in d?d[z]:e.test(z)?parseFloat(z):z)}else{if(z.nodeType==4){q.push("<![CDATA["+z.nodeValue+"]]>")}}}};for(var p=u.firstChild;p;p=p.nextSibling){s(p)}u=(q.length==1?q[0]:q.join(""))}return typeof u=="string"?g(u):u},f=function(u){var p=null,z,w;if(u.nodeType==1&&((z=u.attributes).length||u.firstChild)){p={};if(z.length){for(var s=0,r=z.length;s<r;s++){p["@"+z[s].nodeName]=(z[s].nodeValue||"")+""}}if(u.firstChild){var y=0,x=0,m=0,q;for(q=u.firstChild;q;q=q.nextSibling){w=q.nodeType;if(w==1){m++}else{if(w==3){y++}else{if(w==4){x++}}}}if(m){if(y<2&&x<2){for(q=u.firstChild;q;q=q.nextSibling){if(q.nodeType==3){p["#text"]=g(q.nodeValue)}else{if(q.nodeType==4){p["#cdata"]=g(q.nodeValue)}else{if(p[w=q.nodeName]){if(p[w] instanceof Array){p[w][p[w].length]=f(q)}else{p[w]=[p[w],f(q)]}}else{p[w]=f(q)}}}}}else{if(!z.length){p=l(u)}else{p["#text"]=l(u)}}}else{if(y){if(!z.length){p=l(u)}else{p["#text"]=l(u)}}else{if(x){if(x>1){p=l(u)}else{for(q=u.firstChild;q;q=q.nextSibling){p["#cdata"]=g(q.nodeValue)}}}}}}}return p};c[h.nodeName]=f(k(h));return c},parseXML:function(c){var g=null;if(typeof DOMParser=="undefined"){try{g=new ActiveXObject("Microsoft.XMLDOM");g.async=false;g.loadXML(c)}catch(f){g=null}}else{try{var d=new DOMParser();g=d.parseFromString(c,"text/xml")}catch(f){g=null}finally{d=null}}return g}}});Class("linb.DragDrop",null,{Static:{_eh:"_dd",_id:"linb.dd:proxy:",_idi:"linb.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"0 0",move:"0 -16px",link:"0 -32px",add:"0 -48px"},_profile:{},_left:function(value){with(this._profile){if(magneticDistance>0&&xMagneticLines.length){var l=xMagneticLines.length;while(l--){if(Math.abs(value-xMagneticLines[l])<=magneticDistance){return xMagneticLines[l]}}}if(widthIncrement>1){return Math.floor(value/widthIncrement)*widthIncrement}return value}},_top:function(value){with(this._profile){if(magneticDistance>0&&yMagneticLines.length){var l=yMagneticLines.length;while(l--){if(Math.abs(value-yMagneticLines[l])<=magneticDistance){return yMagneticLines[l]}}}if(heightIncrement>1){return Math.floor(value/heightIncrement)*heightIncrement}return value}},_ini:function(g){var f=this,e=f._profile,c=linb.win;f._box={width:c.width()+c.scrollLeft(),height:c.height()+c.scrollTop()};e.ox=e.x;e.oy=e.y;if(f._proxy=g){f._proxystyle=g.get(0).style;f._profile.curPos=f._cssPos=f._proxy.cssPos();f._cssPos_x=e.x-f._cssPos.left;f._cssPos_y=e.y-f._cssPos.top;e.restrictedLeft=e.x-(e.maxLeftOffset||0);e.restrictedRight=e.x+(e.maxRightOffset||0);e.restrictedTop=e.y-(e.maxTopOffset||0);e.restrictedBottom=e.y+(e.maxBottomOffset||0);f._proxyLeft=f._pre.left=f._cssPos.left;f._proxyTop=f._pre.top=f._cssPos.top;if("move"!==e.dragType){f._proxy.css("zIndex",linb.Dom.TOP_ZINDEX*10);linb.setNodeData(f._proxy.get(0),"zIndexIgnore",1)}}},_reset:function(){var f=this,e=null,c=false;_.tryF(f.$reset);f.setDropFace();f._resetProxy();f.$proxySize=50;f.$mousemove=f.$mouseup=f.$onselectstart=f.$ondragstart="*";f._cursor="";f._pre={};f._proxyLeft=f._proxyTop=f._cssPos_x=f._cssPos_y=0;f._stop=c;if(f._onDrag&&f._onDrag.tasks){f._onDrag.tasks.length=0;delete f._onDrag.tasks}if(f._onDragover&&f._onDragover.tasks){f._onDragover.tasks.length=0;delete f._onDragover.tasks}f._cssPos=f._box=f._dropElement=f._source=f._proxy=f._proxystyle=f._onDrag=f._onDragover=e;f._profile={$id:_()+"",dragType:"shape",dragCursor:"move",targetReposition:true,dragIcon:linb.ini.path+"ondrag.gif",magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:c,verticalOnly:c,maxBottomOffset:e,maxLeftOffset:e,maxRightOffset:e,maxTopOffset:e,targetNode:e,targetCSS:e,dragKey:e,dragData:e,targetLeft:e,targetTop:e,targetWidth:e,targetHeight:e,targetOffsetParent:e,shadowFrom:e,proxyNode:e,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:c,restrictedLeft:e,restrictedRight:e,restrictedTop:e,restrictedBottom:e,dropElement:e};return f},abort:function(){this._stop=true},_end:function(){var e=this,c=document;if(e._proxy){e._unpack()}if(e.$onselectstart!="*"){c.body.onselectstart=e.$onselectstart}if(e.$ondragstart!="*"){c.ondragstart=e.$ondragstart}if(e.$mousemove!="*"){c.onmousemove=e.$mousemove}if(e.$mouseup!="*"){c.onmouseup=e.$mouseup}return e},startDrag:function(h,i,f,m,g){var k=this,q;if(k._profile.isWorking){return false}k._end()._reset();k._profile.isWorking=true;f=_.isHash(f)?f:{};h=h||window.event;if(linb.Event.getBtn(h)!=="left"){return true}k._source=f.targetNode=linb(i);k._cursor=k._source.css("cursor");if((q=f.targetNode.get(0))&&!q.id){q.id=linb.Dom._pickDomId();q=null}k._defer=f.dragDefer=_.isNumb(f.dragDefer)?f.dragDefer:0;if(true===f.dragCursor){f.dragCursor=k._cursor}if(typeof f.dragIcon=="string"){f.dragType="icon"}var n=document,p=linb.Event.getPos(h);f.x=p.left;f.y=p.top;f.dragKey=m||f.dragKey||null;f.dragData=g||f.dragData||null;var c=linb.Event.getSrc(h);k._start=function(r){var d=k._profile;_.merge(d,f,"with");k._source.beforeDragbegin();if(k._stop){k._end()._reset();return false}if(linb.Event&&(q=k._source.get(0))){linb.Event._preDroppable=q.id;q=null}if(d.dragType=="icon"){d.targetReposition=false}k._ini(d.dragType=="none"?null:k._pack(p,d.targetNode));if(f.x>=k._box.width||f.y>=k._box.height){k._end()._reset();return true}k._source.onDragbegin();if(d.dragDefer<1){k.$mousemove=n.onmousemove;k.$mouseup=n.onmouseup}if(linb.browser.ie){setTimeout(function(){c.releaseCapture()})}n.onmousemove=k.$onDrag;n.onmouseup=k.$onDrop;k._source.afterDragbegin();if(d.dragDefer>0){k.$onDrag.call(k,r)}};if(linb.browser.ie){k.$ondragstart=n.ondragstart;k.$onselectstart=n.body.onselectstart;n.ondragstart=n.body.onselectstart=null;if(n.selection){_.tryF(n.selection.empty)}}linb.Event.stopBubble(h);if(f.targetNode.get(0)!==n){linb(n).onMousedown(true,linb.Event.getEventPara(h,p))}if(f.dragDefer<1){_.tryF(k._start,[h],k);return false}else{k.$mouseup=n.onmouseup;n.onmouseup=function(d){linb.DragDrop._end()._reset();return _.tryF(document.onmouseup,[d],null,true)};k.$mousemove=n.onmousemove;var l={};n.onmousemove=function(r){var d=linb.Event.getPos(r);if(d.left===l.left&&d.top===l.top){return}l=d;if(--k._defer<=0){linb.DragDrop._start(r)}return false}}},$onDrag:function(g){var h=linb.DragDrop,f=h._profile;g=g||window.event;if(!f.isWorking||h._stop){h.$onDrop(g);return true}var c=linb.Event.getPos(g);f.x=c.left;f.y=c.top;if(!f.isWorking){return false}if(h._proxy){if(!f.verticalOnly){h._proxyLeft=Math.floor(h._left(((f.maxLeftOffset!==null&&f.x<=f.restrictedLeft)?f.restrictedLeft:(f.maxRightOffset!==null&&f.x>=f.restrictedRight)?f.restrictedRight:f.x)-h._cssPos_x));if(h._proxyLeft-h._pre.left){h._proxystyle.left=h._proxyLeft+"px"}h._pre.left=h._proxyLeft;f.curPos.left=h._proxyLeft+h.$proxySize}if(!f.horizontalOnly){h._proxyTop=Math.floor(h._top(((f.maxTopOffset!==null&&f.y<=f.restrictedTop)?f.restrictedTop:(f.maxBottomOffset!==null&&f.y>=f.restrictedBottom)?f.restrictedBottom:f.y)-h._cssPos_y));if(h._proxyTop-h._pre.top){h._proxystyle.top=h._proxyTop+"px"}h._pre.top=h._proxyTop;f.curPos.top=h._proxyTop+h.$proxySize}}else{f.curPos.left=f.x;f.curPos.top=f.y}if(h._onDrag!=1){if(h._onDrag){h._onDrag(g,h._source._get(0))}else{h._onDrag=1;h._source.onDrag(true,linb.Event.getEventPara(g,c))}}return false},$onDrop:function(h){var i=linb.DragDrop,g=i._profile,c=linb.Event;h=h||window.event;i._end();if(g.isWorking){i.setDropFace();var f=i._source.onDragstop(true,c.getEventPara(h));if(i._dropElement){linb.use(i._dropElement).onDrop(true,c.getEventPara(h))}}i._reset();c.stopBubble(h);_.tryF(document.onmouseup,[h]);return !!f},setDropElement:function(c){this._profile.dropElement=this._dropElement=c;return this},getProfile:function(){var e=this,c=e._profile;c.offset=e._proxy?{x:e._proxyLeft-c.ox+e._cssPos_x,y:e._proxyTop-c.oy+e._cssPos_y}:{x:c.x-c.ox,y:c.y-c.oy};return c},setDropFace:function(k,h){var l=this,g='<div style="position:absolute;z-index:'+linb.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",e=":dashed 1px #ff6600;",i=l._Region,c=l._rh,f="backgroundColor";if(i&&i.parent()){i.remove(false)}if(l._R){l._R.css(f,l._RB);delete l._R;delete l._RB}if(k){if(!i||!i.get(0)){i=l._Region=linb.create(g+"top"+e+'left:0;top:0;width:100%;height:0;"></div>'+g+"right"+e+'right:0;top:0;height:100%;width:0;"></div>'+g+"bottom"+e+'bottom:0;left:0;width:100%;height:0;"></div>'+g+'left:solid 2px #ff6600;width:0;left:0;top:0;height:100%;"></div>');c=l._rh=linb([i.get(1),i.get(3)])}k=linb(k);if(linb.browser.ie6){c.height("100%")}if(k.css("display")=="block"){linb.setNodeData(i.get(0),"zIndexIgnore",1);k.append(i);if(linb.browser.ie6&&!c.get(0).offsetHeight){c.height(k.get(0).offsetHeight)}}else{l._RB=k.get(0).style[f];l._R=k;k.css(f,"#FA8072")}l.setDragIcon(h||"move")}else{l.setDragIcon("none")}return l},setDragIcon:function(f){_.resetRun("setDropFace",null);var h=this,g=h._profile,e=g.proxyNode,c=h._Icons;if(e&&g.dragType=="icon"){e.first(4).css(typeof f=="object"?f:{backgroundPosition:(c[f]||f)})}return h},_setProxy:function(k,i){var e,c,h=this,f=h._profile,g=linb.Dom;if(!g.byId(h._id)){linb("body").prepend(linb.create('<div id="'+h._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+h.$proxySize+"px;position:absolute;background:url("+linb.ini.img_bg+') repeat;"><div style="font-size:0;line-height:0;" id="'+h._idi+'">'+(linb.browser.ie6?"&nbsp;":"")+"</div></div>"))}e=linb(h._id);if(f.dragKey){h.$proxySize=0;e.css("padding",0)}else{i.left-=h.$proxySize;i.top-=h.$proxySize;if(!f.targetOffsetParent){g.setCover(true)}}if(c=f.targetOffsetParent){linb(c).append(e)}if(k){linb(h._idi).empty(false).append(k);f.proxyNode=k}else{f.proxyNode=linb(h._idi)}e.css({display:"",zIndex:g.TOP_ZINDEX*10,cursor:f.dragCursor}).offset(i,c);linb.setNodeData(e.get(0),"zIndexIgnore",1);return e},_resetProxy:function(){var m=this,h=m._profile,l=linb.Dom,g=m._id,f=m._idi;if(l.byId(g)){var e,c,i=linb(f),e=linb(g);if(linb.browser.ie6){i.html("&nbsp;",false)}else{i.empty(false)}i.attr("style","font-size:0;line-height:0;");linb("body").prepend(e.css({zIndex:0,cursor:"",display:"none",padding:m.$proxySize+"px"}));h.proxyNode=m._proxystyle=null;l.setCover(false)}},_pack:function(k,f){var g,i={},m={},h=this,c=h._profile,l;if(c.targetLeft===null||null===c.targetTop){l=f.offset(null,c.targetOffsetParent)}i.left=null!==c.targetLeft?c.targetLeft:l.left;i.top=null!==c.targetTop?c.targetTop:l.top;switch(c.dragType){case"deep_copy":case"copy":var l;m.width=_.isNumb(c.targetWidth)?c.targetWidth:(f.cssSize().width||0);m.height=_.isNumb(c.targetHeight)?c.targetHeight:(f.cssSize().height||0);var e=f.clone(c.dragType=="deep_copy").css({position:"relative",cursor:c.dragCursor,margin:0,cssFloat:"none"}).cssSize(m).id("",true).css("opacity",0.8);e.query("*").id("",true);if(c.targetCSS){e.css(c.targetCSS)}e.cssPos({margin:"0",left:"0",top:"0"}).query().id("",true);g=h._setProxy(e,i);break;case"shape":m.width=null!==c.targetWidth?c.targetWidth:f.offsetWidth();m.height=null!==c.targetHeight?c.targetHeight:f.offsetHeight();m.width-=2;m.height-=2;g=h._setProxy(linb.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(m),i);break;case"blank":g=h._setProxy(null,i);break;case"icon":i.left=_.isNumb(c.targetLeft)?c.targetLeft:(k.left-linb.win.scrollLeft()+16);i.top=_.isNumb(c.targetTop)?c.targetTop:(k.top-linb.win.scrollTop()+16);l='<table border="0"><tr><td valign="top"><span style="background:url('+c.dragIcon+") no-repeat left top;width:"+(_.isNumb(c.targetWidth)?c.targetWidth:16)+"px;height:"+(_.isNumb(c.targetHeight)?c.targetHeight:16)+'px;" ></span></td><td id="linb:dd:shadow" '+(c.shadowFrom?'style="border:solid 1px #e5e5e5;background:#fff;font-size:12px;line-height:14px;"':"")+">"+(c.shadowFrom?linb(c.shadowFrom).clone(true).css({left:"auto",top:"auto",position:"relative"}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>";g=h._setProxy(linb.create(l).css("opacity",0.8),i);break;case"move":h.$proxySize=0;g=f;if(g.css("position")!="absolute"){g.css("position","absolute").offset(i)}g.css("cursor",c.dragCursor)}return g},_unpack:function(){var h=this,g=h._profile,c,e;if(g.targetReposition&&("move"!=g.dragType)){if((c=linb(h._source))){if(!c.isEmpty()){if(c.css("position")!="absolute"){c.css("position","absolute").cssPos(c.offset(null,c.get(0).offsetParent))}if(linb.browser.ie){c.cssRegion({right:"auto",bottom:"auto"})}c.offset(g.curPos,g.targetOffsetParent||document.body)}}}if("move"==g.dragType){h._source.css("cursor",h._cursor)}},_unRegister:function(d,c){var e=this._eh;linb([d]).$removeEvent("beforeMouseover",e).$removeEvent("beforeMouseout",e).$removeEvent("beforeMousemove",e);linb.setNodeData(d.$linbid,["_dropKeys",c])},_register:function(d,c){var e=this._eh;linb(d).beforeMouseover(function(k,h,g){var f=linb.DragDrop,k=f._profile;if(k.dragKey&&linb.getNodeData(g,["_dropKeys",k.dragKey])){f.setDropElement(g);f._onDragover=null;linb.use(g).onDragenter(true);if(f._dropElement){_.resetRun("setDropFace",f.setDropFace,0,[g],f)}}},e).beforeMouseout(function(k,h,g){var f=linb.DragDrop,k=f._profile;if(k.dragKey&&linb.getNodeData(g,["_dropKeys",k.dragKey])){linb.use(g).onDragleave(true);f.setDropElement(f._onDragover=null);_.resetRun("setDropFace",f.setDropFace,0,[null],f)}},e).beforeMousemove(function(f,n,k){var g=linb.DragDrop,l=g._onDragover,m=g._profile;if(l==1){return}if(g._dropElement==k&&m.dragKey&&linb.getNodeData(k,["_dropKeys",m.dragKey])){if(l){l(n,k)}else{g._onDragover=1;linb.use(k).onDragover(true,linb.Event.getEventPara(n))}}},e);linb.setNodeData(d.$linbid,["_dropKeys",c],true)}},After:function(){this._reset();_.each({startDrag:function(g,d,c,f){linb.DragDrop.startDrag(g,this.get(0),d,c||"",f||null);return this},draggable:function(d,g,f,h){var e=this,c=linb.DragDrop;if(d===undefined){d=true}else{if(typeof d=="object"){g=d;d=true}}if(!!d){e.$addEvent("onMousedown",function(k,i,l){if(linb.getId(linb.Event.getSrc(i))!=l){return true}linb.use(l).startDrag(i,g,f,h)},c._eh,-1)}else{e.$removeEvent("onMousedown",c._eh)}return e},droppable:function(c,e){if(c===undefined){c=true}e=e||"default";var f=linb.DragDrop;return this.each(function(d){if(!!c){f._register(d,e)}else{f._unRegister(d,e)}})}},function(d,c){linb.Dom.plugIn(c,d)})}});Class("linb.Tips",null,{Constructor:function(){return null},Initialize:function(){var d=linb.DragDrop,c=this;if(d){d.$reset=function(){c._pos={left:d._profile.x,top:d._profile.y}}}linb.CSS.addStyleSheet(".linb-tips{font-size:0;line-height:0;position:absolute;overflow:visible;} .linb-tips-i{font-size:12px;overflow:hidden;}.linb-tips-i span{display:inline;}",this.KEY);linb.doc.afterMousedown(function(){c._cancel()},"$Tips",-1).afterMousemove(function(i,h){if(d.isWorking){return}var f=linb.Event,g,k;if((g=_.resetRun.$cache)&&g["$Tips3"]){c._pos=f.getPos(h)}if(c._from){_.resetRun("$Tips3",null);c._showF()}else{if(c._showed&&c.MOVABLE){g=f.getPos(h);k=c._Node.style;k.left=(parseInt(k.left)||0)+(g.left-c._pos.left)+"px";k.top=(parseInt(k.top)||0)+(g.top-c._pos.top)+"px";c._pos=g;k=null}}},"$Tips",-1).afterMouseover(function(l,p){var f=linb.Event,i=f.$FALSE,h=f.getSrc(p),g,n,q,k,m=0,r;if(!h){return i}try{while((!h.id||h.id==linb.$localeDomId)&&h.parentNode!==document&&m++<10){h=h.parentNode}if(!(g=h.id)){h=null;return i}}catch(p){}if((n=f._getProfile(g))&&n.box&&n.KEY=="linb.UIProfile"){if(n.properties.disableTips){h=null;return false}q=n.onShowTips?g:g.replace(c._reg,":");if(c._markId&&q==c._markId){return i}c._markId=q;c._pos=f.getPos(p);if(c._showed){c._from=n;c._enode=g;c._showF()}else{_.resetRun("$Tips",function(){c._from=n;c._enode=g;_.resetRun("$Tips3",function(){if(c._from){c._showF()}},100)},c.DELAYTIME)}}else{c._cancel()}h=null;return i},"$Tips",-1).afterMouseout(function(i,p){if(c._markId){var f=linb.Event,g,q,k,n=c._from,l,m=0,h=p.toElement||p.relatedTarget;if(!h){l=1}else{try{while((!h.id||h.id==linb.$localeDomId)&&h.parentNode!==document&&m++<10){h=h.parentNode}if(!(g=h.id)){h=null;l=1}}catch(p){l=1}}if(l){c._cancel()}else{q=(n&&n.onShowTips)?g:g.replace(c._reg,":")}h=null;return f.$FALSE}},"$Tips",-1);this._Types={"default":new function(){this._r=/(\$)([\w\.]+)/g;this.show=function(r,m,q){if(!m){return}var u=this,g,f,x,p,k;if(!(g=u.node)||!g.get(0)){g=u.node=linb.create('<div class="linb-tips"><div class="linb-tips-i"></div></div>');f=u._ruler=linb.create('<div class="linb-tips" style="position:absolute;visibility:hidden;left:-10000px;"><div class="linb-tips-i" style="position:relative;"></div></div>');u.n=g.first();u._n=f.first();if(typeof g.addShadow=="function"){g.addShadow();f.addShadow()}linb("body").append(f)}f=u._ruler;if(document.body.lastChild!=g.get(0)){linb("body").append(g)}x=typeof r=="object"?r[q||linb.Tips.TIPSKEY]:r;if(typeof x=="function"){x=x()}if(x+=""){var i=/^\s*\</.test(x);x=x.replace(u._r,function(s,h,w){return linb.getRes(w)});linb.Tips._curTips=x;if(!r.transTips||!i){x='<div style="border:solid gray 1px;background-color:#FFF8DC;padding:1px 2px 2px 2px;">'+x+"</div>"}u._n.get(0).innerHTML=x;p=f.get(0).offsetWidth;if(!i){p=Math.min(c.MAXWIDTH,p)}var e=g.get(0).style,l=u.n.get(0),n=l.style;e.visibility="hidden";l.innerHTML=x;if(linb.browser.ie){e.width=n.width=p+(p%2)+"px";k=l.offsetHeight;e.height=k-(k%2)+"px"}else{n.width=p+"px"}if(m===true){e.visibility="visible"}else{g.popToTop({left:m.left,top:m.top,region:{left:m.left,top:m.top-12,width:24,height:32}},1)}e=n=l=null}else{g.css("zIndex",0).hide()}};this.hide=function(){this.node.css("zIndex",0).hide()}}}},Static:{_reg:/-[\w]+:/,TIPSKEY:"tips",MAXWIDTH:300,MOVABLE:true,DELAYTIME:200,AUTOHIDETIME:5000,_showF:function(){var d=this,g=d._from,f=linb.Dom.byId(d._enode),k=d._pos,i,h,e,c=false;d._from=d._enode=null;if(!f||!g||!k||!(h=g.box)){return}d._pos=k;c=((e=g.CF)&&(e=e.showTips)&&e(g,f,k));if(!c){c=(h._showTips&&h._showTips(g,f,k))}if(!c&&((e=g)&&e.tips)||(e&&(e=e.properties)&&(e.tips))){d.show(k,e);c=true}if(!c){d.hide()}else{if(!d.MOVABLE){_.resetRun("$Tips2",d.hide,d.AUTOHIDETIME,null,d)}}f=k=g=null},getTips:function(){return this._curTips},setTips:function(c){if(this._curTips&&this._tpl&&this._Node){this._tpl.show(c,true)}},show:function(g,f,e){var c=this,d;c._pos=g;if(c._item===f){return}if(typeof f=="string"||(f&&(f[e||linb.Tips.TIPSKEY]))){d=c._tpl=c._Types[f.tipsTemplate]||c._Types["default"];d.show(f,g,e);c._Node=d.node.get(0);c._item=f;c._showed=true}else{c._cancel()}},hide:function(){var c=this;if(c._showed){if(c._tpl){c._tpl.hide()}c._clear()}},_cancel:function(){var c=this;if(c._markId){if(c._showed){c.hide()}else{_.resetRun("$Tips",null);_.resetRun("$Tips3",null);c._clear()}}},_clear:function(){var c=this;c._Node=c._curTips=c._markId=c._from=c._tpl=c._item=c._showed=null}}});Class("linb.History",null,{Static:{_fid:"linb:history",setCallback:function(h){var d=this;d._callback=h;var f=location.hash;if(h){d._lastFI=f;if(linb.browser.ie){if(d._lastFI==""){d._lastFI="#"}if(parseInt(linb.browser.ver)<8){var g=document.createElement("div");g.style.display="none";document.body.appendChild(g);g.innerHTML='<iframe id="'+this._fid+'" style="display: none;"></iframe>';var c=document.getElementById(this._fid),e=c.contentWindow.document;e.open();e.close();e.location.hash=f;g=null}else{location.hash=f}}else{if(linb.browser.kde){d.backStack=[];d.backStack.length=history.length;d.forwardStack=[]}}d._callback(f.replace(/^#/,""));clearInterval(d._itimer);d._itimer=setInterval(d._timer,100)}else{clearInterval(d._itimer)}return d},_timer:function(){var l=linb.History,e;if(typeof l._callback!="function"){clearInterval(l._itimer);return}if(linb.browser.ie){if(parseInt(linb.browser.ver)<8){var h=document.getElementById(l._fid),d=h.contentWindow.document;e=d.location.hash;if(e!=l._lastFI){l._lastFI=location.hash=e;l._callback(e.replace(/^#/,""))}}else{e=location.hash;if(e!=l._lastFI){l._lastFI=e;l._callback(e.replace(/^#/,""))}}}else{if(linb.browser.kde){if(!l.dontCheck){var m=l.backStack,c=l.forwardStack,k=history.length-m.length;if(k){if(k<0){for(var f=0;f<Math.abs(k);f++){c.unshift(m.pop())}}else{for(var f=0;f<k;f++){m.push(c.shift())}}var g=m[m.length-1];if(g!==undefined){l._lastFI=location.hash;l._callback(g)}else{}}else{if(m[m.length-1]===undefined){if(l._lastFI!=location.hash){l._lastFI=location.hash;l._callback(location.hash)}}}}}else{e=location.hash;if(e!=l._lastFI){l._lastFI=e;l._callback(e.replace(/^#/,""))}}}},getFI:function(){return this._lastFI},setFI:function(h,g){var d=this;if(!d._callback){return}if(h){h=(""+h).replace(/^#+/,"")}if(d._lastFI=="#"+h){return false}if(linb.browser.ie){if(parseInt(linb.browser.ver)<8){var c=document.getElementById(d._fid),f=c.contentWindow.document;f.open();f.close();f.location.hash=location.hash=d._lastFI="#"+h}else{location.hash=d._lastFI="#"+h}}else{if(linb.browser.kde){d.dontCheck=true;d.backStack.push(h);d.forwardStack.length=0;var e=d;_.asyRun(function(){e.dontCheck=false;e=null},300);location.hash=d._lastFI=h}else{location.hash=d._lastFI="#"+h}}if(g!==false){_.tryF(d._callback,[h])}}}});Class("linb.ComFactory",null,{Static:{_pro:{},_cache:{},_domId:"linb:ComFactory:",getProfile:function(c){return c?this._pro[c]:this._pro},setProfile:function(c,d){if(typeof c=="string"){this._pro[c]=d}else{this._pro=c}return this},destroyAll:function(){_.each(this._cache,function(c){_.tryF(c.destroy,[],c)});this._cache={}},broadcast:function(d){if(typeof d=="function"){var e,f=this._cache;for(e in f){d.call(f[e],e)}}},setCom:function(d,c){this._cache[d]=c;if(c){c.comRefId=d}return this},getComFromCache:function(c){return this._cache[c]||null},getCom:function(e,d,k,l,m,s){l=l!==false;var q=this._cache,f=this._pro,i,h;if(l&&q[e]){_.tryF(d,[k,q[e]],q[e]);return q[e]}else{if(!(i=f[e])){i={cls:e,singleton:l,properties:m,events:s};h=e}else{h=i.cls||i}var r=arguments.callee,n=this,g=function(c,u,w){var x=new c();if(u.properties){_.merge(x.properties,u.properties,"all")}if(u.events){_.merge(x.events,u.events,"all")}if(u.singleton!==false){linb.ComFactory.setCom(e,x)}var p=[function(A){var y=A.getUIComponents().get(),z=function(B,E,C){var D=arguments.callee;_.arr.each(B,function(H,I){if(H.key=="linb.UI.Tag"){var F=H,J=F.properties.tagKey;if(J&&E&&E[J]){r.apply(n,[E[J],function(){A[J]=this;this.parent=A;var L=this.getUIComponents(),K;if(!(K=L.get(0))){return}linb.UI.Tag.replace(F,K,C?A:null)},w])}}if(H.children){var G=[];_.arr.each(H.children,function(K){G[G.length]=K[0]});D(G,E)}})};z(y,u.children,1)}];p.push(w||null);if(d){linb.Thread(w).insert({task:d,args:[w,x],scope:x})}_.tryF(x[u.iniMethod||"create"],p,x)};linb.Thread.observableRun(function(p){var c=function(x,u,y){var w;if(w=linb.SC.get(h)){linb.Thread(y).insert({task:g,args:[w,i,y]})}};linb.SC(h,function(u){if(u){c(0,0,p)}else{throw new Error(h+" doesnt exists!")}},true,p)},null,k)}},newCom:function(c,d,g,f,e){return this.getCom(c,d,g,false,f,e)},storeCom:function(h){var d,e,g=this._cache,f=this._domId;if(e=g[h]){if(!(d=linb.Dom.byId(f))){linb("body").prepend(linb.create('<div id="'+f+'" style="display:none;"></div>'))}d=linb(f);e=e.getUIComponents();if(!e.isEmpty()){e.get(0).unlinkParent();d.append(e)}}},prepareComs:function(c){var e=this,d=[];_.arr.each(c,function(f){d.push(function(){e.getCom(f)})});linb.Thread(null,d,500).start();return this}}});Class("linb.Debugger",null,{Static:{$time:_(),_id1:"linb:dbg::_frm",_id4:"linb:dbg::_head",_id2:"linb:dbg::_con",_id3:"linb:dbg::_inp",err:function(c,e,d){if(linb.browser.gek&&c=="Error loading script"){return true}linb.Debugger.log("*** An error raised ***"," >> Location: "+e+" ( line "+d+" )"," >> Message: "+c)},trace:function(l){var g=arguments,f=g[1]||arguments.callee.caller,c=g[2]||[];if(f){c.push('function "'+(f.$name$||"")+'" in Class "'+(f.$original$||"")+'"');if(f.caller){try{arguments.callee(null,f.caller,c,1)}catch(k){}}}if(!g[3]){var d=[];d.push(" >> Object Info:");if(typeof l=="object"){for(var h in l){d.push(" -- "+h+" : "+l[h])}}else{d.push(l)}d.push(" >> Function Trace: "+c.join(" <= "));linb.Debugger.log.apply(linb.Debugger,d)}},log:function(){var t1,t2,time,self=this,arr=arguments,str;if(!arr.length){return}t1=document.createElement("div");t2=document.createElement("div");t2.className="linb-dbg-con1";time=_();t2.appendChild(document.createTextNode("Time stamp : "+time+"("+(time-self.$time)+")"));self.$time=time;t1.appendChild(t2);for(var i=0,l=arr.length;i<l;i++){str=arr[i];t2=document.createElement("div");t2.className="linb-dbg-con2";t2.appendChild(document.createTextNode(" "+_.serialize(_.isArguments(str)?_.toArr(str):str)));t1.appendChild(t2)}if(!linb.Dom.byId(self._id2)){var ns=linb.create("<div id="+self._id1+' style="left:5px;top:'+(linb.win.scrollTop()+5)+'px;" class="linb-dbg-frm"><div class="linb-dbg-box"><div id='+self._id4+' class="linb-dbg-header">&nbsp;&nbsp;:&nbsp;)&nbsp;&nbsp;jsLINB Monitor window <span class="linb-dbg-cmds"><a href="javascript:;" onclick="linb(\''+self._id2+'\').empty(false);">Clear</a><a href="javascript:;" onclick="linb(\''+self._id1+"').remove();\"> &Chi; </a></span></div><div id="+self._id2+' class="linb-dbg-content"></div><div class="linb-dbg-tail"><table><tr><td style="font-family:serif;">&nbsp;>>>&nbsp;</td><td style="width:100%"><input id='+self._id3+" /></td></tr></table></div></div></div>");linb("body").append(ns);self.$con=linb(self._id2);linb(self._id4).onMousedown(function(p,e,s){if(linb.Event.getSrc(e)!=linb.use(s).get(0)){return}linb.use(s).parent(2).startDrag(e)});if(linb.browser.ie6){ns.height(ns.offsetHeight())}if(ns.addShadow){ns.addShadow()}var bak="",temp;linb(self._id3).onKeydown(function(p,e,s){var k=linb.Event.getKey(e).key;s=linb.use(s).get(0);if(k=="enter"){switch(s.value){case"?":case"help":self.$con.append(linb.create("<div class='linb-dbg-con3'><p><strong>vailable commands:</strong></p><ul><li> -- <strong>[clr]</strong> or <strong>[clear]</strong> : clears the message</li><li> -- <strong>[?]</strong> or <strong>[help]</strong> : shows this message</li><li> -- <strong>any other</strong>: shows its string representation</li></ul></div>"));break;case"clr":case"clear":linb(self._id2).empty();break;default:try{temp=s.value;if(/^\s*\x7b/.test(temp)){temp="("+temp+")"}self.log(eval(temp))}catch(e){self.$con.append(linb.create("<div  class='linb-dbg-con4'>"+String(e)+"</div>"));return}}bak=s.value;s.value=""}else{if(k=="up"||k=="down"){var a=s.value;s.value=bak||"";bak=a}}})}self.$con.append(t1).scrollTop(self.$con.scrollHeight());t1=t2=null}},Initialize:function(){linb.CSS.addStyleSheet(".linb-dbg-frm{position:absolute;width:300px;z-index:2000;}.linb-dbg-header{cursor:move;height:18px;padding-top:2px;position:relative;border-bottom:solid 1px #CCC;background-color:#FFAB3F;font-weight:bold;}.linb-dbg-cmds{position:absolute;right:2px;top:2px;}.linb-dbg-cmds a{margin:2px;}.linb-dbg-box{position:relative;overflow:hidden;border:solid 1px #AAA;}.linb-dbg-content{position:relative;width:100%;overflow:auto;height:300px;background:#fff;}.linb-dbg-con1{background-color:#CCC}.linb-dbg-con2{padding-left:6px;border-bottom:dashed 1px #CCC}.linb-dbg-con3{padding-left:6px;border-bottom:dashed 1px #CCC;background:#EEE;color:#0000ff;}.linb-dbg-con4{padding-left:6px;border-bottom:dashed 1px #CCC;background:#EEE;color:#ff0000;}.linb-dbg-tail{overflow:hidden;position:relative;border-top:solid 1px #CCC;height:16px;background:#fff;color:#0000ff;}.linb-dbg-tail input{width:100%;border:0;background:transparent;}",this.KEY);linb.log=function(){if(linb.browser.gek&&window.console){console.log.apply(console,arguments)}linb.Debugger.log.apply(linb.Debugger,arguments)};linb.message=function(k,n,d,f){d=d||200;if(linb.browser.ie){d=d+(d%2)}var c,i,m=arguments.callee,p=m.stack||(m.stack=[]),s=linb.win,e=s.scrollLeft()+s.width()/2-d/2,q=s.height(),r=s.scrollTop();c=p.pop();while(c&&!c.get(0)){c=p.pop()}if(!c){c='<div class="uibg-bar uiborder-outset" style="font-size:0;line-height:0;border:solid 1px #cdcdcd;position:absolute;overflow:visible;top:-50px;z-index:'+linb.Dom.TOP_ZINDEX+'"><div style="font-size:14px;overflow:hidden;font-weight:bold;padding:2px;"></div><div style="padding:5px;overflow:hidden;"></div></div>';c=linb.create(c);if(c.addBorder){c.addBorder()}linb("body").append(c)}c.css({left:e+"px",width:d+"px",visibility:"visible"}).first().html(n||"").css("visibility",n?"visible":"hidden").next().html(k||"");if(m.last&&c!=m.last){var g=m.last.left();m.last.animate({left:[g,g+(m.last.width+d)/2+20]},null,null,100,5).start()}m.last=c;m.last.width=d;i=c.height();if(linb.browser.ie6){c.cssSize({height:i,width:d+2})}c.animate({top:[r-i-20,r+20]},null,null,100,5,"expoOut").start();_.asyRun(function(){c.animate({top:[r+20,q+20]},null,function(){p.push(c);c.hide()},100,10).start()},f||5000)}}});Class("linb.Profile","linb.absProfile",{Constructor:function(k,h,g,i,f,e,d){arguments.callee.upper.apply(this,arguments);var c=this;_.merge(c,d);c.key=h||c.key||"";c.alias=g||c.alias||"",c.properties=f?_.copy(f):(c.properties||{});c.events=e?_.copy(e):(c.events||{});c.host=k||c.host||c;c.box=i||c.box||c.constructor;if(c.events){c.setEvents(c.events);delete c.events}c._links={}},Instance:{setEvents:function(d,e){var c=this.box.$EventHandlers;if(_.isHash(d)){return _.merge(this,d,"all",function(g,f){return c[f]})}else{if(c[d]){this[d]=e}}},getEvents:function(e){if(e){return this[e]}else{var c=this,d,f={};_.each(c.box.$EventHandlers,function(h,g){if(c[g]){f[g]=c[g]}});return f}},getProperties:function(c){var d=this.properties;return c?d[c]:_.copy(d)},setProperties:function(c,d){if(_.isHash(c)){this.properties=c}else{this.properties[c]=d}},_applySetAction:function(c,d){return c.call(this,d)},__gc:function(){var c=this;c.unLinkAll();_.tryF(c.clearCache,[],c);var d=_.get(c,["box","_namePool"]);if(d){delete d[self.alias]}_.breakO([c.properties,c.events,c],2)},boxing:function(){var c=this,d;if(!c.box){return null}if(!((d=c._cacheInstance)&&d.get(0)==c&&d._nodes.length==1)){d=c._cacheInstance=c.box.pack([c],false)}return d},serialize:function(k,n){var l,m=this,g=(l=m.box._beforeSerialized)?l(m):m,d={alias:g.alias,key:g.key,host:g.host};if(d.host===m){delete d.host}else{if(g.host&&!n){if(k!==false){d.host="@this"}else{delete d.host}}}if(typeof g.theme=="string"){d.theme=g.theme}var i={},f=g.box.$DataStruct,e=linb.absObj.$specialChars;_.merge(i,g.properties,function(p,c){return(c in f)&&f[c]!==p&&!e[c.charAt(0)]});if(!_.isEmpty(i)){d.properties=i}if(!_.isEmpty(l=this.getEvents())){d.events=l}var h=g.box.$EventHandlers;_.filter(d.events,function(p,c){return p!=h[c]});if(_.isEmpty(d.events)){delete d.events}return k===false?d:_.serialize(d)}}});Class("linb.absObj","linb.absBox",{Constructor:function(){arguments.callee.upper.apply(this,arguments);if(arguments[0]!==false&&typeof this._ini=="function"){return this._ini.apply(this,arguments)}},Before:function(d,c,e){linb.absBox.$type[d]=d;return true},After:function(){var y=this,p=arguments.callee,w,x,f,s,d,h,g,e,r,c,q;y._nameId=0;y._namePool={};y._nameTag=y.$nameTag||("ctl_"+(x=y.KEY.split("."))[x.length-1].toLowerCase());y._cache=[];if(y===linb.absObj||y===linb.absObj){return}d=p.a1||(p.a1=_.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel"));for(g=0;r=d[g++];){f={};if((x=y.$parent)&&(h=x.length)){while(h--){_.merge(f,x[h][r])}}y[r]=f}y.setDataModel(y.DataModel);delete y.DataModel;y.setEventHandlers(y.EventHandlers);delete y.EventHandlers;d=p.a5||(p.a5=_.toArr("RenderTrigger,LayoutTrigger"));for(g=0;r=d[g++];){w=[];if((x=y.$parent)&&(e=x.length)){for(h=0;h<e;h++){s=x[h];if(s=s["$"+r]){w.push.apply(w,s)}}}if(y[r]){w.push(y[r])}y["$"+r]=w;delete y[r]}},Static:{$abstract:true,$specialChars:{_:1,$:1},getAll:function(){return this.pack(this._cache)},pickAlias:function(){var d,e=this._namePool,c=this._nameTag;while(e[d=(c+(++this._nameId))]){}return d},setDataModel:function(l){var w=this,s=linb.absObj.$specialChars,g=w.$DataStruct,q=w.$DataModel,d=w.prototype,p,k,u,e,f,h,c;for(p in l){if(!q[p]){q[p]={}}e=l[p];if(null===e||undefined===e){c=_.str.initial(p);delete g[p];delete q[p];delete d["get"+c];delete d["set"+c]}else{u=typeof e;if(u!="object"||e.constructor!=Object){e={ini:e}}g[p]=("ini" in e)?e.ini:(p in g)?g[p]:"";u=q[p];for(k in u){if(!(k in e)){e[k]=u[k]}}q[p]=e}}_.each(l,function(x,n){if(null===x||undefined===x||s[n.charAt(0)]){return}c=_.str.initial(n);f="set"+c;if(!(x&&(x.readonly||x.inner))){var m=x.set;h=d[f];d[f]=(typeof m!="function"&&typeof h=="function")?h:Class._fun(function(y,i){return this.each(function(A){if(!A.properties){return}if(A.properties[n]===y&&!i){return}var B=A.properties[n];if(A.beforePropertyChanged&&false===A.boxing().beforePropertyChanged(A,n,y,B)){return}if(typeof m=="function"){m.call(A,y,B)}else{var z=_.get(A.box.$DataModel,[n,"action"]);A.properties[n]=y;if(typeof z=="function"&&A._applySetAction(z,y,B)===false){A.properties[n]=B}}if(A.afterPropertyChanged){A.boxing().afterPropertyChanged(A,n,y,B)}})},f,w.KEY,null,"instance");delete x.set;if(d[f]!==h){d[f].$auto$=1}}else{delete d[f]}f="get"+c;if(!(x&&x.inner)){var r=x.get;h=d[f];d[f]=(typeof r!="function"&&typeof h=="function")?h:Class._fun(function(){if(typeof r=="function"){return r.call(this.get(0))}else{return this.get(0).properties[n]}},f,w.KEY,null,"instance");delete x.get;if(d[f]!==h){d[f].$auto$=1}}else{delete d[f]}});return w},setEventHandlers:function(d){var c=this;_.each(d,function(h,e){if(null===h){delete c.$EventHandlers[e];delete c.prototype[e]}else{c.$EventHandlers[e]=h;var g=function(i){var f=arguments.length;if(f==1&&(typeof i=="function"||typeof i=="string")){return this.each(function(k){if(k.renderId){k.clearCache()}k[e]=i})}else{if(f==1&&null===i){return this.each(function(k){k.clearCache();delete k[e]})}else{var q=[],n=this.get(0),r=n[e],m=n.host||n,p;if(n.$inDesign){return}if(arguments[0]!=n){q[0]=n}for(p=0;p<f;p++){q[q.length]=arguments[p]}n.$lastEvent=e;if(typeof r=="string"){r=m[r]}if(typeof r=="function"){return _.tryF(r,q,m)}}}};g.$event$=1;g.$original$=h.$original$||c.KEY;g.$name$=e;g.$type$="event";c.plugIn(e,g)}});return c}},Instance:{setAlias:function(h){var d=this,f=this.get(0),c;if(c=f.alias){if(f.host&&f.host!==f){try{delete f.host[c]}catch(g){f.host[c]=undefined}if(f.host._ctrlpool){delete f.host._ctrlpool[c]}}delete d.constructor._namePool[c]}d.constructor._namePool[f.alias=h]=1;if(f.host&&f.host!==f){f.host[h]=d;if(f.host._ctrlpool){f.host._ctrlpool[h]=d.get(0)}}return d},getAlias:function(){return this.get(0).alias},alias:function(c){return c?this.setAlias(value):this.getAlias()},host:function(d,c){return d?this.setHost(d,c):this.getHost()},setHost:function(e,d){var c=this;c.get(0).host=e;if(d){c.setAlias(d)}return c},getHost:function(){return this.get(0).host}}});Class("linb.DataBinder","linb.absObj",{Instance:{_ini:function(f,k,i){var l=this,g=l.constructor,d,m,h=g._namePool,e;if(f&&f["linb.Profile"]){d=f;e=d.alias||g.pickAlias()}else{if(f&&f.key&&linb.absBox.$type[f.key]){m=f;f=null;e=m.alias;e=(e&&!h[e])?e:g.pickAlias()}else{e=g.pickAlias()}d=new linb.Profile(i,l.$key,e,g,f,k,m)}h[e]=1;d._n=d._n||[];d._valuesMap=d._valuesMap||{};d.link(g._cache,"self").link(linb._pool,"linb");if(!d.name){d.boxing().setName(e)}l._nodes.push(d);d._cacheInstance=l;return l},destroy:function(){this.each(function(d){var e=d.box,c=d.properties.name;_.arr.each(d._n,function(f){if(f){e._unBind(c,f)}});delete e._pool[c];d.__gc()})},updateValue:function(){return this.each(function(e,c){var d=e._valuesMap;_.arr.each(e._n,function(f){f.boxing().updateValue();d[f.properties.dataField]=f.properties.value})})},resetValue:function(i,g){var f,h,e,k,d;g=g!==false;return this.each(function(l,c){if(!i){i={}}var m=g?i:l._valuesMap;_.arr.each(l._n,function(n){h=n.properties;f=h.dataField;if(g||f in i){e=(i&&f in i)?i[f]:"";m[f]=e;k="";d=n.boxing();if(_.isHash(e)){k=_.isSet(e.caption)?e.caption:null;e=e.value}d.resetValue(e);if(!_.isSet(h.caption)&&d.setCaption&&k!==null){_.tryF(d.setCaption,[k,true],d)}}});l._valuesMap=m})},getUI:function(c){var d;if(!c){d=linb.UI.pack(this.get(0)._n,false)}else{_.arr.each(this.get(0)._n,function(e){if(e.properties.dataField==c){d=e.boxing();return false}})}return d},checkValid:function(){return linb.absValue.pack(this.get(0)._n,false).checkValid()},getValue:function(c,f,i){var e=this,h=e.get(0),d=false;_.arr.each(h._n,function(k){var l=k.properties;if(l.value!==l.$UIvalue){d=true;return false}});if(d&&!e.checkValid()){return null}var g={};_.arr.each(h._n,function(n){var q=n.properties,k=n.boxing(),l=k.getValue(),m=k.getUIValue();if(!c||(c&&(m+" ")!==(l+" "))){if(i&&k.getCaption){g[q.dataField]={value:m,caption:k.getCaption()}}else{g[q.dataField]=m}if(f!==false&&n.renderId){k.updateValue()}}});if(!c){_.merge(g,h._valuesMap,"without")}if(f!==false){_.merge(h._valuesMap,g,"all")}return g},setHost:function(e,d){var c=this;if(e&&d){c.setName(d)}return arguments.callee.upper.apply(c,arguments)}},Static:{$nameTag:"databinder_",_pool:{},destroyAll:function(){this.pack(this._pool,false).destroy();this._pool={}},getFromName:function(c){var d=this._pool[c];return d&&d.boxing()},_bind:function(e,h){var m,l,g=this._pool[e];if(!g){g=new linb.DataBinder();g.setName(e);g=g.get(0)}var d=g._valuesMap;if(h){if(_.arr.indexOf(g._n,h)==-1){h.link(g._n,"databinder."+e)}var f=h.properties,i,k;if(m=f.dataField){l=(d&&m in d)?d[m]:"";d[m]=l;i="";k=h.boxing();if(_.isHash(l)){i=_.isSet(l.caption)?l.caption:null;l=l.value}k.resetValue(l);if(!_.isSet(f.caption)&&k.setCaption&&i!==null){_.tryF(k.setCaption,[i,true],k)}}}},_unBind:function(c,d){if(d&&d.box&&this._pool[c]){d.unLink("databinder."+c)}},DataModel:{name:{set:function(g,h){var i=this,l=linb.DataBinder,d=l._pool,k=d[h],e=d[g],f;d[i.properties.name=g]=i;if(k&&!e&&i._n.length){f=linb.absValue.pack(_.copy(i._n));_.arr.each(i._n,function(c){l._unBind(h,c)});f.setDataBinder(g)}if(e&&!k){i._n=e._n}if(k){delete d[h]}}}}}});Class("linb.UIProfile","linb.Profile",{Instance:{renderId:null,_render:function(){var h=this,g,m=linb.$cache.profileMap;if(!h.renderId){var k=linb.Dom.byId(h.$domId);if(!k){return}if(h.domId!=h.$domId){k.id=h.domId}m[h.domId]=m[h.$domId]=h;if(!k.$linbid){linb.UI.$addEventsHanlder(k,true)}h.renderId=k.$linbid;k=null}if(g=h.RenderTrigger){for(var f=0,d=g.length;f<d;f++){g[f].call(h)}delete h.RenderTrigger;if(h.onRender){h.boxing().onRender(h)}_.tryF(h.$onrender,[],h)}if(arguments[0]===true&&(g=h.LayoutTrigger)){for(var f=0,d=g.length;f<d;f++){g[f].call(h)}if(h.onLayout){h.boxing().onLayout(h)}}if(!h.properties.lazyAppend){if(h.children){for(var f=0,e;e=h.children[f++];){if(e[0]._render){e[0]._render(true)}}}if(h.$attached){for(var f=0,e;e=h.$attached[f++];){if(e._render){e._render(true)}}delete h.$attached}if(h.exchildren){var c=[];for(var f=0,e;e=h.exchildren[f++];){h.boxing().append(e[0],e[1])}delete h.exchildren}if(h.excoms){var c=[];for(var f=0,e;e=h.excoms[f++];){e[0].show(null,h.boxing(),e[1],false)}delete h.excoms}}},__gc:function(){var e=this,d;if(e.$destroyed){return}if(e.$beforeDestroy){_.tryF(e.$beforeDestroy,[],e);delete e.$beforeDestroy}_.tryF(e.$ondestory,[],e);if(e.onDestroy){e.boxing().onDestroy()}if(e.destroyTrigger){e.destroyTrigger()}if(!e.serialId){return}if(d=e._$composed){_.each(d,function(f){f.__gc()})}e.clearCache();if(d=e.$dockParent){if(d=e.constructor.getFromDom(d)){_.tryF(d.clearCache,[],d)}}if(!e.$noReclaim){d=linb.$cache.reclaimId;(d[e.key]||(d[e.key]=[])).push(e.serialId)}else{delete e.$noReclaim}delete linb.$cache.profileMap[e.domId];delete linb.$cache.profileMap[e.$domId];if(e.box){delete e.box._namePool[e.alias]}e.unLinkAll();if(e.LayoutTrigger){e.LayoutTrigger.length=0}if(e.RenderTrigger){e.RenderTrigger.length=0}if((d=e.children).length){d=_.copy(d);for(var c=0;c<d.length;c++){d[c][0].__gc();d[c].length=0}d.length=0}e.$destroyed=true;_.tryF(e.$afterdestory,[],e);_.breakO([e.properties,e.events,e.CF,e.CB,e.CC,e.CS,e],2);e.$destroyed=true},unlinkParent:function(){var c=this;delete c.parent;delete c.childrenId;c.unLink("$parent");return c},getRootNode:function(){return linb.getNodeData(this.renderId,"element")},getRoot:function(){return linb([this.renderId],false)},linkParent:function(c,e){var d=this;d.unlinkParent();d.parent=c;d.childrenId=e;d.link(c.children,"$parent",[d,e]);return d},_cacheR1:/^\w[\w_-]*$/,setDomId:function(f){var d=this,e=linb.$cache.profileMap;if(typeof f=="string"&&(d._cacheR1.test(f)||f==d.$domId)&&!linb.Dom.byId(f)){if(d.domId!=d.$domId){delete e[d.domId]}d.domId=f;if(d.renderId){d.getRootNode().id=f}if(e[d.$domId]){e[f]=d}}return d},getDomId:function(){return this.domId},clearCache:function(){var e=this,d=e.$_egetter;for(var c in d){d[c].length=0;delete d[c]}d=e.$_domid;for(var c in d){d[c].__gc();delete d[c]}return e},_getEV:function(n,e,d){var s=this,p=e+"+"+d,m=s.$_egetter||(s.$_egetter={}),c;if(m[p]){Array.prototype.push.apply(n,m[p]);return}else{c=m[p]=[]}var h=linb.$cache.profileMap,r,q;if((r=h[e])&&(r=r.events)&&(r=r[d])){for(var k=0,f=r.length;k<f;k++){if(typeof r[r[k]]=="function"){c.push(n[n.length]=r[r[k]])}}}q=e.split(":")[0].split("-")[1];if(typeof(((r=s._CB)&&(q?(r=r[q]):1))&&(r=r[d]))=="function"){c.push(n[n.length]=r)}else{if(typeof(((r=s.CB)&&(q?(r=r[q]):1))&&(r=r[d]))=="function"){c.push(n[n.length]=r)}else{if(typeof(((r=s.behavior)&&(q?(r=r[q]):1))&&(r=r[d]))=="function"){c.push(n[n.length]=r)}}}},_cacheR2:/<!--\x03([^>^\s]*)\x04-->/g,toHtml:function(e){var x=this,r=x.box,n={},s,q="linb.UIProfile",p="linb.Profile",d,l,f,g,w,u,k;k=r._prepareData(x);if(r._dynamicTemplate){r._dynamicTemplate(x)}s=r._build(x,k);if((!x.properties.lazyAppend||e)&&(g=x.children)){for(l=0;f=g[l++];){if(f[0][q]){d=f[1]||"";w=n[d]||(n[d]=[]);w[w.length]=f[0].toHtml(e)}else{if(!f[0][p]){u.ini.call(u,f[0]);f[0]=u.get(0)}}}}return s.replace(x._cacheR2,function(h,c){return n[c]?n[c].join(""):""})},_buildItems:function(e,d,g){var c=this,f=c.box,h=f._rpt(c,linb.UI.$doTemplate(c,_.get(linb.$cache.template,[f.KEY,c._hash]),d,e));return linb.UI.$toDom(h.replace(c._cacheR2,""),g)},serialize:function(l,s){var n,h,q=this,g=(n=q.box._beforeSerialized)?n(q):q,d={alias:g.alias,key:g.key,host:g.host};if(d.host===q){delete d.host}else{if(g.host&&!s){if(l!==false){d.host="@this"}else{delete d.host}}}if(typeof g.theme=="string"){d.theme=g.theme}if(g.$domId!=g.domId){d.domId=g.domId}var k={},f=g.box.$DataStruct,e=linb.absObj.$specialChars;_.merge(k,g.properties,function(m,c){return(c in f)&&f[c]!==m&&!e[c.charAt(0)]});if(!_.isEmpty(k)){d.properties=k}if(!_.isEmpty(n=this.getEvents())){d.events=n}var i=g.box.$EventHandlers;_.filter(d.events,function(m,c){return m!=i[c]});if(_.isEmpty(d.events)){delete d.events}if(!_.isEmpty(g.CB)){d.CB=_.copy(g.CB)}if(!_.isEmpty(g.CC)){d.CC=_.copy(g.CC)}if(!_.isEmpty(g.CF)){d.CF=_.copy(g.CF)}if(!_.isEmpty(g.CS)){d.CS=_.copy(g.CS)}if(typeof g.theme=="string"){d.theme=g.theme}if(g.children&&g.children.length){g.children.sort(function(c,m){c=parseInt(c[0].properties.tabindex);m=parseInt(m[0].properties.tabindex);return c>m?1:c==m?0:-1});n=d.children=[];_.arr.each(g.children,function(c){h=[c[0].serialize(false,s)];if(c[1]){h[1]=c[1]}n[n.length]=h})}if(g.exchildren&&g.exchildren.length){d.exchildren=g.exchildren}return l===false?d:_.serialize(d)},_applySetAction:function(c,d,e){if(this.renderId){return c.call(this,d,e)}},getKey:function(d){var c;if(d.charAt(0)=="!"){d=linb.use(d).id()}if(d.indexOf(":")==-1){d=(c=linb.$cache.profileMap[d])&&(c.$domId)}return d?d.split(":")[0]:""},getSubId:function(d){var c;if(d.charAt(0)=="!"){d=linb.use(d).id()}if(d.indexOf(":")==-1){d=(c=linb.$cache.profileMap[d])&&(c.$domId)}return d?d.split(":")[2]:""},pickSubId:function(d){var c=this,e,f=c.cache_subid||(c.cache_subid={});if((f[d]||(f[d]=[]))[0]){return f[d].shift()}f=c.subId||(c.subId={});e=(f[d]||(f[d]=new _.id)).next();return e},reclaimSubId:function(e,c){var d=this.cache_subid||(this.cache_subid={});(d[c]||(d[c]=[])).push(e)},_cacheR3:/\./g,_cacheH1:{},getClass:function(e,c){e=this.keys[e]||e;var d=this,f=e+":"+(c||"");return d._cacheH1[f]||(d._cacheH1[f]=e.replace(d._cacheR3,"-").toLowerCase().replace("linb-ui","linb")+(c||""))},_getSubNodeId:function(e,d){var c=this.$domId.split(":");c[0]=e;c[2]=_.isSet(d)?(d+""):"";e=c.join(":");return e==this.$domId?linb.$cache.profileMap[e].domId:e},getSubNode:function(f,d){var c=this;if(!c.renderId){return linb()}var f=c.keys[f]||f,k,e,i,g=c.$_domid||(c.$_domid={});if(d===true){k=linb([c.renderId]).query("*","id",f==c.keys.KEY?c.domId:new RegExp("^"+f+":"+c.serialId))}else{if(!_.isSet(d)&&g[f]&&g[f]._nodes.length==1){return g[f]}k=(e=linb.Dom.byId(i=c._getSubNodeId(f,d)))?linb([e]):((e=c.renderId)&&linb.use(e).query("*","id",i));if(!_.isSet(d)){g[f]=k}}return k},getSubNodes:function(c,e){var f=0,d=[],g;for(;g=c[f++];){Array.prototype.push.apply(d,this.getSubNode(g,e).get())}return linb(d)},getSubNodeByItemId:function(c,d){return(d=this.getSubIdByItemId(d))?this.getSubNode(c,d):linb()},getItemByItemId:function(d){var c;if((c=this.ItemIdMapSubSerialId)&&(c=c[d])){return this.SubSerialIdMapItem[c]}},getItemByDom:function(c){return this.SubSerialIdMapItem&&this.SubSerialIdMapItem[this.getSubId(typeof c=="string"?c.charAt(0)=="!"?((c=linb.use(c).get(0))&&c.id):c:c.id)]},getItemIdByDom:function(d){var c;return(c=this.getItemByDom(d))&&c.id},getSubIdByItemId:function(d){var c;return(c=this.ItemIdMapSubSerialId)&&c[d]},queryItems:function(g,e,d,l,c){var i=[],h=arguments.callee,k=h.f||(h.f=function(p,n,m,s,f,q){_.arr.each(p,function(u,r){if(n===true||n.call(null,u,r,p)){q.push(f?[u,r,p]:u);if(s){return false}}if(m&&u.sub&&u.sub.length){k(u.sub,n,m,s,f,q)}})});k(g,e,d,l,c,i);return i}},Static:{getFromDom:function(c){if((c=typeof c=="string"?c.charAt(0)=="!"?((c=linb.use(c).get(0))&&c.id):c:(c&&c.id))&&(c=linb.Event._getProfile(c))&&c["linb.UIProfile"]){return c}}}});Class("linb.UI","linb.absObj",{Before:function(d,c,e){linb.absBox.$type[d.replace("linb.UI.","").replace("linb.","")]=linb.absBox.$type[d]=d;return true},After:function(){linb.absObj.After.apply(this,arguments);var A=this,p=arguments.callee,y,z,f,x,n,h,g,l,r,s,q,m;A._ctrlId=new _.id();A._idCache=[];A.$cssKeys={};z=A.$Keys;z.KEY=z.$key=A.KEY;A.addTemplateKeys(_.toArr(z,true));s="$Behaviors";f={};if((z=A.$parent)&&(l=z.length)){while(l--){q=z[l][s];for(h in q){if(typeof q[h]=="object"){if(_.isArr(q[h])){x=f[h]||(f[h]=[]);x.push.apply(x,q[h])}else{x=f[h]||(f[h]={});_.merge(x,q[h])}}else{f[h]=q[h]}}}}A[s]=f;s="$Templates";f={};if((z=A.$parent)&&(l=z[0])){for(h in l[s]){if(h.charAt(0)!="$"){f[h]=l[s][h]}}}A[s]=_.clone(f);s="$Appearances";f={};if((z=A.$parent)&&(l=z.length)){while(l--){q=z[l];for(h in q[s]){z=q[s][h];x=f[h]||(f[h]={});_.merge(x,z)}}}A[s]=f;A.setTemplate(A.Templates);delete A.Templates;A.setBehavior(A.Behaviors||{});delete A.Behaviors;A.setAppearance(A.Appearances);delete A.Appearances;if(z=A.PublicAppearance){linb.UI.$cache_css+=A.buildCSSText(z);delete A.PublicAppearance}},Instance:{setTheme:function(e){if(typeof e!="string"||!e){e=null}var d,c=[];this.each(function(f){if(e!=f.theme){if(e===null){delete f.theme}else{f.theme=e}c.push(f)}});linb.UI.pack(c,false).refresh();return this},getTheme:function(){return this.get(0)&&this.get(0).theme},destroy:function(){this.each(function(c){if(c.$destroyed){return}if(c.$beforeDestroy){_.tryF(c.$beforeDestroy,[],c);delete c.$beforeDestroy}if(c.beforeDestroy&&false===c.boxing().beforeDestroy()){return}if(c.renderId){c.getRoot().remove()}else{c.__gc()}});this._nodes.length=0},serialize:function(d,e){var c=[];this.each(function(f){c[c.length]=f.serialize(false,e)});return d===false?c:c.length==1?" new "+c[0].key+"("+_.serialize(c[0])+")":"linb.UI.unserialize("+_.serialize(c)+")"},getProperties:function(d){var e={},f=this.get(0),i=f.properties,g;if(d===true){return _.copy(i)}else{if(typeof d=="string"){return i[d]}else{for(var c in i){g="get"+_.str.initial(c);if(typeof this[g]=="function"){e[c]=this[g].call(this)}}return e}}},setProperties:function(c,e){if(typeof c=="string"){var d={};d[c]=e;c=d}return this.each(function(f){_.each(c,function(h,g){var l="set"+_.str.initial(g),i=f.boxing();if(typeof i[l]=="function"){i[l].call(i,h)}})})},getEvents:function(c){return this.get(0).getEvents(c)},setEvents:function(c,e){if(typeof c=="string"){var d={};d[c]=e;c=d}return this.each(function(g){var f=g.boxing();_.each(c,function(i,h){if(typeof f[h]=="function"){f[h].call(f,i)}})})},_toDomElems:function(){var c=[];_.arr.each(this._nodes,function(d){if(!d.renderId){c.push(d)}});if(c.length){linb.UI.pack(c,false).render()}c.length=0;_.arr.each(this._nodes,function(d){c.push(d.renderId)});return c},_ini:function(l,f,r,z,d,m,n,k){var s=this,y=s.constructor,g,q="default",h,e=y._namePool,u,x;if(l&&l["linb.Profile"]){g=l;u=g.alias||y.pickAlias();linb.UIProfile.apply(g,[r,s.$key,u,y,null,f])}else{if(l&&l.key&&linb.absBox.$type[l.key]){h=l;l=null;u=h.alias;u=(u&&!e[u])?u:y.pickAlias()}else{u=y.pickAlias()}g=new linb.UIProfile(r,s.$key,u,y,l,f,h)}e[u]=1;for(var w in (x=y.$DataStruct)){if(!(w in g.properties)){g.properties[w]=typeof x[w]=="object"?_.copy(x[w]):x[w]}}g.keys=y.$Keys;g.CS=d?_.copy(d):(g.CS||{});g.CB=n?_.copy(n):(g.CB||{});g.CC=m?_.copy(m):(g.CC||{});g.CF=k?_.copy(k):(g.CF||{});if(typeof z=="string"){g.theme=z}g.template=y.getTemplate();g.behavior=y.$Behaviors;if(!g.serialId){g.serialId=y._pickSerialId()}g.$domId=g.key+":"+g.serialId+":";g.domId=g.domId||g.$domId;g.RenderTrigger=_.copy(y.$RenderTrigger);g.LayoutTrigger=_.copy(y.$LayoutTrigger);g.link(linb.UI._cache,"UI").link(y._cache,"self").link(linb._pool,"linb");x=g.children;g.children=[];if(x&&x.length){for(var w=0,p;p=x[w++];){if(!p[0]["linb.UIProfile"]){p[0]=new (linb.SC(p[0].key))(p[0]).get(0)}p[0].linkParent(g,p[1])}}s._nodes.push(g);g._cacheInstance=s;return s},busy:function(f,e,d,c){f=typeof f=="string"?f:"Loading...";e=typeof e=="string"?e:'<span style="background:url('+linb.ini.img_busy+') no-repeat left center;padding-left:16px;">'+f+"</span>";return this.each(function(g){_.resetRun(g.$linbid+":busy",function(m,l,i){var p=m.keys;l=p[l]||p.BORDER||p.PANEL||p.KEY;var h=m.getSubNode(l,i);if(h.isEmpty()){return}var k=h.cssSize(),n;if(!k.width){k.width=h.offsetWidth()}if(!k.height){k.width=h.offsetHeight()}n=m.$busy=linb.create('<div style="left:0;top:0;z-index:10;position:absolute;background-color:#DDD;"></div><div style="left:0;top:0;z-index:20;text-align:center;position:absolute;"><div>'+e+"</div></div>");linb([n.get(0)]).css({opacity:0.5});h.append(n);n.css({width:k.width+"px",height:k.height+"px"});linb([n.get(1).firstChild]).html(e,false).css("paddingTop",k.height/2+"px")},50,[g,d,c])})},free:function(){return this.each(function(c){_.resetRun(c.$linbid+":busy");if(c.$busy){c.$busy.remove();delete c.$busy}})},reLayout:function(c){return this.each(function(e){if(!e.renderId){return}var d=e.properties;if((!e.$noB)&&d.border&&e.boxing()._border){e.boxing()._border(null,false)}if(d.dock&&d.dock!="none"){e.boxing().adjustDock(c)}else{if(c){e._resize_h=-1;e._resize_w=-1}linb.UI.$tryResize(e,d.width,d.height,c)}})},toHtml:function(d){var c=[];_.arr.each(this._nodes,function(e){c[c.length]=e.toHtml(d)});return c.join("")},render:function(d){var k=this,h=[],g,f,c,e=k._nodes,p,m=[],q=linb.Dom.byId;linb.UI.$applyCSS();for(g=0;c=e[g++];){if(!c.renderId&&!linb.Dom.byId(c.domId)&&!linb.Dom.byId(c.$domId)){h[h.length]=c}}if(f=h.length){for(g=0;g<f;g++){m[m.length]=h[g].toHtml()}linb.UI.$toDom(m.join(""))}for(g=0;c=e[g++];){c._render(d)}m.length=h.length=0;return k},renderOnto:function(g,f){g=linb(g);if(g.isEmpty()){return this}var d=this,h=d.get(0),e=arguments.callee,c=e.para||(e.para=function(l){var k=l.cssRegion();k.tabindex=l.attr("tabIndex");if(k.tabindex<=0){delete k.tabindex}k.zIndex=l.css("zIndex");k.position=l.css("position");return k}),i=g.id();_.merge(h.properties,c(g),"all");h.properties.dock="none";if(!h.alias&&i){h.alias=i}if(h.alias){d.setHost(f||window,h.alias)}d.render(true);g.replace(d.getRoot());if(i){d.setDomId(i)}return d},setDomId:function(c){this.get(0).setDomId(c);return this},hide:function(){return this.each(function(c){if(c.renderId){c.getRoot().hide();c.properties.top=c.properties.left=-10000;c.properties.dockIgnore=true}})},show:function(d,c,f,e){return this.each(function(k){var h=k.properties,g;f=(f||f===0)?(parseInt(f)||0):null;e=(e||e===0)?(parseInt(e)||0):null;if(f!==null){h.left=f}if(e!==null){h.top=e}if(linb.getNodeData(k.renderId,"_linbhide")){g=1;h.dockIgnore=false;k.getRoot().show(f&&(f+"px"),e&&(e+"px"));if(h.dock&&h.dock!="none"){linb.UI.$dock(k,false,true)}}else{if(!d&&(!k.renderId||(k.getRootNode().id||"").indexOf(linb.Dom._emptyDivId)===0)){d=linb("body")}}var i=d,l;if(i){if(i["linb.UIProfile"]){l=i.renderId;i=i.boxing()}else{if(i["linb.UI"]){l=(l=i.get(0))&&l.renderId}else{l=(i=linb(i))&&i._nodes[0]}}if(l){i.append(k.boxing(),c);if(!g){k.getRoot().show(f&&(f+"px"),e&&(e+"px"))}}}})},clone:function(){var c=[],d=function(f){delete f.alias;delete f.domId;if(f.children){for(var e=0,g;g=f.children[e];e++){d(g)}}};this.each(function(e){e=e.serialize(false,true);d(e);c.push(e)});return this.constructor.unserialize(c)},refresh:function(){var n,e,k,c,m,f,g,i,h,d,l;return this.each(function(r){if(!r.renderId){return}h=r.box;f=r.$linbid;g=r.serialId;if(typeof r.boxing().getUIValue=="function"){l=r.boxing().getUIValue();if(r.boxing().getValue()===l){l=null}}if(k=!!r.parent){c=r.parent.boxing();n=r.childrenId}else{c=r.getRoot().parent()}e=linb.$getGhostDiv();r.boxing().getChildren().reBoxing().each(function(s){e.appendChild(s)});e=null;d=_.copy(r.children);r.boxing().removeChildren();m=r.serialize(false,true);i=r.$refreshTrigger;var q=linb.create("span");r.getRoot().replace(q);r.$noReclaim=1;var p=r._cacheInstance;r.boxing().destroy();_.merge(r,m,"all");delete r.$destroyed;r.$linbid=f;r.serialId=g;r=new h(r).render();if(p){_.merge(p,r,"all");r.get(0)._cacheInstance=p}if(i){i.call(i.target,r.get(0))}if(k){c.append(r,n)}else{c.append(r)}_.arr.each(d,function(s){delete s[0].$dockParent;r.append.apply(r,s)});q.replace(r.get(0).getRoot());q.remove();q=null;if(l){r.setUIValue(l,true)}})},append:function(e,d){if(_.isHash(e)||_.isStr(e)){e=linb.create(e)}if(e["linb.UIProfile"]){e=e.boxing()}var f=this.get(0),c;if(f.beforeAppend&&false===this.beforeAppend(f,e)){return}if(e["linb.Com"]){if(f.renderId){if(d=typeof d=="string"?d:null){d=f.getSubIdByItemId(d)}c=f.keys.PANEL?f.getSubNode(f.keys.PANEL,d):f.getRoot();if(!c.isEmpty()){c.append(e)}}else{(f.excoms||(f.excoms=[])).push([e,d])}}else{if(d!==false){if(e["linb.UI"]){e.each(function(g){g.linkParent(f,d)})}}if(f.renderId){if(d=typeof d=="string"?d:null){d=f.getSubIdByItemId(d)}c=f.keys.PANEL?f.getSubNode(f.keys.PANEL,d):f.getRoot();if(!c.isEmpty()){c.append(e)}}else{if(!e["linb.UI"]){if(!f.exchildren){f.exchildren=[]}f.exchildren.push([e,d])}}}if(f.afterAppend){this.afterAppend(f,e)}return this},getChildren:function(d){var c=[];_.arr.each(this.get(0).children,function(e){if(d?e[1]==d:1){c.push(e[0])}});return linb.UI.pack(c)},removeChildren:function(c,d){return this.each(function(e){var f=_.copy(e.children);_.arr.each(f,function(g){if(c===true?1:c?typeof c=="string"?(g[1]==c):(g[0]==(c["linb.UI"]?c.get(0):c)):1){if(e.beforeRemove&&false===e.boxing().beforeRemove(e,g[0],g[1],d)){return}g[0].unlinkParent();if(e.afterRemove){e.boxing().afterRemove(e,g[0],g[1],d)}if(d){g[0].boxing().destroy()}}})})},draggable:function(d,f,e,c){return this.each(function(g){g.getSubNode(g.keys[e]||"KEY",true).beforeMousedown(d?function(k,h,i){if(linb.Event.getBtn(h)!="left"){return}if(k.properties.disabled){return}c=c||{};c.dragKey=d;c.dragData=typeof f=="function"?f():f;_.merge(c,{dragCursor:"pointer",dragType:"icon",dragDefer:1});linb.use(i).startDrag(h,c)}:null,"_d",-1).beforeDragbegin(d?function(h,i,k){linb.use(k).onMouseout(true,{$force:true}).onMouseup(true)}:null,"_d",-1);if(!d){g.clearCache()}})},setCustomFunction:function(c,d){return this.each(function(e){if(typeof c=="string"){if(d){e.CF[c]=d}else{delete e.CF[c]}}else{e.CF=c||{}}})},setCustomClass:function(d,f){var e=arguments.callee,c=(e.fun||(e.fun=function(p,l,m,k){if(!m[l]){return}var n=p.getSubNode(l,true),g;if(!n.isEmpty()){_.arr.each(m[l].split(/\s+/),function(h){n[k?"removeClass":"addClass"](h)})}}));return this.each(function(k){var g=_.copy(k.CC);if(typeof d=="string"){if(k.renderId){if(d in g){c(k,d,g,true)}}if(!f){delete k.CC[d]}else{k.CC[d]=f;if(k.renderId){c(k,d,k.CC)}}}else{if(!!d&&typeof d=="object"){if(k.renderId){for(var h in d){c(k,h,g,true)}for(var h in d){c(k,h,d)}}k.CC=d}else{if(k.renderId){for(var h in g){c(k,h,g,true)}}k.CC={}}}})},setCustomStyle:function(d,f){var e=arguments.callee,c=(e.fun||(e.fun=function(p,l,m,k){if(!m[l]){return}var n=p.getSubNode(l,true),g;if(!n.isEmpty()){_.arr.each(m[l].split(";"),function(r,h){if((g=r.split(":")).length==2){g[0]=g[0].replace(/\-(\w)/g,function(s,i){return i.toUpperCase()});try{n.css(g[0],k?"":g[1])}catch(q){}}})}}));return this.each(function(k){var g=_.copy(k.CS);if(typeof d=="string"){if(k.renderId){if(d in g){c(k,d,g,true)}}if(!f){delete k.CS[d]}else{k.CS[d]=f;if(k.renderId){c(k,d,k.CS)}}}else{if(!!d&&typeof d=="object"){if(k.renderId){for(var h in d){c(k,h,g,true)}for(var h in d){c(k,h,d)}}k.CS=d}else{if(k.renderId){for(var h in g){c(k,h,g,true)}}k.CS={}}}})},setCustomBehavior:function(c,d){return this.each(function(e){if(typeof c=="string"){if(e.keys[c]){e.CB[c]=d||{}}}else{e.CB=c||{}}if(e.CB.KEY){_.merge(e.CB,e.CB.KEY,"all");delete e.CB.KEY}e.clearCache()})},adjustDock:function(c){return this.each(function(d){if(d.properties.dock&&d.properties.dock!="none"){if(c){d.getRootNode().style.width=0;d.getRootNode().style.height=0;d._resize_h=-1;d._resize_w=-1}linb.UI.$dock(d,true,true)}})}},Initialize:function(){var d=this.prototype;_.arr.each("getSubNode,getDomId,getRootNode,getRoot".split(","),function(f){if(!d[f]){d[f]=function(){var g=this.get(0);return g[f].apply(g,arguments)}}d[f].$original$="linb.UI";d[f].$type$="instance";d[f].$name$=f});var c=this,e={};_.each(linb.UI.$ps,function(f,g){e[g]={ini:"auto",action:function(l){var i=this,m=i.properties,h=false,k;i.getRoot()[g]?i.getRoot()[g](l):linb.Dom._setPxStyle(i.getRootNode(),g,l);if(g=="width"||g=="height"){if(!i.box._onresize&&i.onResize){i.boxing().onResize(i,g=="width"?l:null,g=="height"?l:null)}}else{if(i.onMove){i.boxing().onMove(i,g=="left"?l:null,g=="top"?l:null,g=="right"?l:null,g=="bottom"?l:null)}}if(m.dock!="none"){k={$type:m.dock,$dockid:_.arr.indexOf(["width","height","fill","cover"],m.dock)!=-1?i.$linbid:null};switch(m.dock){case"top":if(g!="height"&&g!="top"){return}k.width=k.height=1;break;case"bottom":if(g!="height"&&g!="bottom"){return}k.width=k.height=1;break;case"left":if(g!="width"&&g!="left"){return}k.width=k.height=1;break;case"right":if(g!="width"&&g!="right"){return}k.width=k.height=1;break;case"width":if("width"==g){return}k.width=1;break;case"height":if("height"==g){return}k.height=1;break;case"fill":case"cover":if(g=="width"&&g=="height"){return}k.width=k.height=1;break}_.tryF(i.$dockFun,[k],i)}}}});_.merge(e,{renderer:{ini:null},zIndex:{ini:1,action:function(f){this.getRoot().css("zIndex",f)}},tabindex:{ini:1,action:function(h){var g=this,f=new RegExp("^"+g.key+"[-\\w]*:"+g.serialId+":");g.getRoot().query("*",function(i){return i.id&&f.test(i.id)&&i.getAttribute("tabIndex")}).attr("tabIndex",h)}},position:{ini:"absolute",listbox:["","static","relative","absolute"],action:function(f){this.getRoot().css("position",f)}},visibility:{listbox:["","visible","hidden"],action:function(f){this.getRoot().css("visibility",f);if(this.$resizer){if(f=="hidden"){this.$resizer.hide()}else{this.$resizer.show()}}linb.setNodeData(this.getRootNode(),"_setVisibility",1)}},display:{listbox:["","none","block","inline","inline-block"],action:function(f){if(f=="inline-block"){this.getRoot().setInlineBlock()}else{this.getRoot().css("display",f)}}}});c.setDataModel(e);linb.UI.$cache_css+=linb.UI.buildCSSText({".linbcss-noscroll, .linbcss-noscroll BODY, .linbcss-viewport, .linbcss-viewport BODY":{overflow:"hidden",height:"100%",border:"0 none",margin:"0",padding:"0"},".ui-ctr":{},".ui-draggable":{},".ui-btn, .ui-btni, .ui-btnc":{height:"22px",background:linb.UI.$bg("button.gif","no-repeat",true)},".ui-btn":{$order:1,"white-space":"nowrap","vertical-align":"top",overflow:"hidden","background-position":"right top","padding-right":"4px","font-size":"12px"},".ui-btn *":{cursor:"pointer"},".ui-btnc button, .ui-btnc a":{display:linb.$inlineBlock,zoom:linb.browser.ie?1:null,background:"transparent",border:0,margin:0,padding:0},".ui-btnc a":{padding:"0 4px"},".ui-btni":{$order:1,"background-position":"left -60px","padding-left":"4px","vertical-align":"top"},".ui-btnc":{$order:1,"background-position":"left -30px","background-repeat":"repeat-x","padding-top":"3px","vertical-align":"top"},".ui-btn-mouseover, .ui-btn-focus":{$order:2,"background-position":"right -90px"},".ui-btn-mouseover .ui-btni, .ui-btn-focus .ui-btni":{$order:2,"background-position":"left -150px"},".ui-btn-mouseover .ui-btnc, .ui-btn-focus .ui-btnc":{$order:2,"background-position":"left -120px"},".ui-btn-mousedown, .ui-btn-checked":{$order:3,"background-position":"right -180px"},".ui-btn-mousedown .ui-btni, .ui-btn-checked .ui-btni":{$order:3,"background-position":"left -240px"},".ui-btn-mousedown .ui-btnc, .ui-btn-checked .ui-btnc":{$order:3,"background-position":"left -210px"},".ui-image":{"vertical-align":"middle",width:"16px",height:"16px","background-repeat":"no-repeat"},".ui-icon":{"vertical-align":"middle",width:"16px",height:"16px","background-repeat":"no-repeat","background-position":"center",margin:"0 2px"},".ui-busy":{background:"url("+linb.ini.img_busy+") no-repeat center center","background-position":"center"},".uicmd-close, .uicmd-opt, .uicmd-pop, .uicmd-land, .uicmd-refresh, .uicmd-toggle, .uicmd-toggle2, .uicmd-min, .uicmd-max,.uicmd-restore,.uicmd-pin, .uicmd-check, .uicmd-radio, .uicmd-add, .uicmd-remove":{background:linb.UI.$bg("icons.gif","no-repeat 0 0",true),width:"16px",height:"16px","margin-right":"2px",cursor:"default","vertical-align":"middle"},".uicmd-opt":{$order:1,"background-position":"0 0"},".uicmd-opt-mouseover":{$order:2,"background-position":"0 -20px"},".uicmd-opt-mousedown":{$order:3,"background-position":"0 -40px"},".uicmd-pop, .uicmd-land":{$order:1,"background-position":"-40px 0"},".uicmd-pop-mouseover, .uicmd-land-mouseover":{$order:2,"background-position":"-40px -20px"},".uicmd-pop-mousedown, .uicmd-land-mousedown":{$order:3,"background-position":"-40px -40px"},".uicmd-refresh":{$order:1,"background-position":"-280px 0"},".uicmd-refresh-mouseover":{$order:2,"background-position":"-280px -20px"},".uicmd-refresh-mousedown":{$order:3,"background-position":"-280px -40px"},".uicmd-pin":{$order:1,"background-position":"-80px 0"},".uicmd-pin-mouseover":{$order:2,"background-position":"-80px -20px"},".uicmd-pin-mousedown":{$order:3,"background-position":"-80px -40px"},".uicmd-pin-checked, .uicmd-pin-checked-mouseover, .uicmd-pin-checked-mousedown":{$order:4,"background-position":"-80px -40px"},".uicmd-min":{$order:1,"background-position":"-120px 0"},".uicmd-min-mouseover":{$order:2,"background-position":" -120px -20px"},".uicmd-min-mousedown":{$order:3,"background-position":"-120px -40px"},".uicmd-restore":{$order:1,"background-position":"-160px 0"},".uicmd-restore-mouseover":{$order:2,"background-position":"-160px -20px"},".uicmd-restore-mousedown":{$order:3,"background-position":"-160px -40px"},".uicmd-max":{$order:1,"background-position":"-200px 0"},".uicmd-max-mouseover":{$order:2,"background-position":"-200px -20px"},".uicmd-max-mousedown":{$order:3,"background-position":"-200px -40px"},".uicmd-close":{$order:1,"background-position":"-240px 0"},".uicmd-close-mouseover":{$order:2,"background-position":"-240px -20px"},".uicmd-close-mousedown":{$order:3,"background-position":"-240px -40px"},".uicmd-check":{$order:1,margin:"0 4px 0 2px","background-position":"-20px -70px"},".uicmd-check-mouseover":{$order:2,"background-position":"-20px -90px"},".uicmd-check-mousedown":{$order:3,"background-position":"-20px -110px"},".uicmd-check-checked":{$order:4,"background-position":"0 -70px"},".uicmd-check-checked-mouseover":{$order:5,"background-position":"0 -90px"},".uicmd-check-checked-mousedown":{$order:6,"background-position":"0 -110px"},".uicmd-radio":{$order:1,margin:"0 4px 0 2px","background-position":"-60px -70px"},".uicmd-radio-mouseover":{$order:2,"background-position":"-60px -90px"},".uicmd-radio-mousedown":{$order:3,"background-position":"-60px -110px"},".uicmd-radio-checked":{$order:4,"background-position":"-40px -70px"},".uicmd-radio-checked-mouseover":{$order:5,"background-position":"-40px -90px"},".uicmd-radio-checked-mousedown":{$order:6,"background-position":"-40px -110px"},".uicmd-add":{$order:1,"background-position":"-56px -222px"},".uicmd-add-mouseover":{$order:2,"background-position":"-56px -222px"},".uicmd-add-mousedown":{$order:3,"background-position":"-56px -222px"},".uicmd-remove":{$order:1,"background-position":"-72px -222px"},".uicmd-remove-mouseover":{$order:1,"background-position":"-72px -222px"},".uicmd-remove-mousedown":{$order:1,"background-position":"-72px -222px"},".uicmd-toggle":{$order:1,"background-position":"-160px -70px"},".uicmd-toggle-mouseover":{$order:2,"background-position":"-160px -90px"},".uicmd-toggle-mousedown":{$order:3,"background-position":"-160px -110px"},".uicmd-toggle-checked":{$order:4,"background-position":"-180px -70px"},".uicmd-toggle-checked-mouseover":{$order:5,"background-position":"-180px -90px"},".uicmd-toggle-checked-mousedown":{$order:6,"background-position":"-180px -110px"},".uicmd-toggle2":{$order:1,"background-position":"-200px -70px"},".uicmd-toggle2-mouseover":{$order:2,"background-position":"-200px -90px"},".uicmd-toggle2-mousedown":{$order:3,"background-position":"-200px -110px"},".uicmd-toggle2-checked":{$order:4,"background-position":"-220px -70px"},".uicmd-toggle2-checked-mouseover":{$order:5,"background-position":"-220px -90px"},".uicmd-toggle2-checked-mousedown":{$order:6,"background-position":"-220px -110px"},".uicmd-none":{display:"none"},".uicmd-empty":{$order:1000,width:"16px",height:"16px","margin-right":"2px",cursor:"default","vertical-align":"middle",background:"none"},".uibar-top, .uibar-bottom, .uibar-top-s, .uibar-bottom-s":{position:"relative","vertical-align":"baseline","font-size":0,"line-height":0},".uibar-top td, .uibar-top-s td, .uibar-bottom td, .uibar-bottom-s td":{$order:1,background:linb.UI.$bg("bar_vertical.gif","no-repeat 0 0",true)},".uibar-top, .uibar-top .uibar-t":{height:"29px"},".uibar-top .uibar-tdl":{$order:1,"padding-left":"4px",height:"100%","background-position":"0 0"},".uibar-top .uibar-tdm":{$order:1,"background-position":"0 -30px","background-repeat":"repeat-x"},".uibar-top .uibar-tdr":{$order:1,"padding-left":"4px","background-position":"right -60px"},".uibar-top-focus .uibar-tdl":{$order:2,"padding-left":"4px",height:"100%","background-position":"left -90px"},".uibar-top-focus .uibar-tdm":{$order:2,"background-position":"left -120px","background-repeat":"repeat-x"},".uibar-top-focus .uibar-tdr":{$order:2,"padding-left":"4px","background-position":"right -150px"},".uibar-top .uibar-cmdl":{overflow:"hidden",position:"absolute",left:0,top:"6px",width:"92%",height:"22px","padding-left":"8px","white-space":"nowrap"},".uibar-top .uibar-cmdr":{position:"absolute",top:"6px",right:"8px","text-align":"right"},".uicon-main":{position:"relative","padding-left":"5px","font-size":0,"line-height":0,"z-index":1,overflow:"visible",background:linb.UI.$bg("bar_horizontal.gif","repeat-y -595px top",true)},".uicon-maini":{"padding-right":"5px","font-size":0,"line-height":0,background:linb.UI.$bg("container_right.gif","#AAD2FA repeat-y right top",true)},".uibar-bottom, .uibar-bottom .uibar-t":{height:"12px"},".uibar-bottom .uibar-tdl":{$order:1,"padding-left":"5px",height:"100%","background-position":"left -189px"},".uibar-bottom .uibar-tdm":{$order:1,"background-position":"left -211px","background-repeat":"repeat-x"},".uibar-bottom .uibar-tdr":{$order:1,"padding-left":"5px","background-position":"right -233px"},".uibar-top-s, .uibar-top-s .uibar-t":{$order:3,height:"7px"},".uibar-top-s .uibar-tdl":{$order:3,height:"100%","padding-left":"5px","background-position":"left -261px"},".uibar-top-s .uibar-tdm":{$order:3,"background-position":"left -283px","background-repeat":"repeat-x"},".uibar-top-s .uibar-tdr":{$order:3,"padding-left":"5px","background-position":"right -305px"},".uibar-top-s .uibar-cmdl":{$order:3,display:"none"},".uibar-top-s .uibar-cmdr":{$order:3,display:"none"},".uibar-bottom-s, .uibar-bottom-s .uibar-t":{$order:3,height:"6px"},".uibar-bottom-s .uibar-tdl":{$order:3,height:"100%","padding-left":"5px","background-position":"left -327px"},".uibar-bottom-s .uibar-tdm":{$order:3,"background-position":"left -349px","background-repeat":"repeat-x"},".uibar-bottom-s .uibar-tdr":{$order:3,"padding-left":"5px","background-position":"right -371px"}})+linb.UI.buildCSSText({".ui-ctrl":{"-moz-user-select":linb.browser.gek?"-moz-none":null,"vertical-align":"middle"},".uiw-shell":{background:"transparent",display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,border:0,padding:0,margin:0},".uiw-frame":{$order:1,display:"block",position:"relative",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},".uiw-border":{$order:2,display:"block",position:"absolute",border:0,padding:0,margin:0,left:0,top:0,width:"100%",height:"100%"}})+linb.UI.buildCSSText({".uibg-base":{"background-color":"#fff"},".uibg-bar":{"background-color":"#aad2fa"},".uiborder-flat":{border:"solid 1px #648cb4"},".uiborder-inset":{border:"solid 1px","border-color":"#648cb4 #c8e1fa #c8e1fa #648cb4"},".uiborder-outset":{border:"solid 1px","border-color":"#c8e1fa #648cb4 #648cb4 #c8e1fa"}});linb.UI.$cache_css2+=linb.UI.buildCSSText({".ui-dirty":{$order:1,"background-image":linb.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-390px -290px"},".ui-inputdisabled":{color:"#808080"},".ui-itemreadonly":{$order:2,color:"#808080"},".ui-readonly, .ui-readonly *":{$order:2,color:"#808080"},".ui-itemdisabled":{$order:2,cursor:"not-allowed",color:"#808080"},".ui-disabled, .ui-disabled *":{$order:2,color:"#808080"},".ui-invalid, .ui-invalid *":{$order:1,"background-color":"#FFEBCD"},"#linblangkey":{"vertical-align":"baseline"}})},$End:function(){linb.UI.$cache_css+=this.buildCSSText(this.$Appearances)},Static:{$cache_css:"",$cache_css2:"",$css_tag_dirty:"ui-dirty",$css_tag_invalid:"ui-invalid",$tag_left:"{",$tag_right:"}",$tag_subId:"_serialId",$x01:/\x01/img,$x01r:/ \x01 /img,$tag_special:"\x01",$ID:"\x01id\x01",$DOMID:"\x01domid\x01",$CLS:"\x01cls\x01",$childTag:"<!--\x03{id}\x04-->",$onSize:function(d,f){var c=d.getRootNode().style;if(f.width||f.height){linb.UI.$tryResize(d,c.width,c.height)}c=null},$theme:"default",$ps:{left:1,top:1,width:1,height:1,right:1,bottom:1},$toDom:function(k,h){if(h===false){return _.str.toDom(k)}var d=linb.Dom.getEmptyDiv().get(0),g=[];d.innerHTML=k;this.$addEventsHanlder(d);for(var f=0,e=d.childNodes,c=e.length;f<c;f++){linb.$registerNode(e[f]);g[g.length]=e[f].$linbid}d=null;return linb(g,false)},$addEventsHanlder:function(f,r){var c=linb.$cache.UIKeyMapEvents,m=linb.Event._eventHandler,e=_.toArr(f.getElementsByTagName("*")),p,g,n,h,d,s,q;if(r){e.push(f)}if(g=e.length){for(p=0;p<g;p++){if((f=e[p]).nodeType!=1){continue}if(d=f.id){if(s=c[d]||c[d.substr(0,d.indexOf(":"))]){q=linb.$registerNode(f);q=q.eHandlers||(q.eHandlers={});for(n in s){q[n]=s[n];if(h=m[n]){q[h]=f[h]=s[n]}}}}}}e.length=0;f=null},getFromDom:function(c){if(c=linb.UIProfile.getFromDom(c)){return c.boxing()}},unserialize:function(e,g){if(typeof e=="string"){e=_.unserialize(str)}var d=function(f){if(_.isArr(f)){f=f[0]}delete f.serialId;if(f.children){_.arr.each(f.children,d)}},c=[];_.arr.each(e,function(f){if(!g){d(f)}c.push((new (linb.SC(f.key))(f)).get(0))});return this.pack(c,false)},_ensureValues:function(d){var e=[],l=0,g=0,m,h=this.KEY,f=linb.$cache.profileMap,c=linb.getNodeData;if(d["linb.absBox"]){d=d._nodes}for(;m=d[l++];){if((m.box&&m.box[h])||((m=f[c(m.renderId?m.renderId:m,["element","id"])])&&m.box&&m.box[h])){e[g++]=m}}return e.length<=1?e:this._unique(e)},__gc:function(){var e=this,d=e.$key,c=linb.$cache;_.breakO([c.template[d],c.reclaimId[d],e._cache,e._idCache,e.$DataModel,e.$Templates,e.$Behaviors,e],2);delete linb.absBox.$type[d.replace("linb.UI.","")];delete linb.absBox.$type[d];_.filter(linb.$cache.UIKeyMapEvents,function(g,f){return !(f==d||f.indexOf(d+"-")==0)});Class.__gc(d)},_pickSerialId:function(){var c=linb.$cache.reclaimId[this.$key];if(c&&c[0]){return c.pop()}return this._ctrlId.next()},$bg:function(e,c,d){return function(f){var g=linb.ini.path+"appearance/default/"+(typeof d=="string"?d:d?"Public":(g=f.split("."))[g.length-1])+"/"+e;return"url("+g+") "+(c||"")}},$ieBg:function(d,c){return function(e){var f=linb.ini.path+"appearance/default/"+(typeof c=="string"?c:c?"Public":(f=e.split("."))[f.length-1])+"/"+d;return'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+f+'",sizingMethod="crop")'}},$doTemplate:function(c,A,d,C,e){var k=arguments.callee,g,f,m,q=linb.UI.$x01,u=" \x01 ",p="",y=d.constructor==Array,z=A[C||""],h=!e,e=e||[];if(y){if(typeof z!="function"){z=k}for(var x=0;f=d[x++];){z(c,A,f,C,e)}}else{if(f=d.object){e[e.length]=f.toHtml()}else{if(typeof z=="function"){z(c,A,d,C,e)}else{C=C?C+".":"";var D=z[0],B=z[1];for(var x=0,w=D.length;x<w;x++){if(m=B[x]){if(m in d){f=d[m];if(A[g=C+m]&&f){k(c,A,f,g,e)}else{e[e.length]=(f===undefined||f===null||f===NaN)?p:typeof f=="string"?f.replace(q,u):f}}}else{e[e.length]=(D[x]===undefined||D[x]===null||D[x]===NaN)?p:D[x]}}}}}if(h){return e.join("")}},$buildTemplate:function(g,F,K,m,d){if(F&&String(F.tagName).toLowerCase()=="text"){d[d.length]=F.text;return}var r=arguments.callee,q=g.behavior?K?g.behavior[K]:g.behavior:null,I=r.map1||(r.map1={tagName:1,text:1}),G=r.map2||(r.map2={image:1,input:1,br:1,meta:1,hr:1,abbr:1,embed:1}),D=r.map3||(r.map3={input:1,textarea:1,pre:1,code:1}),z=r.r2||(r.r2=/[a-z]/),y=r.r3||(r.r3=/^(on|before|after)/),s=r.r7||(r.r7=/([^{}]*)\{([\w]+)\}([^{}]*)/g),h=false,k=linb.UI,p,w,E,e;if(!F){F=g.template}e=K?g.keys[K]:g.key;if(!F.tagName){F.tagName="span"}if(F.id!==null){F.id=K?e+":"+k.$ID+":"+k.$tag_left+k.$tag_subId+k.$tag_right:k.$DOMID}else{delete F.id}if(F.className!==null){p=k.$CLS+(K?"-"+K.toLowerCase():"");E=F.className||"";F["class"]=p+" "+E+" "+(e==g.key?"ui-ctrl ":"")+k.$tag_special+(K||"KEY")+"_CT"+k.$tag_special+" "+k.$tag_special+(K||"KEY")+"_CC"+k.$tag_special}delete F.className;F.style=(F.style||"")+";"+k.$tag_special+(K||"KEY")+"_CS"+k.$tag_special;var C=[],B={},f=F.tagName.toLowerCase(),n=F.text,c=linb.absObj.$specialChars;for(var A in F){if(!F[A]){continue}if(!c[A.charAt(0)]&&!I[A]){w=F[A];if(!z.test(A)){if(typeof w=="object"){if(!w.$order){w.$order=0}w.$key=A;C[C.length]=w}}else{B[A]=w}}}C.sort(function(i,l){i=i.$order;l=l.$order;return i>l?1:i==l?0:-1});if(!d){h=true;d=[]}d[d.length]="<"+f+" ";if(!B.unselectable&&!D[f]){B.unselectable="on"}for(var A in B){if(B[A]){d[d.length]=A+'="'+B[A]+'" '}}if(F.className!==null){F.className=E}delete F["class"];d[d.length]=" {attributes}>";if(!G[f]&&n){d[d.length]=n}for(var A=0,x=C.length;A<x;){w=C[A++];r(g,w,w.$key,m,d)}if(!G[f]){d[d.length]="</"+f+">"}if(h){var J=m[0],H=m[1];d.join("").replace(s,function(l,i,L,u){if(i){J[J.length]=i}H[J.length]=J[J.length]=L;if(u){J[J.length]=u}return""})}},_rpt:function(g,d){var i=arguments.callee,k=linb.UI,c=k.$tag_special,h=i._r||(i._r=new RegExp(c+"([0-9A-Z_]+)_C([SCT])"+c+"|"+c+"([\\w_\\-\\.]*)"+c,"img")),f={id:g.serialId,cls:g.getClass("KEY"),domid:g.$domId},e={S:g.CS,C:g.CC,T:g._CT};return d.replace(h,function(m,l,p,n){return f[n]||(e[p]?(e[p][l]||""):"")}).replace(k.$x01r,"\x01")},_build:function(d,n){var r,x,e,s=linb.UI,w=[[],[]],y=this,q=y.KEY,c=linb.$cache.template,l=d._hash="b:"+(d.template._subid||"")+";!"+(d._exhash||"");if(typeof d.theme=="string"){var p=d._CT={},f=d.key.replace(/\./g,"-").toLowerCase().replace("linb-ui","linb")+"-";_.each(d.keys,function(m,h){if(h.charAt(0)!="$"){p[h]=f+d.theme+"-"+h.toLowerCase()}})}if(!(r=_.get(c,[q,l]))){s.$buildTemplate(d,null,null,w);_.set(c,[q,l,""],w);if(x=d.template.$submap){for(var k in x){if(typeof(e=x[k])!="function"){var w=[[],[]];for(var g in e){if(typeof e[g]=="object"){s.$buildTemplate(d,e[g],g,w)}}e=w}_.set(c,[q,l,k],e)}}r=_.get(c,[q,l])}if(!r){return""}return y._rpt(d,s.$doTemplate(d,r,n))},_setDefaultBehavior:function(k){var c=this,g=arguments.callee,i=g._m||(g._m={"":1,KEY:1,$key:1}),h=g._f1||(g._f1=function(f,n,p){var m=function(x,C,q){var F,u=linb.use(q).id(),E,D=x.getSubId(u),s=x.properties,r,B,A;if(s.disabled||s.readonly){return}E=x.SubSerialIdMapItem&&x.SubSerialIdMapItem[D];if(E&&E.disabled){return}if(E&&E.readonly){return}switch(typeof f){case"string":r=x.getSubNode(f,D)._get();break;case"function":B=[f];break;case"object":r=[];B=[];for(var w,z=0,y=f.length;z<y;z++){w=f[z];if(typeof w=="string"){r.push.apply(r,x.getSubNode(w,D)._get())}else{B.push(w)}}}if(r&&r.length){r=linb(r);A=x.boxing();if(p==1){if(n=="mouseover"){if(s.disableHover){return}if(x.beforeHoverEffect){if(false==A.beforeHoverEffect(x,E,C,q,"mouseover")){return}}}if(n=="mousedown"&&x.beforeClickEffect){if(false==A.beforeClickEffect(x,E,C,q,"mousedown")){return}}r.tagClass("-"+n)}else{if(n=="mouseup"){if(x.beforeClickEffect&&false==A.beforeClickEffect(x,E,C,q,"mouseup")){return}r.tagClass("-mousedown",false)}else{if(s.disableHover){return}if(x.beforeHoverEffect&&false==A.beforeHoverEffect(x,E,C,q,"mouseout")){return}r.tagClass("(-mouseover|-mousedown)",false)}}}if(B&&B.length){_.arr.each(B,function(G){_.tryF(G,[x],x)});B.length=0}};return m}),d={},e;if(!linb.SC.get("linb.absComposed")){Class("linb.absComposed","linb.absObj",{Instance:{addPanel:function(m,p,q){var r=_.copy(linb.UI.Panel.$DataStruct);_.merge(r,m,"with");_.merge(r,{dock:"fill",tag:m.tag||m.id},"all");var n=new linb.UI.Panel(r),f=[];this.append(n,q&&q.id);_.arr.each(p,function(s){f.push(s[0])});n.append(linb.UI.pack(f,false));return this},removePanel:function(){this.destroy()},getPanelPara:function(){return _.copy(this.get(0).properties)},getPanelChildren:function(){return this.get(0).children},_e1:function(m,n,p,q,f){},_e2:function(m,f,n,p){},_e3:function(m,n,f,p){},_e4:function(m,q,r,f,p,n){},_e5:function(f,m,n){}},Static:{DataModel:{dragKey:"",dropKeys:""},$abstract:true}})}var l=linb.absComposed.prototype;if(k.HoverEffected){_.each(k.HoverEffected,function(m,f){e=i[f]?k:(k[f]||(k[f]={}));if(!m){e.afterMouseover=e.afterMouseout=null}else{e.afterMouseover=h(m,"mouseover",1);e.afterMouseout=h(m,"mouseout",2)}});d.beforeHoverEffect=l._e1}if(k.ClickEffected){_.each(k.ClickEffected,function(m,f){e=i[f]?k:(k[f]||(k[f]={}));if(!m){e.afterMousedown=e.afterMouseup=null}else{e.afterMousedown=h(m,"mousedown",1);e.afterMouseup=h(m,"mouseup",2)}});d.beforeClickEffect=l._e1}_.merge(k,{beforeKeydown:function(f,m,n){if(f.onHotKeydown){return false!==f.boxing().onHotKeydown(f,linb.Event.getKey(m),m,n)}},beforeKeypress:function(f,m,n){if(f.onHotKeypress){return false!==f.boxing().onHotKeypress(f,linb.Event.getKey(m),m,n)}},beforeKeyup:function(f,m,n){if(f.onHotKeyup){return false!==f.boxing().onHotKeyup(f,linb.Event.getKey(m),m,n)}}});d.onHotKeydown=d.onHotKeypress=d.onHotKeyup=l._e2;if(k.NavKeys){_.each(k.NavKeys,function(m,p){var f=arguments.callee,n,w=f.m1||(f.m1={KEY:1,$key:1});if(w[p]){return}var s=f.m2||(f.m2={input:1,textarea:1}),r=f.m3||(f.m3={tab:1,enter:1,up:1,down:1,left:1,right:1}),q=f.m4||(f.m4={tab:1,up:1,down:1,left:1,right:1}),u=k[p]||(k[p]={});var u=k[p]||(k[p]={});if(null===m){u.afterKeydown=null}else{u.afterKeydown=function(D,H,y){var E=linb.Event.getKey(H),J=E.key,z=E.ctrlKey,B=E.shiftKey,G=E.altKey,I=false,x=D._smartnav;if(x){var C=linb.use(y).get(0);if(s[E=C.tagName.toLowerCase()]){if(J&&E=="input"&&C.type.toLowerCase()!="text"&&C.type.toLowerCase()!="password"){I=true}else{if(r[J]){var A=linb.use(y).caret(),F=linb.use(y).get(0).value;switch(J){case"up":if(!/[\n\r]/.test(F.substr(0,A[0]))){I=true}break;case"left":if((z&&!B)||(A[0]===0&&(A[1]!==F.length||A[1]===0))){I=true}break;case"down":if(!/[\n\r]/.test(F.substr(A[1],F.length))){I=true}break;case"right":if((z&&!B)||(A[1]===F.length&&(A[0]!==0||A[1]===0))){I=true}break;case"enter":if(E=="input"||G){I=true}break;case"tab":I=true;break}}}}else{if(q[J]){I=true}}C=null}else{I=J==="tab"}if(I){if(D.beforeNextFocus&&false===D.boxing().beforeNextFocus(D,H,E.shiftKey,y)){return false}if(x){if(J!="tab"){linb.use(y).nextFocus(("up"==J||"left"==J)?false:true)}}}}}});d.beforeNextFocus=l._e3}if((e=k.DroppableKeys)&&e.length){_.arr.each(e,function(f){c._droppable(f)});e=c.prototype;_.arr.each("addPanel,removePanel,getPanelPara,getPanelChildren,getDropKeys,setDropKeys".split(","),function(f){if(!e[f]){e[f]=l[f]}});c.$DataModel.dropKeys=c.$DataStruct.dropKeys="";d.onDragEnter=d.onDragLeave=d.onDrop=d.onDropTest=d.onDropMarkShow=d.onDropMarkClear=l._e4}if((e=k.DraggableKeys)&&e.length){_.arr.each(e,function(f){c._draggable(f)});e=c.prototype;_.arr.each("getDragKey,setDragKey".split(","),function(f){if(!e[f]){e[f]=l[f]}});c.$DataModel.dragKey=c.$DataStruct.dragKey="";d.onGetDragData=d.onStartDrag=d.onDragStop=l._e5}if((e=k.NoDraggableKeys)&&e.length){c.NoDraggableKeys=e}if((e=k.NoDroppableKeys)&&e.length){c.NoDroppableKeys=e}c.setEventHandlers(d)},addTemplateKeys:function(c){var d=this,e=d.KEY,g=arguments.callee,f=g._reg||(g._reg=/\./g);_.arr.each(c,function(h){d.$cssKeys[h]=(d.$Keys[h]=h=="KEY"?e:e+"-"+h).replace(f,"-").toLowerCase().replace("linb-ui","linb")});return d},$CSSCACHE:{},$getCSSValue:function(d,g){var f=this.$CSSCACHE,e=d+"->"+g,i=arguments.callee;if(e in f){return f[e]}var k=linb.Dom.getEmptyDiv().get(0),h;k.className=d;h=f[e]=parseInt(linb.Dom.getStyle(k,g))||0;k.className="";return h},getTheme:function(){return this.$theme},setTheme:function(c,e){c=c||"default";var d=this;if(c!=d.$theme){if(e!==false){if(c!="default"){linb.CSS.includeLink(linb.getPath("linb.appearance."+c,"/theme.css"),"theme:"+c)}var g=linb.CSS.get("id","theme:"+d.$theme);if(g){g.disabled=true;linb(g).remove(false)}}d.$theme=c;if(e!==false){d.$CSSCACHE={};var f=0;_.asyRun(function(){if(f>10){throw new Error("errLoadTheme:"+c)}f++;var h;try{h=linb.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(i){}finally{if(h==c||c=="default"){linb.UI.getAll().reLayout(true);f=null}else{_.asyRun(arguments.callee,200*f)}}},200)}}return this},setAppearance:function(c){_.merge(this.$Appearances,c,"all");return this},getAppearance:function(){return this.$Appearances},setTemplate:function(f,p){if(f){var n=this,k=arguments.callee,c=k.r2||(k.r2=/[a-z]/),h=linb.absObj.$specialChars,g=["KEY"],l=k._fun||(k._fun=function(s,q){var u,r;for(r in s){if(!h[r.charAt(0)]){if(!c.test(r)){q[q.length]=r;u=s[r];if(typeof u=="object"){arguments.callee(u,q)}}}}}),m;l(f,g);n.addTemplateKeys(g);m=n.$Templates;if(typeof p=="string"){f._subid=p;m[p]=f}else{m._=f}if(m=f.$submap){for(var e in m){for(var d in m[e]){k.call(n,m[e],d)}}}}return this},getTemplate:function(c){return this.$Templates[c||"_"]},setBehavior:function(d){if(d){var p=this,l=linb.$cache.UIKeyMapEvents,e=p.$key,z=linb.absObj.$specialChars,c=linb.Event.$eventhandler,g=linb.Event._eventMap,A=arguments.callee,y=A.r1||(A.r1=/[a-z]/),w=A.r2||(A.r2=/^(on|before|after)/),n=p.$Behaviors,r,x,u,s,q,h,f;p._setDefaultBehavior(d);if(d.KEY){_.merge(d,d.KEY,"all");delete d.KEY}for(x in d){q=d[x];if(!z[x.charAt(0)]){if(!y.test(x)){r=n[x]||(n[x]={});for(u in q){h=q[u];if(!z[u.charAt(0)]){if(h){r[u]=h}else{delete r[u]}}}}else{if(w.test(x)){if(q){n[x]=q}else{delete n[x]}}else{n[x]=q}}}}_.filter(l,function(m,k){return !(k==e||k.indexOf(e+"-")==0)});for(x in n){q=n[x];if(!z[x.charAt(0)]){if(!y.test(x)){for(u in q){if(!z[u.charAt(0)]&&q[u]){s=e+"-"+x;(l[s]||(l[s]={}))["on"+g[u]]=c}}}else{if(w.test(x)&&q){s=e;(l[s]||(l[s]={}))["on"+g[x]]=c}}}}}return p},getBehavior:function(){return this.$Behaviors},$applyCSS:function(){var f=linb.UI,e=f.$cache_css,d=f.$cache_css2;if(!f.$cssNo){f.$cssNo=1;var c=linb.browser;linb("body").addClass((c.ie?("linbcss-ie linbcss-ie"+c.ver+" "):c.gek?("linbcss-gek linbcss-gek"+c.ver+" "):c.kde?("linbcss-kde linbcss-kde"+c.ver+" "):c.opr?("linbcss-opr linbcss-opr"+c.ver+" "):"")+(c.isSafari?"linbcss-safari ":c.isChrome?"linbcss-chrome ":"")+(c.isMac?"linbcss-mac":c.isLinux?"linbcss-linux ":""));linb("html").addClass(c.isStrict?"linbcss-base linbcss-strict":"linbcss-base ")}if(e){linb.CSS.addStyleSheet(e,"linb.UI-CSS"+(f.$cssNo++));linb.UI.$cache_css=""}if(d){linb.CSS.addStyleSheet(d,"linb.UI-CSS"+(f.$cssNo++),true);linb.UI.$cache_css2=""}},buildCSSText:function(p){var A=this,w=arguments.callee,f=w._r1||(w._r1=/(^|\s|,)([0-9A-Z_]+)/g),q=[],c=[],s=linb.browser,k=s.ie6,d=s.ie,u=s.gek,x=A.$cssKeys,z,y,e;for(var n in p){e=p[n];z=n.replace(f,function(i,h,l){return h+"."+(x[l]||l)}).toLowerCase();e.$order=parseInt(e.$order)||0;e.$=z;q[q.length]=e}q.sort(function(h,i){h=h.$order;i=i.$order;return h>i?1:h==i?0:-1});for(var n=0,g=q.length;n<g;){e=q[n++];c[c.length]=e.$+"{";if(z=e.$before){c[c.length]=z}if(z=e.$text){c[c.length]=z}for(var m in e){switch(m.charAt(0)){case"$":continue;break;case"_":if(!k){continue}break;case"*":if(!d){continue}break;case"-":if(!u){continue}break}if((y=e[m])||e[m]===0){switch(typeof y){case"string":case"number":c[c.length]=m+":"+y+";";break;case"function":c[c.length]=m+":"+y(A.KEY)+";";break;default:_.arr.each(y,function(h){if(h){c[c.length]=m+":"+h+";"}})}}}if(y=e.$after){c[c.length]=y}c[c.length]="}"}return c.join("")},_droppable:function(f){var d=this,e=linb.Event.$eventhandler2,k=d.$Behaviors,c=f=="KEY"?k:(k[f]||(k[f]={})),h=linb.$cache.UIKeyMapEvents,i=f=="KEY"?d.KEY:(d.KEY+"-"+f),g=h[i]||(h[i]={});_.merge(c,{beforeMouseover:function(n,s,l){if(n.properties.disabled||n.properties.readonly){return}if(n.box.NoDroppableKeys){var p=n.getKey(linb.Event.getSrc(s).id||"").split("-")[1];if(p&&_.arr.indexOf(n.box.NoDroppableKeys,p)!=-1){return}}var w=l,y=linb.DragDrop,m=y.getProfile(),x=m.dragKey,q=m.dragData,A,r,z,u;if(!x||!q||!(new RegExp("\\b"+x+"\\b")).test(n.box.getDropKeys(n,w))){return}r=n.boxing();if(r.getItemByDom){A=r.getItemByDom(l)}u=[n,s,w,x,q,A];if((z=n.onDropTest)&&(false===r.onDropTest.apply(r,u))){return}if((z=n.box._onDropTest)&&(false===z.apply(n.host||n,u))){return}y.setDropElement(l);if(n.onDropMarkShow&&(false===r.onDropMarkShow.apply(r,u))){}else{if((z=n.box._onDropMarkShow)&&(false===z.apply(n.host||n,u))){}else{_.resetRun("setDropFace",y.setDropFace,0,[w],y)}}if(z=n.box._onDragEnter){z.apply(n.host||n,u)}if(n.onDragEnter){r.onDragEnter.apply(r,u)}},beforeMouseout:function(n,r,l){if(n.properties.disabled||n.properties.readonly){return}var w=linb.DragDrop,m=w.getProfile(),u=m.dragKey,p=m.dragData,x,q,s;if(m.dropElement==l){q=n.boxing();if(q.getItemByDom){x=q.getItemByDom(l)}s=[n,r,l,u,p,x];if(n.onDropMarkClear&&(false===q.onDropMarkClear.apply(q,s))){}else{if((t=n.box._onDropMarkClear)&&(false===t.apply(n.host||n,s))){}else{_.resetRun("setDropFace",w.setDropFace,0,[null],linb.DragDrop)}}if(t=n.box._onDragLeave){t.apply(n.host||n,s)}if(n.onDragLeave){q.onDragLeave.apply(q,s)}w.setDropElement(null)}},beforeDrop:function(n,r,l){var w=linb.DragDrop,m=w.getProfile(),u=m.dragKey,p=m.dragData,y,x,s,q=n.boxing();if(q.getItemByDom){y=q.getItemByDom(l)}s=[n,r,l,u,p,y];if(n.onDropMarkClear&&(false===q.onDropMarkClear.apply(q,s))){}else{if((x=n.box._onDropMarkClear)&&(false===x.apply(n.host||n,s))){}}if(n.onDrop&&(false===q.onDrop.apply(q,s))){}else{if((x=n.box._onDrop)&&(false===x.apply(n.host||n,s))){}}}},"all");_.merge(g,{onmouseover:e,onmouseout:e,ondrop:e});return d},_draggable:function(f){var d=this,e=linb.Event.$eventhandler2,k=d.$Behaviors,c=f=="KEY"?k:(k[f]||(k[f]={})),h=linb.$cache.UIKeyMapEvents,i=f=="KEY"?d.KEY:(d.KEY+"-"+f),g=h[i]||(h[i]={});_.merge(c,{beforeMousedown:function(n,r,l){if(linb.Event.getBtn(r)!="left"){return}if(n.properties.disabled){return}if(!n.properties.dragKey){return}if(n.box.NoDraggableKeys){var p=n.getKey(linb.Event.getSrc(r).id||"").split("-")[1];if(p&&_.arr.indexOf(n.box.NoDraggableKeys,p)!=-1){return}}var u=linb.Event.getPos(r),q=n.boxing(),s=[n,r,l],w;if(n.onStartDrag&&(false===q.onStartDrag.apply(q,s))){}else{if((w=n.box._onStartDrag)&&(false===w.apply(n.host||n,s))){}else{var m=n.box;linb.use(l).startDrag(r,{dragType:"icon",targetLeft:u.left+12,targetTop:u.top+12,dragCursor:"pointer",dragDefer:1,dragKey:m.getDragKey(n,l),dragData:m.getDragData(n,r,l)})}}},beforeDragbegin:function(l,m,n){linb.use(n).onMouseout(true,{$force:true}).onMouseup(true)},beforeDragstop:function(m,n,p){var l;if(m.onDragStop){m.boxing().onDragStop(m.e,p)}if(l=m.box._onDragStop){l.apply(m.host||m,arguments)}}},"all");_.merge(g,{onmousedown:e,ondragbegin:e});return d},adjustData:function(f,n,k){if(!k){k={}}var h=f.box.$DataModel,d=f.properties;var g,e,m=linb.wrapRes,l=arguments.callee,c=l._r||(l._r=/\B\$([\w]+[\.][\w\.]+[\w])/g);for(g in n){if(g.charAt(0)=="$"){continue}if(n.hasOwnProperty(g)&&!k.hasOwnProperty(g)){k[g]=typeof(e=n[g])=="string"?(((e.indexOf("$")!=-1)?(e=e.replace(c,function(p,i){return m(i)})):e)&&((e.charAt(0)=="@")?(linb.SC.get(e.substr(1,e.length))||e):e)):e}}if("disabled" in h){k.disabled=((_.isSet(k.disabled)&&k.disabled)||(_.isSet(d.disabled)&&d.disabled))?"ui-itemdisabled":""}if("readonly" in h){k.readonly=((_.isSet(k.readonly)&&k.readonly)||(_.isSet(d.readonly)&&d.readonly))?"ui-itemreadonly":""}k.imageDisplay=(k.imageClass||k.image)?"":"display:none";if(k.image){k.backgroundImage="background-image:url("+k.image+");"}if(k.imagePos){k.backgroundPosition="background-position:"+k.imagePos+";"}else{if(k.image){k.backgroundPosition="background-position:center;"}}if(k.imageRepeat){k.backgroundRepeat="background-repeat:"+k.imageRepeat+";"}else{if(k.image){k.backgroundRepeat="background-repeat:no-repeat;"}}if((typeof(e=k.renderer)=="function")||(typeof(e=n.renderer)=="function")){k.caption=e.call(f,n,k)}return k},cacheData:function(c,d){_.set(linb.$cache,["UIDATA",c],d);return this},getCachedData:function(c){var d=_.get(linb.$cache,["UIDATA",c]);if(typeof d=="function"){d=d()}return _.clone(d)},Behaviors:{onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f)!==false}}},DataModel:{tag:"",tagVar:{ini:{}},className:{ini:"",action:function(c,d){if(d){this.getRoot().removeClass(d)}this.getRoot().addClass(c)}},disableHover:false,disableTips:false,disabled:{ini:false,action:function(c){var d=this.getRoot();if(c){d.addClass("ui-disabled")}else{d.removeClass("ui-disabled")}}},dock:{ini:"none",listbox:["none","top","bottom","left","right","center","middle","origin","width","height","fill","cover"],action:function(c){linb.UI.$dock(this,true,true)}},dockIgnore:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){linb.UI.$dock(c,true,true)}}},dockOrder:{ini:1,action:function(d){var c=this;if(c.properties.dock!="none"){linb.UI.$dock(c,true,true)}}},dockMargin:{ini:{left:0,top:0,right:0,bottom:0},action:function(d){var c=this;if(c.properties.dock!="none"){linb.UI.$dock(c,true,true)}}},dockFloat:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){linb.UI.$dock(c,true,true)}}},dockMinW:0,dockMinH:0,tips:""},EventHandlers:{onRender:function(c){},onLayout:function(c){},onResize:function(e,d,c){},onMove:function(e,g,f,d,c){},onDock:function(c,d){},beforePropertyChanged:function(d,c,e,f){},afterPropertyChanged:function(d,c,e,f){},beforeAppend:function(c,d){},afterAppend:function(c,d){},beforeRemove:function(e,f,d,c){},afterRemove:function(e,f,d,c){},onDestroy:function(c){},beforeDestroy:function(c){},onShowTips:function(c,d,e){},onContextmenu:function(c,g,f,d){}},RenderTrigger:function(){var d=this,c=d.boxing(),g=d.properties;if(d.box._onresize){var f=d.getRootNode().style,e;if((e=f.visibility)!="hidden"){d._$visibility=e;f.visibility="hidden"}linb.UI.$tryResize(d,g.width,g.height);f=null}if(g.disabled){c.setDisabled(true,true)}d._inValid=1},$doResize:function(g,c,f,k,d){if(k||((c||f)&&(g._resize_w!=c||g._resize_h!=f))){if(!g.getRootNode()){return false}g._resize_w=c;g._resize_h=f;_.tryF(g.box._onresize,[g,c,f,k,d],g.box);if(g.onResize){g.boxing().onResize(g,c,f)}}if("_$visibility" in g){var i=g.getRootNode(),e=i.style;if(e.visibility!="visible"&&!linb.getNodeData(i,"_setVisibility")){e.visibility=g._$visibility}i=e=null;clearTimeout(g._$rs_timer);delete g._$rs_timer;delete g._$rs_args;delete g._$visibility}},$tryResize:function(k,c,i,l,f){var g=k.box,e=g._onresize;if(e&&(l||c||i)){c=parseInt(c)||null;i=((i===""||i=="auto")?"auto":parseInt(i))||null;if("_$visibility" in k){var d=k._$rs_args;if(!d){d=k._$rs_args=[k,null,null];k._$rs_timer=_.asyRun(function(){if(k&&k._$rs_args){linb.UI.$doResize.apply(null,k._$rs_args)}})}d[1]=c;d[2]=i;d[3]=l;d[4]=f}else{linb.UI.$doResize(k,c,i,l,f)}}},LayoutTrigger:function(){var d=this,c=d.boxing(),f=d.properties;if(f.dock&&f.dock!="none"){if(!d.$laidout){d.$laidout=1;var e=d.getRootNode().style;switch(f.dock){case"top":case"bottom":case"width":e.width=0;break;case"left":case"right":case"height":e.height=0;break;default:e.width=e.height=0}}linb.UI.$dock(this,false,true)}},$dock_args:["top","bottom","left","right","center","middle","width","height"],$dock_map:{middle:1,center:1},$dock:function(k,e,g){var i=k.getRoot(),d=linb((i.get(0)&&i.get(0).parentNode)||k.$dockParent);if(!d.get(0)){return}var c=k.properties,m=c.dockMargin,y="auto",w=c.dock||"none",q=linb.Event.getId(d.get(0)),h=function(f,p){f=parseInt(f.properties.dockOrder)||0;p=parseInt(p.properties.dockOrder)||0;return f>p?1:f==p?0:-1},u,s="$inMatrix",r,x,n,l=function(f){return linb.browser.ie6?f-f%2:f};if(d.get(0)===document.body||d.get(0)===document||d.get(0)===window){q="!document";n=true}if(q&&(q==linb.Dom._ghostDivId||_.str.startWith(q,linb.Dom._emptyDivId))){return}if(k.$dockParent!=q||k.$dockType!=w||e){k.$dockParent=q;k.$dockType=w;k.unLink("$dockall");k.unLink("$dock");k.unLink("$dock1");k.unLink("$dock2");switch(w){case"middle":u={right:y,bottom:y,left:c.left||"",width:c.width||"",height:c.height||""};break;case"center":u={right:y,bottom:y,top:c.top||"",width:c.width||"",height:c.height||""};break;case"origin":u={right:y,bottom:y,width:c.width||"",height:c.height||""};break;case"top":u={left:m.left,right:m.right,bottom:y,height:c.height||""};break;case"bottom":u={left:m.left,right:m.right,top:y,height:c.height||""};break;case"left":u={right:y,width:c.width||""};break;case"right":u={left:y,width:c.width||""};break;case"width":u={bottom:y,height:c.height||"",top:c.top||""};break;case"height":u={right:y,width:c.width||"",left:c.left||""};break;case"fill":case"cover":u={right:y,bottom:y};break;case"none":u={left:c.left,top:c.top,width:c.width||"",height:c.height||""};break}if(i.get(0)){i.cssRegion(u,true)}if(n){d=linb.win;if(!linb.$cache._resizeTime){linb.$cache._resizeTime=1}}if(w!="none"){r=d.$getEvent("onSize","dock");if(!r){r=function(K){var I=arguments.callee,f=linb.UI.$dock_map,E=linb.UI.$dock_args,F=I.rePos,G=I.pid=="!window"||I.pid=="!document",A=G?linb.win:linb(I.pid);if(!A.get(0)){return}var p=A.get(0).style,D,C,B,z,J,H;if(K.$dockid||!G||(_()-linb.$cache._resizeTime>100)){D={left:0,top:0,right:0,bottom:0,width:parseInt(p&&p.width)||A.width(),height:parseInt(p&&p.height)||A.height()};for(B=0;J=E[B++];){H=I[J];if(H.length){if(!f[J]){K.width=K.height=1}for(C=0;z=H[C++];){if(!z.properties.dockIgnore){F(z,D,J,K.$dockid,G||K.width,G||K.height)}}}}if(D.later){_.each(D.later,function(N){var L;try{N.node.cssRegion(N,true);if(L=linb.UIProfile.getFromDom(N.node.get(0))){delete N.node;if(!L.box._onresize&&L.onResize&&(N.width!==null||N.height!==null)){L.boxing().onResize(L,N.width,N.height)}if(L.onDock){L.boxing().onDock(L,N)}}}catch(M){_.asyRun(function(){N.width+=1;N.height+=1;N.node.cssRegion(N);N.width-=1;N.height-=1;N.node.cssRegion(N,true);if(L=linb.UIProfile.getFromDom(N.node.get(0))){delete N.node;if(!L.box._onresize&&L.onResize&&(N.width!==null||N.height!==null)){L.boxing().onResize(L,N.width,N.height)}if(L.onDock){L.boxing().onDock(L,N)}}})}})}if(G){linb.$cache._resizeTime=_()}}I=A=p=null};r.pid=q;_.arr.each(linb.UI.$dock_args,function(f){r[f]=[]});r.dockall=[];r.rePos=function(p,G,K,J,F,O){var N=false;if(J&&p.$linbid!=J){N=true}var f=p.properties,M=f.dockFloat,I=f.dockMargin,L=p.getRoot(),P=p.getRootNode().style,A,H,R,C,Q,B,E=parseInt(f._dockBorderWidth)||0,D=parseInt(f._dockBorderHeight)||0,z={};if(P.display=="none"){return}switch(K){case"middle":L.top((G.height-L.height())/2);break;case"center":L.left((G.width-L.width())/2);break;case"top":if(!N){A=I.left;R=I.right;H=(M?0:G.top)+I.top;if(parseFloat(P.top)!=H){z.top=H}Q=G.width-A-R-E;Q=l(f.dockMinW?Math.max(f.dockMinW,Q):Q);if(parseFloat(P.width)!=Q){z.width=l(Q)}if(!_.isEmpty(z)){L.cssRegion(z,true)}}if(!M){G.top+=(L.offsetHeight()+I.top+I.bottom)}break;case"bottom":if(!N){A=I.left;R=I.right;C=(M?0:G.bottom)+I.bottom;if(parseFloat(P.bottom)!=C){z.bottom=C}Q=G.width-A-R-E;Q=l(f.dockMinW?Math.max(f.dockMinW,Q):Q);if(parseFloat(P.width)!=Q){z.width=l(Q)}if(!_.isEmpty(z)){L.cssRegion(z,true)}}if(!M){G.bottom+=(L.offsetHeight()+I.top+I.bottom)}break;case"left":if(!N){A=(M?0:G.left)+I.left;H=(M?0:G.top)+I.top;C=(M?0:G.bottom)+I.bottom;if(parseFloat(P.left)!=A){z.left=A}if(parseFloat(P.top)!=H){z.top=H}Q=G.height-H-C-D;Q=l(f.dockMinH?Math.max(f.dockMinH,Q):Q);if(parseFloat(P.height)!=Q){z.height=l(Q)}if(!_.isEmpty(z)){L.cssRegion(z,true)}}if(!M){G.left+=(L.offsetWidth()+I.left+I.right)}break;case"right":if(!N){R=(M?0:G.right)+I.right;H=(M?0:G.top)+I.top;C=(M?0:G.bottom)+I.bottom;if(parseFloat(P.right)!=R){z.right=R}if(parseFloat(P.top)!=H){z.top=H}Q=G.height-H-C-D;Q=l(f.dockMinH?Math.max(f.dockMinH,Q):Q);if(parseFloat(P.height)!=Q){z.height=l(Q)}if(!_.isEmpty(z)){L.cssRegion(z,true)}}if(!M){G.right+=(L.offsetWidth()+I.left+I.right)}break;case"width":if(!F){return}A=(f.dock=="cover"?0:(M?0:G.left))+I.left;R=(f.dock=="cover"?0:(M?0:G.right))+I.right;H=f.dock=="width"?(parseInt(f.top)||0):((f.dock=="cover"?0:(M?0:G.top))+I.top);Q=G.width-A-R-E;G.later=G.later||{};G.later[p.$linbid]=G.later[p.$linbid]||{};_.merge(G.later[p.$linbid],{node:L,width:l(f.dockMinW?Math.max(f.dockMinW,Q):Q),left:A,top:H},"all");break;case"height":if(!O){return}H=(f.dock=="cover"?0:(M?0:G.top))+I.top;C=(f.dock=="cover"?0:(M?0:G.bottom))+I.bottom;A=f.dock=="height"?(parseInt(f.left)||0):((f.dock=="cover"?0:(M?0:G.left))+I.left);Q=G.height-H-C-D;G.later=G.later||{};G.later[p.$linbid]=G.later[p.$linbid]||{};_.merge(G.later[p.$linbid],{node:L,height:l(f.dockMinH?Math.max(f.dockMinH,Q):Q),left:A,top:H},"all");break}};d.onSize(r,"dock")}if(w=="fill"||w=="cover"){k.link(r.height,"$dock1");k.link(r.width,"$dock2");r.height.sort(h);r.width.sort(h)}else{if(w=="origin"){k.link(r.center,"$dock1");k.link(r.middle,"$dock2")}else{k.link(r[w],"$dock");r[w].sort(h)}}k.link(r.dockall,"$dockall");linb.$cache._resizeTime=1;k.$dockFun=r}if(n){var r=linb.win.$getEvent("onSize","dock");if(r&&r.dockall&&r.dockall.length){linb("html").addClass("linbcss-viewport");if(x=linb("body").get(0)){x.scroll="no"}}else{linb("html").removeClass("linbcss-viewport");if(x=linb("body").get(0)){x.scroll=""}}}}if(w!="none"&&g){k.$dockFun({width:1,height:1,$dockid:_.arr.indexOf(["width","height","fill","cover"],w)!=-1?k.$linbid:null,$type:w})}},_beforeSerialized:function(f){var g=f.boxing(),c,e,k={};_.merge(k,f,"all");var h=k.properties=_.copy(f.properties);switch(h.dock){case"top":case"bottom":delete h.width;delete h.left;delete h.top;delete h.right;delete h.bottom;break;case"left":case"right":delete h.height;delete h.left;delete h.top;delete h.right;delete h.bottom;break;case"width":delete h.width;delete h.left;delete h.right;break;case"height":delete h.height;delete h.top;delete h.bottom;break;case"fill":case"cover":delete h.width;delete h.height;delete h.left;delete h.top;delete h.right;delete h.bottom;break}for(var d in linb.UI.$ps){if((d in h)&&typeof h[d]!="number"&&h[d]!=""&&h[d]!="auto"){h[d]=isNaN(h[d]=parseFloat(h[d]))?"auto":h[d]}}if(h.items&&h.items.length){e=linb.absObj.$specialChars;h.items=_.clone(h.items,function(m,l){return !e[(l+"").charAt(0)]&&m!=undefined})}if(_.isEmpty(h.tagVar)){delete h.tagVar}if((e=h.dockMargin)&&!e.left&&!e.top&&!e.right&&!e.bottom){delete h.dockMargin}if(h.items&&(h.items.length==0||h.listKey)){delete h.items}return k},getDropKeys:function(c,d){return c.properties.dropKeys},getDragKey:function(c,d){return c.properties.dragKey},getDragData:function(c,e,d){return{profile:c,domId:linb.use(d).id(),data:c.onGetDragData?c.boxing().onGetDragData(c,e,d):null}},_prepareData:function(e,h){var c=e.properties,k=this.$DataModel,l=arguments.callee,d=l.map||(l.map=_.toArr("left,top,bottom,right,width,height")),m=[],n=e.box.adjustData,p;h=h||{};if(c.id){delete c.id}if("caption" in k&&c.caption!==null){c.caption=c.caption===undefined?e.alias:c.caption}if("$hborder" in k){h.bWidth=c.width-(c.$hborder||0)*2}if("$vborder" in k){h.bHeight=c.height-(c.$vborder||0)*2}for(var f=0,g;g=d[f];f++){if(c[g]||c[g]===0){if(String(parseFloat(c[g]))==String(c[g])){m[m.length]=g+":"+(parseInt(c[g])||0)+"px"}else{if(c[g]!="auto"&&c[g]){m[m.length]=g+":"+c[g]}}}}if(c.position){m[m.length]="position:"+c.position}if(c.visibility){m[m.length]="visibility:"+c.visibility}if(c.zIndex){m[m.length]="z-index:"+c.zIndex}if(c.display){m[m.length]="display:"+(c.display=="inline-block"?linb.browser.gek?"-moz-inline-block;display:-moz-inline-box;display:inline-block;":"inline-block":c.display)}h._style=";"+m.join(";")+";";if("className" in k){h._className=c.className||""}if("readonly" in k){h.readonly=c.readonly?"ui-readonly":""}if("href" in k){h.href=c.href||linb.$DEFAULTHREF}if("tabindex" in k){h.tabindex=c.tabindex||"-1"}if("items" in k){e.ItemIdMapSubSerialId={};e.SubSerialIdMapItem={};c.items=e.box._adjustItems(c.items);h.items=this._prepareItems(e,c.items)}h=n(e,c,h);e.prepared=true;return h},_prepareItems:function(f,q,p,h,m){var w=[],u,c,s,e=linb.UI.$tag_subId,d,k=f.properties.tabindex,r=f.box.adjustData;for(var n=0,g=q.length;n<g;n++){if(typeof q[n]!="object"){q[n]={id:q[n]}}u=q[n];if(!u.hasOwnProperty("caption")){u.caption=u.id}c={id:u.id};if(p){c._pid=p}d=c[e]=typeof m=="string"?m:f.pickSubId("items");if(false!==h){f.ItemIdMapSubSerialId[u.id]=d;f.SubSerialIdMapItem[d]=u}if(s=u.object){s=c.object=s["linb.absBox"]?s.get(0):s;if(s["linb.UIProfile"]){s.properties.position="relative"}u.$linbid=s.$linbid;s.$item=u;s.$holder=f;if(!f.$attached){f.$attached=[]}f.$attached.push(s)}else{c._tabindex=k;if(u.hidden){u.itemDisplay="display:none;"}r(f,u,c);if(this._prepareItem){this._prepareItem(f,c,u,p,n,g,h,m)}}w.push(c)}return w},_showTips:function(c,d,e){if(c.properties.disableTips){return}if(c.onShowTips){return c.boxing().onShowTips(c,d,e)}}}});Class("linb.absList","linb.absObj",{Instance:{activate:function(){var d=this.get(0),c=d.getSubNode("ITEM",true);if(!c.isEmpty()){c.focus()}return this},insertItems:function(h,d,n){var e,k,l,i,c,f,g,m=this._afterInsertItems;return this.each(function(r){g=r.box;k=g._adjustItems(h);l=r.properties.items;i=_.arr.subIndexOf(l,"id",d);if(r.renderId){f=g._prepareItems(r,k,d);c=r._buildItems("items",f);if(r.$attached){for(var q=0,p;p=r.$attached[q++];){if(p._render){p._render(true)}}delete r.$attached}if(i==-1){e=r.getSubNode(g._ITEMSKEY||r.keys.ITEMS||r.keys.KEY);if(n){e.prepend(c)}else{e.append(c)}}else{e=r.getSubNodeByItemId(g._ITEMKEY||"ITEM",d);if(n){e.addPrev(c)}else{e.addNext(c)}}}if(i==-1){_.arr.insertAny(l,k,n?0:-1)}else{_.arr.insertAny(l,k,n?i:i+1)}if(m){r.boxing()._afterInsertItems(r,f,d,n)}})},removeItems:function(d,f){if(!(d instanceof Array)){d=[d]}var g,e,c=this._afterRemoveItems;remove=function(l,h,p,n,k,m){var i=arguments.callee;if(!k){k=linb()}_.filter(h,function(u){var s,q;if(m||(q=(_.arr.indexOf(p,u.id)!=-1))){if(l.renderId){if(s=l.ItemIdMapSubSerialId[u.id]){n.push(_.copy(l.SubSerialIdMapItem[s]));delete l.SubSerialIdMapItem[s];delete l.ItemIdMapSubSerialId[u.id];l.reclaimSubId(s,"items");if(!m){if(!(g=l.getSubNode(l.keys[f]?f:(l.box._ITEMKEY||"ITEM"),s)).isEmpty()){k.merge(g)}if(u.$linbid){k.get().push(linb.getObject(u.$linbid).getRootNode())}}}}}if(u.sub){i(l,u.sub,p,n,k,m||q)}if(q){for(var r in u){u[r]=null}return false}});k.remove()};return this.each(function(h){var k=h.properties,i=[];remove(h,k.items,d,i);if(e=k.$UIvalue){if((e=e.split(";")).length>1){_.filter(e,function(l){return _.arr.indexOf(d,l)==-1});k.$UIvalue=e.join(";")}else{if(_.arr.indexOf(d,k.$UIvalue)!=-1){k.$UIvalue=null}}}if(c&&h.renderId){h.boxing()._afterRemoveItems(h,i)}})},clearItems:function(c){return this.each(function(d){if(!d.SubSerialIdMapItem){return}d.getSubNode(d.keys[d.box._ITEMKEY||"ITEM"],true).remove();_.each(d.SubSerialIdMapItem,function(f,e){d.reclaimSubId(e,"items")});d.properties.items.length=0;d.SubSerialIdMapItem={};d.ItemIdMapSubSerialId={};d.properties.$UIvalue=null})},updateItem:function(d,q){var p=this,f=p.get(0),i=f.box,k=f.properties.items,l=f.queryItems(k,function(r){return typeof r=="object"?r.id===d:r==d},true,true,true),n,g,h,e,c,m;if(!_.isHash(q)){q={caption:q+""}}delete q.id;if(l.length){l=l[0];if(typeof l[0]!="object"){n=l[2][l[1]]={id:l[0]}}else{n=l[0]}_.merge(n,q,"all");e=f.getSubNodeByItemId("ITEM",d);if(!e.isEmpty()){g=_.get(f,["ItemIdMapSubSerialId",d]);h=i._prepareItems(f,[n],n._pid,false,g);if(q.sub){delete n._created;delete n._checked}else{if(n.sub){c=f.getSubNodeByItemId("SUB",d)}}e.replace(f._buildItems(arguments[2]||"items",h),false);if(c&&!c.isEmpty()){if(!(m=f.getSubNodeByItemId("SUB",d)).isEmpty()){m.replace(c)}}}}return p},getItems:function(f){var e=this.get(0).properties.items;if(f=="data"){return _.clone(e,true)}else{if(f=="min"){var d=_.clone(e,true),c;_.arr.each(d,function(h,g){d[g]=h.id});return d}else{return e}}},fireItemClickEvent:function(c){this.getSubNodeByItemId(this.constructor._focusNodeKey,c).onClick();return this}},Initialize:function(){var c=this.prototype;_.arr.each(_.toArr("getItemByItemId,getItemByDom,getSubIdByItemId,getSubNodeByItemId"),function(d){c[d]=function(){var e=this.get(0);return e[d].apply(e,arguments)};Class._fun(c[d],d,c.KEY,null,"instance")})},Static:{_focusNodeKey:"ITEM",$abstract:true,DataModel:{listKey:{set:function(d){var e=this,c=e.box.getCachedData(d);if(c){e.boxing().setItems(c)}else{e.boxing().setItems(e.properties.items)}e.properties.listKey=d}},items:{ini:[],set:function(c){var d=this;if(d.renderId){d.boxing().clearItems().insertItems(c)}else{d.properties.items=_.copy(c)}}}},RenderTrigger:function(){this.destroyTrigger=function(){_.each(this.SubSerialIdMapItem,function(c){_.breakO(c)});this.properties.items.length=0}},_adjustItems:function(d){if(!d){d=[]}if(_.isStr(d)){d=[d]}var e=_.copy(d),c;_.arr.each(e,function(g,f){if(typeof g!="object"){e[f]={id:g+""}}else{e[f]=_.copy(g);e[f].id=_.isSet(e[f].id)?(e[f].id+""):_.id()}});return e},_showTips:function(e,g,k){if(e.properties.disableTips){return}if(e.onShowTips){return e.boxing().onShowTips(e,g,k)}if(!linb.Tips){return}var d=e.properties,i=g.id,c=e.getSubId(i),h=e.SubSerialIdMapItem,f=h&&h[c];if(f&&f.tips){linb.Tips.show(k,f);return true}else{return false}}}});Class("linb.absValue","linb.absObj",{Instance:{_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(c){return this},_setDirtyMark:function(c){return this.each(function(g){if(!g.renderId){return}var f=g.properties,e=f.value!==f.$UIvalue,i=g.getSubNode(c||"KEY"),h=linb.UI.$css_tag_dirty;if(g._dirtyFlag!==e){if(f.dirtyMark){if(g.beforeDirtyMark&&false===g.boxing().beforeDirtyMark(g,e)){}else{if(e){i.addClass(h)}else{i.removeClass(h)}}}g._dirtyFlag=e}})},getValue:function(){return this.get(0).properties.value},getUIValue:function(){return this.get(0).properties.$UIvalue=this._getCtrlValue()},resetValue:function(d){var c=this;c.each(function(e){var f,g=e.properties;if(typeof(f=e.box._ensureValue)=="function"){d=f.call(e.box,e,d)}if(g.value!==d||g.$UIvalue!==d){if(e.box._beforeResetValue){e.box._beforeResetValue(e)}e.boxing()._setCtrlValue(g.value=d);g.$UIvalue=d;if(typeof(f=e.$onValueSet)=="function"){f.call(e,d)}}if(!e._inValid){e._inValid=1}});c._setDirtyMark();return c},setUIValue:function(e,d){var c=this;this.each(function(f){var k=f.properties,h,i=k.$UIvalue,g=f.boxing();if(i!==e||d){if(false===f.box._checkValid(f,e)||(f.beforeUIValueSet&&false===(h=g.beforeUIValueSet(f,i,e)))){return}if(h!==undefined&&typeof h!=="boolean"){e=h}if(typeof(h=f.box._ensureValue)=="function"){e=h.call(f.box,f,e)}if(typeof(h=f.$onValueUpdated)=="function"){h.call(f,e)}if(f.renderId){g._setCtrlValue(e)}k.$UIvalue=e;if(f.renderId){g._setDirtyMark()}if(f.afterUIValueSet){g.afterUIValueSet(f,i,e)}if(f.onChange){g.onChange(f,i,e)}if(!k.dirtyMark){g.setValue(e)}}});return this},updateValue:function(){return this.each(function(d){var e=d.properties;if(e.value!==e.$UIvalue){var c=d.boxing();if(c.checkValid()){c.setValue(c.getUIValue(),true);c._setDirtyMark()}}})},isDirtied:function(){var c=false;this.each(function(d){var e=d.properties;c=(e.value+" ")!==(e.$UIvalue+" ");if(c){return false}});return c},checkValid:function(){var c=true;this.each(function(d){var e=d.properties;c=d.box._checkValid(d,e.$UIvalue)&&c;if(d.renderId){d.boxing()._setDirtyMark()}});return c}},Static:{$abstract:true,DataModel:{dataBinder:{combobox:function(){return _.toArr(linb.DataBinder._pool,true)},set:function(d,f){var c=this,e=c.properties;if(f){linb.DataBinder._unBind(f,c)}e.dataBinder=d;linb.DataBinder._bind(d,c)}},dataField:{ini:"",set:function(f,h){var e=this,d,g=e.properties;g.dataField=f;if(!g.dataBinder){return}var c=linb.DataBinder.getFromName(g.dataBinder);if(c&&(d=c.get(0))&&(d=d._valuesMap)&&_.isSet(d=d[f])){e.boxing().setValue(d,true)}}},readonly:{ini:false,action:function(c){var d=this.getRoot();if(c){d.addClass("ui-readonly")}else{d.removeClass("ui-readonly")}}},value:{ini:null,set:function(g){var d=this,i=d.properties,f,h=i.value,e=d.boxing(),c=g;if(d.box._checkValid(d,c)===false){return}if(d.beforeValueSet&&false===(f=e.beforeValueSet(d,h,c))){return}if(f!==undefined){c=f}if(typeof(f=d.box._ensureValue)=="function"){c=f.call(d.box,d,c)}if(typeof(f=d.$onValueSet)=="function"){f.call(d,c)}if(d.renderId){e._setCtrlValue(c)}i.value=i.$UIvalue=c;if(!d._inValid){d._inValid=1}if(d.renderId){e._setDirtyMark()}if(d.afterValueSet){e.afterValueSet(d,h,c)}}},dirtyMark:true},EventHandlers:{beforeValueSet:function(d,c,e){},afterValueSet:function(d,c,e){},beforeUIValueSet:function(d,c,e){},afterUIValueSet:function(d,c,e){},onChange:function(d,c,e){},beforeDirtyMark:function(d,c){}},RenderTrigger:function(){var d=this,c=d.boxing(),f=d.properties,e;if(e=f.dataBinder){c.setDataBinder(e,true)}if(e=f.dataField){c.setDataField(e)}if(f.value!==undefined){if(typeof(e=d.box._ensureValue)=="function"){f.value=e.call(d.box,d,f.value);if(f.$UIvalue){f.$UIvalue=e.call(d.box,d,f.$UIvalue)}}if(!f.$UIvalue){f.$UIvalue=f.value}c._setCtrlValue(f.$UIvalue)}},_checkValid:function(c,d){return true}}});new function(){var c="linb.UI";Class(c+".Widget",c,{Static:{Appearances:{KEY:{"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null}},Templates:{className:"uiw-shell {_className}",style:"{_style}",FRAME:{className:"uiw-frame ",BORDER:{style:"width:{bWidth}px;height:{bHeight}px;",className:"uiw-border"}}},Behaviors:{onSize:linb.UI.$onSize},DataModel:{width:100,height:100,$hborder:0,$vborder:0},RenderTrigger:function(){var d=this,e=d.properties,f=d.boxing();if(d.renderId){if((!d.$noB)&&e.border&&f._border){f._border()}}if((!d.$noR)&&e.resizer&&f.setResizer){f.setResizer(e.resizer,true)}if((!d.$noS)&&e.shadow&&f._shadow){f._shadow()}},_onresize:function(g,d,m){var n=g.properties,e=g.getSubNode("BORDER"),l,i=d,h=m,f=Math.max(0,(n.$b_lw||0)-(n.$hborder||0)),k=Math.max(0,(n.$b_tw||0)-(n.$vborder||0));if(i&&"auto"!==i){i-=Math.max((n.$hborder||0)*2,(n.$b_lw||0)+(n.$b_rw||0));if(linb.browser.ie6){i=(parseInt(i/2))*2}}if(h&&"auto"!==h){h-=Math.max((n.$vborder||0)*2,(n.$b_lw||0)+(n.$b_rw||0));if(linb.browser.ie6){h=(parseInt(h/2))*2}if(linb.browser.ie6&&null===d){e.ieRemedy()}}l={left:f,top:k,width:i,height:h};e.cssRegion(l);if((g.$border||g.$shadow||g.$resizer)&&linb.browser.ie){e.ieRemedy()}return l}}});Class(c+".Link",c,{Static:{Appearances:{KEY:{"font-size":linb.browser.ie?"12px":null,"line-height":linb.browser.ie?"14px":null}},Templates:{tagName:"a",style:"{_style}",href:"{href}",target:"{target}",tabindex:"{tabindex}",text:"{caption}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},onClick:function(f,h,i){var g;if(!f.properties.disabled&&f.onClick){g=f.boxing().onClick(f,h,i)}var d=linb.use(i).attr("href");return typeof g=="boolean"?g:(d.indexOf("javascript:")===0||d.indexOf("#")===0)?false:true}},DataModel:{caption:{ini:undefined,action:function(d){this.getRoot().html(d)}},href:{ini:linb.$DEFAULTHREF,action:function(d){this.getRoot().attr("href",d)}},target:{action:function(d){this.getRoot().attr("target",d)}}},EventHandlers:{onClick:function(d,f){}}}});Class(c+".SLabel",c,{Static:{Templates:{style:"{_style}text-align:{hAlign}",text:"{caption}"},Appearances:{KEY:{"padding-right":"6px"}},DataModel:{caption:{ini:undefined,action:function(d){this.getRoot().html(d)}},hAlign:{ini:"right",listbox:["left","center","right"],action:function(d){this.getRoot().css("textAlign",d)}}}}});Class(c+".SButton",c,{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this}},Static:{Templates:{className:"{_clsName} {_className}",style:"{_style}",BTN:{className:"ui-btn",BTNI:{className:"ui-btni",BTNC:{className:"ui-btnc",FOCUS:{tabindex:"{tabindex}",style:"{_align}",text:"{caption}"}}}}},Appearances:{BTN:{overflow:"hidden"},"KEY-auto BTN, KEY-auto BTNI, KEY-auto BTNC, KEY-auto FOCUS":{$order:1,display:linb.$inlineBlock},"BTN,BTNI,BTNC":{display:"block"},"KEY FOCUS":{cursor:"pointer","font-size":"12px","line-height":"14px","text-align":"center",display:"block"}},Behaviors:{HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},NavKeys:{FOCUS:1},onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}d.getSubNode("FOCUS").focus();if(d.onClick){d.boxing().onClick(d,g,h)}}},DataModel:{caption:{ini:undefined,action:function(d){this.getSubNode("FOCUS").html(d)}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(d){this.getSubNode("FOCUS").css("textAlign",d)}},width:{ini:"auto",action:function(d){if(d=="auto"){this.getRoot().width("auto").tagClass("-auto")}else{this.getRoot().width(d).tagClass("-auto",false)}}},height:{readonly:true}},EventHandlers:{onClick:function(d,g,h,f){}},_prepareData:function(d){var e=arguments.callee.upper.call(this,d);e._align="text-align:"+e.hAlign+";";e._clsName=parseInt(e.width)?"":d.getClass("KEY","-auto");return e}}});Class(c+".SCheckBox",[c,"linb.absValue"],{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(d){return this.each(function(e){e.getSubNode("MARK").tagClass("-checked",!!d)})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["CAPTION"])}},Static:{Templates:{className:"{_clsName} {_className}",style:"{_style}",FOCUS:{tabindex:"{tabindex}",MARK:{className:"uicmd-check"},CAPTION:{$order:1,text:"{caption}"}}},Appearances:{KEY:{overflow:"visible"},FOCUS:{cursor:"default","vertical-align":"middle",padding:"2px 0","font-size":"12px","line-height":"14px"},CAPTION:{"vertical-align":linb.browser.ie6?"baseline":"middle"}},Behaviors:{HoverEffected:{KEY:"MARK"},ClickEffected:{KEY:"MARK"},NavKeys:{FOCUS:1},onClick:function(f,h,i){var g=f.properties,d=f.boxing();if(g.disabled){return false}if(g.readonly){return false}d.setUIValue(!g.$UIvalue);if(f.onChecked){d.onChecked(f,h,g.$UIvalue)}f.getSubNode("FOCUS").focus()},FOCUS:{onKeydown:function(f,g,h){var d=linb.Event.getKey(g).key;if(d==" "||d=="enter"){f.getRoot().onClick(true);return false}}}},DataModel:{value:false,caption:{ini:undefined,action:function(d){this.getSubNode("CAPTION").html(d)}}},EventHandlers:{onChecked:function(d,g,f){}},_ensureValue:function(d,e){return !!e}}});Class(c+".Span",c,{Static:{Templates:{style:"{_style}",className:"{_className}",tabindex:"-1",text:"{html}"+linb.UI.$childTag},DataModel:{width:"16",height:"16",html:{action:function(d){this.getRoot().html(d)}}}}});Class(c+".Div",c,{Static:{Appearances:{KEY:{outline:linb.browser.gek?"none":null,zoom:linb.browser.ie6?"1":null,background:linb.browser.ie?"url("+linb.ini.img_bg+") no-repeat left top":null}},Templates:{tagName:"div",style:"{_style}",className:"{_className}",tabindex:"-1",text:"{html}"+linb.UI.$childTag},DataModel:{width:"100",height:"100",html:{action:function(d){this.getRoot().html(d)}}}}});Class(c+".Tag",c+".Div",{Static:{Templates:{tagName:"div",style:"overflow:auto;border:dashed blue 1px;text-align:center;background:#EBEADB;{_style}",text:"{tagKey}"+linb.UI.$childTag},DataModel:{html:null,tagKey:{action:function(d){this.getRoot().html(d)}}},_l:_.toArr("left,top,bottom,right,width,height,zIndex,tabindex,position,dock,dockFloat,dockMinW,dockMinH,dockOrder,dockMargin"),replace:function(f,g,d){_.arr.each(this._l,function(k){if(k in f.properties){g.properties[k]=f.properties[k]}});_.merge(g.CS,f.CS,"all");_.merge(g.CC,f.CC,"all");if(typeof f.theme=="string"){g.theme=f.theme}if(f.parent){var h=f.parent.children,i=h["$"+f.$linbid],e=_.arr.indexOf(h,i);f.parent.boxing().append(g,i[1]);h[e]=h.pop();f.unLink("$parent");delete f.parent}else{if(d){_.arr.each(d._nodes,function(l,k){if(l===f){d._nodes[k]=g;return false}})}}if(f.renderId){g.boxing().renderOnto(f.getRootNode())}}}});Class(c+".Pane",c+".Div",{Static:{Behaviors:{DroppableKeys:["KEY"]}}})};Class("linb.UI.Image","linb.UI",{Instance:{getRate:function(){return parseFloat(this.get(0)._rate)||1}},Static:{Templates:{tagName:"image",style:"{_style}",className:"{_className}",border:"0",width:"{width}",height:"{height}",alt:"{alt}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},DraggableKeys:["KEY"],onError:function(c,d,f){c.boxing().onError(c)},onLoad:function(f,h,k){var d=new Image(),g=d.src=linb.use(k).get(0).src,c=f.box._adjust(f,d.width,d.height);f.boxing().afterLoad(f,g,c[0],c[1])},onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){c.boxing().onClick(c,f,g)}},onDblclick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onDblclick){c.boxing().onDblclick(c,f,g)}}},RenderTrigger:function(){var d=this,e=d.properties,c=e.src;if(c){e.value=e.$UIvalue="";d.boxing().setSrc(c,true)}},EventHandlers:{onClick:function(c,d,f){},onDblclick:function(c,d,f){},onError:function(c){},beforeLoad:function(c){},afterLoad:function(e,f,d,c){}},_adjust:function(g,f,c){var k=g.properties,i=g.getRootNode();if(f>0&&c>0){var e=k.maxWidth/f,d=k.maxHeight/c,h=e<d?e:d;if(h>=1){h=1}g._rate=h;i.width=f*h;i.height=c*h;return[f*h,c*h]}return[0,0]},DataModel:{maxWidth:{ini:800,action:function(c){var d=this.getRootNode();this.box._adjust(this,d.width,d.height)}},maxHeight:{ini:600,action:function(c){var d=this.getRootNode();this.box._adjust(this,d.width,d.height)}},width:{ini:"",action:function(c){var d=this.getRootNode();d.width=c}},height:{ini:"",action:function(c){var d=this.getRootNode();d.height=c}},src:{ini:linb.ini.img_bg,action:function(d){var c=this;if(false!==c.boxing().beforeLoad(this)){_.asyRun(function(){c.getRoot().attr({width:"0",height:"0",src:d})})}}},alt:{action:function(c){this.getRoot().attr("alt",c)}}}}});Class("linb.UI.Border","linb.UI",{Instance:{_attachTo:function(h,f){var e=this,d=e.get(0),g;h.append(e);d.$edgeId=linb(h).id();d.$tieId=f;d.$attached=true;if(g=d.properties){if(d.properties.borderActive){var c="tag",i=d.domId;if(linb(f).get(0)){linb(f).afterMouseover(function(m,l){if(m.properties.disabled){return}var k=linb.$cache.profileMap[i];_.tryF(k.behavior.TAG.afterMouseover,[k,l,k.getRootNode()],this)},c).afterMouseout(function(m,l){if(m.properties.disabled){return}var k=linb.$cache.profileMap[i];_.tryF(k.behavior.TAG.afterMouseout,[k,l,k.getRootNode()],this)},c).afterMousedown(function(m,l){if(m.properties.disabled){return}var k=linb.$cache.profileMap[i];_.tryF(k.behavior.TAG.afterMousedown,[k,l,k.getRootNode()],this)},c).afterMouseup(function(m,l){if(m.properties.disabled){return}var k=linb.$cache.profileMap[i];_.tryF(k.behavior.TAG.afterMouseup,[k,l,k.getRootNode()],this)},c)}}}return h},_detach:function(){var f=this,e=f.get(0),h,g,d=null,c="tag";delete e.$attached;if(h=e.$tieId){if(h=linb.Dom.byId(h)){linb(h).afterMouseover(d,c).afterMouseout(d,c).afterMousedown(d,c).afterMouseup(d,c)}}return f}},Initialize:function(){_.each({addBorder:function(d){var e=linb([this.get(0)]),c=arguments[1]||e.id();return new linb.UI.Border(d)._attachTo(e,c)},$getBorder:function(){var d=this.id(),c;_.arr.each(linb.UI.Border._cache,function(e){if(e.$edgeId==d){c=e;return false}});return c&&c.boxing()},removeBorder:function(){var c=this.id();_.arr.each(linb.UI.Border._cache,function(d){if(d.$edgeId==c){d.boxing()._detach().destroy()}});return this}},function(d,c){linb.Dom.plugIn(c,d)});_.each({_border:function(d,c){return this.each(function(l){var h=l.properties,i=l.getSubNode(h._customBorder||"BORDER"),f;if(!d){d={}}if(h._customBorder){f=(d._bkey=l.getClass("KEY"))}else{f="linb-border"}var g="setting-"+f,e;e="borderLeftWidth";h.$b_lw=linb.UI.$getCSSValue(g,e);e="borderRightWidth";h.$b_rw=linb.UI.$getCSSValue(g,e);e="borderTopWidth";h.$b_tw=linb.UI.$getCSSValue(g,e);e="borderBottomWidth";h.$b_bw=linb.UI.$getCSSValue(g,e);if(c!==false){if(i.$getBorder()){return}l.$border=i.addBorder(d);l.clearCache().boxing().reLayout()}})},_unBorder:function(){return this.each(function(e){var d=e.getSubNode("BORDER"),c=e.properties;if(!d.$getBorder()){return}d.removeBorder();delete e.$border;delete c.$b_lw;delete c.$b_rw;delete c.$b_tw;delete c.$b_bw;e.clearCache().boxing().reLayout()})}},function(d,c){linb.UI.Widget.plugIn(c,d)});linb.UI.Widget.setDataModel({border:{ini:false,action:function(d){var c=this.boxing();if(d){c._border()}else{c._unBorder()}}}})},Static:{Templates:{tagName:"div",TAG:{},T:{className:"{cls_t}"},RT:{className:"{cls_rt}",$order:1},R:{className:"{cls_r}"},RB:{className:"{cls_rb}",$order:1},B:{className:"{cls_b}"},LB:{className:"{cls_lb}",$order:1},L:{className:"{cls_l}"},LT:{className:"{cls_lt}",$order:1}},Appearances:{KEY:{width:0,height:0,_display:"inline","font-size":0,"line-height":0},"TAG,T, RT, R, RB, B, LB, L, LT":{position:"absolute",display:"block","font-size":0,"line-height":0},".setting-linb-border":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},T:{width:"100%",left:0,top:"-1px",height:"3px",background:linb.UI.$bg("vertical.gif","repeat-x left top")},B:{width:"100%",left:0,bottom:"-1px",height:"3px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom")},L:{height:"100%",top:0,left:"-1px",width:"3px",background:linb.UI.$bg("horizontal.gif","repeat-y left top")},R:{height:"100%",top:0,right:"-1px",width:"3px",background:linb.UI.$bg("horizontal.gif","repeat-y right top")},LT:{top:"-1px",left:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat left top")},RT:{top:"-1px",right:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat right top")},RB:{right:"-1px",bottom:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat right bottom")},LB:{left:"-1px",bottom:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat left bottom")}},Behaviors:{HoverEffected:{TAG:"KEY"},ClickEffected:{TAG:"KEY"}},DataModel:{_bkey:"",borderActive:false},_prepareData:function(c){var e=arguments.callee.upper.call(this,c),d=c.properties._bkey;e.cls_t=d?d+"-b-t":"";e.cls_rt=d?d+"-b-rt":"";e.cls_r=d?d+"-b-r":"";e.cls_rb=d?d+"-b-rb":"";e.cls_b=d?d+"-b-b":"";e.cls_lb=d?d+"-b-lb":"";e.cls_l=d?d+"-b-l":"";e.cls_lt=d?d+"-b-lt":"";return e}}});Class("linb.UI.Shadow","linb.UI",{Instance:{_attachTo:function(d){d=d.reBoxing();var c=this;c.get(0)._target=d.get(0);d.append(c);return d}},Initialize:function(){_.each({addShadow:function(c){return new linb.UI.Shadow(c)._attachTo(linb([this.get(0)]))},$getShadow:function(){var d=this.get(0),c;_.arr.each(linb.UI.Shadow._cache,function(e){if(e._target==d){c=e;return false}});return c&&c.boxing()},removeShadow:function(){var c=this.get();_.arr.each(linb.UI.Shadow._cache,function(d){if(d&&d.renderId&&d._target){if(_.arr.indexOf(c,linb(d._target).get(0))!=-1){d.boxing().destroy()}}});return this}},function(d,c){linb.Dom.plugIn(c,d)});_.each({_shadow:function(c){return this.each(function(g){var e=g.getSubNode("BORDER");if(e.$getShadow()){return}var f=g.properties;g.$shadow=e.addShadow({shadowSize:f._shadowSize})})},_unShadow:function(){return this.each(function(d){var c=d.getSubNode("BORDER");if(!c.$getShadow()){return}c.removeShadow();delete d.$shadow})}},function(d,c){linb.UI.Widget.plugIn(c,d)});linb.UI.Widget.setDataModel({shadow:{ini:false,action:function(d){var c=this.boxing();if(d){c._shadow()}else{c._unShadow()}}},_shadowSize:this.SIZE})},Static:{SIZE:8,Templates:{tagName:"div",R:{tagName:"div",style:"top:{shadowOffset}px;width:{shadowSize}px;right:-{pos}px;"},RB:{tagName:"div",style:"height:{rbsize}px;width:{rbsize}px;right:-{pos}px;bottom:-{pos}px;"},B:{tagName:"div",style:"left:{shadowOffset}px;height:{shadowSize}px;bottom:-{pos}px;"}},Appearances:{KEY:{width:0,height:0,_display:"inline","_font-size":0,"_line-height":0},"B, RB, R":{position:"absolute",display:"block","*font-size":0,"*line-height":0,"z-index":"-1"},B:{left:0,width:"100%",background:linb.browser.ie6?"":linb.UI.$bg("bottom.png","repeat-x left bottom"),_filter:linb.UI.$ieBg("bottom.png")},RB:{background:linb.browser.ie6?"":linb.UI.$bg("right_bottom.png","left top"),_filter:linb.UI.$ieBg("right_bottom.png")},R:{top:0,height:"100%",background:linb.browser.ie6?"":linb.UI.$bg("right.png","repeat-y right top"),_filter:linb.UI.$ieBg("right.png")}},DataModel:{shadowSize:{ini:8,action:function(e){var d=this,c=d.properties.shadowOffset;d.getSubNode("R").cssRegion({width:e,top:c,right:-e-c});d.getSubNode("RB").cssRegion({width:e,height:e,right:-e-c+1,bottom:-e-c+1});d.getSubNode("B").cssRegion({height:e,left:c,bottom:-e-c})}},shadowOffset:{ini:0,action:function(c){this.boxing().setShadowSize(this.properties.shadowSize,true)}}},_prepareData:function(d){var c=arguments.callee.upper.call(this,d);c.pos=(parseInt(c.shadowSize)||0)+(parseInt(c.shadowOffset)||0);c.rbsize=c.shadowSize+4;return c},LayoutTrigger:function(){if(linb.browser.ie){this.getRoot().ieRemedy()}}}});Class("linb.UI.Resizer","linb.UI",{Instance:{_attachTo:function(f,e){var d=this,c=d.get(0);c._target=linb(f);c._parent=e||linb("body");c._parent.append(d);c.$resizeId=linb(f).id();return d},show:function(){var c=this;c.each(function(d){d.getRoot().css("display","")});if(linb.browser.ie){c.reBoxing().ieRemedy()}return c},hide:function(){var c=this;c.reBoxing().css("display","none");return c}},Initialize:function(){this.addTemplateKeys(["HANDLER","HIDDEN","MOVE","L","R","T","B","LT","RT","LB","RB"]);_.each({addResizer:function(e,d,c){var g=linb([this.get(0)]);e=e||{};_.merge(e,{_attached:true});var f=new linb.UI.Resizer(e)._attachTo(g,g);if(d){f.onUpdate(d)}if(c){f.onChange(c)}return f},removeResizer:function(){var c=this.id();_.arr.each(linb.UI.Resizer._cache,function(d){if(d.$resizeId==c){d.boxing().destroy()}});return this},$getResizer:function(){var d=this.id(),c;_.arr.each(linb.UI.Resizer._cache,function(e){if(e.$resizeId==d){c=e;return false}});return c&&c.boxing()}},function(d,c){linb.Dom.plugIn(c,d)});_.each({_resizer:function(d,c){return this.each(function(g){var e=g.getSubNode("BORDER"),f=g.properties;if(e.$getResizer()){return}c=c||{};var h=function(u,r,z,k){var n=arguments.callee.profile,m=n.getRoot(),x=n.boxing(),i=n.properties,y;if(z){var s=null,q=null,p=null,y=null;if(y=z.width){m.widthBy(y);i.width=s=m.width()}if(y=z.height){m.heightBy(y);i.height=q=m.height()}linb.UI.$tryResize(n,s,q,true);if(!n.box._onresize&&n.onResize&&(s!==null||q!==null)){x.onResize(n,s,q)}}if(k){if((y=k.left)&&!(i.left=="auto"&&parseInt(i.right)>=0)){m.leftBy(y);i.left=m.left()}if((y=k.top)&&!(i.top=="auto"&&parseInt(i.bottom)>=0)){m.topBy(y);i.top=m.top()}if(n.onMove&&(p!==null||y!==null)){x.onMove(n,p,y,null,null)}}return false};h.profile=g;g.$resizer=e.addResizer(c,h);g.$resizer.get(0).$parentUIProfile=g;if(f.visibility=="hidden"){g.$resizer.hide()}})},_unResizer:function(){return this.each(function(d){var c=d.getSubNode("BORDER");if(!c.$getResizer()){return}c.removeResizer();delete d.$resizer})}},function(d,c){linb.UI.Widget.plugIn(c,d)});linb.UI.Widget.setDataModel({resizer:{ini:false,action:function(e){var d=this.boxing();if(e){var f=this.properties,c={};_.each("minHeight,minWidth,maxHeight,maxWidth".split(","),function(g){if(g in f){c[g]=f[g]}});d._resizer(e,c)}else{d._unResizer()}}}})},Static:{Templates:{tagName:"div",style:"{_style};"},Appearances:{KEY:{position:"absolute",margin:"0 -1px -1px 0",visibility:"visible","font-size":0,"line-height":0,"*background":"url("+linb.ini.path+"bg.gif)","z-index":60,cursor:"move"},MOVE:{position:"absolute",display:"block","z-index":100,visibility:"visible",background:linb.UI.$bg("icons.gif","no-repeat -17px -244px",true),"font-size":0,"line-height":0},HANDLER:{$order:0,position:"absolute",display:"block",border:"solid 1px","background-color":"#fff","z-index":100,visibility:"visible","font-size":0,"line-height":0},T:{$order:1,left:"50%",cursor:"n-resize"},RT:{$order:1,cursor:"ne-resize","z-index":110},R:{$order:1,top:"50%",cursor:"e-resize"},RB:{$order:1,cursor:"se-resize","z-index":110},B:{$order:1,left:"50%",cursor:"s-resize"},LB:{$order:1,cursor:"sw-resize","z-index":110},L:{$order:1,top:"50%",cursor:"w-resize"},LT:{$order:1,cursor:"nw-resize","z-index":110},HIDDEN:{$order:10,"background-color":"transparent","border-width":0}},Behaviors:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{move:true})},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{move:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{move:true})},onDblclick:function(c,d,f){if(c.onDblclick){c.boxing().onDblclick(c,d,f)}},LT:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{left:true,top:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{left:true,top:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{left:true,top:true})}},RT:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{right:true,top:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{right:true,top:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{right:true,top:true})}},LB:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{left:true,bottom:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{left:true,bottom:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{left:true,bottom:true})}},RB:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{right:true,bottom:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{right:true,bottom:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{right:true,bottom:true})}},L:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{left:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{left:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{left:true})}},T:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{top:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{top:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{top:true})}},R:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{right:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{right:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{right:true})}},B:{onMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{bottom:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{bottom:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{bottom:true})}}},DataModel:{_attached:false,forceVisible:false,forceMovable:false,singleDir:false,vertical:true,horizontal:true,minHeight:12,minWidth:12,maxHeight:5000,maxWidth:5000,handlerSize:4,handlerOffset:0,left:100,top:100,height:100,width:100,position:"absolute",display:"block"},EventHandlers:{onDblclick:function(c,d,f){},onUpdate:function(e,f,d,c){},onChange:function(d,c){}},_dynamicTemplate:function(e){var h=e.properties,m,g,k,f=e._exhash="$_attached:"+h._attached+";forceVisible:"+h.forceVisible+";singleDir:"+h.singleDir+";vertical:"+h.vertical+";horizontal:"+h.horizontal+";forceMovable:"+h.forceMovable+";";var c=arguments.callee.map||(arguments.callee.map={MOVE:{tagName:"div",style:"top:50%;left:50%;margin-left:-6px;margin-top:-6px;width:13px;height:13px;"},T:{tagName:"div",style:"top:-{extend}px;margin-left:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},RT:{tagName:"div",style:"top:-{extend}px;right:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},R:{tagName:"div",style:"right:-{extend}px;margin-top:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},RB:{tagName:"div",style:"bottom:-{extend}px;right:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},B:{tagName:"div",style:"bottom:-{extend}px;margin-left:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},LB:{tagName:"div",style:"bottom:-{extend}px;left:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},L:{tagName:"div",style:"left:-{extend}px;margin-top:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},LT:{tagName:"div",style:"left:-{extend}px;top:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},cover:{T:{tagName:"div",style:"width:100%;left:0;top:-{extend}px;height:{handlerSize}px;"},RT:{tagName:"div",style:"top:-{extend}px;right:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},R:{tagName:"div",style:"height:100%;top:0;right:-{extend}px;width:{handlerSize}px;"},RB:{tagName:"div",style:"right:-{extend}px;bottom:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},B:{tagName:"div",style:"width:100%;left:0;bottom:-{extend}px;height:{handlerSize}px;"},LB:{tagName:"div",style:"left:-{extend}px;bottom:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},L:{tagName:"div",style:"height:100%;top:0;left:-{extend}px;width:{handlerSize}px;"},LT:{tagName:"div",style:"top:-{extend}px;left:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"}}});var i=e.box.getTemplate(f);if(!i){var l,d;i=_.clone(e.box.getTemplate());l=h._cover?c.cover:c;if(h._move){i.MOVE=c.MOVE}if(h.vertical){if(!h.singleDir){i.T=l.T}i.B=l.B}if(h.horizontal){if(!h.singleDir){i.L=l.L}i.R=l.R;if(h.vertical){if(!h.singleDir){i.LB=l.LB;i.RT=l.RT;i.LT=l.LT}i.RB=l.RB}}d=e.getClass("KEY","-handler")+" ";if(l=i.T){l.className=d}if(l=i.RT){l.className=d}if(l=i.R){l.className=d}if(l=i.RB){l.className=d}if(l=i.B){l.className=d}if(l=i.LB){l.className=d}if(l=i.L){l.className=d}if(l=i.LT){l.className=d}if(!h._visible){d=e.getClass("KEY","-hidden")+" ";if(l=i.T){l.className+=d}if(l=i.RT){l.className+=d}if(l=i.R){l.className+=d}if(l=i.RB){l.className+=d}if(l=i.B){l.className+=d}if(l=i.LB){l.className+=d}if(l=i.L){l.className+=d}if(l=i.LT){l.className+=d}}e.box.setTemplate(i,f)}e.template=i},_prepareData:function(d){var c=d.properties;c._visible=true;c._cover=false;c._move=true;if(c._attached){c._visible=false;c._cover=true;c._move=false;c.position="static";c.display="inline";c.left=c.top=c.width=c.height=0}if(c.forceVisible){c._visible=true;c._cover=false}if(c.forceMovable){c._move=true}c.extend=(parseInt(c.handlerSize)||0)/2+(parseInt(c.handlerOffset)||0);return arguments.callee.upper.call(this,d)},RenderTrigger:function(){var c=this;linb.setNodeData(c.renderId,"zIndexIgnore",1)},_onUpdate:function(f,g,e,c){if(g){if(e){g.widthBy(e.width,true).heightBy(e.height,true)}if(c){var d=g.get(0).style;if(d.left=="auto"&&(parseInt(d.right)>=0)){}else{g.leftBy(c.left)}if(d.top=="auto"&&(parseInt(d.bottom)>=0)){}else{g.topBy(c.top)}}}},_onMousedown:function(d,g,h,c){if(linb.Event.getBtn(g)!="left"){return}var f=d.$parentUIProfile;if(f&&f["linb.UIProfile"]&&f.beforeResizerDrag&&false===_.tryF(f.beforeResizerDrag,[f,d,c],f.boxing())){return}var i=linb.Event.getPos(g);linb.use(h).startDrag(g,{dragDefer:1,targetReposition:false,dragType:"blank",dragCursor:true,targetLeft:i.left,targetTop:i.top})},_onDragbegin:function(f,g){var i=f.properties._attached?f._target:linb([f.renderId]),c=i.width(),d=i.height();if(f.properties._attached){var k=i.offset();f.proxy=linb.Dom.getEmptyDiv();f.proxy.html(" ",false).css({border:"1px dashed",visibility:"visible"}).offset(k).width(c).height(d).css("zIndex",linb.Dom.TOP_ZINDEX+20)}else{f.proxy=i}f.o_pos=f.proxy.cssPos();f.o_w2=f.o_w=c;f.o_h2=f.o_h=d;f.$onDrag=true},_onDrag:function(g,l,d,r){var f=r;g.oos=g.oos||{};var i=linb.DragDrop.getProfile().offset;if(i.x==g.oos.width&&i.y==g.oos.height){return}g.oos=i;var p,n,q,k,s=g.properties;if(f.left){q=g.o_w-i.x;p=g.o_pos.left+i.x;if(q<s.minWidth){q=s.minWidth;p=g.o_w+g.o_pos.left-q}else{if(q>s.maxWidth){q=s.maxWidth;p=g.o_w+g.o_pos.left-q}}g.proxy.width(q).left(p);if(g.onChange){g.boxing().onChange(g,g.proxy)}}else{if(f.right){q=g.o_w+i.x;if(q<s.minWidth){q=s.minWidth}else{if(q>s.maxWidth){q=s.maxWidth}}g.proxy.width(q);if(g.onChange){g.boxing().onChange(g,g.proxy)}}}if(f.left||f.right){var c=q-g.o_w2;if(g.regions&&c!==0){g.regions.widthBy(c);g.o_w2=q}}if(f.top){k=g.o_h-i.y;n=g.o_pos.top+i.y;if(k<s.minHeight){k=s.minHeight;n=g.o_h+g.o_pos.top-k}else{if(k>s.maxHeight){k=s.maxHeight;n=g.o_h+g.o_pos.top-k}}g.proxy.height(k).top(n);if(g.onChange){g.boxing().onChange(g,g.proxy)}}else{if(f.bottom){k=g.o_h+i.y;if(k<s.minHeight){k=s.minHeight}else{if(k>s.maxHeight){k=s.maxHeight}}g.proxy.height(k);if(g.onChange){g.boxing().onChange(g,g.proxy)}}}if(f.top||f.bottom){var m=k-g.o_h2;if(g.regions&&m!==0){g.regions.heightBy(m);g.o_h2=k}}if(f.move){p=g.o_pos.left+i.x;n=g.o_pos.top+i.y;g.proxy.top(n).left(p);if(g.onChange){g.boxing().onChange(g,g.proxy)}}},_onDragstop:function(g,h,k,d){var c,f,l,i=g.proxy;if(!d.move){f={width:i.width()-g.o_w,height:i.height()-g.o_h}}if(d.left||d.top||d.move){c=i.cssPos();l={left:c.left-g.o_pos.left,top:c.top-g.o_pos.top}}if(g.onUpdate&&false===g.boxing().onUpdate(g,g._target,f,l)){}else{g.box._onUpdate(g,g._target,f,l)}if(g.properties._attached){if(linb.browser.ie6){g._target.ieRemedy()}g.proxy.html("",false).css({visibility:"hidden",border:"none",zIndex:"0",width:"0",height:"0"})}g.$onDrag=false}}});Class("linb.UI.Block","linb.UI.Widget",{Initialize:function(){var c=this,d=c.getTemplate();_.merge(d.FRAME.BORDER,{className:"uiw-border {clsBorderType1}",PANEL:{tagName:"div",className:"{clsBorderType2} uibg-bar",style:"{background}",text:"{html}"+linb.UI.$childTag}},"all");c.setTemplate(d);d=c.getAppearance();_.merge(d,{PANEL:{position:"relative",overflow:"hidden"}});c.setAppearance(d)},Static:{Behaviors:{DroppableKeys:["PANEL"]},DataModel:{disabled:null,tips:null,html:{action:function(c){this.getSubNode("PANEL").html(c)}},borderType:{ini:"outset",listbox:["none","flat","inset","outset","groove","ridge"],action:function(m){var l=this,e=l.properties,i=l.getSubNode("BORDER"),g=l.getSubNode("PANEL"),f=/^uiborder-/,c="uiborder-flat",h="uiborder-inset",d="uiborder-outset",k=l.getRoot();i.removeClass(f);g.removeClass(f);switch(m){case"flat":i.addClass(c);break;case"inset":i.addClass(h);break;case"outset":i.addClass(d);break;case"groove":i.addClass(h);g.addClass(d);break;case"ridge":i.addClass(d);g.addClass(h);break}l.box._setB(l);linb.UI.$tryResize(l,k.get(0).style.width,k.get(0).style.height,true)}},background:{ini:"",action:function(c){this.getSubNode("PANEL").css("background",c)}},width:100,height:100},_setB:function(d){var e=d.properties,c=e.borderType;e.$hborder=e.$vborder=e.$iborder=0;if(c=="flat"||c=="inset"||c=="outset"){e.$hborder=e.$vborder=1;e.$iborder=0}else{if(c=="groove"||c=="ridge"){e.$hborder=e.$vborder=e.$iborder=1}}},LayoutTrigger:function(){var c=this.properties.borderType;if(c!="none"){this.boxing().setBorderType(c,true)}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.background=d.background?"background:"+d.background:"";return d},_onresize:function(g,f,d){var e=arguments.callee.upper.apply(this,arguments),h=g.properties,c=(h.$iborder||0)*2;if(e.width){e.width-=c}if(e.height&&"auto"!==e.height){e.height-=c}g.getSubNode("PANEL").cssSize(e,true)}}});Class("linb.UI.Label","linb.UI.Widget",{Instance:{_shadowText:function(c){return this.each(function(d){d.getSubNode("SHADOW").css("display","block")})},_unShadowText:function(c){return this.each(function(d){d.getSubNode("SHADOW").css("display","none")})}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.BORDER,{SHADOW:{$order:1,style:"display:none;",SICON:{$order:0,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},SCAPTION:{text:"{caption}",style:"color:#cdcdcd;",$order:1}},BOX:{$order:2,ICON:{$order:0,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{text:"{caption}",$order:1}}},"all");this.setTemplate(c)},Static:{Appearances:{KEY:{"font-size":"12px","line-height":"14px"},BOX:{position:"absolute"},SHADOW:{position:"absolute",top:"4px"}},DataModel:{caption:{ini:undefined,action:function(f){var e=this,g=e.properties,c=e.boxing(),d=e.keys;e.getSubNodes(["CAPTION","SCAPTION"]).html(f,false);if(g.hAlign!="left"){c.setHAlign(g.hAlign,true)}if(g.vAlign!="top"){c.setVAlign(g.vAlign,true)}}},image:{action:function(e){var d=this,c=d.keys;d.getSubNodes(["ICON","SICON"]).css("display",e?"":"none").css("backgroundImage","url("+(e||"")+")")}},imagePos:{action:function(e){var d=this,c=d.keys;d.getSubNodes(["ICON","SICON"]).css("backgroundPosition",e)}},shadowText:{ini:false,action:function(d){var c=this.boxing();d=String(d).toLowerCase()!="false";if(d){c._shadowText(d)}else{c._unShadowText()}}},hAlign:{ini:"right",listbox:["left","center","right"],action:function(f){var e=this,i=e.getSubNode("BOX"),h=e.getSubNode("SHADOW"),g=e.properties;switch(f){case"left":i.css({left:0,right:"auto",marginLeft:"auto"});h.css({left:g._textSshadowSize+"px",right:"auto",marginLeft:"auto"});break;case"right":i.css({left:"auto",right:g._textSshadowSize+"px",marginLeft:"auto"});h.css({left:"auto",right:0,marginLeft:"auto"});break;case"center":i.css({left:"50%",right:"auto",marginLeft:-1*i.get(0).offsetWidth/2+"px"});h.css({left:"50%",right:"auto",marginLeft:-1*i.get(0).offsetWidth/2+g._textSshadowSize+"px"});break}}},vAlign:{ini:"top",listbox:["top","middle","bottom"],action:function(f){var e=this,i=e.getSubNode("BOX"),h=e.getSubNode("SHADOW"),g=e.properties;switch(f){case"top":i.css({top:0,bottom:"auto",marginTop:"auto"});h.css({top:g._textSshadowSize+"px",bottom:"auto",marginTop:"auto"});break;case"bottom":i.css({top:"auto",bottom:g._textSshadowSize+"px",marginTop:"auto"});h.css({top:"auto",bottom:0,marginTop:"auto"});break;case"middle":i.css({top:"50%",bottom:"auto",marginTop:-1*i.get(0).offsetHeight/2+"px"});h.css({top:"50%",bottom:"auto",marginTop:-1*i.get(0).offsetHeight/2+g._textSshadowSize+"px"});break}}},fontSize:{action:function(d){var c=this;c.getSubNodes(["CAPTION","SCAPTION"]).css("fontSize",d)}},fontWeight:{action:function(d){var c=this;c.getSubNodes(["CAPTION","SCAPTION"]).css("fontWeight",d)}},width:120,height:20,_textSshadowSize:4},RenderTrigger:function(){var c=this.properties,d=this.boxing();if(c.fontSize){d.setFontSize(c.fontSize,true)}if(c.fontWeight){d.setFontWeight(c.fontWeight,true)}if(c.shadowText){d.setShadowText(true,true)}},LayoutTrigger:function(){var d=this.properties,e=this.boxing(),c=d.shadowText;if(d.hAlign!="left"||c){e.setHAlign(d.hAlign,true)}if(d.vAlign!="top"||c){e.setVAlign(d.vAlign,true)}}}});Class("linb.UI.ProgressBar",["linb.UI.Widget","linb.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(d){d.getSubNode("FILL").width(c+"%");d.getSubNode("CAP").text(d.properties.captionTpl.replace(/\{value\}/g,c))})}},Initialize:function(){var c=this,d=c.getTemplate();_.merge(d.FRAME.BORDER,{FILL:{tagName:"div",style:"width:{value}%;{fillBG}",text:"{html}"+linb.UI.$childTag},INN:{$order:2,tagName:"div",CAP:{tagName:"div"}}},"all");c.setTemplate(d);d=c.getAppearance();_.merge(d,{BORDER:{border:"1px solid #95B611","font-size":0,"line-height":0},INN:{display:"table",position:"absolute",left:0,top:0,width:"100%",height:"100%"},CAP:{"text-align":"center"},FILL:{position:"absolute",width:"1px",left:0,top:0,height:"100%",background:linb.UI.$bg("bar.gif","#96E115 repeat-x left top"),width:0}});c.setAppearance(d)},Static:{DataModel:{value:0,width:300,height:22,captionTpl:{ini:"{value}%",action:function(){this.boxing()._setCtrlValue(this.properties.$UIvalue)}},fillBG:{ini:"",action:function(c){this.getSubNode("FILL").css("background",c)}},$hborder:1,$vborder:1},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.fillBG=d.fillBG?"background:"+d.fillBG:"";return d},_ensureValue:function(c,d){return parseInt(d)||0},_onresize:function(g,f,c){var d=arguments.callee.upper.apply(this,arguments),e;if(d.height){e=d.height+"px";g.getSubNodes(["INN","CAP","FILL"]).css({height:e,"line-height":e})}}}});Class("linb.UI.Button",["linb.UI.Widget","linb.absValue"],{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(c){if(_.isNull(c)||!_.isDefined(c)){c=false}return this.each(function(f){var e=f.properties;if(e.type!="status"){return}f.getSubNode("BORDER").tagClass("-checked",c);if(e.border){var d=f.getSubNode("BORDER").$getBorder();if(d){d.get(0).getRoot().tagClass("-checked",c)}}})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["FOCUS"])},resetValue:function(c){this.each(function(d){if(d.properties.type=="drop"){d.boxing().setCaption("",true)}});return arguments.callee.upper.apply(this,arguments)},setUIValue:function(d,c){this.each(function(e){var f=e.properties;if(f.$UIvalue!==d&&f.type=="drop"){e.boxing().setCaption("",true)}});return arguments.callee.upper.apply(this,arguments)}},Initialize:function(){this.addTemplateKeys(["DROP"]);var c=this.getTemplate();_.merge(c.FRAME,{FOCUS:{$order:2,tabindex:"{tabindex}",TB:{cellpadding:"0",cellspacing:"0",width:"100%",height:"100%",border:"0",tagName:"table",TR:{tagName:"tr",TDL:{tagName:"td"},TD:{$order:1,align:"{hAlign}",valign:"{vAlign}",tagName:"td",width:"100%",height:"100%",BOX:{ICON:{$order:1,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:2,text:"{caption}"}}},TDR:{$order:2,tagName:"td",className:"{dropCls}",TDRI:{}}}}}},"all");this.setTemplate(c)},Static:{Appearances:{KEY:{"font-size":"12px","line-height":"14px"},BORDER:{"font-size":0,"line-height":0,"background-color":"#D2D7DF"},"BORDER-mouseover":{$order:2,"background-color":"#F7D928"},"BORDER-mousedown, BORDER-checked":{$order:2,"background-color":"#F9E56A"},DROP:{$order:10,background:linb.UI.$bg("drop.gif","no-repeat left bottom","Button"),"padding-left":"16px"},"DROP-mouseover":{$order:11,"background-position":"-16px bottom"},"DROP-mousedown":{$order:12,"background-position":"right bottom"},"TDR,TDL":{"padding-left":"6px"},".setting-linb-button":{"border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},"KEY-b-t":{top:"-1px",height:"10px",background:linb.UI.$bg("vertical.gif","repeat-x left top","Button")},"KEY-b-b":{bottom:"-1px",height:"10px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom","Button")},"BORDER-mouseover KEY-b-t, BORDER-mouseover KEY-b-b":{$order:1,"background-image":linb.UI.$bg("vertical_mouseover.gif","","Button")},"BORDER-checked KEY-b-t, BORDER-checked KEY-b-b, BORDER-mousedown KEY-b-t, BORDER-mousedown KEY-b-b":{$order:2,"background-image":linb.UI.$bg("vertical_mousedown.gif","","Button")},"KEY-b-l":{left:"-1px",width:"4px",background:linb.UI.$bg("horizontal.gif","repeat-y left top","Button")},"KEY-b-r":{right:"-1px",width:"4px",background:linb.UI.$bg("horizontal.gif","repeat-y right top","Button")},"BORDER-mouseover KEY-b-l, BORDER-mouseover KEY-b-r":{$order:1,"background-image":linb.UI.$bg("horizontal_mouseover.gif","","Button")},"BORDER-checked KEY-b-l, BORDER-checked KEY-b-r, BORDER-mousedown KEY-b-l, BORDER-mousedown KEY-b-r":{$order:2,"background-image":linb.UI.$bg("horizontal_mousedown.gif","","Button")},"KEY-b-lt":{top:"-1px",left:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat left top","Button")},"KEY-b-rt":{top:"-1px",right:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat right top","Button")},"KEY-b-rb":{right:"-1px",bottom:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat right bottom","Button")},"KEY-b-lb":{left:"-1px",bottom:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat left bottom","Button")},"BORDER-mouseover KEY-b-lt, BORDER-mouseover KEY-b-rt, BORDER-mouseover KEY-b-rb, BORDER-mouseover KEY-b-lb":{$order:1,"background-image":linb.UI.$bg("corner_mouseover.gif","","Button")},"BORDER-checked KEY-b-lt, BORDER-checked KEY-b-rt, BORDER-checked KEY-b-rb, BORDER-checked KEY-b-lb, BORDER-mousedown KEY-b-lt, BORDER-mousedown KEY-b-rt, BORDER-mousedown KEY-b-rb, BORDER-mousedown KEY-b-lb":{$order:2,"background-image":linb.UI.$bg("corner_mousedown.gif","","Button")},FOCUS:{overflow:"hidden",display:"block",left:0,top:0,"z-index":"20",width:"100%",height:"100%",position:"absolute","outline-offset":"-1px","-moz-outline-offset":"-1px !important"},BOX:{display:"inline","white-space":"nowrap"},CAPTION:{cursor:"pointer","vertical-align":linb.browser.ie6?"baseline":"middle",display:"inline","font-size":"12px","line-height":"14px"}},Behaviors:{HoverEffected:{KEY:["BORDER"]},ClickEffected:{KEY:["BORDER"]},NavKeys:{FOCUS:1},onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}d.getSubNode("FOCUS").focus();var c=d.boxing();if(f.type=="status"){if(f.readonly){return false}c.setUIValue(!f.$UIvalue);if(d.onChecked){c.onChecked(d,g,f.$UIvalue)}}if(d.onClick){c.onClick(d,g,h,f.$UIvalue)}},TDR:{onMousedown:function(c,d,f){if(c.properties.type!="drop"){return}linb.use(f).addClass(c.getClass("DROP","-mousedown"));return false},onMouseup:function(c,d,f){if(c.properties.type!="drop"){return}linb.use(f).removeClass(c.getClass("DROP","-mousedown"));return false},onMouseover:function(c,d,f){if(c.properties.type!="drop"){return}linb.use(f).addClass(c.getClass("DROP","-mouseover"))},onMouseout:function(c,d,f){if(c.properties.type!="drop"){return}linb.use(f).removeClass(c.getClass("DROP","-mouseover")).removeClass(c.getClass("DROP","-mousedown"))},onClick:function(c,d,f){if(c.properties.type!="drop"){return}c.boxing().onClickDrop(c,d,f);return false}}},DataModel:{caption:{ini:undefined,action:function(c){this.getSubNode("CAPTION").get(0).innerHTML=c}},image:{action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage","url("+(c||"")+")")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(c){this.getSubNode("TD").attr("align",c)}},vAlign:{ini:"middle",listbox:["top","middle","bottom"],action:function(c){this.getSubNode("TD").attr("valign",c)}},value:false,type:{ini:"normal",listbox:["normal","status","drop"],action:function(g){var e=this,c=e.getRoot(),f=e.getSubNode("TDR"),d=e.getClass("DROP");if(g=="drop"){f.addClass(d)}else{f.removeClass(d)}e.box._onresize(e)}},width:120,height:22,_customBorder:"BORDER",border:true},_ensureValue:function(c,d){if(c.properties.type=="status"){return !!d}else{return d}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.dropCls=d.type=="drop"?c.getClass("DROP"):"";return d},RenderTrigger:function(){var c=this,d=c.properties,e=c.boxing();if(d.type=="status"&&d.value){e.setValue(true,true)}},EventHandlers:{onClick:function(c,f,g,d){},onClickDrop:function(c,d,f){},onChecked:function(c,f,d){}}}});Class("linb.UI.CheckBox","linb.UI.Button",{Instance:{_setCtrlValue:function(c){return this.each(function(d){d.getSubNode("MARK").tagClass("-checked",!!c)})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["CAPTION"])}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.FOCUS.TB.TR.TD.BOX,{MARK:{$order:0,className:"uicmd-check"}},"all");this.setTemplate(c)},Static:{Appearances:{KEY:{"font-size":"12px","line-height":"14px",border:0,cursor:"pointer"},BORDER:{},FOCUS:{overflow:"hidden",display:"block",position:"absolute",left:0,top:0,"z-index":"200",width:"100%",height:"100%","outline-offset":"-1px","-moz-outline-offset":"-1px !important"},BOX:{display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,"font-size":"12px","line-height":"14px",overflow:"hidden","vertical-align":"middle","white-space":"nowrap"},TD:{background:"transparent"},TDR:{background:"transparent"},TDL:{background:"transparent"},CAPTION:{display:"inline","white-space":"normal","vertical-align":linb.browser.ie6?"baseline":"middle",cursor:"pointer",zoom:linb.browser.ie?0:null}},Behaviors:{HoverEffected:{KEY:"MARK"},ClickEffected:{KEY:"MARK"},onClick:function(d,g,h){var f=d.properties,c=d.boxing();if(f.disabled||f.readonly){return false}c.setUIValue(!f.$UIvalue);if(d.onChecked){c.onChecked(d,f.$UIvalue)}d.getSubNode("FOCUS").focus()},FOCUS:{onKeydown:function(d,f,g){var c=linb.Event.getKey(f).key;if(c==" "||c=="enter"){d.getRoot().onClick(true);return false}}}},DataModel:{type:null,value:false,hAlign:"left",_customBorder:false,border:false},EventHandlers:{onClick:null},_ensureValue:function(c,d){return !!d}}});Class("linb.UI.Slider",["linb.UI","linb.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(i){var l=i.properties,h=l.steps,g=function(m){return i.getSubNode(m)},f=g("IND1"),e=g("IND2"),d=i.box._v2a(i,c),k=l.type=="vertical"?"top":"left";f[k](d[0]+"%");if(l.isRange){e[k](d[1]+"%")}})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["BOX"])}},Static:{Templates:{style:"{_style}",className:"{_className}",BOX:{tagName:"div",className:"{_cls}",BG:{tagName:"div"},RULER:{$order:1,tagName:"div",RULERLEFT:{},RULERRIGHT:{}},IND:{$order:2,IND1:{style:"{_showD}",tabindex:"{tabindex}"},IND2:{style:"{_showD2}",tabindex:"{tabindex}"}},DECREASE:{style:"{_showDes}",tabindex:"{tabindex}"},INCREASE:{style:"{_showIns}",tabindex:"{tabindex}"}}},Appearances:{"IND, BT, RULER, RULERLEFT, RULERRIGHT, IND1, IND2, DECREASE, INCREASE":{"font-size":0,"line-height":0,position:"absolute"},BOX:{position:"relative",left:0,top:0,width:"100%",height:"100%"},"BOX-h DECREASE, BOX-h INCREASE":{top:"50%",width:"17px",height:"17px","margin-top":"-8px"},"BOX-v DECREASE, BOX-v INCREASE, BOX-h DECREASE, BOX-h INCREASE, BOX-h IND1,BOX-h IND2, BOX-v IND1,BOX-v IND2":{background:linb.UI.$bg("icons.gif","no-repeat",true)},"BOX-h DECREASE":{$order:1,left:0,"background-position":"-80px -70px"},"BOX-h INCREASE":{$order:1,right:0,"background-position":"-100px -70px"},"BOX-h DECREASE-mouseover":{$order:2,"background-position":"-80px -90px"},"BOX-h DECREASE-mousedown":{$order:3,"background-position":"-80px -110px"},"BOX-h INCREASE-mouseover":{$order:2,"background-position":"-100px -90px"},"BOX-h INCREASE-mousedown":{$order:3,"background-position":"-100px -110px"},"BOX-h BG":{top:"50%"},"BOX-h IND, BOX-h RULER":{"z-index":1,top:"50%",height:"6px","margin-top":"-3px"},"BOX-h RULER, BOX-h RULERLEFT, BOX-h RULERRIGHT":{background:linb.UI.$bg("bar_vertical.gif","repeat-x",true)},"BOX-h RULER":{$order:2,"background-position":"left -482px"},"BOX-h RULERLEFT, BOX-h RULERRIGHT":{"z-index":1,height:"6px",width:"5px"},"BOX-h RULERLEFT":{$order:2,"background-position":"left -474px",left:"-4px",top:0},"BOX-h RULERRIGHT":{$order:2,"background-position":"left -490px",right:"-4px",top:0},"BOX-h IND1,BOX-h IND2":{$order:1,"z-index":2,"background-position":"-21px -282px",height:"18px",width:"8px",left:0,top:0,cursor:"e-resize","margin-top":"-6px"},"BOX-h IND1-mouseover,BOX-h IND2-mouseover":{$order:2,"background-position":"-31px -282px"},"BOX-h IND1-mousedown,BOX-h IND2-mousedown":{$order:3,"background-position":"-41px -282px"},"BOX-v DECREASE, BOX-v INCREASE":{$order:10,left:"50%",width:"17px",height:"17px","margin-left":"-8px"},"BOX-v DECREASE":{$order:10,top:0,"background-position":"-120px -70px"},"BOX-v INCREASE":{$order:10,bottom:0,"background-position":"-140px -70px"},"BOX-v DECREASE-mouseover":{$order:11,"background-position":"-120px -90px"},"BOX-v DECREASE-mousedown":{$order:12,"background-position":"-120px -110px"},"BOX-v INCREASE-mouseover":{$order:11,"background-position":"-140px -90px"},"BOX-v INCREASE-mousedown":{$order:12,"background-position":"-140px -110px"},"BOX-v BG":{$order:10,left:"50%"},"BOX-v IND, BOX-v RULER":{$order:10,"z-index":1,left:"50%",width:"6px","margin-left":"-3px"},"BOX-v RULER, BOX-v RULERLEFT, BOX-v RULERRIGHT":{background:linb.UI.$bg("bar_horizontal.gif","repeat-y",true)},"BOX-v RULER":{$order:10,"background-position":"-482px top"},"BOX-v RULERLEFT, BOX-v RULERRIGHT":{$order:10,"z-index":1,width:"6px",height:"5px"},"BOX-v RULERLEFT":{$order:12,"background-position":"-490px top",top:"-4px",left:0},"BOX-v RULERRIGHT":{$order:12,"background-position":"-474px top",bottom:"-4px",left:0},"BOX-v IND1,BOX-v IND2":{$order:10,"z-index":2,"background-position":"left -272px",width:"18px",height:"8px",left:0,top:0,cursor:"n-resize","margin-left":"-6px"},"BOX-v IND1-mouseover,BOX-v IND2-mouseover":{$order:11,"background-position":"left -282px"},"BOX-v IND1-mousedown,BOX-v IND2-mousedown":{$order:12,"background-position":"left -292px"}},Behaviors:{HoverEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},ClickEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},onSize:linb.UI.$onSize,IND:{onClick:function(f,m,c){var d=f.properties,w=linb.use(c).offset(),u=linb.Event.getPos(m),i=f.box._v2a(f,f.properties.$UIvalue),h,g,q=d.type=="vertical",n=q?"top":"left",l=q?"offsetTop":"offsetLeft",k=q?"offsetHeight":"offsetWidth",s=u[n]-w[n],r=(s/linb.use(c).get(0)[k])*100;if(!d.isRange){i[0]=r}else{h=f.getSubNode("IND1")[l](),g=f.getSubNode("IND2")[l]();if(Math.abs(h-s)<Math.abs(g-s)){i[0]=r}else{i[1]=r}}f.boxing().setUIValue(f.box._adjustValue(f,i))}},IND1:{onKeydown:function(f,h,i){var g=f.properties,d=g.type=="vertical",c=linb.Event.getKey(h).key;if(c==(d?"up":"left")){f.box._auto(f,false)}if(c==(d?"down":"right")){f.box._auto(f,true)}},onKeyout:function(c){linb.Thread.abort(c.$linbid+":auto")},onKeyup:function(c){linb.Thread.abort(c.$linbid+":auto")},onMousedown:function(d,i,l){if(linb.Event.getBtn(i)!="left"){return}var h=d.properties,c=h.type=="vertical",k=c?"offsetTop":"offsetLeft",g=c?"offsetHeight":"offsetWidth",f=d.box;linb.use(l).startDrag(i,{widthIncrement:h.steps?d._size/h.steps:null,dragType:"none",targetReposition:true,horizontalOnly:c?true:null,verticalOnly:c?null:true,maxLeftOffset:linb.use(l).get(0)[k],maxRightOffset:linb.use(l).parent().get(0)[g]-linb.use(l).get(0)[k],dragCursor:"default"});linb.use(l).css("zIndex",10).focus();d.getSubNode("IND2").css("zIndex",5)},beforeDragbegin:function(d,f,g){var c=d.properties.type=="vertical";linb(g)[c?"top":"left"](d.__x=linb.use(g).get(0)[c?"offsetTop":"offsetLeft"])},onDrag:function(f,g,i){var h=linb.DragDrop.getProfile().offset,d=f.properties.type=="vertical",c=f.box._v2a(f,f.properties.$UIvalue);c[0]=((f.__x+h[d?"y":"x"])/linb.use(i).parent().get(0)[d?"offsetHeight":"offsetWidth"])*100;f.boxing().setUIValue(f.box._adjustValue(f,c))},onDragstop:function(c,d,f){linb(f).onMouseout(true,{$force:true}).onMouseup(true)},onClick:function(){return false}},IND2:{onKeydown:function(f,h,i){var g=f.properties,d=g.type=="vertical",c=linb.Event.getKey(h).key;if(c==(d?"up":"left")){f.box._auto(f,false)}if(c==(d?"down":"right")){f.box._auto(f,true)}},onKeyout:function(c){linb.Thread.abort(c.$linbid+":auto")},onKeyup:function(c){linb.Thread.abort(c.$linbid+":auto")},onMousedown:function(d,i,l){if(linb.Event.getBtn(i)!="left"){return}var h=d.properties,c=h.type=="vertical",k=c?"offsetTop":"offsetLeft",g=c?"offsetHeight":"offsetWidth",f=d.box;linb.use(l).startDrag(i,{widthIncrement:h.steps?d._size/h.steps:null,dragType:"none",targetReposition:true,horizontalOnly:c?true:null,verticalOnly:c?null:true,maxLeftOffset:linb.use(l).get(0)[k],maxRightOffset:linb.use(l).parent().get(0)[g]-linb.use(l).get(0)[k],dragCursor:"default"});linb.use(l).css("zIndex",10).focus();d.getSubNode("IND1").css("zIndex",5)},beforeDragbegin:function(d,f,g){var c=d.properties.type=="vertical";linb(g)[c?"top":"left"](d.__x=linb.use(g).get(0)[c?"offsetTop":"offsetLeft"])},onDrag:function(f,g,i){var h=linb.DragDrop.getProfile().offset,d=f.properties.type=="vertical",c=f.box._v2a(f,f.properties.$UIvalue);c[1]=((f.__x+h[d?"y":"x"])/linb.use(i).parent().get(0)[d?"offsetHeight":"offsetWidth"])*100;f.boxing().setUIValue(f.box._adjustValue(f,c))},onDragstop:function(c,d,f){linb(f).onMouseout(true,{$force:true}).onMouseup(true)},onClick:function(){return false}},RULERRIGHT:{onClick:function(g,i,k){var h=g.properties,f=g.boxing(),l=g.box,d=l._v2a(g,h.$UIvalue);if(!h.isRange){d[0]=100}else{d[1]=100}f.setUIValue(g.box._adjustValue(g,d))}},DECREASE:{onMousedown:function(c){c.box._auto(c,false)},onMouseout:function(c){linb.Thread.abort(c.$linbid+":auto")},onMouseup:function(c){linb.Thread.abort(c.$linbid+":auto")}},INCREASE:{onMousedown:function(c){c.box._auto(c,true)},onMouseout:function(c){linb.Thread.abort(c.$linbid+":auto")},onMouseup:function(c){linb.Thread.abort(c.$linbid+":auto")}}},DataModel:{position:"absolute",width:{ini:200},height:{ini:50},steps:0,value:"0:0",type:{listbox:["vertical","horizontal"],ini:"horizontal",action:function(c){this.boxing().refresh()}},isRange:{ini:true,action:function(c){this.boxing().refresh()}},showIncreaseHandle:{ini:true,action:function(c){this.boxing().refresh()}},showDecreaseHandle:{ini:true,action:function(c){this.boxing().refresh()}}},_prepareData:function(c){var f=arguments.callee.upper.call(this,c),e="display:none";f._showDes=f.showDecreaseHandle?"":e,f._showIns=f.showIncreaseHandle?"":e,f._showD2=f.isRange?"":e;f._cls=c.getClass("BOX",f.type=="vertical"?"-v":"-h");return f},_adjustValue:function(d,e){var f=d.properties,c=[];c[0]=parseFloat(e[0])||0;c[1]=parseFloat(e[1])||0;if(f.steps){e=100/f.steps;c[0]=Math.ceil(c[0]/e);if(f.isRange){c[1]=Math.ceil(c[1]/e)}}return f.isRange?c.join(":"):(c[0]+"")},_ensureValue:function(d,l){var c=d.properties,k=String(l).split(":"),f=0,h=c.steps?c.steps:100,i=[],g=function(m){return parseFloat(m)||0},e=function(m){return Math.min(h,Math.max(f,m))};i[0]=g(k[0]);if(c.isRange){i[1]=g(k[1]);if(i[0]>i[1]){k=i[1];i[1]=i[0];i[0]=k}}i[0]=e(i[0]);if(c.isRange){i[1]=e(i[1])}return c.isRange?i.join(":"):(i[0]+"")},_v2a:function(f,d){var c=f.properties.steps,e;d=typeof d=="string"?d.split(":"):d;d[0]=parseFloat(d[0])||0;d[1]=parseFloat(d[1])||0;if(c){d[0]=d[0]*100/c}if(c){d[1]=d[1]*100/c}if(d[0]>d[1]){e=d[0];d[1]=d[0];d[0]=e}return d},_auto:function(g,i){var c=g.$linbid+":auto";if(linb.Thread.isAlive(c)){return}var d=g.properties,l,f=(d.steps?100/d.steps:1)*(i?1:-1),e={delay:300},h=g.box._v2a(g,d.$UIvalue),k=function(){h[0]+=f;if(d.isRange){h[1]+=f}g.boxing().setUIValue(g.box._adjustValue(g,h));e.delay*=0.8};e.task=k;linb.Thread(c,[e],500,null,k,null,true).start()},_onresize:function(g,d,q){var c=g.properties,m=c.type,l=function(f){return g.getSubNode(f)},s=l("RULER"),e=l("IND"),r=l("RULERLEFT");if(m=="vertical"){var n=r.height(),k=c.showDecreaseHandle?l("DECREASE").height():0,i=c.showIncreaseHandle?l("INCREASE").height():0,h=l("IND1").height();if(q){s.top(k+n).height(q-k-i-2*n);e.top(k).height(g._size=q-k-i-h)}}else{var n=r.width(),k=c.showDecreaseHandle?l("DECREASE").width():0,i=c.showIncreaseHandle?l("INCREASE").width():0,h=l("IND1").width();if(d){s.left(k+n).width(d-k-i-2*n);e.left(k).width(g._size=d-k-i-h)}}}}});Class("linb.UI.Input",["linb.UI.Widget","linb.absValue"],{Instance:{_setTB:function(e){var d=this.get(0),g=d.properties,h,c;if(!d.host||!g.tipsBinder){return}var f=d.tips;c=d.tips=d.tips||g.tips||"";h=linb.getObject(g.tipsBinder)||((h=d.host[g.tipsBinder])&&h.get(0));if(h&&(h.key=="linb.UI.Span"||h.key=="linb.UI.Div"||h.key=="linb.UI.SLabel")){if(h.renderId){h.getRootNode().innerHTML=c.charAt(0)=="$"?linb.wrapRes(c):c;h.getRoot().css("color",e==1?"gray":e==2?"red":"#000")}}if(f!==d.tips&&linb.Tips&&linb.Tips.getTips()){linb.Tips.setTips(d.tips)}},activate:function(){var c=this.get(0);if(c.renderId){var d=c.getSubNode("INPUT").get(0);d.focus();if(!d.readOnly&&d.select){try{d.select()}catch(f){}}}return this},_setCtrlValue:function(c){if(_.isNull(c)||!_.isDefined(c)){c=""}return this.each(function(d){d.getSubNode("INPUT").attr("value",c+"")})},_getCtrlValue:function(){return this.getSubNode("INPUT").attr("value")},_setDirtyMark:function(){return this.each(function(e){var k=e.properties,c=e.getSubNode("INPUT"),n=e.box,h=e.boxing(),i=linb.UI.$css_tag_dirty,m=linb.UI.$css_tag_invalid,l=k.value!==k.$UIvalue;var g=e.tips;if(e._inValid==2){e.tips=k.tipsErr||k.tips;if(k.mask){_.asyRun(function(){h.setUIValue(c.get(0).value=e.$Mask)});e._inValid=1;l=false}}else{if(e._inValid==1){e.tips=k.tips}else{e.tips=k.tipsOK||k.tips}}if(g!==e.tips&&linb.Tips&&linb.Tips.getTips()){linb.Tips.setTips(e.tips)}if(e._dirtyFlag!==l){if(k.dirtyMark){if(e.beforeDirtyMark&&false===h.beforeDirtyMark(e,l)){}else{if(e._dirtyFlag=l){c.addClass(i)}else{c.removeClass(i)}}}e._dirtyFlag=l}if(e.beforeFormatMark&&false===h.beforeFormatMark(e,e._inValid==2)){}else{var f=e.getSubNode("ERROR");if(e._inValid==2){c.addClass(m);f.css("display","block")}else{c.removeClass(m);f.css("display","none")}}h._setTB(e._inValid)})}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.BORDER,{style:"",BOX:{WRAP:{tagName:"div",INPUT:{tagName:"input",type:"{_type}",maxlength:"{maxlength}",tabindex:"{tabindex}",cursor:"{cursor}",style:"{_css};{hAlign};"}}}},"all");c.FRAME.ERROR={};this.setTemplate(c)},Static:{_maskMap:{"~":"[+-]","1":"[0-9]",a:"[A-Za-z]",u:"[A-Z]",l:"[a-z]","*":"[A-Za-z0-9]"},_maskSpace:"_",Appearances:{KEY:{"font-family":'"Verdana", "Helvetica", "sans-serif"',position:"relative"},BORDER:{"line-height":"0px","font-size":"0px"},WRAP:{left:0,position:"absolute",overflow:linb.browser.gek?"auto":"hidden"},BOX:{left:0,top:0,position:"absolute",background:linb.UI.$bg("inputbg.gif","#fff repeat-x","Input"),border:"solid 1px #B5B8C8","z-index":10},"KEY-readonly input":{$order:2,color:"#909090"},"KEY-readonly BOX, KEY-inputreadonly BOX":{$order:2,background:"#eee"},"BOX-focus, BOX-mouseover":{"border-color":"#7EADD9"},INPUT:{"padding-top":"2px","padding-left":"2px","background-color":"transparent","background-image":linb.browser.ie?"url(.)":null,border:0,margin:0,"margin-top":linb.browser.ie?"-1px":null,"font-size":"12px",position:"relative",width:"102px",overflow:"auto","overflow-y":"auto","overflow-x":"hidden"},ERROR:{width:"16px",height:"16px",position:"absolute",right:"2px",top:"2px",display:"none","font-size":0,background:linb.UI.$bg("icons.gif","no-repeat left -244px",true),"z-index":"50"},".setting-linb-input":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},"KEY-b-t":{height:"2px",top:"-1px",background:linb.UI.$bg("vertical.gif","repeat-x left top","Input")},"KEY-b-b":{height:"2px",bottom:"-1px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom","Input")},"BOX-focus KEY-b-t, BOX-focus KEY-b-b, BOX-mouseover KEY-b-t, BOX-mouseover KEY-b-b":{$order:1,"background-image":linb.UI.$bg("vertical_mouseover.gif","","Input")},"KEY-b-l":{width:"2px",left:"-1px",background:linb.UI.$bg("horizontal.gif","repeat-y left top","Input")},"KEY-b-r":{width:"2px",right:"-1px",background:linb.UI.$bg("horizontal.gif","repeat-y right top","Input")},"BOX-focus KEY-b-l, BOX-focus KEY-b-r, BOX-mouseover KEY-b-l, BOX-mouseover KEY-b-r":{$order:1,"background-image":linb.UI.$bg("horizontal_mouseover.gif","","Input")},"KEY-b-lt":{width:"2px",height:"2px",left:"-1px",top:"-1px",background:linb.UI.$bg("corner.gif","no-repeat left top","Input")},"KEY-b-rt":{width:"2px",height:"2px",right:"-1px",top:"-1px",background:linb.UI.$bg("corner.gif","no-repeat right top","Input")},"KEY-b-rb":{width:"2px",height:"2px",right:"-1px",bottom:"-1px",background:linb.UI.$bg("corner.gif","no-repeat right bottom","Input")},"KEY-b-lb":{width:"2px",height:"2px",left:"-1px",bottom:"-1px",background:linb.UI.$bg("corner.gif","no-repeat left bottom","Input")},"BOX-focus KEY-b-lt, BOX-focus KEY-b-rt, BOX-focus KEY-b-rb, BOX-focus KEY-b-lb, BOX-mouseover KEY-b-lt, BOX-mouseover KEY-b-rt, BOX-mouseover KEY-b-rb, BOX-mouseover KEY-b-lb":{$order:1,"background-image":linb.UI.$bg("corner_mouseover.gif","","Input")}},Behaviors:{HoverEffected:{BOX:["BOX"]},NavKeys:{INPUT:1},INPUT:{onChange:function(d,h,k){var g=d.properties,c=d.box,i=d._inValid,f=linb.use(k).get(0).value;d.boxing().setUIValue(f);g.$UIvalue=f;if(i!==d._inValid){if(d.renderId){d.boxing()._setDirtyMark()}}c._asyCheck(d)},onKeydown:function(h,l,n){var i=h.properties,d=h.box,c=i.multiLines,f=linb.Event,g=f.getKey(l);if(i.disabled||i.readonly){return}if(g.key=="enter"&&(!c||g.altKey)){linb.use(n).onChange()}d._asyCheck(h);if(i.mask){if(g.key.length>1){h.$ignore=true}else{delete h.$ignore}switch(g.key){case"backspace":d._changeMask(h,linb.use(n).get(0),"",false);return false;case"delete":d._changeMask(h,linb.use(n).get(0),"");return false}}},onKeypress:function(g,i,c){var f=g.properties,m=g.box,q=g.box,d=q._maskMap,h=linb.Event.getKey(i),n,l=linb.use(c).caret();if(g.beforeKeypress&&false===g.boxing().beforeKeypress(g,l,h,i,c)){return false}n=g.CF.beforeKeypress||g.$beforeKeypress;if(n&&false===n(g,l,h,i,c)){return false}m._asyCheck(g);if(f.mask){if(g.$ignore){delete g.$ignore;return true}if(h.ctrlKey||h.altKey){return true}q._changeMask(g,linb.use(c).get(0),h.key,true);return false}},onKeyup:function(d,h,i){var g=d.properties,c=d.box;if(linb.Event.getKey(h).key=="esc"){d.boxing().setUIValue(g.value,true);if(d.onCancel){d.boxing().onCancel(d)}}if(g.dynCheck){var f=linb.use(i).get(0).value;d.box._checkValid(d,f);d.boxing()._setDirtyMark()}c._asyCheck(d)},onFocus:function(d,h,i){var g=d.properties,c=d.box;if(g.disabled){return false}if(d.onFocus){d.boxing().onFocus(d)}d.getSubNode("BORDER").tagClass("-focus");if(g.mask){var f=linb.use(i).get(0).value;if(!f){_.asyRun(function(){d.boxing().setUIValue(f=d.$Mask);c._setCaret(d,linb.use(i).get(0))})}}d.boxing()._setTB(3);c._asyCheck(d)},onBlur:function(d,h,i){var g=d.properties,c=d.box;if(g.disabled){return false}if(d.onBlur){d.boxing().onBlur(d)}d.getSubNode("BORDER").tagClass("-focus",false);var f=linb.use(i).get(0).value;if(g.$UIvalue==f){d.box._checkValid(d,f)}d.boxing()._setDirtyMark();c._asyCheck(d)}}},DataModel:{_customBorder:"BOX",border:false,tipsErr:"",tipsOK:"",dynCheck:false,valueFormat:{helpinput:[{caption:"required",id:"[^.*]"},{caption:"email",id:"^[\\w\\.=-]+@[\\w\\.-]+\\.[\\w\\.-]{2,4}$"},{caption:"charOnly",id:"^[a-zA-Z]*$"},{caption:"words",id:"^[\\w ]*$"},{caption:"integer",id:"^-?\\d\\d*$"},{caption:"positiveInteger",id:"^\\d\\d*$"},{caption:"number",id:"^-?(\\d\\d*\\.\\d*$)|(^-?\\d\\d*$)|(^-?\\.\\d\\d*$)"},{caption:"filepath",id:"([\\/]?[\\w_]+)+\\.\\w{1,9}$"},{caption:"URL",id:"^(http|https|ftp)\\:\\/\\/[\\w\\-\\_\\.]+[\\w\\-\\_](:[\\w]*)?\\/?([\\w\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$"},{caption:"color",id:"^\\#[0-9A-Fa-f]{6}$"},{caption:"HH:MM",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])$"},{caption:"HH:MM:SS",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])\\:([0-5][0-9])$"},{caption:"YYYY-MM-DD",id:"^([0-9]{4})\\-(([0][0-9])|([1][0-2]))\\-([0-3][0-9])$"},{caption:"DD/MM/YYYY",id:"^(([0-2][0-9])|([3][0-1]))/(([0][0-9])|([1][0-2]))/([0-9]{4})$"}]},mask:{action:function(e){var d=this,c=d.box;if(e){d.$MaskFormat=function(i,h){var f=i._maskMap,g=[],k=/[A-Za-z0-9]/;_.arr.each(h.split(""),function(m,l){g.push(f[m]||(k.test(m)?"":"\\")+m)});return"^"+g.join("")+"$"}(c,e);d.$Mask=function(k,h){var f=k._maskMap,g=[],i=k._maskSpace;_.arr.each(h.split(""),function(m,l){g.push(f[m]?i:m)});return g.join("")}(c,e);d.boxing()._setCtrlValue(d.$Mask)}else{delete d.$MaskFormat;delete d.$Mask}}},value:"",width:120,height:22,disabled:{ini:false,action:function(c){var d=this.getSubNode("INPUT");if(c){d.addClass("ui-inputdisabled")}else{d.removeClass("ui-inputdisabled")}if((""+d.get(0).type).toLowerCase()!="button"){d.attr("disabled",c)}}},hAlign:{ini:"",listbox:["","left","center","right"],action:function(c){this.getSubNode("INPUT").css("textAlign",c)}},readonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c=this.getClass("KEY","-readonly");e.attr("readonly",d).css("cursor",d?"pointer":"");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}}},type:{ini:"text",listbox:["text","password"],action:function(c){this.getSubNode("INPUT").attr("type",c)}},maxlength:{ini:"",action:function(c){this.getSubNode("INPUT").attr("maxlength",c)}},multiLines:{ini:false,action:function(c){this.boxing().refresh()}},tipsBinder:{ini:"",set:function(c){if(c["linb.UIProfile"]){c=c.$linbid}if(c["linb.UI"]&&(c=c.get(0))){c=c.$linbid}this.properties.tipsBinder=c+""}}},EventHandlers:{onFocus:function(c){},onBlur:function(c){},onCancel:function(c){},beforeFormatCheck:function(c,d){},beforeFormatMark:function(c,d){},beforeKeypress:function(d,h,c,f,g){}},_prepareData:function(c){var e=arguments.callee.upper.call(this,c);e.cursor=e.readonly?"pointer":"";e._type=e.type||"";if(linb.browser.kde){e._css="resize:none;"}e.hAlign=e.hAlign?("text-align:"+e.hAlign):"";return e},_dynamicTemplate:function(f){var d=f.properties,c,g=f._exhash="$multiLines:"+d.multiLines,e=f.box.getTemplate(g);d.$UIvalue=d.value;if(!e){e=_.clone(f.box.getTemplate());if(d.multiLines){c=e.FRAME.BORDER.BOX.WRAP.INPUT;c.tagName="textarea";delete c.type}f.box.setTemplate(e,g)}f.template=e},_ensureValue:function(c,d){return""+(_.isSet(d)?d:"")},RenderTrigger:function(){var d=this,g=d.properties;_.asyRun(function(){d.boxing()._setTB(1)});d.getSubNode("WRAP").$firfox2();if(g.readonly){d.boxing().setReadonly(true,true)}if(g.tipsBinder){d.boxing().setTipsBinder(g.tipsBinder,true)}var i=linb.browser.ie,h=d.getSubNode("INPUT").get(0),c=d.box,e=function(f){if(i&&("propertyName" in f)&&f.propertyName!="value"){return}c._asyCheck(d)};if(i){h.attachEvent("onpropertychange",e);h.attachEvent("ondrop",e);d.$ondestory=function(){var f=this,k=f.getSubNode("INPUT").get(0);if(k){k.detachEvent("onpropertychange",e);k.detachEvent("ondrop",e);k=null}}}else{h.addEventListener("input",e,false);h.addEventListener("drop",e,false);if(linb.browser.gek){h.addEventListener("dragdrop",e,false)}d.$ondestory=function(){var f=this,k=f.getSubNode("INPUT").get(0);if(k){k.removeEventListener("input",e,false);k.removeEventListener("drop",e,false);if(linb.browser.gek){k.removeEventListener("dragdrop",e,false)}k=null}}}h=null},LayoutTrigger:function(){var c=this.properties;if(c.mask){this.boxing().setMask(c.mask,true)}},_changeMask:function(e,g,h,r){var A=this,q=e.properties,z=A._maskMap,s=A._maskSpace,c=q.mask,d=e.$Mask,k=linb(g),l=k.caret();if(r===false&&l[0]==l[1]&&l[0]>0){k.caret(l[0]-1,l[0])}if(r===undefined&&l[0]==l[1]){k.caret(l[0],l[0]+1)}if(r===true){if(d.charAt(l[0])!=s){var w=l[0]+d.substr(l[0],d.length).indexOf(s);k.caret(w,Math.max(l[1],w))}}var l=k.caret(),u=g.value,n=q.mask.charAt(l[0]),f=A._maskMap[n],x,m;if(f&&h&&h.length==1){if(n=="l"){h=h.toLowerCase()}else{if(n=="u"){h=h.toUpperCase()}}}if(f&&new RegExp("^"+f+"$").test(h)||h==""){m=u;if(l[0]!=l[1]){m=m.substr(0,l[0])+d.substr(l[0],l[1]-l[0])+m.substr(l[1],m.length-l[1])}if(h){m=m.substr(0,l[0])+h+m.substr(l[0]+1,m.length-l[0]-1)}var y=[];_.arr.each(c.split(""),function(B,p){y.push((new RegExp("^"+(z[B]?z[B]:"\\"+B)+"$").test(m.charAt(p)))?m.charAt(p):d.charAt(p))});if(r===true){h=d.substr(l[0]+1,u.length-l[0]-1);x=h.indexOf(s);x=l[0]+(x==-1?0:x)+1}else{x=l[0]}if(linb.browser.opr){if(r===undefined){_.arr.insertAny(y,s,x)}if(r===false){_.arr.insertAny(y,s,x++)}}e.boxing().setUIValue(g.value=y.join(""));A._setCaret(e,g,x)}},_setCaret:function(c,d,e){if(c.properties.mask){if(typeof e!="number"){e=d.value.indexOf(this._maskSpace)}linb(d).caret(e,e)}},_checkValid:function(e,f){var g=e.properties,d=(g.mask&&e.$MaskFormat),c=g.valueFormat||e.$valueFormat;if((e.beforeFormatCheck&&(e.boxing().beforeFormatCheck(e,f)===false))||(d&&typeof d=="string"&&!(new RegExp(d)).test((f===0?"0":f)||""))||(c&&typeof c=="string"&&!(new RegExp(c)).test((f===0?"0":f)||""))){e._inValid=2;return false}e._inValid=3;return true},_asyCheck:function(c){_.resetRun(c.$linbid+":asycheck",function(){if(!c.renderId){return}var d=c.getSubNode("INPUT"),e=d.get(0);if(!e){return}if(c.properties.dynCheck){c.boxing().setUIValue(e.value)}if(c.properties.mask){if(e.value.length!=c.$Mask.length){c.box._changeMask(c,e,"",true)}}})},_onresize:function(h,d,q){var g=1,p=1,s=linb.UI.$getCSSValue("linb-input-input","paddingTop"),c=linb.UI.$getCSSValue("linb-input-input","paddingTop");var r=h.properties,e=h.getSubNode("BOX"),n=h.getSubNode("INPUT"),m,k=d,i=q,f=Math.max(0,(r.$b_lw||0)-g),l=Math.max(0,(r.$b_tw||0)-p);if(null!==k){k-=Math.max(g*2,(r.$b_lw||0)+(r.$b_rw||0));if(linb.browser.ie6){k=(parseInt(k/2))*2}}if(null!==i){i-=Math.max(p*2,(r.$b_lw||0)+(r.$b_rw||0));if(linb.browser.ie6){i=(parseInt(i/2))*2}if(linb.browser.ie6&&null===d){e.ieRemedy()}}m={left:f,top:l,width:k,height:i};e.cssRegion(m);if(k||i){n.cssSize({width:k?(k-c):null,height:i?(i-s):null})}if((h.$border||h.$shadow||h.$resizer)&&linb.browser.ie){e.ieRemedy()}}}});Class("linb.UI.RichEditor",["linb.UI","linb.absValue"],{Initialize:function(){this.addTemplateKeys(["TOOLBARBTN"])},Instance:{_setCtrlValue:function(c){if(_.isNull(c)||!_.isDefined(c)){c=""}return this.each(function(e){var f=e.$doc,d=f&&(f.body||f.documentElement);if(d){d.innerHTML=c}})},_getCtrlValue:function(){var d=this.get(0),e=d.$doc,c=e&&(e.body||e.documentElement);if(c){return c.innerHTML}return""}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",EDITOR:{tagName:"div"},POOL:{}},DataModel:{value:"",width:400,height:300,cmdList:{ini:"font1;font2;align;list;font4;font3;insert;clear;html",action:function(c){var d=this;if(!d.properties.disabled&&!d.properties.readonly){d.box._iniToolBar(d)}}},disabled:{ini:false,action:function(c){var c=this.properties.disabled||this.properties.readonly,d=this.$doc;if(d){if(d.body.contentEditable!=undefined&&linb.browser.ie){d.body.contentEditable=c?"false":"true"}else{d.designMode=c?"off":"on"}this.box._iniToolBar(this,!c)}}},readonly:{ini:false,action:function(c){this.boxing().setDisabled(c)}}},Appearances:{POOL:{position:"absolute",display:"none"},TOOLBARBTN:{background:linb.UI.$bg("toolbar.gif","no-repeat")},EDITOR:{position:"absolute",display:"block",left:0,top:0,width:"100%",height:"100%",padding:0,margin:0,border:"1px solid #648CB4","background-color":"#fff","z-index":"0"}},Behaviors:{onSize:linb.UI.$onSize},$cmds:{font1:[{id:"bold",command:"Bold",statusButton:true,imagePos:"-36px 0"},{id:"italic",command:"Italic",statusButton:true,imagePos:"-108px 0"},{id:"underline",command:"Underline",statusButton:true,imagePos:"-324px 0"},{id:"strikethrough",command:"strikeThrough",statusButton:true,imagePos:"-252px 0"}],font2:[{id:"subscript",command:"subscript",statusButton:true,imagePos:"-270px 0"},{id:"superscript",command:"superscript",statusButton:true,imagePos:"-288px 0"}],font3:[{id:"forecolor",command:"custom",imagePos:"0 0"},{id:"bgcolor",command:"custom",imagePos:"-18px 0"}],font4:[{id:"fontsize",command:"custom",caption:"$editor.fontsize",dropButton:true},{id:"fontname",command:"custom",caption:"$editor.fontname",dropButton:true},{id:"formatblock",command:"custom",caption:"$editor.formatblock",dropButton:true}],align:[{id:"left",command:"justifyleft",imagePos:"-144px 0"},{id:"center",command:"justifycenter",imagePos:"-54px 0"},{id:"right",command:"justifyright",imagePos:"-216px 0"},{id:"justify",command:"justifyfull",imagePos:"-126px 0"}],list:[{id:"indent",command:"indent",imagePos:"-90px 0"},{id:"outdent",command:"outdent",imagePos:"-180px 0"},{id:"ol",command:"insertorderedlist",imagePos:"-162px 0"},{id:"ul",command:"insertunorderedlist",imagePos:"-306px 0"}],insert:[{id:"hr",command:"insertHorizontalRule",imagePos:"-72px 0"},{id:"insertimage",command:"custom",imagePos:"-342px 0"},{id:"createlink",command:"custom",imagePos:"-360px 0"},{id:"unlink",command:"unlink",imagePos:"-378px 0"}],clear:[{id:"removeformat",command:"removeformat",imagePos:"-198px 0"}],html:[{id:"html",command:"custom",imagePos:"-234px 0"}]},_updateToolbar:function(f,i){var e=linb.$cache.profileMap[f],m;if(e.properties.disabled||e.properties.readonly){return}if(e&&(m=e.$toolbar)){var n=e.$doc,k=i?false:n.queryCommandState("bold"),h=i?false:n.queryCommandState("italic"),d=i?false:n.queryCommandState("underline"),c=i?false:n.queryCommandState("strikethrough"),l=i?false:n.queryCommandState("subscript"),p=i?false:n.queryCommandState("superscript"),g=m.boxing();g.updateItem("bold",{value:k});g.updateItem("italic",{value:h});g.updateItem("underline",{value:d});g.updateItem("strikethrough",{value:c});g.updateItem("subscript",{value:l});g.updateItem("superscript",{value:p});n=null}},RenderTrigger:function(){var m=this;if(!m.properties.disabled&&!m.properties.readonly){m.box._iniToolBar(m)}if(!m.$inDesign){var c=m.getSubNode("EDITOR").get(0),g=m.$domId,e=c.id;if(!m.$once){m.$once=true;var i=document.createElement("iframe"),d=m._event=function(n){if(this._pro&&(this._pro.properties.disabled||this._pro.properties.readonly)){return}_.resetRun("RichEditor:"+g,function(){linb.UI.RichEditor._updateToolbar(g)},100);if(n.type=="mousedown"){linb.doc.onMousedown(true)}},h=function(q){var p=this;if(p._pro){var n=p._pro.boxing();_.asyRun(function(){n.refresh()})}},l,k,f=function(){if(!frames[e]){return false}if(!frames[e].document){return}if(frames[e].document!=l||l.readyState=="complete"){k=m.$win=frames[e];m.$doc=l=frames[e].document;l.open();l.write('<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">body{border:0;margin:0;padding:0;margin:0;cursor:text;background:#fff;color:#000;padding:3px;}p{margin:0;padding:0;} div{margin:0;padding:0;}</style></head><body>'+(m.properties.$UIvalue||"")+"</body></html>");l.close();try{l.execCommand("styleWithCSS",0,false)}catch(q){try{l.execCommand("useCSS",0,true)}catch(q){}}l._pro=k._pro=m;var n=m.properties.disabled||m.properties.readonly;if(l.body.contentEditable!=undefined&&linb.browser.ie){l.body.contentEditable=n?"false":"true"}else{l.designMode=n?"off":"on"}l._pro=k._pro=m;k._gekfix=h;if(linb.browser.ie){l.attachEvent("unload",h);if(!n){l.attachEvent("onmousedown",d);l.attachEvent("ondblclick",d);l.attachEvent("onclick",d);l.attachEvent("onkeyup",d);l.attachEvent("onkeydown",d);m.$beforeDestroy=function(){var x=this.$win,w=this.$doc,s=this._event;var r=w.designMode;w.designMode="off";w.designMode="on";w.designMode=r;x._gekfix=w._pro=x._pro=undefined;try{w.detachEvent("unload",x._gekfix)}catch(u){}if(!this.properties.disabled&&!this.properties.readonly){w.detachEvent("onmousedown",s);w.detachEvent("ondblclick",s);w.detachEvent("onclick",s);w.detachEvent("onkeyup",s);w.detachEvent("onkeydown",s)}x=w=s=null}}}else{var p=m;if(linb.browser.opr){p.$repeatT=linb.Thread.repeat(function(){if(!frames[e]){return false}else{if(!p.$win.document||!p.$win.document.defaultView){p.boxing().refresh()}}},200)}else{k.addEventListener("unload",h,false)}if(!n){l.addEventListener("mousedown",d,false);l.addEventListener("dblclick",d,false);l.addEventListener("click",d,false);l.addEventListener("keyup",d,false);if(linb.browser.gek){l.addEventListener("keypress",d,false)}else{l.addEventListener("keydown",d,false)}}m.$beforeDestroy=function(){var w=this.$win,u=this.$doc,r=this._event;if(linb.browser.opr){if(p.$repeatT){p.$repeatT.abort()}}try{w.removeEventListener("unload",w._gekfix,false)}catch(s){}w._gekfix=u._pro=w._pro=undefined;delete frames[this.$frameId];if(!this.properties.disabled&&!this.properties.readonly&&u.removeEventListener){u.removeEventListener("mousedown",r,false);u.removeEventListener("dblclick",r,false);u.removeEventListener("click",r,false);u.removeEventListener("keyup",r,false);if(linb.browser.gek){u.removeEventListener("keypress",r,false)}else{u.removeEventListener("keydown",r,false)}}p=h=r=w=u=null}}i.style.visibility="";d=m=f=l=null;return false}};m.$frameId=e;i.id=i.name=e;i.className=c.className;i.src="javascript:false;";i.frameBorder=0;i.border=0;i.marginWidth=0;i.marginHeight=0;i.tabIndex=-1;i.allowTransparency="allowtransparency";i.style.visibility="hidden";linb.$cache.domPurgeData[i.$linbid=c.$linbid].element=i;c.parentNode.replaceChild(i,c);l=frames[frames.length-1].document;linb.Thread.repeat(f,50);c=null}}},_clearPool:function(c){c.getSubNode("POOL").empty();c.$colorPicker=c.$fontsizeList=c.$fontnameList=c.$formatblockList=c.$htmlEditor=null},_iniToolBar:function(d,i){var p=d,l=p.properties;if(p.$toolbar){p.$toolbar.boxing().destroy();delete p._$tb;delete p.$toolbar}if(i!==false){var n,m,c,g=[],k=p.getClass("TOOLBARBTN"),f=l.cmdList.split(";"),e={};_.arr.each(f,function(h){if((c=p.box.$cmds[h])&&!e[h]){e[h]=1;g.push({id:h,sub:c});_.arr.each(c,function(q){if(q.imagePos){q.imageClass=k}q.tips=linb.wrapRes("editor."+q.id)})}});p.getRoot().prepend(n=new linb.UI.ToolBar({handler:false,items:g,disabled:l.disabled||l.readonly}));n.render(true);n=p._$tb=n.get(0);n.onClick=p.box._toolbarclick;m=p._$composed={};m[n.$linbid]=n;p.$toolbar=n;n.$hostage=p}linb.UI.$tryResize(d,l.width,l.height,true)},_toolbarclick:function(d,x,i,u,h){var g=d.$hostage;if(!g.$doc){return}var k=g.properties;g.$win.focus();if(x.command=="custom"){var s=x.id,p,f,r,n,w;switch(s){case"forecolor":case"bgcolor":if(!g.$colorPicker){g.$colorPicker=(new linb.UI.ColorPicker({barDisplay:false})).render(true)}p=g.$colorPicker;break;case"fontsize":case"fontname":case"formatblock":if(g.$lang!=linb.getLang()){g.box._clearPool(g)}g.$lang=linb.getLang();if(s=="fontsize"){if(!g.$fontsizeList){n=linb.getRes("editor.fontsizeList");n=n.split(";");w=[];var l;_.arr.each(n,function(e){e=e.split(",");l=e[0]=="..."?"1":e[0];w.push({id:e[0],caption:'<font size="'+e[0]+'" '+linb.$IEUNSELECTABLE+">"+e[1]+"</font>"})});g.$fontsizeList=(new linb.UI.List({height:"auto",items:w,width:150})).render(true)}p=g.$fontsizeList}else{if(s=="fontname"){if(!g.$fontnameList){n=linb.getRes("editor.fontnameList");n=n.split(";");w=[];var l;_.arr.each(n,function(e){l=e=="..."?"":e;w.push({id:e,caption:'<span style="font-family:'+e+'" '+linb.$IEUNSELECTABLE+">"+e+"</span>"})});g.$fontnameList=(new linb.UI.List({height:"auto",items:w})).render(true)}p=g.$fontnameList}else{if(s=="formatblock"){if(!g.$formatblockList){n=linb.getRes("editor.formatblockList");n=n.split(";");w=[];var l;_.arr.each(n,function(e){e=e.split(",");l=e[0]=="..."?"span":e[0];w.push({id:e[0],caption:"<"+l+' style="display:inline;padding:0;margin:0" '+linb.$IEUNSELECTABLE+">"+e[1]+"</"+l+">"})});g.$formatblockList=(new linb.UI.List({height:"auto",items:w})).render(true)}p=g.$formatblockList}}}break;case"html":if(!g.$htmlEditor){g.$htmlEditor=new linb.UI.Input({multiLines:true,width:400,height:300,resizer:true})}p=g.$htmlEditor;break}if(p){f=function(){p.beforeUIValueSet(null);g.getSubNode("POOL").append(p.getRoot());r.setBlurTrigger(g.$linbid);linb.Event.keyboardHook("esc");_.asyRun(function(){g.$win.focus()})};p.setValue("",true);r=p.reBoxing();r.popToTop(h);_.tryF(p.activate,[],p);r.setBlurTrigger(g.$linbid,function(){if(p==g.$htmlEditor){p.setUIValue(p._getCtrlValue())}f()});linb.Event.keyboardHook("esc",0,0,0,function(){f()})}switch(s){case"forecolor":case"bgcolor":p.beforeUIValueSet(function(A,B,e){f();var z=g.$doc;if(s=="bgcolor"&&linb.browser.gek){z.execCommand("useCSS",0,false);z.execCommand("hilitecolor",false,"#"+e);z.execCommand("useCSS",0,true)}else{if(s=="bgcolor"){s=linb.browser.opr?"hilitecolor":"backcolor"}z.execCommand(s,false,linb.browser.kde?("#"+e):e)}z=null;return false});break;case"fontsize":case"fontname":case"formatblock":p.beforeUIValueSet(function(C,E,z){f();if(linb.browser.ie&&(z=="..."||s=="formatblock")){var A=g.$doc.selection,e=A?A.createRange():null;if(e&&e.parentElement().ownerDocument!=g.$doc){e=A=null}}var B=function(H,F){var J=g.$doc;if(e){g.$win.focus();if(H=="formatblock"&&F){var I=e.parentElement(),G;if(I.ownerDocument==J){if(/^\s*</.test(e.htmlText)){e.collapse(true);I=e.parentElement();if(I.tagName=="BODY"){G=I.innerHTML;I.innerHTML="<"+F+">"+G+"</"+F+">"}else{G=I.outerHTML;G=G.replace(/\<[\w]+/,"<"+F).replace(/[\w]+\>$/,F+">");I.outerHTML=G}}else{e.pasteHTML("<"+F+">"+e.htmlText+"</"+F+">")}}I=null}e.select();A=e=null}J.execCommand(H,false,F);J=null};if(z=="..."){var D=linb.getRes("editor."+s);linb.UI.Dialog.prompt(D,D,"",function(F){if(F){B(s,F)}},function(){if(linb.browser.ie){if(e){g.$win.focus();e.select()}A=e=null}})}else{B(s,z)}});break;case"insertimage":case"createlink":var q=linb.getRes("editor."+s),c=linb.getRes("editor."+s+"2");if(linb.browser.ie){var y=g.$doc.selection,m=y?y.createRange():null;if(m&&m.parentElement().ownerDocument!=g.$doc){m=y=null}}linb.UI.Dialog.prompt(q,c,"http://",function(e){if(linb.browser.ie){if(m){g.$win.focus();m.select()}y=m=null}if(e){var z=g.$doc;z.execCommand(s,false,e);z=null}},function(){if(linb.browser.ie){if(m){g.$win.focus();m.select()}y=m=null}});break;case"html":p.setValue(g.boxing().getUIValue(),true);p.beforeUIValueSet(function(z,A,e){f();g.boxing().setUIValue(e)});break}}else{g.$doc.execCommand(x.command,false,x.commandArgs);if(x.id=="removeformat"){linb.UI.RichEditor._updateToolbar(g.$domId,true)}}},_ensureValue:function(c,d){var e=linb.$getGhostDiv();e.innerHTML=d;v=e.innerHTML;e=null;return v},_onresize:function(f,e,c){var d={};if(e){d.width=e-2}if(d.width<0){d.width=0}if(e||c){var h=f._$tb,g=(h?(h.getRoot().offsetHeight()-1):0);if(!c){c=f.properties.height}d.height=c-g-1;if(d.height<0){d.height=0}}f.getSubNode("EDITOR").top(g).cssSize(d,true)}}});Class("linb.UI.ComboInput","linb.UI.Input",{Instance:{_adjustV:function(c){var d=this.get(0);if(d.$isNumber){c=c.replace(/[^\d.]/g,"");c=_.isNumb(parseFloat(c))?parseFloat(c):null}else{if(d.properties.type=="datepicker"||d.properties.type=="date"||d.properties.type=="datetime"){c=_.isDate(c)?c:_.isFinite(c)?new Date(parseInt(c)):null}}return c},getValue:function(){var c=arguments.callee.upper.apply(this,arguments);return this._adjustV(c)},getUIValue:function(){var c=arguments.callee.upper.apply(this,arguments);return this._adjustV(c)},_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(g){var e=this,f=arguments.callee,d=f._r1||(f._r1=/\</),c=f._r2||(f._r2=/\<\/?[^>]+\>/g);return this.each(function(i){if(!i.$typeOK){i.box._iniType(i)}var k=i.getSubNode("INPUT"),h=i.properties.type;g=i.$_onedit?e._toEditor(g):e.getShowValue(g);if(h!=="none"&&!i.properties.multiLines&&typeof g=="string"&&d.test(g)){g=g.replace(c,"")}k.attr("value",g||"");if(h=="colorpicker"||h=="color"){k.css({backgroundColor:g,color:linb.UI.ColorPicker.getTextColor(g)})}})},_compareValue:function(f,e){var d=this.get(0),c;if(c=d.CF.compareValue||d.$compareValue){return c(d,f,e)}return f===e},getShowValue:function(g){var e=this.get(0),h=e.properties,c,d;if(!_.isDefined(g)){g=h.$UIvalue}if(d=e.CF.getShowValue||e.$getShowValue){c=d(e,g)}else{if("listbox"==h.type){var f=(h.listKey)?linb.UI.getCachedData(h.listKey):h.items;if(f&&(d=_.arr.subIndexOf(f,"id",g))!=-1){c=f[d].caption;if(c.length>0){c=c.charAt(0)=="$"?linb.getRes(c.slice(1)):c}}else{c=null}}else{c=e.$showValue}}if(!_.isSet(c)&&(e.$inputReadonly||h.inputReadonly)){c=_.isSet(h.caption)?h.caption:null}return""+(_.isSet(c)?c:_.isSet(g)?g:"")},_toEditor:function(e){var d=this.get(0),f=d.properties,c;if(c=d.CF.toEditor||d.$toEditor){return c(d,e)}return e},_fromEditor:function(e){var d=this.get(0),f=d.properties,c;if(c=d.CF.fromEditor||d.$fromEditor){return c(d,e)}return e},_cache:function(){var e=this.get(0),c=e.$drop,d=e.properties.cachePopWnd;if(c){if(!d){c.boxing().destroy();delete e.$drop}else{if(linb.browser.opr){c.getRoot().css("display","none")}_.asyRun(function(){e.getSubNode("POOL").append(c.getRoot())})}}delete e.$poplink;return d},clearPopCache:function(){var c=this.get(0);if(c.renderId){c.getSubNode("POOL").empty()}delete c.$drop;return this},getUploadObj:function(){var d=this.get(0);if(d.renderId&&d.properties.type=="upload"){var e=d.getSubNode("FILE").get(0);if(!e.value){return null}var f=e.cloneNode(false);f.value="";linb.setNodeData(f.$linbid=e.$linbid,"element",f);f.onclick=e.onclick;f.onchange=e.onchange;if(linb.browser.ie){e.removeAttribute("$linbid")}else{delete e.$linbid}e.id=e.onclick=e.onchange=null;delete d.$_domid[d.keys.FILE];linb([e]).addPrev(f).remove(false);f=null;this.setUIValue(this.getValue());return e}},resetValue:function(c){this.each(function(d){if(d.properties.type=="upload"){d.getSubNode("FILE").attr("value","")}});return arguments.callee.upper.apply(this,arguments)},_drop:function(c,d){return this.each(function(g){var p=g.properties,l=p.type,n=p.cachePopWnd;if(p.disabled||p.readonly){return}if(l=="upload"||l=="none"||l=="spin"||l=="currency"||l=="number"){return}if(g.$poplink){return}var e,q,i=g.boxing(),h=g.getRoot(),m=h.offset(),s=h.cssSize();s.width+=2;m.top+=h.offsetHeight();if((g.beforeComboPop&&false===i.beforeComboPop(g,m,c,d))||l=="getter"||l=="cmdbox"||l=="popbox"){return}var k;if(n){switch(l){case"timepicker":case"time":case"datepicker":case"date":case"datetime":case"colorpicker":case"color":k=l;break;default:if(p.listKey){if(typeof _.get(linb.$cache,["UIDATA",p.listKey])=="function"){g.$drop=k=null}else{k="!"+p.listKey}}else{k="$"+g.$linbid}}if(k){_.filter(g.box.$drop,function(u){return !!u.renderId});g.$drop=g.box.$drop[k]}}if(!g.$drop){switch(l){case"combobox":case"listbox":case"helpinput":e=linb.create("List").render();e.setHost(g).setDirtyMark(false).setItems(_.copy(p.items)).setListKey(p.listKey||"");if(p.dropListHeight){e.setHeight(p.dropListHeight)}else{e.adjustSize()}e.beforeUIValueSet(function(z,y,x){var u=this.boxing();if(l=="combobox"){var w=z.queryItems(z.properties.items,function(A){return A.id==x},false,true);if(w.length){x=w[0].caption}}u.setUIValue(x).activate();return u._cache()});break;case"time":case"timepicker":e=linb.create("TimePicker").render();e.setHost(g);e.beforeClose(function(){this.boxing().activate()._cache();return false});e.beforeUIValueSet(function(x,y,w){var u=this.boxing();u.setUIValue(w).activate();return u._cache()});break;case"date":case"datepicker":case"datetime":e=linb.create("DatePicker").render();if(l=="datetime"){e.setTimeInput(true)}e.setHost(g);e.beforeClose(function(){this.boxing().activate()._cache();return false});e.beforeUIValueSet(function(x,y,w){var u=this.boxing();u.setUIValue(String(w.getTime())).activate();return u._cache()});break;case"color":case"colorpicker":e=linb.create("ColorPicker").render();e.setHost(g);e.beforeClose(function(){this.boxing().activate()._cache();return false});e.beforeUIValueSet(function(x,y,w){var u=this.boxing();u.setUIValue("#"+w).activate();return u._cache()});break}g.$drop=e.get(0);if(k){g.box.$drop[k]=g.$drop}}e=g.$drop.boxing();e.setHost(g);switch(l){case"combobox":case"listbox":case"helpinput":e.setWidth(g.properties.dropListWidth||g.getRoot().width());case"time":case"timepicker":e.setValue(g.properties.$UIvalue,true);break;case"date":case"datepicker":case"datetime":var r=g.$drop.properties;if(r=g.properties.$UIvalue){e.setValue(new Date(parseInt(r)),true)}break;case"color":case"colorpicker":e.setValue(g.properties.$UIvalue.replace("#",""),true);break}g.$poplink=e.get(0);var f=e.reBoxing();f.popToTop(g.getRoot());_.tryF(e.activate,[],e);f.setBlurTrigger(g.key+":"+g.$linbid,function(){i._cache()},null,g.$linbid);linb.Event.keyboardHook("esc",0,0,0,function(){i.activate();linb.Event.keyboardHook("esc");i._cache()})})},expand:function(){var c=this.get(0);if(c.renderId){c.boxing()._drop()}},collapse:function(){var c=this.get(0);if(c.renderId&&c.$poplink){c.boxing()._cache()}}},Initialize:function(){this.addTemplateKeys(["FILE","BTN","TOP","MID","RBTN","R1","R1T","R1B","R2","R2T","R2B"]);var c=this.getTemplate();_.merge(c.FRAME.BORDER,{SBTN:{$order:10,style:"{_saveDisplay}",STOP:{},SMID:{className:"{_commandCls}"}}},"all");c.FRAME.POOL={};c.className+=" {typecls}";this.setTemplate(c);this._adjustItems=linb.absList._adjustItems},Static:{_beforeResetValue:function(c){c.properties.caption=undefined},_iniType:function(g){var h=g.properties,f=h.type,i=g.box;delete g.$beforeKeypress;delete g.$inputReadonly;delete g.$isNumber;delete g.$compareValue;delete g.$getShowValue;delete g.$toEditor;delete g.$fromEditor;delete g.$typeOK;if(f=="listbox"||f=="upload"||f=="cmdbox"){g.$inputReadonly=true}if(f!="listbox"&&f!="combobox"&&f!="helpinput"){h.items=[]}if(f=="timepicker"||f=="time"){var e={a:1,c:1,v:1,x:1};_.merge(g,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[0-9:]/.test(l.key)||(l.ctrlKey&&!!e[l.key])},$getShowValue:function(k,c){return c?linb.UI.TimePicker._ensureValue(k,c):""},$fromEditor:function(k,c){if(c){c=linb.UI.TimePicker._ensureValue(k,c);if(c=="00:00"){c=k.properties.$UIvalue}}return c}},"all")}else{if(f=="datepicker"||f=="date"||f=="datetime"){var d=linb.Date;var e={a:1,c:1,v:1,x:1};_.merge(g,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[0-9:/\-_ ]/.test(l.key)||(l.ctrlKey&&!!e[l.key])},$compareValue:function(l,k,c){return(!k&&!c)||(String(k)==String(c))},$getShowValue:function(k,c){if(k.properties.dateEditorTpl){return c?d.format(c,k.properties.dateEditorTpl):""}else{return c?d.getText(new Date(parseInt(c)),k.properties.type=="datetime"?"ymdhn":"ymd"):""}},$toEditor:function(p,k){if(!k){return""}k=new Date(parseInt(k)||0);if(p.properties.dateEditorTpl){return d.format(k,p.properties.dateEditorTpl)}else{var c=(d.get(k,"m")+1)+"",q=d.get(k,"d")+"",l=d.get(k,"h")+"",r=d.get(k,"n")+"";return d.get(k,"y")+"-"+(c.length==1?"0":"")+c+"-"+(q.length==1?"0":"")+q+(p.properties.type=="datetime"?(" "+(l.length==1?"0":"")+l+":"+(r.length==1?"0":"")+r):"")}},$fromEditor:function(k,c){if(c){if(k.properties.dateEditorTpl){c=d.parse(c,k.properties.dateEditorTpl)}else{c=linb.Date.parse(c)}if(!c){c=k.properties.$UIvalue;if(_.isFinite(c)){c=new Date(parseInt(c))}}if(c){if(k.properties.type!="datetime"){c=d.getTimSpanStart(c,"d",1)}if(c.getFullYear()<k.properties.min){c.setTime(k.properties.min)}if(c.getFullYear()>k.properties.max){c.setTime(k.properties.max)}}}return c?String(c.getTime()):""}},"all")}else{if(f=="currency"){g.$isNumber=1;var e={a:1,c:1,v:1,x:1};_.merge(g,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[0-9,.]/.test(l.key)||(l.ctrlKey&&!!e[l.key])},$compareValue:function(l,k,c){return((k===""&&c!=="")||(c===""&&k!==""))?false:l.box._currency(g,k)==l.box._currency(g,c)},$getShowValue:function(k,c){if(_.isSet(c)&&c!==""){c=k.box._currency(g,c);if(k.properties.currencyTpl){c=k.properties.currencyTpl.replace("*",c)}}else{c=""}return c},$toEditor:function(k,c){return(_.isSet(c)&&c!=="")?k.box._currency(g,c).replace(/[^\d.]/g,""):""},$fromEditor:function(k,c){return(_.isSet(c)&&c!=="")?k.box._currency(g,c).replace(/[^\d.]/g,""):""}},"all")}else{if(f=="number"||f=="spin"){g.$isNumber=1;var e={a:1,c:1,v:1,x:1};_.merge(g,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[-0-9.]/.test(l.key)||(l.ctrlKey&&!!e[l.key])},$compareValue:function(l,k,c){return((k===""&&c!=="")||(c===""&&k!==""))?false:l.box._number(g,k)==l.box._number(g,c)},$getShowValue:function(k,c){return(_.isSet(c)&&c!=="")?k.box._number(g,c):""},$fromEditor:function(k,c){return(_.isSet(c)&&c!=="")?k.box._number(g,c):""}},"all")}}}}if(h.value){h.$UIvalue=h.value=i._ensureValue(g,h.value)}g.$typeOK=true},$drop:{},Appearances:{POOL:{position:"absolute",left:0,top:0,width:0,height:0,display:"none",visibility:"hidden"},FILE:{opacity:0,"*filter":"alpha(opacity=0)","z-index":"3",border:0,height:"100%",position:"absolute",top:0,right:0,cursor:"pointer","font-size":"12px",overflow:"hidden"},"KEY-number INPUT, KEY-spin INPUT, KEY-currency INPUT":{$order:4,"text-align":"right"},"KEY-upload INPUT, KEY-cmdbox INPUT, KEY-listbox INPUT":{$order:4,cursor:"pointer","text-align":"left",overflow:"hidden"},"KEY-upload BORDER, KEY-cmdbox BORDER, KEY-listbox BORDER":{$order:1,background:linb.UI.$bg("inputbgb.gif","#fff left bottom repeat-x","Input")},"KEY-upload BOX, KEY-cmdbox BOX, KEY-listbox BOX":{$order:4,background:"none"},"RBTN,SBTN,BTN":{display:"block","z-index":"1",cursor:"pointer",width:"16px",height:"20px","font-size":0,"line-height":0,position:"relative","float":"right"},"SBTN,BTN,R1,R2":{"margin-top":"2px"},"R1, R2, BTN, SBTN, STOP, TOP, R1T, R2T, R1B, R2B, SMID,MID":{background:linb.UI.$bg("bg.gif")},"SBTN, BTN":{$order:1,"background-position":"left bottom"},"R1,R2":{$order:1,display:"block","font-size":0,"line-height":0,cursor:"pointer",width:"16px",position:"absolute",height:"50%","background-position":"left bottom","margin-top":"2px"},R1:{top:0},R2:{bottom:"-2px"},"BTN-mouseover, SBTN-mouseover, R1-mouseover, R2-mouseover":{$order:2,"background-position":"-16px bottom"},"BTN-mousedown, SBTN-mousedown, R1-mousedown, R2-mousedown":{$order:3,"background-position":"-32px bottom"},"STOP, TOP, R1T, R2T":{$order:1,cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",top:"-2px",left:0,height:"4px","background-position":"left -104px"},"BTN-mouseover TOP,SBTN-mouseover STOP, R1-mouseover R1T, R2-mouseover R2T":{$order:2,"background-position":"-16px -104px"},"BTN-mousedown TOP,SBTN-mousedown STOP, R1-mousedown R1T, R2-mousedown R2T":{$order:3,"background-position":"-32px -104px"},"R1B,R2B":{cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",left:0,top:"50%","margin-top":"-4px",height:"6px","z-index":2},R1B:{$order:1,"background-position":"-14px -36px"},R2B:{$order:1,"background-position":"left -5px"},"SMID,MID":{$order:2,cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",bottom:"0",left:0,height:"16px"},SMID:{$order:3,"background-position":"-16px -16px"},"SMID-save":{$order:8,"background-position":"-32px 0"},"SMID-delete":{$order:8,"background-position":"-32px -16px"},"SMID-add":{$order:8,"background-position":"-32px -32px"},"SMID-remove":{$order:8,"background-position":"-32px -48px"},".setting-linb-comboinput":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"}},Behaviors:{HoverEffected:{BOX:"BOX",BTN:"BTN",SBTN:"SBTN",R1:"R1",R2:"R2"},ClickEffected:{BTN:"BTN",SBTN:"SBTN",R1:"R1",R2:"R2"},FILE:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onFileDlgOpen){c.boxing().onFileDlgOpen(c,f)}},onChange:function(c,d,f){c.boxing().setUIValue(linb.use(f).get(0).value+"")}},BTN:{onClick:function(c,d,f){var g=c.properties;if(g.type=="popbox"||g.type=="getter"){if(c.onClick){c.boxing().onClick(c,d,f,g.$UIvalue)}}if(g.disabled||g.readonly){return}c.boxing()._drop(d,f)}},SBTN:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onCommand){c.boxing().onCommand(c,f)}}},INPUT:{onChange:function(g,i,l){if(g.$_onedit||g.$_inner){return}var k=g._inValid,d=g.box,c=g.boxing(),f=c._fromEditor(linb.use(l).get(0).value),h=g.properties.$UIvalue;if(!c._compareValue(h,f)){g.$_inner=1;delete g.$_inner;if(f===null){c._setCtrlValue(h)}else{c.setUIValue(f);g.properties.$UIvalue=f;if(k!==g._inValid){if(g.renderId){c._setDirtyMark()}}}}d._asyCheck(g)},onKeyup:function(f,i,k){var h=f.properties,c=f.box,d=linb.Event.getKey(i);if(d.key=="esc"){f.$_onedit=true;f.boxing().setUIValue(h.value,true);f.$_onedit=false;if(f.onCancel){f.boxing().onCancel(f)}}if(h.dynCheck){var g=linb.use(k).get(0).value;f.box._checkValid(f,g);f.boxing()._setDirtyMark()}c._asyCheck(f);if(d.key=="down"||d.key=="up"){if(h.type=="spin"){linb.Thread.abort(f.$linbid+":spin");return false}}},onFocus:function(f,g,c){var d=f.properties,h=f.box;if(d.disabled||d.readonly){return false}if(f.onFocus){f.boxing().onFocus(f)}if(f.$inputReadonly||d.inputReadonly){return}f.getSubNode("BORDER").tagClass("-focus");var m=f.boxing(),i=d.$UIvalue,l=m._toEditor(i);if(linb.use(c).get(0).value!=l){f.$_onedit=true;linb.use(c).get(0).value=l;delete f.$_onedit}if(d.mask){var k=linb.use(c).get(0).value;if(!k){_.asyRun(function(){f.boxing().setUIValue(k=f.$Mask);h._setCaret(f,linb.use(c).get(0))})}}f.boxing()._setTB(3)},onBlur:function(g,k,l){var i=g.properties;if(i.disabled||i.readonly){return false}if(g.onBlur){g.boxing().onBlur(g)}if(g.$inputReadonly||i.inputReadonly){return}var d=g.box,c=g.boxing(),h=i.$UIvalue,f=c._fromEditor(linb.use(l).get(0).value);g.getSubNode("BORDER").tagClass("-focus",false);if(c._compareValue(i.$UIvalue,f)){g.box._checkValid(g,f);c._setCtrlValue(h)}c._setDirtyMark();d._asyCheck(g)},onKeydown:function(h,l,n){var i=h.properties;if(i.disabled||i.readonly){return}var d=h.box,c=i.multiLines,f=linb.Event,g=f.getKey(l);if(g.key=="enter"&&(!c||g.altKey)&&!i.inputReadonly&&!h.$inputReadonly){h.$_onedit=true;h.boxing().setUIValue(h.boxing()._fromEditor(linb.use(n).get(0).value),true);h.$_onedit=false}d._asyCheck(h);if(i.mask){if(g.key.length>1){h.$ignore=true}else{delete h.$ignore}switch(g.key){case"backspace":d._changeMask(h,linb.use(n).get(0),"",false);return false;case"delete":d._changeMask(h,linb.use(n).get(0),"");return false}}if(g.key=="down"||g.key=="up"){if(i.type=="spin"){h.box._spin(h,g.key=="up");return false}if(g.ctrlKey&&i.type){h.boxing()._drop(l,n);return false}}},onClick:function(c,d,f){var g=c.properties;if(g.type=="cmdbox"){if(c.onClick){c.boxing().onClick(c,d,f,g.$UIvalue)}}else{if(g.inputReadonly||c.$inputReadonly){if(g.disabled||g.readonly){return}c.boxing()._drop(d,f)}}}},R1:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,true)},onMouseout:function(c){linb.Thread.abort(c.$linbid+":spin")},onMouseup:function(c){linb.Thread.abort(c.$linbid+":spin")}},R2:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,false)},onMouseout:function(c){linb.Thread.abort(c.$linbid+":spin")},onMouseup:function(c){linb.Thread.abort(c.$linbid+":spin")}}},EventHandlers:{onFileDlgOpen:function(c,d){},onCommand:function(c,d){},beforeComboPop:function(c,g,d,f){},onClick:function(c,f,g,d){}},_posMap:{none:"",currency:"",number:"",combobox:"left top",listbox:"left top",upload:"-16px top",getter:"left -31px",helpinput:"-16px -46px",cmdbox:"left -16px",popbox:"left -46px",time:"left -60px",date:"left -75px",color:"-16px -60px",timepicker:"left -60px",datepicker:"left -75px",datetime:"left -75px",colorpicker:"-16px -60px"},DataModel:{cachePopWnd:true,dateEditorTpl:"",currencyTpl:{ini:"",action:function(){this.boxing().setUIValue(this.properties.$UIvalue,true)}},listKey:{set:function(d){var c=linb.UI.getCachedData(d),e=this;e.boxing().setItems(c?c:e.properties.items);e.properties.listKey=d}},dropListWidth:0,dropListHeight:0,items:{ini:[],set:function(c){var d=this;c=d.properties.items=d.box._adjustItems(c);if(d.renderId){d.SubSerialIdMapItem={};d.ItemIdMapSubSerialId={};d.box._prepareItems(d,c);if(d.$poplink){d.$poplink.boxing().setItems(c).adjustSize()}else{d.boxing().clearPopCache()}}}},image:{action:function(c){this.getSubNode("MID").css("backgroundImage","url("+(c||"")+")")}},imagePos:{action:function(c){this.getSubNode("MID").css("backgroundPosition",c)}},type:{ini:"combobox",listbox:_.toArr("none,combobox,listbox,upload,getter,helpinput,cmdbox,popbox,date,time,datetime,color,spin,currency,number"),set:function(c){var d=this;d.properties.type=c;if(d.renderId){d.boxing().refresh()}}},precision:2,increment:0.01,min:-Math.pow(10,15),max:Math.pow(10,15),commandBtn:{ini:"none",listbox:_.toArr("none,save,delete,add,remove,custom"),action:function(c){this.boxing().refresh()}},inputReadonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c=this.getClass("KEY","-inputreadonly");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if(!d&&(this.properties.readonly||this.$inputReadonly)){d=true}e.attr("readonly",d).css("cursor",d?"pointer":"")}},readonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c=this.getClass("KEY","-readonly");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if(!d&&(this.properties.inputReadonly||this.$inputReadonly)){d=true}e.attr("readonly",d).css("cursor",d?"pointer":"")}},caption:{ini:null,set:function(c,d){var e=this.properties;e.caption=c;if(_.isSet(e.caption)&&this.renderId){if(this.$inputReadonly||e.inputReadonly){this.getSubNode("INPUT").attr("value",this.boxing().getShowValue())}}},get:function(){return this.boxing().getShowValue()}}},RenderTrigger:function(){var d=this,c=d.boxing(),e=d.properties;d.box._iniType(d);if(e.readonly){c.setReadonly(true,true)}else{if(e.inputReadonly){c.setInputReadonly(true,true)}}},_spin:function(f,d){var i=f.$linbid+":spin";if(linb.Thread.isAlive(i)){return}var h=f.properties,g=h.increment*(d?1:-1),e={delay:300},c=function(){f.boxing().setUIValue(String((+h.$UIvalue||0)+g));e.delay*=0.9};e.task=c;linb.Thread(i,[e],500,null,c,null,true).start()},_dynamicTemplate:function(f){var d=f.properties,g=f._exhash="$multiLines:"+d.multiLines+";type:"+d.type+";",e=f.box.getTemplate(g);d.$UIvalue=d.value;if(!e){e=_.clone(f.box.getTemplate());var c=e.FRAME.BORDER;if(d.multiLines){c.BOX.WRAP.INPUT.tagName="textarea";delete c.BOX.WRAP.INPUT.type}switch(d.type){case"none":case"currency":case"number":break;case"spin":c.RBTN={$order:20,style:"{rDisplay}",R1:{R1T:{},R1B:{}},R2:{R2T:{},R2B:{}}};break;case"upload":c.FILE={$order:20,tagName:"input",type:"file",hidefocus:linb.browser.ie?"hidefocus":null,size:"1"};case"listbox":case"cmdbox":c.BOX.WRAP.INPUT.tagName="input";c.BOX.WRAP.INPUT.type="button";default:c.BTN={$order:20,style:"{_popbtnDisplay}",TOP:{},MID:{style:"{_btnStyle}"}}}f.box.setTemplate(e,g)}f.template=e},_prepareData:function(c){var d=arguments.callee.upper.call(this,c),e=c.box._posMap;if(e[d.type]){d._btnStyle=d.image?("background: url("+d.image+")"+(d.imagePos||"")):("background-position:"+e[d.type])}d._type="text";d._saveDisplay=d.commandBtn!="none"?"":"display:none";d._commandCls=c.getClass("SMID","-"+d.commandBtn);d._popbtnDisplay=d.type!="none"?"":"display:none";d.typecls=c.getClass("KEY","-"+d.type);return d},_ensureValue:function(e,g){var f=arguments.callee,c=f._reg||(f._reg=/^#[\w]{6}$/),i=e.properties;if(!_.isSet(g)||g===""){return""}switch(e.properties.type){case"date":case"datepicker":case"datetime":var h;if(g){if(_.isDate(g)){h=g}else{if(_.isFinite(g)){h=new Date(parseInt(g))}}}return h?String(e.properties.type=="datetime"?h.getTime():linb.Date.getTimSpanStart(h,"d",1).getTime()):"";case"color":case"colorpicker":return"#"+linb.UI.ColorPicker._ensureValue(null,g);case"time":case"timepicker":return linb.UI.TimePicker._ensureValue(null,g);case"currency":return this._currency(e,g);case"number":case"spin":return this._number(e,g);default:return typeof g=="string"?g:(g||g===0)?String(g):""}},_number:function(c,d){var e=c.properties;d=parseFloat((d+"").replace(/[^\d.]/g,""))||0;if(_.isSet(e.max)){d=d>e.max?e.max:d}if(_.isSet(e.min)){d=d<e.min?e.min:d}if(_.isSet(e.precision)&&e.precision>=0){d=d.toFixed(e.precision)}return d},_currency:function(d,e){var f=d.properties,c=Math.max(f.min,0);e=parseFloat((e+"").replace(/[^\d.]/g,""))||0;if(_.isSet(f.max)){e=e>f.max?f.max:e}if(_.isSet(f.min)){e=e<f.min?f.min:e}return this.formatCurrency(e)},formatCurrency:function(c){c=c.toFixed(2);c=c.split(".");c[0]=c[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1,").split("").reverse().join("");return c.join(".")},_onresize:function(g,s,q){var y=1,d=1,k=linb.UI.$getCSSValue("linb-comboinput-input","paddingTop"),c=linb.UI.$getCSSValue("linb-comboinput-input","paddingLeft");var m=g.properties,r=g.getSubNode("BOX"),p="px",w=function(f){return f?g.getSubNode(f).get(0):null},e=w("INPUT"),u=w(m.commandBtn!="none"?"SBTN":null),l=w(m.type=="spin"?"RBTN":m.type=="none"?null:"BTN"),x=s,h=q,i=Math.max(0,(m.$b_lw||0)-y),n=Math.max(0,(m.$b_tw||0)-d);if(null!==x){x-=Math.max(y*2,(m.$b_lw||0)+(m.$b_rw||0));x-=((u?u.offsetWidth:0)+(l?l.offsetWidth:0));if(linb.browser.ie6){x=(parseInt(x/2))*2}}if(null!==h){h-=Math.max(d*2,(m.$b_lw||0)+(m.$b_rw||0));if(linb.browser.ie6){h=(parseInt(h/2))*2}if(linb.browser.ie6&&null===s){r.ieRemedy()}}if(null!==x&&x-c>0){e.style.width=(x-c)+p}if(null!==h&&h-k>0){e.style.height=(h-k)+p}if(q-2>0){if(l){l.style.height=(q-2)+p}if(u){u.style.height=(q-2)+p}}if(m.type=="spin"){if(q/2-2>0){q=(q/2-2)+p;w("R1").style.height=q;w("R2").style.height=q}}r.cssRegion({left:i,top:n,width:x,height:h});if((g.$border||g.$shadow||g.$resizer)&&linb.browser.ie){r.ieRemedy()}}}});Class("linb.UI.Group","linb.UI.Div",{Instance:{activate:function(){var c=this.get(0);c.getSubNode("HANDLE").focus();return this},resetPanelView:function(d){if(!_.isSet(d)){d=true}var c;return this.each(function(e){if(e.renderId){delete e.$ini;c=e.boxing();c.removeChildren(true,d);if(e.properties.toggle){c.setToggle(false)}}})}},Static:{Behaviors:{NavKeys:{CAPTION:1},HoverEffected:{TOGGLE:"TOGGLE"},ClickEffected:{TOGGLE:"TOGGLE"},DroppableKeys:["PANEL"],DraggableKeys:["HANDLE"],onSize:linb.UI.$onSize,HANDLE:{onClick:function(c,d,f){if(c.properties.toggleBtn){c.box._toggle(c,!c.properties.toggle);return false}},onKeydown:function(c,d,f){if(linb.Event.getKey(d).key=="enter"){linb(f).onClick()}}}},Templates:{tagName:"div",style:"{_style}",className:"{_className}",FIELDSET:{tagName:"fieldset",className:" {toggleCls}",LEGEND:{tagName:"legend",HANDLE:{tabindex:"{tabindex}",TOGGLE:{className:"uicmd-toggle2 {toggleCls2}",style:"{toggleDispplay}"},ICON:{$order:1,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{text:"{caption}",$order:2}}},PANEL:{$order:1,tagName:"div",style:"{panelDisplay}",text:"{html}"+linb.UI.$childTag}}},Appearances:{KEY:{zoom:linb.browser.ie6?"1":null},FIELDSET:{border:"1px solid #7ba3cb",position:"relative",overflow:"hidden",zoom:linb.browser.ie6?"1":null},"FIELDSET-checked":{$order:2,"padding-left":"2px","border-left":"0","border-right":"0","border-bottom":"0"},LEGEND:{"margin-left":"3px"},HANDLE:{cursor:"default",padding:"0 3px 0 6px",display:linb.$inlineBlock},PANEL:{position:"relative",overflow:"auto",background:linb.browser.ie?"url("+linb.ini.img_bg+") no-repeat left top":null},"FIELDSET-checked PANEL":{$order:4,display:"none"},CAPTION:{"vertical-align":linb.browser.ie6?"baseline":"middle","font-family":'"Verdana", "Helvetica", "sans-serif"',"font-size":"12px","line-height":"18px"}},DataModel:{iframeAutoLoad:"",ajaxAutoLoad:"",caption:{ini:undefined,action:function(c){this.getSubNode("CAPTION").get(0).innerHTML=c}},html:{action:function(c){this.getSubNode("PANEL").html(c)}},toggleBtn:{ini:true,action:function(c){this.getSubNode("TOGGLE").css("display",c?"":"none")}},toggle:{ini:true,action:function(c){this.box._toggle(this,c)}},image:{action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage","url("+(c||"")+")")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}}},LayoutTrigger:function(){var d=this,e=d.properties,c=d.box;if(e.toggle){c._toggle(d,e.toggle)}},EventHandlers:{onIniPanelView:function(c){},beforeFold:function(c){},beforeExpend:function(c){},afterFold:function(c){},afterExpend:function(c){}},_prepareData:function(d){var e=arguments.callee.upper.call(this,d),c="display:none";e.toggleDispplay=e.toggleBtn?"":c;e.panelDisplay=e.toggleBtn&&!e.toggle?c:"";e.toggleCls=e.toggleBtn&&!e.toggle?d.getClass("FIELDSET","-checked"):"";e.toggleCls2=e.toggleBtn&&e.toggle?"uicmd-toggle2-checked":"";d._toggle=!!e.toggle;return e},_onresize:function(e,d,c){if(c&&c!="auto"){e.getSubNode("FIELDSET").height(c);e.getSubNode("PANEL").height(c-(e.getSubNode("LEGEND").height()||18))}if(d&&d!="auto"){e.getSubNode("PANEL").width(d-2)}},_toggle:function(d,e){var g=d.properties,c=d.boxing();if(e&&!d.$ini){if(c.onIniPanelView){if(c.onIniPanelView(d)!==false){d.$ini=true}}if(g.iframeAutoLoad){c.getSubNode("PANEL").css("overflow","hidden");if(typeof g.iframeAutoLoad=="string"){g.iframeAutoLoad={url:g.iframeAutoLoad}}var f=g.iframeAutoLoad,h=document.createElement("iframe");h.name="diframe:"+_();h.id=h.name;h.src=f.url;h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";c.append(h);linb.Dom.submit(f.url,f.query,f.method,h.name,f.enctype)}else{if(g.ajaxAutoLoad){if(typeof g.ajaxAutoLoad=="string"){g.ajaxAutoLoad={url:g.ajaxAutoLoad}}var f=g.ajaxAutoLoad;c.busy();linb.Ajax(f.url,f.query,function(i){var k=linb.create("div");k.html(i,false,true);c.append(k.children());c.free()},function(i){c.append("<div>"+i+"</div>");c.free()},null,f.options).start()}}}if(d._toggle!==!!e){d._toggle=g.toggle=!!e;if(e){if(c.beforeExpend&&false===c.beforeExpend(d)){return}}else{if(c.beforeFold&&false===c.beforeFold(d)){return}}d.getSubNode("PANEL").css("display",e?"":"none");if(g.toggleBtn){d.getSubNode("TOGGLE").tagClass("-checked",!!e)}d.getSubNode("FIELDSET").tagClass("-checked",!e);if(e){if(c.afterExpend){c.afterExpend(d)}}else{if(c.afterFold){c.afterFold(d)}}}}}});Class("linb.UI.ColorPicker",["linb.UI","linb.absValue"],{Instance:{activate:function(){this.getSubNode("TOGGLE").focus();return this},_setCtrlValue:function(d,c){return this.each(function(k){if(!k.renderId){return}var q=k.box,h=k.properties,i=k.$hex=q._to3(d),g=k.$hex.join(""),n=k.$rgb=q.hex2rgb(d),l=k.$hsv=q.rgb2hsv(n),m=function(p,f){k.getSubNode(p).get(0).firstChild.nodeValue=String(f)},e=function(f){return parseInt(f*100)};m("R",n[0]);m("G",n[1]);m("B",n[2]);m("H",i[0]);m("E",i[1]);m("X",i[2]);if(k.$hexinhsv!=g){m("HH",l[0]);m("S",e(l[1]));m("V",e(l[2]));delete k.$hexinhsv}q._setClrName(k,g);q._updateDftTip(k);if(h.advance&&k.$hexinadv!=g){q._updateMarks(k,d,true,l[0]);delete k.$hexinadv}if(c!=false){k.getSubNode("CAPTION").html("#"+d,false)}})},getColorName:function(){return this.get(0).$clrN||""}},Initialize:function(){var k=this,c=linb.UI.$ID,p=linb.UI.$CLS,q=linb.UI.$tag_special,m=k.KEY,h=k._slist,d=h.length,f,e,g=[],n=linb.$IEUNSELECTABLE;k.addTemplateKeys(["TXT","DD1","DD2","DD3","R","G","B","HH","S","V","H","E","X"]);for(f=0;f<d;f++){g.push('<span  id="'+m+"-SC:"+c+":"+h[f]+'" style="background-color:#'+h[f]+'" '+n+">"+h[f]+"</span>")}e="<div "+n+'><span class="'+p+'-txt"'+n+'>R: </span><span id="'+m+"-R:"+c+':" class="'+p+"-dd2 ui-draggable "+q+"DD2_CC"+q+'" '+n+'>R</span><span style="width:8px;height:8px" '+n+' ></span><span class="'+p+'-txt"'+n+'>H: </span><span id="'+m+"-HH:"+c+':" class="'+p+"-dd2 ui-draggable "+q+"DD2_CC"+q+'" '+n+">H</span><span "+n+">\xB0</span></div><div "+n+'><span class="'+p+'-txt"'+n+'>G: </span><span id="'+m+"-G:"+c+':" class="'+p+"-dd2 ui-draggable "+q+"DD2_CC"+q+'" '+n+'>G</span><span style="width:8px;height:8px" '+n+' ></span><span class="'+p+'-txt"'+n+'>S: </span><span id="'+m+"-S:"+c+':" class="'+p+"-dd2 ui-draggable "+q+"DD2_CC"+q+'"  '+n+">S</span><span "+n+">%</span></div><div "+n+'><span class="'+p+'-txt"'+n+'>B: </span><span id="'+m+"-B:"+c+':" class="'+p+"-dd2 ui-draggable "+q+"DD2_CC"+q+'" '+n+'>B</span><span style="width:8px;height:8px" '+n+' ></span><span class="'+p+'-txt"'+n+'>V: </span><span id="'+m+"-V:"+c+':" class="'+p+"-dd2 ui-draggable "+q+"DD2_CC"+q+'" '+n+">V</span><span "+n+">%</span></div><div "+n+'><span style="width:38px"'+n+">HEX: "+q+'</span><span id="'+m+"-H:"+c+':" class="'+p+"-dd3 ui-draggable "+q+"DD3_CC"+q+'" '+n+'>H</span><span id="'+m+"-E:"+c+':" class="'+p+"-dd3 ui-draggable "+q+"DD3_CC"+q+'" '+n+""+n+'>E</span><span id="'+m+"-X:"+c+':" class="'+p+"-dd1 ui-draggable "+q+"DD1_CC"+q+'" '+n+">X</span></div>";k.setTemplate({style:"{_style};height:auto;width:{_width}px;",tagName:"div",onselectstart:"return false",BORDER:{tagName:"div",BAR:{tagName:"div",className:"{classBar}",BART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",className:"uibar-t",tagName:"table",BARTR:{tagName:"tr",BARTDL:{tagName:"td",className:"uibar-tdl"},BARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}},BARCMDL:{tagName:"div",className:"uibar-cmdl"},BARCMDR:{tagName:"div",className:"uibar-cmdr",CLOSE:{className:"uicmd-close ",style:"{closeDisplay}"}}},MAIN:{$order:2,tagName:"div",className:"uicon-main",MAINI:{tagName:"div",className:"uicon-maini",CON:{$order:1,tagName:"div",SIMPLE:{tagName:"div",TOP:{$order:1,tagName:"div",DATA:{$order:0,tagName:"div",onselectstart:"return false",text:e},EXAM:{$order:1,tagName:"div",EXAMI:{tagName:"div"}}},LIST:{$order:2,tagName:"div",text:g.join("")}},ADV:{$order:2,style:"{advDispay}",tagName:"div",ADVWHEEL:{$order:0,tagName:"div"},ADVCLR:{$order:1,tagName:"div"},ADVMARK1:{$order:3,tagName:"div"},ADVMARK2:{$order:4,tagName:"div"}}}}},TAIL:{$order:3,tagName:"div",className:"uicon-main",TAILI:{tagName:"div",className:"uicon-maini",CAPTION:{text:"{caption}"},SET:{className:"ui-btn",SETI:{className:"ui-btni",SETC:{className:"ui-btnc",SETA:{tabindex:"{tabindex}",text:linb.wrapRes("inline.set")}}}},TOGGLE:{$order:2,tabindex:"{tabindex}"}}},BBAR:{$order:4,tagName:"div",className:"uibar-bottom-s",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}}}}})},Static:{_radius:84,_square:100,_bigRadius:97,DataModel:{height:{ini:"auto",readonly:true},width:{ini:"auto",readonly:true},value:"FFFFFF",barDisplay:{ini:true,action:function(c){if(c){this.getSubNode("BAR").replaceClass("uibar-top-s","uibar-top")}else{this.getSubNode("BAR").replaceClass("uibar-top","uibar-top-s")}}},closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}},advance:{ini:false,action:function(c){var d=this;d.getSubNode("ADV").css("display",c?"":"none");d.getSubNode("TOGGLE").tagClass("-adv",c);d.getRoot().width(c?410:210);if(c){d.box._updateMarks(d,d.properties.$UIvalue,true,d.$hsv[0])}}}},Appearances:{KEY:{},MAINI:{padding:"4px 5px 4px 0"},CON:{height:"196px",padding:"3px",position:"relative",border:"solid 1px #648CB4"},DATA:{"float":"left",width:"112px",height:"86px"},"DATA span":{"float":"left"},"DATA div":{"padding-top":"3px",clear:"both"},TXT:{width:"16px"},CAPTION:{"font-size":"12px","vertical-align":linb.browser.ie6?"baseline":"middle"},EXAM:{"float":"left","margin-top":"2px",padding:"3px",border:"solid 1px #648CB4","background-color":"#E5EBFB"},EXAMI:{height:"70px",width:"70px","white-space":"normal","text-align":"center",border:"solid 1px #648CB4"},"DD1, DD2, DD3":{display:"block",height:"16px",border:"1px solid #779EBF","padding-right":"2px",cursor:"e-resize","text-align":"right",background:"#F8FBFF"},DD1:{width:"16px"},DD2:{width:"24px"},DD3:{$order:2,width:"16px","border-right":"none"},TOP:{height:"90px",position:"relative"},LIST:{height:"106px",position:"relative",overflow:"hidden",margin:"0 2px","line-height":linb.browser.ie6?"0":null,clear:"both"},TAILI:{position:"relative","padding-top":"4px",height:"22px","text-align":"center"},SIMPLE:{"float":"left",width:"192px",position:"relative"},ADV:{"float":"right",width:"195px",height:"195px",position:"relative"},"ADV div":{cursor:"crosshair",position:"absolute"},ADVCLR:{background:linb.browser.ie6?null:linb.UI.$bg("bg.png","no-repeat left top"),_filter:linb.UI.$ieBg("bg.png"),height:"101px",left:"47px",top:"47px",width:"101px"},ADVWHEEL:{background:linb.browser.ie6?null:linb.UI.$bg("clr.png","no-repeat left top"),_filter:linb.UI.$ieBg("clr.png"),height:"195px",width:"195px"},"ADVMARK1, ADVMARK2":{background:linb.browser.ie6?null:linb.UI.$bg("picker.png","no-repeat left top"),_filter:linb.UI.$ieBg("picker.png"),height:"17px",margin:"-8px 0pt 0pt -8px",overflow:"hidden",width:"17px"},"LIST span":{height:"12px",width:"10px","font-size":linb.browser.ie6?"0":null,"float":"left",display:"block",overflow:"hidden","text-indent":"100px",margin:"0",cursor:"pointer",border:"1px solid #000",margin:"0 -1px -1px 0"},SET:{position:"absolute",color:"#ff0000",display:"none",top:"0",right:"28px"},TOGGLE:{position:"absolute",right:"6px",top:"4px",display:linb.$inlineBlock,width:"15px",height:"15px",cursor:"default",background:linb.UI.$bg("icons.gif","no-repeat -300px -70px",true),_zoom:1},"TOGGLE-mouseover":{"background-position":"-300px -90px"},"TOGGLE-mousedown":{"background-position":"-300px -110px"},"TOGGLE-adv":{"background-position":"-240px -70px"},"TOGGLE-adv-mouseover":{"background-position":"-240px -90px"},"TOGGLE-adv-mousedown":{"background-position":"-240px -110px"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",SET:"SET",TOGGLE:"TOGGLE"},ClickEffected:{CLOSE:"CLOSE",SET:"SET",TOGGLE:"TOGGLE"},KEY:{onClick:function(){return false}},SC:{onMouseover:function(f,d,c){f.box._setTempUI(f,f.getSubId(c))},onClick:function(g,f,d){var c=g.getSubId(d);g.boxing()._setCtrlValue(g.$tempValue=c,false);if(!g.properties.advance){g.boxing().setUIValue(c)}g.box._vC(g);return false},onDblclick:function(g,f,d){var c=g.getSubId(d);g.boxing()._setCtrlValue(g.$tempValue=c,false);g.boxing().setUIValue(c);g.box._vC(g);return false}},LIST:{onMouseout:function(f,d,c){f.box._updateDftTip(f)}},SET:{onClick:function(d,c,f){d.boxing().setUIValue(d.$tempValue,true);d.box._vC(d)}},CANCEL:{onClick:function(d,c,f){d.getSubNode("CLOSE").onClick(true)}},TOGGLE:{onClick:function(d,c,f){d.boxing().setAdvance(!d.properties.advance)}},R:{onMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0)}},G:{onMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1)}},B:{onMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2)}},HH:{onMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0,"hsv1")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0,true,"hsv1")}},S:{onMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1,"hsv2")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1,true,"hsv2")}},V:{onMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2,"hsv2")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2,true,"hsv2")}},H:{onMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0)}},E:{onMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1)}},X:{onMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2)}},CLOSE:{onClick:function(f,g,h){var d=f.properties,c=f.boxing();if(d.disabled||d.readonly){return}if(false===c.beforeClose(f)){return}c.destroy();return false}},ADVWHEEL:{onMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d,true);f.getSubNode("ADVMARK1").startDrag(d,{dragType:"none"})}},ADVMARK1:{onMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d,true);f.getSubNode("ADVMARK1").startDrag(d,{dragType:"none"})},onDrag:function(f,d,g){var c=f.box;c._updateClrByPos(f,d,true)},onDragstop:function(d,c,f){d.box._updateValueByPos(d,c)},onDblclick:function(d,c,f){d.box._updateValueByPos(d,c);d.boxing().setUIValue(d.$tempValue);d.box._vC(d)}},ADVCLR:{onMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d);f.getSubNode("ADVMARK2").startDrag(d,{dragType:"none"});return false}},ADVMARK2:{onMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d);f.getSubNode("ADVMARK2").startDrag(d,{dragType:"none"});return false},onDrag:function(f,d,g){var c=f.box;c._updateClrByPos(f,d)},onDragstop:function(d,c,f){d.box._updateValueByPos(d,c)},onDblclick:function(d,c,f){d.box._updateValueByPos(d,c);d.boxing().setUIValue(d.$tempValue);d.box._vC(d)}}},_vC:function(e){var g=e.properties,c=g.$UIvalue,f=c==e.$tempValue;e.getSubNode("SET").css("display",f?"none":"block");e.getSubNode("CAPTION").css("color",f?"#000":"#ff0000")},_prepareData:function(d){var e=arguments.callee.upper.call(this,d);var c="display:none";e.classBar=e.barDisplay?"uibar-top":"uibar-top-s";e.closeDisplay=e.closeBtn?"":c;e._width=e.advance?"410":"210";e.advDispay=e.advance?"":"display:none;";return e},EventHandlers:{beforeClose:function(c,d){}},RenderTrigger:function(){this.$onValueSet=this.$onValueUpdated=function(c){this.box._setClrName(this,c)}},_setClrName:function(e,d){var g=e,c="color.LIST.",f=linb.getRes(c+d);if(f==d){g.$clrN2=g.$clrN="#"+d}else{g.$clrN=f;g.$clrN2=linb.wrapRes(c+d)}},_slist:"FFFFFF,FFFFF0,FFFFE0,FFFF00,FFFAFA,FFFAF0,FFFACD,FFF8DC,FFF5EE,FFF0F5,FFEFD5,FFEBCD,FFE4E1,FFE4C4,FFE4B5,FFDEAD,FFDAB9,FFD700,FFC0CB,FFB6C1,FFA500,FFA07A,FF8C00,FF7F50,FF69B4,FF6347,FF4500,FF1493,FF00FF,FF00FF,FF0000,FDF5E6,FAFAD2,FAF0E6,FAEBD7,FA8072,F8F8FF,F5FFFA,F5F5F5,F5DEB3,F4A460,F0FFFF,F0FFF0,F0F8FF,F0E68C,F08080,EEE8AA,EE82EE,E9967A,E6E6FA,E1FFFF,DEB887,DDA0DD,DCDCDC,DC143C,DB7093,DAA520,DA70D6,D8BFD8,D3D3D3,D2B48C,D2691E,CD853F,CD5C5C,C71585,C0C0C0,BDB76B,BC8F8F,BA55D3,B22222,B0E0E6,B0C4DE,AFEEEE,ADFF2F,ADD8E6,A9A9A9,A52A2A,A0522D,9932CC,98FB98,9400D3,9370DB,90EE90,8FBC8F,8B4513,8B008B,8B0000,8A2BE2,87CEFA,87CEEB,808080,808000,800080,800000,7FFFAA,7FFF00,7CFC00,7B68EE,778899,708090,6B8E23,6A5ACD,696969,6495ED,5F9EA0,556B2F,4B0082,48D1CC,483D8B,4682B4,4169E1,40E0D0,3CB371,32CD32,2F4F4F,2E8B57,228B22,20B2AA,1E90FF,191970,00FFFF,00FFFF,00FF7F,00FF00,00FA9A,00CED1,00BFFF,008B8B,008080,008000,006400,0000FF,0000CD,00008B,000080,000000".split(","),_C16:"0123456789ABCDEF",_dd1:function(g,k,l,d){if(linb.Event.getBtn(k)!="left"){return}var i=g.properties,c=g.box,h=function(){var e=c.hex2rgb(g.$tempValue||i.$UIvalue);return d?c.rgb2hsv(e):e};linb.use(l).css("backgroundColor","red").startDrag(k,{dragType:"blank",targetReposition:false,widthIncrement:2,dragCursor:true});g.$temp=0;g.$start=h();g.$temp2=h()},_dd2:function(h,n,c,k,q){var l,g=linb.DragDrop.getProfile().offset,d=h.properties,f=h.$temp2,s=h.box,m=q=="hsv1"?361:q=="hsv2"?101:256,r;l=(q=="hsv2"?parseInt(h.$start[k]*100):parseInt(h.$start[k]))+parseInt(g.x/2);l=(l%m+m)%m;if(h.$temp!=l){f[k]=h.$temp=q=="hsv2"?l/100:l;r=(q=="hsv1"||q=="hsv2")?s.hsv2rgb(f):f;r=s.rgb2hex(r);s._setTempUI(h,r);linb.use(c).text(q=="hex"?s._toFF(l):l)}},_dd3:function(g,l,c,h,k){if(g.$start[h]!==g.$temp){var d=g.properties,n=g.box,f=g.$start,m;f[h]=g.$temp;m=k?n.hsv2rgb(f):f;m=n.rgb2hex(m);if(k){g.$hexinhsv=m}g.boxing()._setCtrlValue(g.$tempValue=m,false);delete g.$hexinhsv;g.box._vC(g)}linb.use(c).css("backgroundColor","");g.$temp=g.$start=0},_setTempUI:function(k,e){var d=this,g=d.hex2rgb(e),c=k.boxing(),h=c.getSubNode("EXAMI"),f=d.rgb2hsv(g),i=linb.getRes("color.LIST."+e);h.css({backgroundColor:"#"+e,color:f[2]>0.6?"#000":"#FFF"});h.text(k.show_color=i==e?"#"+e:i)},_updateDftTip:function(e){var c=e.box,d=e.boxing().getSubNode("EXAMI");d.css({backgroundColor:"#"+e.$hex.join(""),color:e.$hsv[2]>0.6?"#000":"#FFF"});d.html(e.$clrN2||"",false)},_to3:function(c){if(!c){c="FFFFFF"}return[c.substr(0,2),c.substr(2,2),c.substr(4,2)]},_toFF:function(d){var c=this._C16;d=parseInt(d)||0;d=(d>255||d<0)?0:d;return c.charAt((d-d%16)/16)+c.charAt(d%16)},_to255:function(e){var d=this._C16,c=e.split("");return d.indexOf(c[0].toUpperCase())*16+d.indexOf(c[1].toUpperCase())},_webSafe:function(h,e,c){var d=arguments.callee,i=d.f||(d.f=function(f){return parseInt(f/51)*51});if(typeof h=="object"){e=h[1];c=h[2];h=h[0]}return[i(h),i(e),i(c)]},_updateMarks:function(d,c,i,h){var m=this,g=m.hex2rgb(c),f=m.rgb2hsv(g),e=(f[0]/360)*6.28,n=d.getSubNode("ADVCLR");if(i){var l=d.getSubNode("ADVMARK1"),k=d.getSubNode("ADVMARK2");l.cssPos({left:Math.round(Math.sin(e)*m._radius+m._bigRadius),top:Math.round(-Math.cos(e)*m._radius+m._bigRadius)});k.cssPos({left:Math.round(m._square*(f[1]-0.5)+m._bigRadius),top:Math.round(m._square*(0.5-f[2])+m._bigRadius)})}if(h!==undefined){n.css("backgroundColor","#"+m.rgb2hex(m.hsv2rgb([h,1,1])))}m._setTempUI(d,c)},_updateClrByPos:function(f,m,n){var y=this,i=linb.Event.getPos(m),q=f.$tpos,d=i.left-q.left,r=i.top-q.top,g,x,w,l,z,u,k,p,c;if(n){x=f.getSubNode("ADVMARK1");g=Math.atan2(d,-r);x.cssPos({left:Math.round(Math.sin(g)*y._radius+y._bigRadius),top:Math.round(-Math.cos(g)*y._radius+y._bigRadius)});l=Math.floor((g/6.28)*360);if(l<0){l+=360}k=[l,f.$hsv[1],f.$hsv[2]];p=y.hsv2rgb(k);c=y.rgb2hex(p);y._updateMarks(f,f.$t_hex=c,false,l)}else{w=f.getSubNode("ADVMARK2");z=Math.max(0,Math.min(1,(d/y._square)+0.5));u=Math.max(0,Math.min(1,0.5-(r/y._square)));w.cssPos({left:Math.round(y._square*(z-0.5)+y._bigRadius),top:Math.round(y._square*(0.5-u)+y._bigRadius)});k=[f.$hsv[0],z,u];p=y.hsv2rgb(k);c=y.rgb2hex(p);y._updateMarks(f,f.$t_hex=c)}},_updateValueByPos:function(c,d){c.$hexinadv=c.$t_hex;c.boxing()._setCtrlValue(c.$tempValue=c.$t_hex,false);delete c.$hexinadv;c.box._vC(c)},_prepareAdv:function(d,f){var c=this,g=d.getSubNode("ADVWHEEL").offset();d.$tpos={left:g.left+c._bigRadius,top:g.top+c._bigRadius}},_ensureValue:function(e,n){var l=this,h=arguments.callee,c=h.map||(h.map=(function(){var i={};_.arr.each(l._C16.split(""),function(p,k){i[p]=1});return i}())),d=h._r||(h._r=/rgb\(([^)]*)\)/);if(!n||typeof n!="string"){return"FFFFFF"}if(d.test(n)){n=n.replace(d,"$1");n=n.split(",");n[0]=parseInt(n[0])||0;n[1]=parseInt(n[1])||0;n[2]=parseInt(n[2])||0;n=l.rgb2hex(n)}if(n.charAt(0)=="#"){n=n.substr(1,n.length)}var m="",f;for(var g=0;g<6;g++){f=n.charAt(g).toUpperCase();m+=(c[f]?f:"F")}return m},hsv2rgb:function(n,B,z){if(n instanceof Array){B=n[1];z=n[2];n=n[0]}var x=arguments.callee,w=x.f||(x.f=function(f){return Math.min(255,Math.round(f*256))}),c,u,y,m,l,e,d,A;if(B==0){return[z=w(z),z,z]}else{m=Math.floor((n/60)%6);l=(n/60)-m;e=z*(1-B);d=z*(1-l*B);A=z*(1-(1-l)*B);switch(m){case 0:c=z;u=A;y=e;break;case 1:c=d;u=z;y=e;break;case 2:c=e;u=z;y=A;break;case 3:c=e;u=d;y=z;break;case 4:c=A;u=e;y=z;break;case 5:c=z;u=e;y=d;break}return B==0?[z=w(z),z,z]:[w(c),w(u),w(y)]}},rgb2hsv:function(c,f,i){if(c instanceof Array){f=c[1];i=c[2];c=c[0]}c=c/255;f=f/255;i=i/255;var d=Math.min(c,f,i),k=Math.max(c,f,i),l=k-d,n=(k===0)?0:1-(d/k),m=k,e;switch(k){case d:e=0;break;case c:e=60*(f-i)/l;if(f<i){e+=360}break;case f:e=(60*(i-c)/l)+120;break;case i:e=(60*(c-f)/l)+240;break}return[Math.round(e),n,m]},rgb2hex:function(f,e,c){var d=this;if(f instanceof Array){e=f[1];c=f[2];f=f[0]}return d._toFF(f)+d._toFF(e)+d._toFF(c)},hex2rgb:function(d){var c=this;if(!d){d="FFFFFF"}if(d.charAt(0)=="#"){d=d.slice(1)}return[c._to255(d.substr(0,2)),c._to255(d.substr(2,2)),c._to255(d.substr(4,2))]},getTextColor:function(d){var c=this;d=c._ensureValue(0,d);d=c.hex2rgb(d);d=c.rgb2hsv(d);return(d&&d[2])>0.6?"#000000":"#FFFFFF"},_onresize:function(){}}});Class("linb.UI.DatePicker",["linb.UI","linb.absValue"],{Dependency:["linb.Date"],Instance:{activate:function(){this.getSubNode("PRE").focus();return this},_setCtrlValue:function(c){return this.each(function(e){if(!e.renderId){return}var d=e.box,f=e.properties;d._to(e,c,true);if(e.keys.CAPTION){e.getSubNode("CAPTION").html(linb.Date.getText(c,"ymd"),false)}})},getDateFrom:function(){return this.get(0)._realstart}},Initialize:function(){var q=this,r=linb.UI.$ID,E=linb.UI.$tag_special,c=linb.UI.$CLS,p=c+"-td-free",F=q.KEY;q.addTemplateKeys(["H","COL","W","TBODY","TD"]);var m='<colgroup id="'+F+"-COL:"+r+'"  class="'+E+"COL_CS"+E+'"  style="'+E+"COL_CS"+E+'"><col width="2%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/></colgroup>',e='<thead><tr height="1%"><th id="'+F+"-H:"+r+':7" class="'+c+"-h "+E+"H_CC"+E+'" style="'+E+"H_CS"+E+'"></th>',d="</tr></thead>",h='<th id="'+F+"-H:"+r+':@" class="'+c+"-h "+E+"H_CC"+E+'"  style="'+E+"H_CS"+E+'">@</th>',x='<tbody id="'+F+"-TBODY:"+r+':"  class="'+E+"TBODY_CS"+E+'"  style="'+E+"TBODY_CS"+E+'" >',u="</tbody>",D="<tr>",B="</tr>",g='<th id="'+F+"-W:"+r+':@"  class="'+c+"-w "+E+"W_CC"+E+'"  style="'+E+"W_CS"+E+'">@</th>',f='<td id="'+F+"-TD:"+r+':@" class="'+c+"-td ! "+E+"TD_CC"+E+'"  style="'+E+"TD_CS"+E+'" '+linb.$IEUNSELECTABLE+" ></td>",n,z,y,w,s,C=[],A=[];for(z=0;z<7;z++){A[A.length]=h.replace(/@/g,z)}w=s=0;for(z=0;z<48;z++){y=z%8;C[C.length]=(y==0?D:"")+(y==0?g:f).replace(/@/g,y==0?s:w).replace("!",(y==1||y==7)?p:"")+(y==7?B:"");if(y!==0){w++}else{s++}}n=m+e+A.join("")+d+x+C.join("")+u;q.setTemplate({tagName:"div",style:"{_style};height:auto;",onselectstart:"return false",BORDER:{tagName:"div",BAR:{tagName:"div",className:"uibar-top",style:"{barDisplay};",BART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",className:"uibar-t",tagName:"table",BARTR:{tagName:"tr",BARTDL:{tagName:"td",className:"uibar-tdl"},BARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}},BARCMDL:{tagName:"div",className:"uibar-cmdl",PRE2:{$order:0,tabindex:"{tabindex}"},PRE:{$order:1,tabindex:"{tabindex}"},YEAR:{$order:2,className:"ui-draggable"},YTXT:{$order:3,text:"-"},MONTH:{$order:4,className:"ui-draggable"},MTXT:{$order:5,text:"-"},DAY:{$order:6},NEXT:{$order:7,tabindex:"{tabindex}"},NEXT2:{$order:8,tabindex:"{tabindex}"}},BARCMDR:{tagName:"div",className:"uibar-cmdr",CLOSE:{className:"uicmd-close ",style:"{closeDisplay}"}}},MAIN:{$order:2,tagName:"div",className:"uicon-main",MAINI:{tagName:"div",className:"uicon-maini",CON:{tagName:"div",BODY:{tagName:"table",cellpadding:"0",cellspacing:"0",width:"100%",text:n}}}},TAIL:{$order:3,tagName:"div",className:"uicon-main",TAILI:{tagName:"div",className:"uicon-maini",CAPTION:{tagName:"div",style:"{_nocap}",text:"{caption}",$order:0},TIME:{style:"{_timectrl}",tagName:"div",TPRE2:{$order:0,tabindex:"{tabindex}"},TPRE:{$order:1,tabindex:"{tabindex}"},HOUR:{$order:2,className:"ui-draggable"},MTXT:{$order:3,text:":"},MINUTE:{$order:4,className:"ui-draggable"},TNEXT:{$order:6,tabindex:"{tabindex}"},TNEXT2:{$order:7,tabindex:"{tabindex}"}},TODAY:{tabindex:"{tabindex}"},SET:{className:"ui-btn",SETI:{className:"ui-btni",SETC:{className:"ui-btnc",SETA:{tabindex:"{tabindex}",text:linb.wrapRes("inline.set")}}}}}},BBAR:{$order:4,tagName:"div",className:"uibar-bottom-s",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}}}}})},Static:{Appearances:{KEY:{overflow:"visible"},BORDER:{overflow:"visible",position:"relative"},BODY:{position:"relative"},BARCMDL:{top:"3px"},TAILI:{position:"relative",height:"24px"},TIME:{padding:"2px"},SET:{position:"absolute",display:"none",color:"#ff0000",top:"0",right:"5px"},TODAY:{position:"absolute",top:"3px",left:"0",display:linb.$inlineBlock,width:"16px",height:"16px",cursor:"default",background:linb.UI.$bg("icons.gif","no-repeat right top",true),_zoom:1},"TODAY-mouseover":{"background-position":"right -20px"},"TODAY-mousedown":{"background-position":"right -40px"},"PRE,PRE2,NEXT,NEXT2,TPRE,TPRE2,TNEXT,TNEXT2":{$order:0,display:linb.$inlineBlock,position:"relative",margin:"0 2px",width:"15px",height:"15px","vertical-align":"middle",cursor:"default",background:linb.UI.$bg("icons.gif","no-repeat",true),_zoom:1},"PRE, TPRE":{$order:1,"background-position":"-260px -70px"},"PRE-mouseover, TPRE-mouseover":{$order:2,"background-position":"-260px -90px"},"PRE-mousedown, TPRE-mousedown":{$order:3,"background-position":"-260px -110px"},"PRE2, TPRE2":{$order:1,"background-position":"-240px -70px"},"PRE2-mouseover, TPRE2-mouseover":{$order:2,"background-position":"-240px -90px"},"PRE2-mousedown, TPRE2-mousedown":{$order:3,"background-position":"-240px -110px"},"NEXT, TNEXT":{$order:1,"background-position":"-280px -70px"},"NEXT-mouseover, TNEXT-mouseover":{$order:2,"background-position":"-280px -90px"},"NEXT-mousedown, TNEXT-mousedown":{$order:3,"background-position":"-280px -110px"},"NEXT2, TNEXT2":{$order:1,"background-position":"-300px -70px"},"NEXT2-mouseover, TNEXT2-mouseover":{$order:2,"background-position":"-300px -90px"},"NEXT2-mousedown, TNEXT2-mousedown":{$order:3,"background-position":"-300px -110px"},"YEAR,MONTH,DAY,HOUR,MINUTE":{$order:4,height:"15px","font-weight":"bold","vertical-align":"middle",border:"1px solid #779EBF","background-color":"#F8FBFF","padding-left":"2px",cursor:"e-resize"},YEAR:{width:"32px"},"MONTH, DAY,HOUR, MINUTE":{width:"16px"},CAPTION:{padding:"4px 0 0 0","text-align":"center","font-size":"12px","vertical-align":linb.browser.ie6?"baseline":"middle"},MAINI:{"padding-top":"4px","padding-bottom":"4px"},CON:{"border-left":"solid 1px #648CB4","border-top":"solid 1px #648CB4"},BODY:{overflow:"visible"},"BODY td,BODY th":{$order:1,border:0,"border-right":"solid 1px #648CB4","border-bottom":"solid 1px #648CB4"},"TD .exday":{color:"#C1C1C1"},TD:{"text-align":"center","background-color":"#EFF8FF"},"TD-free":{$order:1,"text-align":"center","background-color":"#F9F7D1"},"TD-mouseover":{$order:3,"background-color":"#d9e8fb"},"TD-checked":{$order:4,"background-color":"#316AC5","font-weight":"bold",color:"#fff"},"W,H":{$order:3,color:"#333333","background-color":"#E8EEF7","vertical-align":"middle","text-align":"center"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",TD:"TD",PRE:"PRE",PRE2:"PRE2",NEXT:"NEXT",NEXT2:"NEXT2",TPRE:"TPRE",TPRE2:"TPRE2",TNEXT:"TNEXT",TNEXT2:"TNEXT2",SET:"SET",TODAY:"TODAY"},ClickEffected:{CLOSE:"CLOSE",TD:"TD",PRE:"PRE",PRE2:"PRE2",NEXT:"NEXT",NEXT2:"NEXT2",TPRE:"TPRE",TPRE2:"TPRE2",TNEXT:"TNEXT",TNEXT2:"TNEXT2",SET:"SET",TODAY:"TODAY"},KEY:{onClick:function(){return false}},TD:{onClick:function(d,h,i){var g=d.properties,k=d.getSubId(i),f=d.$daymap,c=f[k];if(g.disabled||g.readonly){return false}linb.use(i).onMouseout(true,{$force:true});c=linb.Date.add(d.$tempValue,"d",linb.Date.diff(d.$tempValue,c,"d"));d.box._to(d,c);if(!g.timeInput){d.boxing().setUIValue(c)}}},TODAY:{onClick:function(c,d,f){linb.use(f).onMouseout(true,{$force:true});c.boxing().setUIValue(c.properties.timeInput?new Date:linb.Date.getTimSpanStart(new Date,"d",1),true)}},SET:{onClick:function(c,d,f){linb.use(f).onMouseout(true,{$force:true});c.boxing().setUIValue(c.$tempValue,true)}},CLOSE:{onClick:function(d,g,h){var f=d.properties,c=d.boxing();if(f.disabled||f.readonly){return}if(false===c.beforeClose(d,h)){return}c.destroy();return false}},PRE:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,linb.Date.add(c.$tempValue,"m",-1))}},NEXT:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,linb.Date.add(c.$tempValue,"m",1))}},PRE2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,linb.Date.add(c.$tempValue,"y",-1))}},NEXT2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,linb.Date.add(c.$tempValue,"y",1))}},TPRE:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,linb.Date.add(c.$tempValue,"n",-1))}},TNEXT:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,linb.Date.add(c.$tempValue,"n",1))}},TPRE2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,linb.Date.add(c.$tempValue,"h",-1))}},TNEXT2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,linb.Date.add(c.$tempValue,"h",1))}},YEAR:{onMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(c,f,h){var d,g=linb.DragDrop.getProfile().offset;d=parseInt(c.$year)+(c.$temp2=parseInt(g.x/10));if(c.$temp!=d){c.$temp2=c.$temp=d;c.getSubNode("YEAR").html(d,false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"y")}},MONTH:{onMousedown:function(c,d,f){return c.box._ondown(c,d,f,20)},onDrag:function(c,f,h){var d,g=linb.DragDrop.getProfile().offset;d=parseInt(c.$month)+(parseInt(g.x/20)%12);d=(d%12+12)%12;if(c.$temp!=d){c.$temp=d;c.$temp2=d-c.$month+1;c.getSubNode("MONTH").html(((d+1)<=9?"0":"")+(d+1),false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"m")}},DAY:{onMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(d,h,k){var c=new Date(d.$year,d.$month,0),l=c.getDate();var g=d.properties,f,i=linb.DragDrop.getProfile().offset;f=parseInt(d.$day)+(parseInt(i.x/10)%l);f=(f%l+l)%l+1;if(d.$temp!=f){d.$temp=f;d.$temp2=f-d.$day;d.getSubNode("DAY").html((f<=9?"0":"")+f,false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"d")}},HOUR:{onMousedown:function(c,d,f){return c.box._ondown(c,d,f,20)},onDrag:function(c,d,f){return c.box._ondrag(c,20,24,"HOUR",c.$hour)},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"h")}},MINUTE:{onMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(c,d,f){return c.box._ondrag(c,10,60,"MINUTE",c.$minute)},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"n")}}},DataModel:{timeInput:{ini:false,action:function(c){this.getSubNode("CAPTION").css("display",c?"none":"block");this.getSubNode("SET").css("display",c?"block":"none");this.getSubNode("TIME").css("display",c?"block":"none")}},height:{ini:"auto",readonly:true},width:{ini:210,readonly:true},value:new Date,closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}}},EventHandlers:{beforeClose:function(c,d){}},_prepareData:function(e){var f=arguments.callee.upper.call(this,e);var c="display:none";f.closeDisplay=f.closeBtn?"":c;var d="display:none;";if(e.properties.timeInput){f._nocap=d}else{f._timectrl=d}return f},_ensureValue:function(c,e){var f;if(e){if(_.isDate(e)){f=e}else{if(_.isFinite(e)){f=new Date(parseInt(e))}}}f=f||new Date;if(!c.properties.timeInput){f=linb.Date.getTimSpanStart(f,"d")}return f},RenderTrigger:function(){var d=this,e=d.properties,f=d.boxing(),c=d.box;c._setWeekLabel(d)},_getWeekNodes:function(c){return c.$weeks||(c.$weeks=c.getSubNode("W",true))},_getTDNodes:function(c){return c.$tds||(c.$tds=c.getSubNode("TD",true))},_getLabelNodes:function(c){return c.$days||(c.$days=c.getSubNode("TD",true))},_getHeaderNodes:function(c){return c.$header||(c.$header=c.getSubNode("H",true))},_setWeekLabel:function(c){var e=linb.Date,d=c.getSubId;c.box._getHeaderNodes(c).each(function(g,f){g.innerHTML=linb.wrapRes("date.WEEKS."+d(g.id))})},_setBGV:function(g,d,c){var e=linb.Date,i=g.properties,h=g.$daymap||(g.$daymap=[]),f,k;g.box._getLabelNodes(g).each(function(m,l){k=e.add(d,"d",l);h[l]=k;f=e.get(k,"m")==c?"#":'<p class="exday">#</p>';k=e.get(k,"d");m.innerHTML=f.replace("#",k)});g.box._getWeekNodes(g).each(function(m,l){m.innerHTML=e.get(e.add(d,"ww",l),"ww")})},_to:function(h,g,d){var c=h.properties,i=linb.Date,q=h.keys,l=c.$UIvalue,k=-1,f,n,r=i.getTimSpanStart(i.getTimSpanStart(g,"m"),"ww",1),e=i.get(g,"m");h.$tempValue=g;this._setBGV(h,h._realstart=r,e);if(h.$selnode){h.$selnode.tagClass("-checked",false)}_.arr.each(h.$daymap,function(p,m){if(i.get(p,"m")+"-"+i.get(p,"d")==i.get(g,"m")+"-"+i.get(g,"d")){k=m;return false}});f=this._getTDNodes(h).get()[k];(h.$selnode=linb([f]).tagClass("-checked"));h.getSubNode("SET").css("display",(d||l.getTime()==g.getTime())?"none":"block");h.getSubNode("CAPTION").css("color",(d||l.getTime()==g.getTime())?"":"#ff0000");n=i.get(g,"y");if(h.$year!=n){h.$year=n;h.getSubNode("YEAR").html(n,false)}n=i.get(g,"m")+1;if(h.$month!=n){h.$month=n;h.getSubNode("MONTH").html((n<=9?"0":"")+n,false)}n=i.get(g||g,"d");if(h.$day!=n){h.$day=n;h.getSubNode("DAY").html((n<=9?"0":"")+n,false)}n=i.get(g,"h");if(h.$hour!=n){h.$hour=n;h.getSubNode("HOUR").html((n<=9?"0":"")+n,false)}n=i.get(g,"n");if(h.$minute!=n){h.$minute=n;h.getSubNode("MINUTE").html((n<=9?"0":"")+n,false)}},_ondown:function(d,f,g,c){if(linb.Event.getBtn(f)!="left"){return}linb.use(g).startDrag(f,{dragType:"blank",targetReposition:false,widthIncrement:c,dragCursor:true});d.$temp=d.$temp2=0},_ondrag:function(f,d,c,e,h){var i=f.properties,g,k=linb.DragDrop.getProfile().offset;g=parseInt(h)+(parseInt(k.x/d)%c);g=(g%c+c)%c;if(f.$temp!=g){f.$temp=g;f.$temp2=g-h;f.getSubNode(e).html((g<=9?"0":"")+g,false)}},_onds:function(f,h,i,d){if(f.$temp2){var g=f.properties,c=linb.Date.add(f.$tempValue,d,f.$temp2);f.box._to(f,c)}f.$temp=f.$temp2=0},_onresize:function(){}}});Class("linb.UI.TimePicker",["linb.UI","linb.absValue"],{Dependency:["linb.Date"],Instance:{activate:function(){this.getSubNode("PRE").focus();return this},_setCtrlValue:function(c){return this.each(function(h){if(!h.renderId){return}var d=h.boxing(),e=h.box,k=h.properties,i=k.$UIvalue,g=e._v2a(i),f=e._v2a(c);h.$hour=f[0];if(g&&g[1]){e._uncheck(h.getSubNode("MI",g[1]).get(0))}e._check(h.getSubNode("MI",f[1]).get(0));h.getSubNode("HOUR").html(f[0],false);h.getSubNode("CAPTION").html(h.box._showV(h,h.box._v2a(f)),false)})}},Initialize:function(){this.addTemplateKeys(["MI"]);var f=[],e=this._excls,d=this._excls2,k=linb.UI.$ID,h='<span id="'+this.KEY+"-MI:"+k+':@" class="'+e+' !" '+linb.$IEUNSELECTABLE+" >@</span>",g,c;for(g=0;g<60;g++){f[f.length]=h.replace(/@/g,g<10?"0"+g:g).replace("!",(g%5===0)?d:"")}c=f.join("");f.length=0;this.setTemplate({tagName:"div",onselectstart:"return false",style:"{_style};height:auto;",BORDER:{tagName:"div",BAR:{tagName:"div",className:"uibar-top",style:"{barDisplay};",BART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"uibar-t",BARTR:{tagName:"tr",BARTDL:{tagName:"td",className:"uibar-tdl"},BARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}},BARCMDL:{tagName:"div",className:"uibar-cmdl",PRE:{$order:0,tabindex:"{tabindex}"},HOUR:{$order:1,className:"ui-draggable"},NEXT:{$order:3,tabindex:"{tabindex}"}},BARCMDR:{tagName:"div",className:"uibar-cmdr",CLOSE:{className:"uicmd-close ",style:"{closeDisplay}"}}},MAIN:{$order:2,tagName:"div",className:"uicon-main",MAINI:{tagName:"div",className:"uicon-maini",CON:{tagName:"div",text:c}}},TAIL:{$order:3,tagName:"div",className:"uicon-main",TAILI:{tagName:"div",className:"uicon-maini",CAPTION:{text:"{caption}"},SET:{className:"ui-btn",SETI:{className:"ui-btni",SETC:{className:"ui-btnc",SETA:{tabindex:"{tabindex}",text:linb.wrapRes("inline.set")}}}}}},BBAR:{$order:4,tagName:"div",className:"uibar-bottom-s",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}}}}})},Static:{_excls:"linbex-timepicker",_excls2:"linbex-timepicker2",_excls_mo:"linbex-timepicker-mouseover",_excls_c:"linbex-timepicker-checked",_mover:function(d){var c=this,e=d.className;if(e.indexOf(c._excls_mo)==-1){d.className=e+" "+c._excls_mo}d=null},_mout:function(d){var c=this,e=d.className;if(e.indexOf(c._excls_mo)!=-1){d.className=e.replace(c._excls_mo,"")}d=null},_check:function(d){var c=this,e=d.className;if(e.indexOf(c._excls_c)==-1){d.className=e+" "+c._excls_c}c._mout(d);d=null},_uncheck:function(d){var c=this,e=d.className;if(e.indexOf(c._excls_c)!=-1){d.className=e.replace(c._excls_c,"")}d=null},Appearances:{KEY:{},MAINI:{"padding-top":"4px"},CON:{width:"220px","border-left":"solid 1px #648CB4","border-top":"solid 1px #648CB4"},BARCMDL:{top:"3px"},"PRE,NEXT":{position:"relative",margin:"0 2px",width:"15px",height:"15px","vertical-align":"middle",cursor:"default",background:linb.UI.$bg("icons.gif","no-repeat",true),_zoom:1},PRE:{$order:1,display:linb.$inlineBlock,"background-position":"-260px -70px"},"PRE-mouseover":{$order:2,"background-position":"-260px -90px"},"PRE-mousedown":{$order:3,"background-position":"-260px -110px"},NEXT:{$order:1,display:linb.$inlineBlock,"background-position":"-280px -70px"},"NEXT-mouseover":{$order:2,"background-position":"-280px -90px"},"NEXT-mousedown":{$order:3,"background-position":"-280px -110px"},HOUR:{$order:3,margin:"0 2px",height:"15px",width:"16px","font-weight":"bold","vertical-align":"middle",border:"1px solid #779EBF","background-color":"#F8FBFF",cursor:"e-resize","padding-left":"2px"},SET:{position:"absolute",display:"none",color:"#ff0000",top:"1px",right:"5px"},TAILI:{position:"relative","padding-top":"4px",height:"20px","text-align":"center"},CAPTION:{"font-size":"12px","vertical-align":linb.browser.ie6?"baseline":"middle"},".linbex-timepicker2":{$order:1,"background-color":"#FDF8D2"},".linbex-timepicker":{"font-size":"12px","padding-left":"3px",width:"18px",height:"16px","border-right":"1px solid #648CB4","border-bottom":"1px solid #648CB4","background-color":"#F9F9FB"},".linbex-timepicker-mouseover":{$order:2,"background-color":"#d9e8fb"},".linbex-timepicker-checked":{$order:2,"background-color":"#316AC5",color:"#fff"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",PRE:"PRE",NEXT:"NEXT",SET:"SET"},ClickEffected:{CLOSE:"CLOSE",PRE:"PRE",NEXT:"NEXT",SET:"SET"},KEY:{onClick:function(){return false}},HOUR:{onMousedown:function(c,d,f){if(linb.Event.getBtn(d)!="left"){return}linb(f).startDrag(d,{dragType:"blank",targetReposition:false,widthIncrement:5,dragCursor:true});c.$temp2=0},onDrag:function(f,h,k){var g,i=linb.DragDrop.getProfile().offset,d=f.properties.$UIvalue,c=d.split(":");c[0]=(parseFloat(c[0])||0)+parseInt(i.x/10);c[0]=(c[0]%24+24)%24;f.$temp2=(c[0]<=9?"0":"")+c[0];if(d[0]!=f.$temp2){f.getSubNode("HOUR").html(f.$temp2,false)}},onDragstop:function(c,d,f){if(c.$temp2){c.$hour=c.$temp2}c.$temp2=0;c.box._hourC(c)}},SET:{onClick:function(e){var f=e.properties,d=f.$UIvalue,c=d.split(":");c[0]=e.$hour;e.boxing().setUIValue(c.join(":"),true);e.box._hourC(e)}},MI:{onMouseover:function(c,d,f){if(c.properties.disableHover){return}c.box._mover(linb.use(f).get(0))},onMouseout:function(c,d,f){if(c.properties.disableHover){return}c.box._mout(linb.use(f).get(0))},onClick:function(d,f,g){var c=[];c[0]=d.$hour;c[1]=d.getSubId(g);d.boxing().setUIValue(c.join(":"),true);d.box._hourC(d)}},PRE:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$hour;c=(parseFloat(c)||0)-1;c=(c%24+24)%24;d.$hour=c=(c<=9?"0":"")+c;d.getSubNode("HOUR").html(c,false);d.box._hourC(d)}},NEXT:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$hour;c=(parseFloat(c)||0)+1;c=(c%24+24)%24;d.$hour=c=(c<=9?"0":"")+c;d.getSubNode("HOUR").html(c,false);d.box._hourC(d)}},CLOSE:{onClick:function(f,g,h){var d=f.properties,c=f.boxing();if(d.disabled||d.readonly){return}if(false===c.beforeClose(f,h)){return}c.destroy();return false}}},DataModel:{height:{ini:"auto",readonly:true},width:{ini:231,readonly:true},value:"00:00",closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}}},EventHandlers:{beforeClose:function(c,d){}},_hourC:function(f){var h=f.properties,e=h.$UIvalue,c=e.split(":"),g=c[0]==f.$hour;f.getSubNode("SET").css("display",g?"none":"block");f.getSubNode("CAPTION").css("color",g?"":"#ff0000")},_prepareData:function(d){var e=arguments.callee.upper.call(this,d);var c="display:none";e.closeDisplay=e.closeBtn?"":c;return e},_ensureValue:function(e,f){var d,c=[];if(f&&typeof f=="string"){d=f.split(":")}else{if(f&&typeof f=="object"&&_.isArr(f)){d=f}else{d=[]}}c[0]=parseFloat(d[0])||0;c[1]=parseFloat(d[1])||0;if(c[0]<0){c[0]=0}if(c[0]>23){c[0]=23}if(c[1]<0){c[1]=0}if(c[1]>59){c[1]=59}c[0]=(c[0]<=9?"0":"")+c[0];c[1]=(c[1]<=9?"0":"")+c[1];return c.join(":")},formatValue:function(c){return c.join(":")},_v2a:function(c){return typeof c=="string"?c.split(":"):c},_showV:function(d,c){var e=d.CF;if(typeof e.formatCaption=="function"){return e.formatCaption(c)}else{return c.join(":")}},_onresize:function(){}}});Class("linb.UI.List",["linb.UI","linb.absList","linb.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(f){if(!f.renderId){return}var m=f.box,u=f.boxing().getUIValue(),d=f.properties,y=m._ITEMKEY||"ITEM",h=m._DIRTYKEY||"ITEM",i=function(p,z){return f.getSubNode(p,z)},n=function(k){return f.getSubIdByItemId(k)};if(d.selMode=="single"){var s=n(u);if(u!==null&&s){i(h,s).tagClass("-mouseover",false).tagClass("-checked",false)}s=n(c);if(s){i(h,s).tagClass("-mouseover",false).tagClass("-checked")}if(s){var e=i(y,s);if(e){var r=e.offsetTop(),w=e.offsetHeight(),q=i("ITEMS"),l=q.scrollHeight(),x=q.scrollTop(),g=q.height();if(l>g){if(r<x||(r+w)>(x+g)){q.scrollTop(r)}}}}}else{if(d.selMode=="multi"){u=u?u.split(";"):[];c=c?c.split(";"):[];_.arr.each(u,function(k){if(_.arr.indexOf(c,k)==-1){i(h,n(k)).tagClass("-mouseover",false).tagClass("-checked",false)}});_.arr.each(c,function(k){if(_.arr.indexOf(u,k)==-1){i(h,n(k)).tagClass("-mouseover",false).tagClass("-checked")}})}}})},adjustSize:function(){return this.each(function(f){var d=f.getSubNode("ITEMS"),c=f.properties;d.height("auto");var e=Math.min(c.maxHeight,d.offsetHeight());c.height=e;d.height(e);f.getRoot().height(e)})},activate:function(){return linb.absList.prototype.activate.call(this)},getShowValue:function(f){var e=this.get(0),g=e.properties,c,d;if(!_.isDefined(f)){f=g.$UIvalue}if((c=_.arr.subIndexOf(g.items,"id",f))!=-1){c=g.items[c].caption;c=c.charAt(0)=="$"?linb.getRes(c.slice(1)):c}else{c=""}return c},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["ITEMS"])}},Static:{_DIRTYKEY:"ITEM",Templates:{tagName:"div",style:"{_style}",className:"uibg-base {_className}",ITEMS:{$order:10,tagName:"div",className:"{_bordertype}",text:"{items}"},$submap:{items:{ITEM:{className:"{itemClass} {disabled} {readonly}",style:"{itemStyle}{itemDisplay}",tabindex:"{_tabindex}",CHECKBOX:{$order:5,style:"{_cbDisplay}"},ICON:{$order:10,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{tagName:"text",text:"{caption}&nbsp;",$order:20},EXTRA:{text:"{ext}",$order:30}}}}},Appearances:{KEY:{"font-size":"12px"},EXTRA:{display:"none"},ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden"},ITEM:{display:"block",zoom:linb.browser.ie?1:null,"font-family":'"Verdana", "Helvetica", "sans-serif"',border:0,cursor:"pointer","font-size":"12px",padding:"4px 2px",position:"relative"},"ITEM-mouseover, ITEM-mousedown, ITEM-checked":{background:linb.UI.$bg("item.gif","repeat-x")},"ITEM-mouseover":{$order:1,"background-color":"#FAD200","background-position":"left -51px"},"ITEM-mousedown":{$order:2,"background-color":"#F5D22D","background-position":"left -101px"},"ITEM-checked":{$order:2,"background-color":"#AAD2FA","background-position":"left top"},CHECKBOX:{$order:1,cursor:"pointer",width:"16px",height:"16px","vertical-align":"middle",background:linb.UI.$bg("icons.gif","no-repeat -20px -70px",true)},"ITEM-checked CHECKBOX":{$order:2,"background-position":"0 -70px"}},Behaviors:{HoverEffected:{ITEM:"ITEM"},ClickEffected:{ITEM:"ITEM"},DraggableKeys:["ITEM"],DroppableKeys:["ITEM","ITEMS"],onSize:linb.UI.$onSize,ITEM:{onDblclick:function(d,g,h){var c=d.properties,f=d.getItemByDom(h);d.boxing().onDblclick(d,f,h)},onClick:function(d,x,f){var g=d.properties,y=d.getItemByDom(f),l=d.getSubId(f),k=d.boxing(),z=linb.Event.getKey(x),h,m;if(g.disabled||y.disabled){return false}linb.use(f).focus();switch(g.selMode){case"none":h=k.onItemSelected(d,y,f);break;case"multi":if(g.readonly||y.readonly){return false}var p=k.getUIValue(),c=p?p.split(";"):[];if(c.length&&(z.ctrlKey||z.shiftKey||g.noCtrlKey||g.$checkbox)){m=false;if(z.shiftKey){var n=g.items,s=_.arr.subIndexOf(n,"id",d.$firstV.id),q=_.arr.subIndexOf(n,"id",y.id),w;c.length=0;for(w=Math.min(s,q);w<=Math.max(s,q);w++){c.push(n[w].id)}}else{if(_.arr.indexOf(c,y.id)!=-1){_.arr.removeValue(c,y.id)}else{c.push(y.id)}}c.sort();p=c.join(";");if(k.getUIValue()==p){h=false}else{k.setUIValue(p);if(k.get(0)&&k.getUIValue()==p){h=k.onItemSelected(d,y,f)||m}}break}case"single":if(g.readonly||y.readonly){return false}if(k.getUIValue()==y.id){h=false}else{d.$firstV=y;k.setUIValue(y.id);if(k.get(0)&&k.getUIValue()==y.id){h=k.onItemSelected(d,y,f)}}break}var r=linb.use(f).get(0),u=r&&r.href;r=null;return(!u||u.indexOf("javascript:")==0)?false:h},onKeydown:function(f,i,c){var n=linb.Event.getKey(i),m=n[0],d=n[2],l=linb(c),h=f.getRoot().nextFocus(true,true,false),k=f.getRoot().nextFocus(false,true,false);switch(linb.Event.getKey(i)[0]){case"tab":if(d){if(l.get(0)!=h.get(0)){h.focus();return false}}else{if(l.get(0)!=k.get(0)){k.focus();return false}}break;case"left":case"up":var g=l.nextFocus(false,true,false);if(l.get(0)==h.get(0)){k.focus()}else{l.nextFocus(false)}return false;break;case"right":case"down":var g=l.nextFocus(true,false,false);if(l.get(0)==k.get(0)){h.focus()}else{l.nextFocus()}return false;break;case"enter":l.onClick();break}},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f,c.getItemByDom(f))!==false}}}},DataModel:{selMode:{ini:"single",listbox:["single","none","multi"],action:function(c){this.getSubNode("CHECKBOX",true).css("display",c=="multi"?"":"none")}},borderType:{ini:"flat",listbox:["none","flat","inset","outset"],action:function(d){var f=this,i=f.properties,g=f.getSubNode("ITEMS"),e=/^uiborder-/,h="uiborder-",c=f.getRoot();g.removeClass(e);g.addClass(h+d);linb.UI.$tryResize(f,c.get(0).style.width,c.get(0).style.height,true)}},noCtrlKey:true,width:120,height:150,maxHeight:300},EventHandlers:{onDblclick:function(c,d,e){},onItemSelected:function(c,d,e){}},_ensureValue:function(d,e){if(d.properties.selMode=="multi"){var c=(e||"").split(";");c.sort();return c.join(";")}else{return e}},_onStartDrag:function(c,d,f,g){var g=linb.Event.getPos(d);linb.use(f).startDrag(d,{dragType:"icon",shadowFrom:f,targetLeft:g.left+12,targetTop:g.top+12,dragCursor:"pointer",dragDefer:1,dragKey:c.box.getDragKey(c,f),dragData:c.box.getDragData(c,d,f)});return false},_onDropTest:function(d,i,l,c,g,f){var k=g&&g.domId,h=linb.use(l).id();if(k){if(k==h){return false}if(_.get(linb.use(l).get(0),["previousSibling","id"])==k){return false}}},_onDrop:function(g,m,d,n,l,q){linb.DragDrop.setDragIcon("none");var i=g.getKey(linb.use(d).id()),f=l.profile,c=l.domId,h,p=linb.absObj.$specialChars;h=_.clone(f.getItemByDom(c),function(k,e){return !p[(e+"").charAt(0)]});f.boxing().removeItems([h.id]);if(i==g.keys.ITEM){g.boxing().insertItems([h],q.id,true)}else{g.boxing().insertItems([h])}return false},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d._bordertype="uiborder-"+d.borderType;return d},_prepareItem:function(c,d){d._cbDisplay=(c.properties.selMode=="multi")?"":"display:none;"},_onresize:function(f,e,c){var d=f.properties.borderType!="none"?2:0;if(c){f.getSubNode("ITEMS").height(c=="auto"?c:(c-d))}if(e){f.getSubNode("ITEMS").width(e=="auto"?e:(e-d))}}}});Class("linb.UI.Gallery","linb.UI.List",{Instance:{getStatus:function(d){var c=this.get(0).getItemByItemId(d);return(c&&c._status)||"ini"}},Initialize:function(){var c=this.getTemplate();c.$submap={items:{ITEM:{tabindex:"{_tabindex}",className:"{itemClass} {disabled} {readonly}",style:"padding:{itemPadding}px;margin:{itemMargin}px;{itemStyle}",ITEMFRAME:{style:"width:{itemWidth}px;height:{itemHeight}px;",CAPTION:{tagName:"div",text:"{caption}",$order:0},CONTENT:{tagName:"div",$order:1,IBWRAP:{tagName:"div",IMAGE:{tagName:"img",src:"{image}",width:"{imgWidth}",height:"{imgHeight}",style:"{imgStyle}"}}},COMMENT:{tagName:"div",text:"{comment}",$order:2}}}}};this.setTemplate(c)},Static:{Appearances:{KEY:{overflow:"auto","overflow-x":"hidden"},ITEMS:{position:"relative",overflow:"visible",zoom:linb.browser.ie6?1:null},ITEM:{display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,position:"relative",cursor:"pointer","vertical-align":"top",border:"solid 1px #C2E4FC",margin:0},ITEMFRAME:{display:linb.browser.ie?"inline-block":"block",position:"relative",overflow:"hidden",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},IBWRAP:{"font-size":0,"line-height":0},"ITEM-mouseover":{$order:1,padding:0,border:"solid 1px #a0c8f0","background-color":"#e1f0ff"},"ITEM-mousedown":{$order:2,padding:0,border:"solid 1px #dcdcdc","background-color":"#bbcef1"},"ITEM-checked":{$order:2,padding:0,border:"solid 1px #bbcef1","background-color":"#bbcef1"},IMAGE:{display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,"vertical-align":"middle"},"CONTENT, CAPTION":{"text-align":"center",overflow:"hidden","white-space":"nowrap"},CAPTION:{"font-weight":"bold"},COMMENT:{display:"block","font-size":"12px",margin:"0 2px 0 2px","text-align":"center"}},Behaviors:{IMAGE:{onLoad:function(c,f,g){var d=c.getItemByDom(g);d._status="loaded"},onError:function(c,f,g){var d=c.getItemByDom(g);d._status="error"}}},DataModel:({itemMargin:{ini:6,action:function(c){if(typeof c!="object"){this.getSubNode("ITEM",true).css("margin",(""+parseFloat(c))==(""+c)?c+"px":c)}else{this.getSubNode("ITEM",true).css(c)}}},itemPadding:{ini:2,action:function(c){if(typeof c!="object"){this.getSubNode("ITEM",true).css("padding",(""+parseFloat(c))==(""+c)?c+"px":c)}else{this.getSubNode("ITEM",true).css(c)}}},itemWidth:{ini:32,action:function(c){this.getSubNode("ITEMFRAME",true).width(c)}},itemHeight:{ini:32,action:function(c){this.getSubNode("ITEMFRAME",true).height(c)}},imgWidth:{ini:16,action:function(c){this.getSubNode("IMAGE",true).width(c)}},imgHeight:{ini:16,action:function(c){this.getSubNode("IMAGE",true).height(c)}},width:200,height:200}),_prepareItem:function(c,d){var e=c.properties;_.arr.each(_.toArr("itemWidth,itemHeight,imgWidth,imgHeight,itemPadding,itemMargin"),function(f){d[f]=d[f]||e[f]});d.capition=d.capition||"";d.comment=d.comment||"";d._tabindex=e.tabindex},_onresize:function(e,d,c){}}});Class("linb.UI.IconList","linb.UI.List",{Instance:{getStatus:function(d){var c=this.get(0).getItemByItemId(d);return(c&&c._status)||"ini"}},Initialize:function(){var c=this.getTemplate();c.$submap={items:{ITEM:{tabindex:"{_tabindex}",className:"{itemClass} {disabled}  {readonly}",style:"padding:{itemPadding}px;margin:{itemMargin}px;{itemStyle}",IBWRAP:{tagName:"div",IMAGE:{tagName:"img",src:"{image}",width:"{itemWidth}",height:"{itemHeight}",style:"{imgStyle}"}}}}};this.setTemplate(c)},Static:{Appearances:{KEY:{overflow:"auto","overflow-x":"hidden"},ITEMS:{overflow:"auto","overflow-x":"hidden",position:"relative","line-height":"14px",zoom:linb.browser.ie6?1:null},ITEM:{display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,position:"relative",cursor:"pointer",border:"solid 1px #C2E4FC","vertical-align":"top"},IBWRAP:{"font-size":0,"line-height":0},"ITEM-mouseover":{$order:1,padding:0,border:"solid 1px #a0c8f0","background-color":"#e1f0ff"},"ITEM-mousedown":{$order:2,padding:0,border:"solid 1px #dcdcdc","background-color":"#bbcef1"},"ITEM-checked":{$order:2,padding:0,border:"solid 1px #bbcef1","background-color":"#bbcef1"}},Behaviors:{IMAGE:{onLoad:function(c,f,g){var d=c.getItemByDom(g);d._status="loaded"},onError:function(c,f,g){var d=c.getItemByDom(g);d._status="error"}}},DataModel:({itemMargin:{ini:6,action:function(c){if(typeof c!="object"){this.getSubNode("ITEM",true).css("margin",(""+parseFloat(c))==(""+c)?c+"px":c)}else{this.getSubNode("ITEM",true).css(c)}}},itemPadding:{ini:2,action:function(c){if(typeof c!="object"){this.getSubNode("ITEM",true).css("padding",(""+parseFloat(c))==(""+c)?c+"px":c)}else{this.getSubNode("ITEM",true).css(c)}}},itemWidth:{ini:16,action:function(c){this.getSubNode("IMAGE",true).width(c)}},itemHeight:{ini:16,action:function(c){this.getSubNode("IMAGE",true).height(c)}},width:200,height:200}),_prepareItem:function(c,d){var e=c.properties;_.arr.each(_.toArr("itemWidth,itemHeight,itemPadding,itemMargin"),function(f){d[f]=d[f]||e[f]});d._tabindex=e.tabindex}}});Class("linb.UI.Panel","linb.UI.Div",{Instance:{activate:function(d){var e,c=this.constructor;if(e=linb.UI._cache["$"+c.activeWndId]){e.getSubNode("TBAR").tagClass("-focus",false)}delete c.activeWndId;if(d!==false){e=this.get(0);e.getSubNode("TBAR").tagClass("-focus");e.getSubNode("CAPTION").focus();c.activeWndId=e.$linbid}},resetPanelView:function(d){if(!_.isSet(d)){d=true}var c;return this.each(function(e){if(e.renderId){delete e.$ini;c=e.boxing();c.removeChildren(true,d);if(e.properties.toggle){c.setToggle(false)}}})}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",TBAR:{tagName:"div",className:"uibar-top",BART:{cellpadding:"0",cellspacing:"0",width:"100%",height:"100%",border:"0",tagName:"table",className:"uibar-t",BARTR:{tagName:"tr",BARTDL:{tagName:"td",className:"uibar-tdl"},BARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}},BARCMDL:{tagName:"div",className:"uibar-cmdl",TOGGLE:{className:"uicmd-toggle {toggleCls}",style:"{toggleDisplay}",$order:0},ICON:{$order:0,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{tabindex:"{tabindex}",text:"{caption}",$order:1}},BARCMDR:{tagName:"div",className:"uibar-cmdr",OPT:{className:"uicmd-opt",style:"{optDisplay}",$order:1},POP:{className:"uicmd-pop",style:"{popDisplay}",$order:2},REFRESH:{className:"uicmd-refresh",style:"{refreshDisplay}",$order:3},CLOSE:{className:"uicmd-close ",style:"{closeDisplay}",$order:4}}},MAIN:{$order:2,tagName:"div",className:"uicon-main",MAINI:{tagName:"div",className:"uicon-maini",PANEL:{tagName:"div",className:"{_bordertype}",style:"{panelDisplay}",text:"{html}"+linb.UI.$childTag}}},BBAR:{$order:3,tagName:"div",className:"uibar-bottom-s",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}}}}},Appearances:{KEY:{overflow:"hidden",background:"transparent"},"KEY BORDER":{zoom:linb.browser.ie6?1:null},PANEL:{position:"relative",left:0,top:0,overflow:"hidden",zoom:linb.browser.ie6?1:null},CAPTION:{"font-size":"12px",cursor:"pointer",display:"inline","vertical-align":linb.browser.ie6?"baseline":"middle"}},Behaviors:{DroppableKeys:["PANEL"],DraggableKeys:["TBAR"],NoDraggableKeys:["OPT","CLOSE","POP","REFRESH","TOGGLE","CAPTION"],HoverEffected:{OPT:"OPT",CLOSE:"CLOSE",POP:"POP",REFRESH:"REFRESH",TOGGLE:"TOGGLE"},ClickEffected:{CLOSE:"CLOSE",OPT:"OPT",POP:"POP",REFRESH:"REFRESH",TOGGLE:"TOGGLE"},onSize:linb.UI.$onSize,OPT:{onClick:function(c,d,f){c.boxing().onShowOptions(c,d,f)}},REFRESH:{onClick:function(c,d,f){c.boxing().onRefresh(c)}},TOGGLE:{onClick:function(c,d,f){c.box._toggle(c,!c.properties.toggle);return false}},CAPTION:{onClick:function(c,d,f){if(!c.onClickBar||false===c.boxing().onClickBar(c,f)){return linb.Event.getKey(d).shiftKey}}},CLOSE:{onClick:function(f,g,h){var d=f.properties;if(d.disabled){return}var c=f.boxing();if(false===c.beforeClose(f)){return}c.destroy();return false}},POP:{onClick:function(d,g,c){var h=d.properties;if(h.disabled){return}var k=d.getRoot().offset(),m=d.getRoot().cssSize();if(d.beforePop&&false==d.boxing().beforePop(d)){return false}var l=_.copy(linb.UI.Dialog.$DataStruct);_.merge(l,h,"with");_.merge(l,{dock:"none",width:Math.max(m.width,200),height:Math.max(m.height,100),left:k.left,top:k.top},"all");var i=new linb.UI.Dialog(l),f=[];linb("body").append(i);_.arr.each(d.children,function(e){f.push(e[0])});i.append(linb.UI.pack(f,false));d.boxing().destroy();return false}}},DataModel:{position:"absolute",zIndex:0,dock:"fill",iframeAutoLoad:"",ajaxAutoLoad:"",caption:{ini:undefined,action:function(c){this.getSubNode("CAPTION").get(0).innerHTML=c}},image:{action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage","url("+(c||"")+")")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}},html:{action:function(c){this.getSubNode("PANEL").html(c)}},toggle:{ini:true,action:function(c){this.box._toggle(this,c)}},optBtn:{ini:false,action:function(c){this.getSubNode("OPT").css("display",c?"":"none")}},toggleBtn:{ini:false,action:function(c){this.getSubNode("TOGGLE").css("display",c?"":"none")}},closeBtn:{ini:false,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}},refreshBtn:{ini:false,action:function(c){this.getSubNode("REFRESH").css("display",c?"":"none")}},popBtn:{ini:false,action:function(c){this.getSubNode("POP").css("display",c?"":"none")}},borderType:{ini:"inset",listbox:["none","flat","inset","outset"],action:function(d){var f=this,i=f.properties,g=f.getSubNode("PANEL"),e=/^uiborder-/,h="uiborder-",c=f.getRoot();g.removeClass(e);g.addClass(h+d);linb.UI.$tryResize(f,c.get(0).style.width,c.get(0).style.height,true)}}},EventHandlers:{onRefresh:function(c){},beforePop:function(c){},beforeClose:function(c){},onIniPanelView:function(c){},beforeFold:function(c){},beforeExpend:function(c){},afterFold:function(c){},afterExpend:function(c){},onShowOptions:function(c,d,f){},onClickBar:function(c,d){}},LayoutTrigger:function(){var d=this,e=d.properties,c=d.box;if(e.toggle){c._toggle(d,e.toggle)}},_prepareData:function(d){var e=arguments.callee.upper.call(this,d);var c="display:none";e.panelDisplay=e.toggle?"":c;e.toggleCls=e.toggle?"uicmd-toggle-checked":"";e.toggleDisplay=e.toggleBtn?"":c;e.optDisplay=e.optBtn?"":c;e.closeDisplay=e.closeBtn?"":c;e.popDisplay=e.popBtn?"":c;e.refreshDisplay=e.refreshBtn?"":c;e._bordertype="uiborder-"+e.borderType;d._toggle=!!e.toggle;return e},_onresize:function(d,c,n){var m={},l=d.getSubNode("TBAR"),k=d.getSubNode("PANEL"),i=d.getSubNode("BBAR"),g=d.getSubNode("MAIN"),f=d.getSubNode("MAINI"),q=d.properties.borderType=="none"?0:2,h,e,p;if(n){if(n=="auto"){m.height=n}else{h=l.height(),e=i.height();if((p=n-h-e)>0){m.height=p-q}}}if(c){m.width=c-(parseInt(f.css("paddingRight"))||0)-(parseInt(g.css("paddingLeft"))||0)-k._borderW()}k.cssSize(m,true)},_toggle:function(d,e){var g=d.properties,c=d.boxing();if(e&&!d.$ini){if(c.onIniPanelView){if(c.onIniPanelView(d)!==false){d.$ini=true}if(g.iframeAutoLoad){c.getSubNode("PANEL").css("overflow","hidden");if(typeof g.iframeAutoLoad=="string"){g.iframeAutoLoad={url:g.iframeAutoLoad}}var f=g.iframeAutoLoad,h=document.createElement("iframe");h.name="diframe:"+_();h.id=h.name;h.src=f.url;h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";c.append(h);linb.Dom.submit(f.url,f.query,f.method,h.name,f.enctype)}else{if(g.ajaxAutoLoad){if(typeof g.ajaxAutoLoad=="string"){g.ajaxAutoLoad={url:g.ajaxAutoLoad}}var f=g.ajaxAutoLoad;c.busy();linb.Ajax(f.url,f.query,function(i){var k=linb.create("div");k.html(i,false,true);c.append(k.children());c.free()},function(i){c.append("<div>"+i+"</div>");c.free()},null,f.options).start()}}}}if(d._toggle!==!!e){d._toggle=g.toggle=!!e;if(e){if(c.beforeExpend&&false===c.beforeExpend(d)){return}}else{if(c.beforeFold&&false===c.beforeFold(d)){return}}d.getSubNode("PANEL").css("display",e?"":"none");if(g.toggleBtn){d.getSubNode("TOGGLE").tagClass("-checked",!!e)}if(e){if(c.afterExpend){c.afterExpend(d)}}else{if(c.afterFold){c.afterFold(d)}}}}}});Class("linb.UI.PageBar",["linb.UI","linb.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(g){if(!g.renderId){return}var l,e=g.properties,d=g.box._v2a(c),s=d[0],f=d[1],x=d[2],m=g.keys,y=function(A,z){return A.getSubNode(z)},h=y(g,"FIRST"),p=y(g,"PREV"),n=y(g,"PREM"),r=y(g,"CUR"),q=y(g,"NEXT"),u=y(g,"NEXTM"),i=y(g,"LAST"),k=function(C,B,A,z){if(B){C.first(3).attr("href",e.uriTpl.replace("*",B))}if(_.isSet(A)){C.first(3).html(e.textTpl.replace("*",A),false)}if(_.isSet(z)){C.get(0)._real_page=z}},w=function(A,z){A.css("display",z?"":"none")};k(h,s,s);k(n,"",".."+_.str.repeat(".",String(f-1-s).length),1);k(p,f-1,e.prevMark);k(r,f,f);k(q,f+1,e.nextMark);k(u,"",".."+_.str.repeat(".",String(x-f-1).length),1);k(i,x,x);if((l=f-s)<=0){w(h,0);w(n,0);w(p,0)}else{if(l==1){w(h,1);w(n,0);w(p,0)}else{if(l==2){w(h,1);w(n,0);w(p,1);k(p,f-1,f-1)}else{w(h,1);w(n,1);w(p,1);if(l==3){k(p,f-1,f-1);k(n,f-2,f-2,0)}}}}if((l=x-f)<=0){w(i,0);w(u,0);w(q,0)}else{if(l==1){w(i,1);w(u,0);w(q,0)}else{if(l==2){w(i,1);w(u,0);w(q,1);k(q,f+1,f+1)}else{w(i,1);w(u,1);w(q,1);if(l==3){k(q,f+1,f+1);k(u,f+2,f+2,0)}}}}})},setPage:function(c){return this.each(function(f){var e=f.properties.value,d=e.split(":");d[1]=parseInt(c)||d[0];f.boxing().setValue(d.join(":"))})}},Static:{Templates:{style:"{_style}",className:"{_className}",POOL:{style:"position:absolute;display:none;",POP:{tagName:"div",className:"uibg-base"}},LABEL:{text:"{caption}"},FIRST:{$order:1,className:"ui-btn",FIRSTI:{className:"ui-btni",FIRSTC:{className:"ui-btnc",FIRSTA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}},PREM:{$order:2,className:"ui-btn",PREMI:{className:"ui-btni",PREMC:{className:"ui-btnc",PREMA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}},PREV:{$order:3,className:"ui-btn",PREVI:{className:"ui-btni",PREVC:{className:"ui-btnc",PREVA:{tagName:"a",href:"#",tabindex:"{tabindex}",text:"{prevMark}"}}}},CUR:{$order:4,className:"ui-btn ui-btn-focus",CURI:{className:"ui-btni",CURC:{className:"ui-btnc",CURA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}},NEXT:{$order:5,className:"ui-btn",NEXTI:{className:"ui-btni",NEXTC:{className:"ui-btnc",NEXTA:{tagName:"a",href:"#",tabindex:"{tabindex}",text:"{nextMark}"}}}},NEXTM:{$order:6,className:"ui-btn",NEXTMI:{className:"ui-btni",NEXTMC:{className:"ui-btnc",NEXTMA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}},LAST:{$order:7,className:"ui-btn",LASTI:{className:"ui-btni",LASTC:{className:"ui-btnc",LASTA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}}},Appearances:{LABEL:{"font-size":"12px",padding:"3px 6px 0 6px","vertical-align":"top","white-space":"nowrap"},KEY:{display:"inline",overflow:"visible"},"KEY a:focus, POP a:focus":{"outline-offset":"","-moz-outline-offset":""},"KEY .ui-btn, POP .ui-btn":{"margin-right":"3px"},"KEY .ui-btn a, POP .ui-btn a":{padding:"0 3px 0 3px"},"PREV,CUR,NEXT":{"font-weight":"bold"},POP:{border:"dotted 1px gray",background:"#fff",position:"absolute",padding:"3px","line-height":"26px"}},Behaviors:{HoverEffected:{FIRST:"FIRST",PREM:"PREM",PREV:"PREV",NEXT:"NEXT",NEXTM:"NEXTM",LAST:"LAST",POPI:"POPI",CUR:"CUR"},ClickEffected:{FIRST:"FIRST",PREM:"PREM",PREV:"PREV",NEXT:"NEXT",NEXTM:"NEXTM",LAST:"LAST",POPI:"POPI",CUR:"CUR"},POP:{onClick:function(c,f,h){var g=linb(h),d=linb.Event.getSrc(f);g.setBlurTrigger(c.key+":"+c.$linbid,null);c.getSubNode("POOL").append(g);if(d.tagName.toLowerCase()=="a"||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))){return c.box._click(c,d.parentNode.parentNode.parentNode)}}},FIRST:{onClick:function(c,d,f){return c.box._click(c,f)}},PREM:{onClick:function(c,d,f){if(linb.use(f).get(0)._real_page){c.box._show(c,d,f,0);return false}else{return c.box._click(c,f)}}},PREV:{onClick:function(c,d,f){return c.box._click(c,f)}},CUR:{onClick:function(c,d,f){return c.box._click(c,f)}},NEXT:{onClick:function(c,d,f){return c.box._click(c,f)}},NEXTM:{onClick:function(c,d,f){if(linb.use(f).get(0)._real_page){c.box._show(c,d,f,1);return false}else{return c.box._click(c,f)}}},LAST:{onClick:function(c,d,f){return c.box._click(c,f)}}},DataModel:{dataField:null,dataBinder:null,caption:{ini:" Page: ",action:function(c){this.getSubNode("LABEL").html(c)}},value:"1:1:1",uriTpl:"#*",textTpl:"*",prevMark:"&lt;",nextMark:"&gt;",_moreStep:100},EventHandlers:{onClick:function(c,d){}},_ensureValue:function(f,g){var e=g.split(":"),c=[],d=function(h){return parseInt(h)||1};c[0]=d(e[0]);c[1]=d(e[1]);c[2]=d(e[2]);c[0]=Math.max(c[0],1);c[0]=Math.min(c[0],c[1]);c[2]=Math.max(c[1],c[2]);return c.join(":")},_v2a:function(c){c=typeof c=="string"?c.split(":"):c;c[0]=parseInt(c[0]);c[1]=parseInt(c[1]);c[2]=parseInt(c[2]);return c},_click:function(f,h){var c=f.boxing(),e=c.getValue(),d=e.split(":");var g=c.onClick(f,parseInt(linb(h).first(3).attr("href").split("#")[1])||d[0]);return typeof g=="boolean"?g:false},_show:function(k,D,p,C){var f=k.properties,c=k.box._v2a(f.value),z=c[0],h=c[1],B=c[2],s=k.keys,E=function(i,e){return i.getSubNode(e)},u=E(k,"POOL"),q=E(k,"POP"),d=function(e){return Math.ceil((e+1)/10)*10},F=[],r,x,w,A,y;if(C){if((r=B-1-h)<=0){return}w=h+1;y=B}else{if((r=h-1-z)<=0){return}w=1;y=h-1}x=Math.ceil(r/f._moreStep);if(x>10){w=d(w);y=d(y)-1;x=d(x)}else{w=w+x}var g=k.keys.POPI+":"+k.serialId+":";while(w<y){F.push('<span style="margin-top:3px;" id="'+g+w+'" class="ui-btn"><span class="ui-btni"><span class="ui-btnc"><a href="'+f.uriTpl.replace("*",w)+'">'+f.textTpl.replace("*",w)+"</a></span></span></span>");w=w+x}q.width("auto");q.html(F.join(" "));linb("body").append(q);if(q.width()>300){q.width(300)}q.popToTop(p);q.setBlurTrigger(k.key+":"+k.$linbid,function(){u.append(q)})}},Initialize:function(){this.addTemplateKeys(["POPI"])}});Class("linb.UI.Tabs",["linb.UI","linb.absList","linb.absValue"],{Instance:{_setCtrlValue:function(c){this.each(function(f){var d=f.domId,m=f.boxing(),r=m.getUIValue(),e=f.properties,n=f.getSubIdByItemId(r),x,u,w;if(r&&f.getSubIdByItemId(r)){f.getSubNodes(["ITEM","BOX"],n).tagClass("-checked",false);if(!e.noPanel){m.getPanel(r).css("display","none")}}n=f.getSubIdByItemId(c);x=f.getItemByItemId(c);if(n){_.tryF(f.box._adjustScroll,[f,c],f.box);f.getSubNodes(["ITEM","BOX"],n).tagClass("-checked");if(!e.noPanel){m.getPanel(c).css("display","block");w=f.getRootNode().style;linb.UI.$tryResize(f,w.width,w.height,true,c);w=null;if(e.lazyAppend){var l=f.children,q=[];_.arr.each(l,function(i){if(i[1]==c&&!i[0]["parent:"+f.$linbid]){q.push(i[0]);i[0]["parent:"+f.$linbid]=1}});if(q.length){m.append(linb.UI.pack(q),c)}if(f.$attached){for(var k=0,s;s=f.$attached[k++];){if(s._render){s._render(true)}}delete f.$attached}l=f.exchildren;if(l&&l.length){q=[];_.arr.filter(l,function(i){if(i[1]==c){q.push(i[0]);return false}});if(q.length){_.arr.each(q,function(i){m.append(linb(i),c)})}}l=f.excoms;if(l&&l.length){q=[];_.arr.filter(l,function(i){if(i[1]==c){q.push(i[0]);return false}});if(q.length){_.arr.each(q,function(i){i.show(null,m,c,false)})}}}if(!x._$ini){if(m.onIniPanelView){if(m.onIniPanelView(f,x)!==false){x._$ini=true}if(x.iframeAutoLoad){m.getPanel(x.id).css("overflow","hidden");if(typeof x.iframeAutoLoad=="string"){x.iframeAutoLoad={url:x.iframeAutoLoad}}var h=x.iframeAutoLoad,g=document.createElement("iframe");g.name="diframe:"+_();g.id=g.name;g.src=h.url;g.frameBorder="0";g.marginWidth="0";g.marginHeight="0";g.vspace="0";g.hspace="0";g.allowTransparency="true";g.width="100%";g.height="100%";m.getPanel(x.id).append(g);linb.Dom.submit(h.url,h.query,h.method,g.name,h.enctype)}else{if(x.ajaxAutoLoad){if(typeof x.ajaxAutoLoad=="string"){x.ajaxAutoLoad={url:x.ajaxAutoLoad}}var h=x.ajaxAutoLoad;m.busy(null,null,"PANEL",f.getSubIdByItemId(x.id));linb.Ajax(h.url,h.query,function(i){var p=linb.create("div");p.html(i,false,true);m.getPanel(x.id).append(p.children());m.free()},function(i){m.getPanel(x.id).append("<div>"+i+"</div>");m.free()},null,h.options).start()}else{if(x.html){m.getPanel(x.id).append(x.html)}}}}}}}})},append:function(e,c){var d=this.get(0).properties;if(c=c||d.$UIvalue||d.value){arguments.callee.upper.call(this,e,c)}return this},getCurPanel:function(){var c=this.get(0);return this.getPanel(c.properties.$UIvalue)},getPanel:function(c){var d=this.get(0);return d.getSubNodeByItemId("PANEL",c)},addPanel:function(d,h,k){var g={},l=k&&k.id,e=this.getItems(),f=d.id||d.tag;if(e.length){if(-1!=_.arr.subIndexOf(e,"id",f)){return false}if(!l){l=e[e.length-1].id}}_.merge(g,{caption:d.caption,image:d.image,closeBtn:d.closeBtn||false,popBtn:d.popBtn||false,optBtn:d.optBtn||false,imagePos:d.imagePos,dragKey:d.dragKey,dropKeys:d.dropKeys,id:d.id||d.tag||_.id()});this.insertItems([g],l);var c=[];_.arr.each(h,function(i){c.push(i[0])});this.append(linb.UI.pack(c,false),g.id);return this},removePanel:function(e){var c=this,d=c.getItemByDom(e);return c.removeItems([d.id])},getPanelPara:function(g){var e=this.get(0),d=e.properties,f=e.getItemByDom(g),c=_.clone(f);if(!c.dragKey){c.dragKey=d.dragKey}if(!c.dropKeys){c.dropKeys=d.dropKeys}return c},getPanelChildren:function(e){var d=this.get(0),f=d.getItemIdByDom(e),c=[];if(f){_.arr.each(d.children,function(g){if(g[1]==f){c.push(g)}})}return c},fireItemClickEvent:function(c){this.getSubNodeByItemId("ITEM",c).onMousedown();return this},_afterInsertItems:function(f,h){if(!f.renderId){return}var g=f.box,i,d,c=f.properties;if(i=f.getSubNode(f.keys.BOX||f.keys.KEY)){i.append(f._buildItems("panels",h));if(!c.hasOwnProperty("noPanel")){if(!(d=this.getUIValue())){this.fireItemClickEvent((d=c.items[0])&&(d=d.id))}var e=f.getRootNode().style;linb.UI.$tryResize(f,e.width,e.height,true,d);e=null}}},removeItems:function(c){var d=this,f,e;if(!_.isArr(c)){c=[c]}d.each(function(g){if(!g.properties.noPanel){_.arr.each(c,function(h){e=g.getSubIdByItemId(h);if(e&&!(f=g.getSubNode("PANEL",e)).isEmpty()){f.remove()}})}});arguments.callee.upper.apply(d,arguments);d.each(function(k){if(!k.boxing().getUIValue()){var h;k.boxing().fireItemClickEvent((h=k.properties.items[0])&&h.id)}if(!k.properties.noPanel){var g=k.getRootNode().style;linb.UI.$tryResize(k,g.width,g.height,true,k.boxing().getUIValue());g=null}});return d},clearItems:function(){var c=this;c.each(function(d){if(!d.properties.noPanel){d.getSubNode("PANEL",true).remove()}});c.setValue(null,true);arguments.callee.upper.apply(c,arguments);return c},markItemCaption:function(d,h,f){var e=this.get(0);d=e.getItemByItemId(d);if((d._dirty!=h)||f){var g=d.id,c=e.getItemByItemId(g).caption;e.getSubNodeByItemId("CAPTION",g).html(e.getItemByItemId(g).caption=h?("*"+c):c.replace(/^\*/,"")).css("fontStyle",h?"italic":"normal");d._dirty=h}return this},_scrollToBottom:function(){return this.each(function(g){var k=g.getSubNode("ITEMS"),e=g.getSubNode("LIST"),l=k.left(),i,f=k.width(),c=false,d=e.width();if(d<f+l){if(!g.$scrollStep){g.$scrollStep=1}if(g.$scrollStep<5){g.$scrollStep=g.$scrollStep*1.01}l-=g.$scrollStep;if(d>f+l){l=d-f;c=true}k.left(l);if(c){g.getSubNode("RIGHT").css("display","none");g.$scrollTobottom=false;g.$scrollStep=null}else{g.getSubNode("LEFT").css("display","block");if(g.$scrollTobottom){_.asyRun(arguments.callee,0,[g],this)}}}})},_scrollToTop:function(){return this.each(function(d){var e=d.getSubNode("ITEMS"),f=e.left(),c=false;if(f<0){if(!d.$scrollStep){d.$scrollStep=1}if(d.$scrollStep<5){d.$scrollStep=d.$scrollStep*1.01}f+=d.$scrollStep;if(f>=-1){f=0;c=true}e.left(f);if(c){d.getSubNode("LEFT").css("display","none");d.$scrollToTop=false;d.$scrollStep=null}else{d.getSubNode("RIGHT").css("display","block");if(d.$scrollToTop){_.asyRun(arguments.callee,0,[d],this)}}}})}},Static:{Templates:{tagName:"div",style:"{_style};",LIST:{$order:0,tagName:"div",ITEMS:{tagName:"div",text:"{items}",style:"{HAlign}"},LEFT:{},RIGHT:{}},PNAELS:{$order:1,tagName:"text",text:"{panels}"},$submap:{items:{ITEM:{className:"{itemClass} {disabled} {readonly}",style:"{itemDisplay} {itemStyle}",ITEMI:{ITEMC:{HANDLE:{tabindex:"{_tabindex}",IBWRAP:{tagName:"div",style:"white-space:nowrap;",RULER:{},ICON:{$order:0,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{text:"{caption}",$order:1},CMDS:{$order:2,OPT:{$order:1,className:"uicmd-opt",style:"{_opt}"},POP:{className:"uicmd-pop",style:"{popDisplay}",$order:1},CLOSE:{className:"uicmd-close ",style:"{closeDisplay}",$order:2}}}}}}}},panels:{PANEL:{tagName:"div",className:"uibg-base",text:linb.UI.$childTag}}}},Appearances:{KEY:{position:"absolute",overflow:"hidden"},LIST:{position:"relative",overflow:"hidden",left:0,width:"100%",background:linb.UI.$bg("line.gif","repeat-x center bottom")},LEFT:{cursor:"pointer",display:"none",position:"absolute",top:0,left:0,height:"16px",width:"16px","z-index":"10",background:linb.UI.$bg("icons.gif","no-repeat -152px -244px",true)},RIGHT:{cursor:"pointer",display:"none",position:"absolute",top:0,right:0,height:"16px",width:"16px","z-index":"10",background:linb.UI.$bg("icons.gif","no-repeat -170px -244px",true)},ITEMS:{padding:"0 4px 2px 0",position:"relative",left:0,top:0,"white-space":"nowrap"},ITEM:{$order:0,"font-family":'"Verdana", "Helvetica", "sans-serif"',cursor:"pointer","padding-right":"6px","vertical-align":"top",background:linb.UI.$bg("button.gif","no-repeat right -540px",true)},"ITEM-mouseover":{$order:1,"background-position":"right -690px"},"ITEM-mousedown, ITEM-checked":{$order:2,"background-position":"right -840px","border-bottom":"solid 1px #FAD600;"},ITEMI:{$order:0,"padding-left":"6px","vertical-align":"top",background:linb.UI.$bg("button.gif","no-repeat left -640px",true)},"ITEM-mouseover ITEMI":{$order:1,"background-position":"left -790px"},"ITEM-mousedown ITEMI, ITEM-checked ITEMI":{$order:2,"background-position":"left -940px"},ITEMC:{$order:0,padding:"5px 0 3px 0","vertical-align":"top","text-align":"center",background:linb.UI.$bg("button.gif","repeat-x left -590px",true)},"ITEM-mouseover ITEMC":{$order:1,"background-position":"left -740px"},"ITEM-mousedown ITEMC, ITEM-checked ITEMC":{$order:2,"background-position":"left -890px"},HANDLE:{display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,cursor:"pointer","vertical-align":"middle","font-size":"12px"},RULER:{height:"18px",width:"1px","vertical-align":"middle"},PANEL:{position:"relative",display:"none",width:"100%",overflow:"auto"},CAPTION:{"vertical-align":linb.browser.ie6?"baseline":"middle",margin:"0 4px"},CMDS:{"vertical-align":"middle"}},Behaviors:{DroppableKeys:["PANEL","KEY","ITEM"],DraggableKeys:["ITEM"],HoverEffected:{ITEM:"ITEM",OPT:"OPT",CLOSE:"CLOSE",POP:"POP"},ClickEffected:{ITEM:"ITEM",OPT:"OPT",CLOSE:"CLOSE",POP:"POP"},onSize:linb.UI.$onSize,OPT:{onMousedown:function(){return false},onClick:function(c,d,f){c.boxing().onShowOptions(c,c.getItemByDom(f),d,f);return false}},CAPTION:{onMousedown:function(d,h,i){if(linb.Event.getBtn(h)!="left"){return}var c=d.properties,g=d.getItemByDom(i),f=d.boxing();if(c.disabled||g.disabled){return false}if(c.readonly||g.readonly){return false}if(f.getUIValue()==g.id){if(d.onCaptionActive){d.boxing().onCaptionActive(d,d.getItemByDom(i),i)}}}},ITEM:{onClick:function(c,d,f){return false},onMousedown:function(d,h,k){if(linb.Event.getBtn(h)!="left"){return false}if(d.getKey(linb.Event.getSrc(h).parentNode.id)==d.keys.CMDS){return false}var c=d.properties,i=d.getSubId(k),g=d.getItemByDom(k),f=d.boxing();if(c.disabled||g.disabled){return false}if(c.readonly||g.readonly){return false}if(f.getUIValue()==g.id){return}d.getSubNode("HANDLE",i).focus();f.setUIValue(g.id);if(f.getUIValue()==g.id){f.onItemSelected(d,g,k);return false}}},HANDLE:{onClick:function(c,d,f){return linb.Event.getKey(d).shiftKey},onKeydown:function(f,i,c){var p=linb.Event.getKey(i),n=p.key,d=p.shiftKey;if(n==" "||n=="enter"){f.getSubNode("ITEM",f.getSubId(c)).onMousedown();return false}var m=linb(c),k=f.getSubNode("ITEMS"),h=k.nextFocus(true,true,false),l=k.nextFocus(false,true,false);switch(n){case"tab":if(d){if(m.get(0)!=h.get(0)){h.focus();return false}}else{if(m.get(0)!=l.get(0)){l.focus();return false}}break;case"left":case"up":var g=m.nextFocus(false,true,false);if(m.get(0)==h.get(0)){l.focus()}else{m.nextFocus(false)}return false;break;case"right":case"down":var g=m.nextFocus(true,false,false);if(m.get(0)==l.get(0)){h.focus()}else{m.nextFocus()}return false;break}}},CLOSE:{onMousedown:function(){return false},onClick:function(f,h,c){var k=f.properties,q=f.getItemByDom(c),l=k.$UIvalue,n;if(k.disabled||q.disabled){return}if(k.readonly||q.readonly){return false}var m=f.boxing();if(false===m.beforePageClose(f,q,c)){return}n=_.copy(q);if(l&&l==q.id){var i=k.items,g=_.arr.subIndexOf(i,"id",q.id),p,d=(p=i[g+1])?p.id:(p=i[g-1])?p.id:(p=i[0])?p.id:null;if(d&&d!=l){f.boxing().fireItemClickEvent(d)}}m.removeItems(q.id);m.afterPageClose(f,n);var p=f.getRootNode().style;linb.UI.$tryResize(f,p.width,p.height,true);p=null;return false}},POP:{onMousedown:function(){return false},onClick:function(g,i,c){var l=g.properties,p=g.getItemByDom(c),f=p.id;if(l.disabled||p.disabled){return}if(l.readonly||p.readonly){return false}if(g.beforePagePop&&false==g.boxing().beforePagePop(g,p)){return false}var d=g.boxing().getPanel(f),m=g.getRoot().offset(),q=g.getRoot().cssSize(),n=_.copy(linb.UI.Dialog.$DataStruct);_.merge(n,p,"with");_.merge(n,{dragKey:p.dragkey||l.dragKey,dock:"none",tag:p.tag||p.id,width:Math.max(q.width,200),height:Math.max(q.height,100),left:m.left,top:m.top},"all");var k=new linb.UI.Dialog(n);linb("body").append(k);var h=[];_.arr.each(g.children,function(e){if(e[1]==f){h.push(e[0])}},null,true);if(h.length){k.append(linb.UI.pack(h,false))}g.boxing().removeItems(f);return false}},ITEMS:{onMousedown:function(d,f,g){var c=linb.Event.getPos(f);if(!d._$scroll_l&&!d._$scroll_r){return}linb.use(g).startDrag(f,{horizontalOnly:true,dragType:"blank",dragDefer:2,targetLeft:c.left,targetTop:c.top,targetReposition:false,maxLeftOffset:d._$scroll_l,maxRightOffset:d._$scroll_r})},onDrag:function(d,f,g){var c=linb.DragDrop.getProfile();linb.use(g).left(-d._$scroll_r+c.offset.x)},onDragstop:function(c,d,f){c.box._adjustScroll(c)}},LEFT:{onMouseover:function(c,d,f){c.$scrollToTop=true;c.boxing()._scrollToTop()},onMouseout:function(c,d,f){c.$scrollToTop=false;c.$scrollStep=null},onClick:function(c,d,f){c.$scrollStep*=2}},RIGHT:{onMouseover:function(c,d,f){c.$scrollTobottom=true;c.boxing()._scrollToBottom()},onMouseout:function(c,d,f){c.$scrollTobottom=false;c.$scrollStep=null},onClick:function(c,d,f){c.$scrollStep*=2}}},DataModel:{dirtyMark:false,dataBinder:null,dataField:null,lazyAppend:true,dock:"fill",noPanel:false,width:200,height:200,position:"absolute",HAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("ITEMS").css("textAlign",c)}},dropKeysPanel:"",value:{ini:""},items:{set:function(h){var k=this;if(k.renderId){var g=k.boxing(),i,d=linb.$getGhostDiv(),f=_.copy(k.children);k.children.length=0;_.arr.each(f,function(l){delete l[0].$dockParent;d.appendChild(l[0].getRootNode())});var c=k.properties.value;g.clearItems();g.insertItems(h);_.arr.each(f,function(l){g.append.apply(g,l)});d.innerHTML="";g.setValue(c,true);var e=k.getRootNode().style;linb.UI.$tryResize(k,e.width,e.height,true);e=null}else{k.properties.items=_.copy(h)}}}},EventHandlers:{onIniPanelView:function(c,d){},beforePagePop:function(c,d){},beforePageClose:function(c,d,e){},afterPageClose:function(c,d){},onShowOptions:function(c,d,f,g){},onItemSelected:function(c,d,e){},onCaptionActive:function(c,d,e){}},RenderTrigger:function(){var d=this,c,f,e;if(c=d.properties.value){(e=d.boxing()).setUIValue(c);if(f=d.getItemByItemId(c)){e.onItemSelected(d,f)}}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.panels=d.items;if(d.HAlign){d.HAlign="text-align:"+d.HAlign+";"}return d},_prepareItem:function(c,d){var e="display:none";d.closeDisplay=d.closeBtn?"":e;d.popDisplay=d.popBtn?"":e;d._opt=d.optBtn?"":e;d.itemDisplay=d.hidden?e:""},getDropKeys:function(c,d){return c.properties[c.getKey(linb.use(d).id())==c.keys.PANEL?"dropKeys":"dropKeysPanel"]},_showTips:function(c,d,e){if(c.properties.disableTips){return}if(c.onShowTips){return c.boxing().onShowTips(c,d,e)}if(!linb.Tips){return}if(!d.id){return false}return arguments.callee.upper.apply(this,arguments)},_onresize:function(f,d,n,c,m){var q=f.properties,p=f.getItemByItemId(m);if(!p){m=q.$UIvalue}p=f.getItemByItemId(m);var e=f.boxing().getPanel(m),h=f.getSubNode("LIST"),k;if(!e||e.isEmpty()){return}var i=null,g=null;if(c){p._w=p._h=null}if(n&&p._h!=n){p._h=n;if(n&&n!="auto"){k=h.get(0).offsetHeight||h.offsetHeight();n=n-k;if(n>0){i=n}}else{i=n}}if(d&&p._w!=d){h.width(p._w=d);this._adjustScroll(f);g=d}if(i||g){e.height(i).onSize()}},_adjustScroll:function(e,h){var i=e.getSubNode("LIST"),n=i.offsetWidth(),k=e.getSubNode("ITEMS"),g=k.left(),d=e.getSubNode("LEFT"),p=e.getSubNode("RIGHT"),c=0,f=0,m=0;k.children().each(function(l){if(h&&e.getItemIdByDom(l.id)==h){f=c;m=l.offsetWidth}c+=l.offsetWidth});k.width(Math.max(c,n));if(c<=n){k.left(0);e._$scroll_r=e._$scroll_l=0;k.css("cursor","")}else{if(m){if((f+g<0)||(f+m-g>n)){g=-f}}if(c+g<n){k.left(n-c);e._$scroll_r=c-n;e._$scroll_l=0}else{k.left(g);e._$scroll_r=-g;e._$scroll_l=c-n+g}k.css("cursor","move")}d.css("display",e._$scroll_r?"block":"none");p.css("display",e._$scroll_l?"block":"none")}}});Class("linb.UI.Stacks","linb.UI.Tabs",{Initialize:function(){var c=this.getTemplate();c.BOX={tagName:"div",LIST:c.LIST,PNAELS:c.PNAELS};delete c.LIST;delete c.PNAELS;delete c.LEFT;delete c.TOP;this.setTemplate(c)},Static:{Appearances:{BOX:{border:"solid 1px #648CB4",position:"absolute",left:0,top:0},LIST:{position:"static"},ITEMS:{position:"static"},ITEM:{$order:0,display:"block",position:"absolute",cursor:"pointer",background:linb.UI.$bg("bar_vertical.gif","repeat-x left -380px",true),width:"100%",left:0},ITEMC:{display:"block"},ITEMI:{display:"block"},"ITEM-mouseover":{$order:1,"background-position":"right -410px"},"ITEM-mousedown, ITEM-checked":{$order:2,"background-position":"right -440px"},HANDLE:{cursor:"pointer",display:"block","font-size":"12px",height:"100%",height:"18px",padding:"5px 0 5px 8px","white-space":"nowrap"},PANEL:{position:"absolute",display:"none",overflow:"auto"},CMDS:{position:"absolute",top:"6px",right:"8px","text-align":"right","vertical-align":"middle"}},DataModel:{$border:1,NoPanel:null},_onresize:function(f,d,s,c,q){var w=f.properties,u=f.getItemByItemId(q),p=w.$border*2;if(!u){q=w.$UIvalue}var r,l,i,h,n,g=null,k=null,m=f.getSubNode("BOX"),e=f.boxing().getPanel(q);if(!e||e.isEmpty()){return}if(s){s-=p;i=l=0;_.arr.each(w.items,function(x){h=f.getSubNodeByItemId("ITEM",x.id);h.cssRegion({bottom:"auto",top:l});l+=h.height();if(x.id==q){return false}});_.arr.each(w.items,function(x){if(x.id==q){return false}h=f.getSubNodeByItemId("ITEM",x.id);h.cssRegion({top:"auto",bottom:i});i+=h.height()},null,true);r=s-l-i;if(r>0){n=l;k=r}m.height(s)}if(d){d-=p;g=d;m.width(d)}e.cssRegion({width:g?g:null,height:k?k:null,top:n,left:0},true);if(g){f.getSubNode("LIST").width(g)}},_adjustScroll:null}});Class("linb.UI.ButtonViews","linb.UI.Tabs",{Initialize:function(){var c=this.getTemplate();c.LIST.className="uibg-bar uiborder-outset";delete c.LEFT;delete c.TOP;this.setTemplate(c)},Static:{Appearances:{LIST:{"z-index":"2",position:"absolute"},ITEMS:{"z-index":"2",position:"absolute",left:0,top:0},"ITEMS-left, ITEMS-left ITEMC":{$order:1,"text-align":"left"},"ITEMS-center, ITEMS-center ITEMC":{$order:1,"text-align":"center"},"ITEMS-right, ITEMS-right ITEMC":{$order:1,"text-align":"right"},ITEM:{$order:0,margin:"2px",position:"relative","font-family":'"Verdana", "Helvetica", "sans-serif"',cursor:"pointer","padding-right":"4px","vertical-align":"top",background:linb.UI.$bg("button.gif","no-repeat right -270px",true)},"ITEM-mouseover":{$order:1,"background-position":"right -360px"},"ITEM-mousedown, ITEM-checked":{$order:2,"background-position":"right -450px"},ITEMI:{$order:0,"padding-left":"4px","vertical-align":"top",background:linb.UI.$bg("button.gif","no-repeat left -330px",true)},"ITEM-mouseover ITEMI":{$order:1,"background-position":"left -420px"},"ITEM-mousedown ITEMI, ITEM-checked ITEMI":{$order:2,"background-position":"left -510px"},ITEMC:{$order:0,"vertical-align":"top",height:"20px",padding:"2px 0",background:linb.UI.$bg("button.gif","repeat-x left -300px",true)},"ITEMS-block ITEM, ITEMS-block ITEMI, ITEMS-block ITEMC":{$order:2,display:"block"},"ITEM-mouseover ITEMC":{$order:1,"background-position":"left -390px"},"ITEM-mousedown ITEMC, ITEM-checked ITEMC":{$order:2,"background-position":"left -480px"},HANDLE:{display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,cursor:"pointer","vertical-align":"middle","font-size":"12px",margin:"1px"}},DataModel:{HAlign:null,barLocation:{ini:"top",listbox:["top","bottom","left","right"],action:function(d){var c=this,e=c.getSubNode("LIST"),f=c.getSubNode("ITEMS");switch(d){case"left":e.cssRegion({left:0,top:0,right:"auto",bottom:0});break;case"top":e.cssRegion({left:0,top:0,right:0,bottom:"auto"});break;case"right":e.cssRegion({left:"auto",top:0,right:0,bottom:0});break;case"bottom":e.cssRegion({left:0,top:"auto",right:0,bottom:0});break}switch(d){case"left":case"right":f.tagClass("-block",true);break;case"top":case"bottom":f.tagClass("-block",false);e.height("auto");break}c.boxing().setBarSize(c.properties.barSize,true)}},barHAlign:{ini:"left",listbox:["left","center","right"],action:function(d){var c=this.getSubNode("ITEMS");c.tagClass("(-left|-right|-center)",false).tagClass("-"+d,true)}},barVAlign:{ini:"top",listbox:["top","bottom"],action:function(d){var c=this.getSubNode("ITEMS");if(d=="top"){c.cssRegion({top:0,bottom:"auto"})}else{c.cssRegion({bottom:0,top:"auto"})}}},barSize:{ini:50,action:function(e){var d=this,g=d.properties,h=g.noPanel,f=d.getSubNode("LIST"),c=d.getSubNode("ITEMS");if(g.barLocation=="left"||g.barLocation=="right"){if(!h){f.merge(c).width(e)}}else{if(!h){f.height(e)}}var g=d.getRootNode().style;linb.UI.$tryResize(d,g.width,g.height,true)}},noPanel:{ini:false,action:function(c){this.boxing().setBarSize(this.properties.barSize,true)}}},LayoutTrigger:function(){var c=this.properties;this.boxing().setBarLocation(c.barLocation,true).setBarHAlign(c.barHAlign,true).setBarVAlign(c.barVAlign,true)},_onresize:function(h,e,q,d,p){var s=h.properties,k=s.noPanel,r=h.getItemByItemId(p);if(!r){p=s.$UIvalue}var f=h.boxing().getPanel(p),m,g,n=h.getSubNode("LIST"),c=h.getSubNode("ITEMS"),i=null,l=null;if(s.barLocation=="top"||s.barLocation=="bottom"){if(e){n.width(e-2);c.width(e-2);if(k){n.height(q-2)}g=0;i=e}if(q-s.barSize>0){l=q-s.barSize-2}m=s.barLocation=="top"?2- -s.barSize:0}else{if(q){if(k){n.width(e-2);c.width(e-2)}n.height(q-2);m=0;l=q}if(e){g=s.barLocation=="left"?2- -s.barSize:0;i=e-s.barSize-2}}if(!k){if(f&&!f.isEmpty()){f.cssRegion({width:i?i:null,height:l?l:null,left:g,top:m},true)}}},_adjustScroll:null}});Class("linb.UI.RadioBox","linb.UI.List",{Initialize:function(){var c=this.getTemplate();c.className=c.ITEMS.className="";c.$submap={items:{ITEM:{className:"{itemClass}  {disabled} {readonly}",style:"{itemStyle}",tabindex:"{_tabindex}",MARK:{$order:0,className:"uicmd-radio"},ICON:{$order:1,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{text:"{caption}",$order:2}}}};this.setTemplate(c)},Static:{_DIRTYKEY:"MARK",Appearances:{ITEM:{display:linb.$inlineBlock,"font-family":' "Verdana", "Helvetica", "sans-serif"',border:0,padding:"4px",position:"relative",zoom:linb.browser.ie?1:null,cursor:"pointer",overflow:"hidden","vertical-align":"middle","font-size":"12px"},CAPTION:{"vertical-align":linb.browser.ie6?"baseline":"middle"},ITEMS:{overflow:"auto","overflow-x":"hidden",position:"relative","line-height":"14px"}},Behaviors:{HoverEffected:{ITEM:"MARK"},ClickEffected:{ITEM:"MARK"}},_onresize:function(){}}});Class("linb.UI.StatusButtons",["linb.UI.List"],{Initialize:function(){var c=this.getTemplate();c.className="";c.$submap={items:{ITEM:{className:"{itemClass} {_endsClass} {disabled} {readonly}",style:"{itemMargin};{itemWidth};{itemAlign};{itemStyle}",tabindex:"{_tabindex}",CAPTION:{$order:1,text:"{caption}"}}}};this.setTemplate(c)},Static:{Appearances:{ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden"},ITEM:{"vertical-align":"middle",position:"relative",height:"16px",padding:"3px","font-size":0,"line-height":0,"white-space":"nowrap"},"ITEM-none":{background:linb.UI.$bg("icons.gif","no-repeat -12px -130px",true),"border-left":"solid 1px #7C9CBC","border-right":"solid 1px #7C9CBC"},"ITEM-left":{background:linb.UI.$bg("icons.gif","no-repeat left -130px",true),"border-right":"solid 1px #7C9CBC"},"ITEM-right":{background:linb.UI.$bg("icons.gif","no-repeat right -130px",true),"border-left":"solid 1px #7C9CBC"},"ITEM-mouseover, ITEM-mousedown, ITEM-checked":{},"ITEM-mouseover":{},"ITEM-mousedown":{},"ITEM-checked":{},"ITEM-left-mouseover":{$order:1,"background-position":"left -153px"},"ITEM-left-mousedown":{$order:2,"background-position":"left -176px"},"ITEM-left-checked":{$order:3,"background-position":"left -176px"},"ITEM-none-mouseover":{$order:1,"background-position":"-20px -153px"},"ITEM-none-mousedown":{$order:2,"background-position":"-20px -176px"},"ITEM-none-checked":{$order:3,"background-position":"-20px -176px"},"ITEM-right-mouseover":{$order:1,"background-position":"right -153px"},"ITEM-right-mousedown":{$order:2,"background-position":"right -176px"},"ITEM-right-checked":{$order:3,"background-position":"right -176px"},CAPTION:{display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,"vertical-align":"middle","font-size":"12px","line-height":"14px"},"ITEM-none CAPTION":{padding:"1px 4px"},"ITEM-left CAPTION":{padding:"1px 4px 1px 12px"},"ITEM-right CAPTION":{padding:"1px 12px 1px 1px"}},DataModel:({maxHeight:null,itemMargin:{ini:"",action:function(c){this.getSubNode("ITEM",true).css("margin",c)}},itemWidth:{ini:0,action:function(c){this.getSubNode("ITEM",true).width(c)}},itemAlign:{ini:"",listbox:["","left","center","right"],action:function(c){this.getSubNode("ITEM",true).css("text-align",c)}},itemLinker:{ini:"left",listbox:["none","left","right"],action:function(c){this.getSubNode("ITEM",true).tagClass("-none",false).tagClass("-left",false).tagClass("-right",false).tagClass("-"+c,true)}}}),Behaviors:{DroppableKeys:["ITEMS"]},EventHandlers:{},_prepareItem:function(d,e){var f=d.properties,c;e._tabindex=f.tabindex;if(c=e.itemMargin||f.itemMargin){e.itemMargin="margin:"+c}if(c=e.itemWidth||f.itemWidth){e.itemWidth="width:"+(c=="auto"?c:(c+"px"))}if(c=e.itemAlign||f.itemAlign){e.itemAlign="text-align:"+c}if(c=e.itemLinker||f.itemLinker){e._endsClass=d.getClass("ITEM","-"+c)}}}});Class("linb.UI.TreeBar",["linb.UI","linb.absList","linb.absValue"],{Instance:{_setCtrlValue:function(d,c){return this.each(function(h){if(!h.renderId){return}var i=h.boxing(),k=i.getUIValue(),g=h.properties,e=function(n,p,m){h.getSubNodeByItemId(n,p).tagClass("-checked",m)},f=g.selMode;if(f=="single"){var l=h.getSubIdByItemId(k);if(k&&l){h.getSubNode("BAR",l).tagClass("-checked",false)}l=h.getSubIdByItemId(d);if(l){h.getSubNode("BAR",l).tagClass("-checked")}}else{if(f=="multi"){k=k?k.split(";"):[];d=d?d.split(";"):[];if(c){_.arr.each(d,function(m){e("BAR",m)})}else{_.arr.each(k,function(m){if(_.arr.indexOf(d,m)==-1){e("BAR",m,false)}});_.arr.each(d,function(m){if(_.arr.indexOf(k,m)==-1){e("BAR",m)}})}}}})},insertItems:function(d,e,i,h){if(!d||!_.isArr(d)||d.length<1){return this}var f,g,c=this._afterInsertItems;return this.each(function(p){var l,q,m;g=p.box._adjustItems(d);if(!e){m=p.properties;l=m.items||(m.items=[])}else{m=p.getItemByItemId(e);l=_.isArr(m.sub)?m.sub:(m.sub=[])}if(p.renderId){if(!i){if(!e){f=p.getSubNode("ITEMS")}else{if(e&&m._inited){f=p.getSubNodeByItemId("SUB",e)}}if(f){q=p._buildItems("items",p.box._prepareItems(p,g,e));if(h){f.prepend(q)}else{f.append(q)}}}else{f=p.getSubNodeByItemId("ITEM",i);if(f){q=p._buildItems("items",p.box._prepareItems(p,g,e));if(h){f.addPrev(q)}else{f.addNext(q)}}}}if(!i){_.arr.insertAny(l,g,h?0:-1)}else{var n=_.arr.subIndexOf(l,"id",i);_.arr.insertAny(l,g,h?n:(n+1))}if(p.renderId){if(!(("iniFold" in m)?m.iniFold:p.properties.iniFold)){if(!e||p.getItemByItemId(e)._inited){p.boxing()._toggleNodes(g,true)}}}if(c&&p.renderId){p.boxing()._afterInsertItems(p,g,e,i,h)}if(p.renderId&&e){p.box._tofold(p,m,e)}})},_toggleNodes:function(e,c,f){var d=this;if(_.isArr(e)){_.arr.each(e,function(g){d.toggleNode(g.id,c,f)})}return d},toggleNode:function(g,c,d){var e=this.get(0),f=e.getItemByItemId(g);if(f&&f.sub){e.box._setSub(e,f,typeof c=="boolean"?c:!f._checked,d)}return this},openToNode:function(c){return this.each(function(g){var f=false,e=[],d=function(h,k,i){i=i||0;var l=arguments.callee;_.arr.each(h,function(m){if(m.id==k){e.push(m);f=true;return false}if(m.sub&&_.isArr(m.sub)){f=l.call(l,m.sub,k,++i);if(f){e.push(m);return false}}});return f};d(g.properties.items,c);if(f){e.reverse();_.arr.each(e,function(k,h){if(k.sub){g.boxing().toggleNode(k.id,true);if(h==e.length-1&&!(k.hasOwnProperty("group")?k.group:g.properties.group)){g.boxing().fireItemClickEvent(k.id)}}else{g.boxing().fireItemClickEvent(k.id)}})}})}},Initialize:function(){this.addTemplateKeys(["DISABLED"])},Static:{_focusNodeKey:"BAR",Templates:{tagName:"div",style:"{_style}",className:"{_className}",ondrag:"return false",onselectstart:"return false",BORDER:{tagName:"div",BOX:{tagName:"div",onselectstart:"return false",ITEMS:{tagName:"div",text:"{items}"}}},$submap:{items:{ITEM:{className:"{itemClass} {disabled}  {readonly}",style:"{itemStyle}{itemDisplay}",tagName:"div",BAR:{$order:0,tabindex:"{_tabindex}",className:"{cls_group} {cls_fold}",RULER:{$order:0,style:"{rulerStyle}",text:"{innerIcons}"},TOGGLE:{$order:1,className:"{togglemark}"},MARK2:{$order:2,style:"{mark2Display}"},ITEMICON:{$order:3,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},ITEMCAPTION:{text:"&nbsp;{caption}",className:"{disabled}  {readonly}",$order:4},EXTRA:{text:"{ext}",$order:5}},SUB:{$order:1,tagName:"div",text:linb.UI.$childTag}}}}},Appearances:{KEY:{"font-family":"Verdana, Helvetica, sans-serif",border:0},EXTRA:{display:"none"},BOX:{left:0,overflow:"auto","overflow-x":"hidden",position:"relative"},ITEMS:{overflow:"hidden"},ITEM:{"white-space":"nowrap",position:"relative",overflow:"hidden"},BAR:{cursor:"pointer",zoom:linb.browser.ie?1:null,position:"relative",display:"block",overflow:"hidden","font-size":"12px",padding:"2px 4px",border:"1px solid","outline-offset":"-1px","-moz-outline-offset":"-1px !important","border-color":"#EDF4FC #698AB3 #698AB3 #EDF4FC","background-color":"#CCE4FC"},DISABLED:{color:"#808080"},"BAR-mouseover":{$order:1,"background-color":"#fffa9f"},"BAR-checked":{$order:2,"background-color":"#fffa9f"},"BAR-GROUP":{$order:2,"border-top":"none","border-bottom":"none",padding:"5px 4px",height:"18px",background:linb.UI.$bg("bar_vertical.gif","repeat-x left -380px",true)},"BAR-GROUP-mouseover":{$order:3,"background-position":"left -410px"},"BAR-GROUP-checked":{$order:4,"background-position":"left -440px"},SUB:{overflow:"hidden","*zoom":1,height:0,"font-size":"1px","line-height":"1px",position:"relative","margin-left":"16px"},MARK2:{cursor:"pointer",width:"16px",height:"16px","vertical-align":"middle",background:linb.UI.$bg("icons.gif","no-repeat -20px -70px",true)},"BAR-checked MARK2":{$order:3,"background-position":"0 -70px"},ITEMCAPTION:{"vertical-align":linb.browser.ie6?"baseline":"middle",padding:"2px"}},Behaviors:{HoverEffected:{TOGGLE:"TOGGLE",BAR:"BAR"},ClickEffected:{TOGGLE:"TOGGLE",BAR:"BAR"},DraggableKeys:["BAR"],DroppableKeys:["BAR","TOGGLE","BOX"],onSize:linb.UI.$onSize,TOGGLE:{onClick:function(d,h,i){var c=d.properties,g=linb.use(i).id(),f=d.getItemByDom(g);if(c.disabled||f.disabled){return false}if(!("sub" in f)){return false}d.box._setSub(d,f,!f._checked);return false}},MARK2:{onClick:function(c,d,f){}},BAR:{onDblclick:function(d,h,i){var c=d.properties,g=d.getItemByDom(i),f=d.onDblclick&&d.boxing().onDblclick(d,g,i);if(g.sub&&f!==false){d.getSubNode("TOGGLE",d.getSubId(i)).onClick()}},onClick:function(c,d,f){return c.box._onclickbar(c,d,f)},onKeydown:function(c,d,f){return c.box._onkeydownbar(c,d,f)},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f,c.getItemByDom(f))!==false}}},BOX:{onScroll:function(c,d,f){if((d=linb.use(f)).scrollLeft()!==0){d.scrollLeft(0)}}}},EventHandlers:{onDblclick:function(c,d,e){},onGetContent:function(c,d,e){},onItemSelected:function(c,d,e){},beforeFold:function(c,d){},beforeExpend:function(c,d){},afterFold:function(c,d){},afterExpend:function(c,d){}},DataModel:{listKey:null,width:200,height:200,iniFold:true,animCollapse:false,dock:"fill",group:{ini:false,action:function(h){var g=this,f=g.properties.items,i=g.queryItems(f,function(k){return k.sub&&k.group===undefined}),e=linb();_.arr.each(i,function(k){e.merge(g.getSubNodeByItemId("BAR",k.id))});var d=g.getClass("BAR"),c=g.getClass("BAR","-group");if(h){e.replaceClass(new RegExp("(\\b)"+d+"([^b]*\\b)","g"),"$1"+c+"$2")}else{e.replaceClass(new RegExp("(\\b)"+c+"([^b]*\\b)","g"),"$1"+d+"$2")}}},selMode:{ini:"single",listbox:["single","none","multi"],action:function(e){var d=this,f=this.properties,c=[];_.each(this.SubSerialIdMapItem,function(g){if(!(g.sub&&(g.hasOwnProperty("group")?g.group:f.group))){c.push(d.getSubNodeByItemId("MARK2",g.id).get(0))}});linb(c).css("display",e=="multi"?"":"none")}},noCtrlKey:true,singleOpen:false,dynDestory:false,position:"absolute"},RenderTrigger:function(){var c=this,d=c.properties;if(!d.iniFold){c.boxing()._toggleNodes(d.items,true)}},_onclickbar:function(f,p,c){var r=f.properties,h=linb.use(c).id(),x=f.getItemByDom(h),s=f.getSubId(h),n=f.boxing(),u=linb.Event.getKey(p);if(r.disabled||x.disabled){return false}if(x.sub&&(x.hasOwnProperty("group")?x.group:r.group)){f.getSubNode("TOGGLE",s).onClick();return false}f.getSubNode(f.box._focusNodeKey,s).focus();switch(r.selMode){case"none":n.onItemSelected(f,x,c);break;case"multi":if(r.readonly||x.readonly){return false}var w=n.getUIValue(),m=w?w.split(";"):[];if(m.length&&(u.ctrlKey||u.shiftKey||r.noCtrlKey)){if(u.shiftKey){if(f.$firstV._pid!=x._pid){return false}var q=r.items;if(x._pid){var d=f.getItemByItemId(x._pid);if(d){q=d.sub}}var k=_.arr.subIndexOf(q,"id",f.$firstV.id),g=_.arr.subIndexOf(q,"id",x.id),l;m.length=0;for(l=Math.min(k,g);l<=Math.max(k,g);l++){m.push(q[l].id)}}else{if(_.arr.indexOf(m,x.id)!=-1){_.arr.removeValue(m,x.id)}else{m.push(x.id)}}m.sort();w=m.join(";");if(n.getUIValue()!=w){n.setUIValue(w);if(n.get(0)&&n.getUIValue()==w){n.onItemSelected(f,x,c)}}break}case"single":if(n.getUIValue()!=x.id){f.$firstV=x;n.setUIValue(x.id);if(n.get(0)&&n.getUIValue()==x.id){n.onItemSelected(f,x,c)}}break}},_onkeydownbar:function(f,h,c){var n=linb.Event.getKey(h),m=n.key,d=n.shiftKey,l=f.getSubNode(f.box._focusNodeKey,f.getSubId(c)),i=f.getRoot(),g=i.nextFocus(true,true,false),k=i.nextFocus(false,true,false);switch(m){case"enter":l.onClick();break;case"tab":if(d){if(l.get(0)!=g.get(0)){g.focus();return false}}else{if(l.get(0)!=k.get(0)){k.focus();return false}}break;case"up":if(l.get(0)==g.get(0)){k.focus()}else{l.nextFocus(false,true,false).focus()}return false;break;case"down":if(l.get(0)==k.get(0)){g.focus()}else{l.nextFocus(true,false,false).focus()}return false;break;case"right":case"left":f.getSubNode("TOGGLE",f.getSubId(c)).onClick();return false}},_onStartDrag:function(c,d,f,g){var g=linb.Event.getPos(d);linb.use(f).startDrag(d,{dragType:"icon",shadowFrom:f,targetLeft:g.left+12,targetTop:g.top+12,dragCursor:"pointer",dragDefer:1,dragKey:c.box.getDragKey(c,f),dragData:c.box.getDragData(c,d,f)});return false},_onDropTest:function(d,i,l,c,g,f){var k=g&&g.domId,h=linb.use(l).id();if(k){if(k==h){return false}if(_.get(linb.use(l).get(0),["parentNode","previousSibling","firstChild","id"])==k){return false}}},_onDrop:function(g,m,d,q,l,s){linb.DragDrop.setDragIcon("none");var i=g.getKey(linb.use(d).id()),f=l.profile,c=l.domId,h,p=g.keys,r=linb.absObj.$specialChars,n=g.boxing();h=_.clone(f.getItemByDom(c),function(k,e){return !r[(e+"").charAt(0)]});f.boxing().removeItems([h.id]);if(i==p.BOX){n.insertItems([h],null,null,false)}else{if(i==p.BAR){n.insertItems([h],s._pid,s.id,true)}else{if(i==p.TOGGLE){n.insertItems([h],s.id,null,false)}}}return false},_ensureValue:function(d,e){if(d.properties.selMode=="multi"){var c=(e||"").split(";");c.sort();return c.join(";")}else{return e}},_prepareItem:function(e,m,f,g,k,l){var c=e.properties,i=e.ItemIdMapSubSerialId,h=e.SubSerialIdMapItem,d;if(g){f._pid=g}m.togglemark=m.sub?"uicmd-toggle":"uicmd-none";m.disabled=m.disabled?e.getClass("KEY","-disabled"):"";m.itemDisplay=m.hidden?"display:none;":"";m.mark2Display=(c.selMode=="multi")?"":"display:none;";m._tabindex=c.tabindex;if(m.sub&&(m.hasOwnProperty("group")?m.group:c.group)){m.cls_group=e.getClass("BAR","-group");m.mark2Display="display:none"}},_setSub:function(f,E,z,D){var w=f.domId,d=f.boxing(),n=f.getSubIdByItemId(E.id),k=f.properties,B=f.getSubNode("BAR",n),e=f.getSubNode("TOGGLE",n),x=f.getSubNode("SUB",n);if(linb.Thread.isAlive(f.key+f.id)){return}if(E._checked){if(!z){if(d.beforeFold&&false===d.beforeFold(f,E)){return}var C=x.height();if(k.animCollapse){x.animate({height:[C,0]},null,function(){x.css({display:"none"})},100,5,"expoIn",f.key+f.id).start()}else{x.css({display:"none",height:0})}e.tagClass("-checked",false);B.tagClass("-expand",false).tagClass("-fold");E._checked=false;if(E.group||k.group){B.tagClass("-checked",false)}if(k.dynDestory){var q=E.sub,c=[];for(var A=0,y=q.length;A<y;A++){c.push(q[A].id)}f.boxing().removeItems(c);E.sub=true;delete E._inited}}if(d.afterFold){d.afterFold(f,E)}if(D&&E.sub&&!k.dynDestory){_.arr.each(E.sub,function(h){if(h.sub&&h.sub.length){f.box._setSub(f,h,false,true)}})}}else{if(z){if(d.beforeExpend&&false===d.beforeExpend(f,E)){return}var F=function(s,M,r,H,K,J,i,G){var L=s.boxing(),l=s.properties;if(!M._inited){delete M.sub;M._inited=true;if(typeof i=="string"){K.html(M.sub=i,false)}else{if(_.isArr(i)){L.insertItems(i,M.id)}else{if(i["linb.Template"]||i["linb.UI"]){K.append(M.sub=i.render(true))}}}L.setUIValue(L.getUIValue(),true)}if(l.singleOpen){L._toggleNodes(M._pid?s.getItemByItemId(M._pid).sub:l.items,false)}if(!G){var I=K.height(true);if(l.animCollapse){K.animate({height:[0,I]},function(){K.css({display:""})},function(){K.css({height:"auto"})},100,5,"expoOut",s.key+s.id).start()}else{K.css({display:"",height:"auto"})}}else{K.css({display:"",height:"auto"})}H.tagClass("-checked");J.tagClass("-fold",false).tagClass("-expand");if(M.group||k.group){J.tagClass("-checked")}M._checked=true},m=E.sub,g=function(h){F(f,E,w,e,x,B,h,D)},p;if((p=typeof m)=="string"||p=="object"){g(m)}else{if(f.onGetContent){var u=f.boxing().onGetContent(f,E,g);if(u){if(u===true){E._inited=true}g(u)}}}}if(d.afterExpend){d.afterExpend(f,E)}if(D&&E.sub){_.arr.each(E.sub,function(h){if(h.sub&&h.sub.length&&!h._checked){f.box._setSub(f,h,true,true)}})}}},_tofold:function(d,e,c){d.getSubNodeByItemId("BAR",c).addClass(d.getClass("BAR","-fold"));d.getSubNodeByItemId("TOGGLE",c).replaceClass(new RegExp("\\buicmd-none\\b"),"uicmd-toggle")},_onresize:function(e,d,c){e.getSubNode("BORDER").cssSize({width:d?d:null,height:c?c:null});e.getSubNode("BOX").cssSize({width:d?d:null,height:c?c:null})}}});Class("linb.UI.TreeView","linb.UI.TreeBar",{Instance:{_afterInsertItems:function(d,e,c){d.box._reorderItems(d,c)},_afterRemoveItems:function(c,d){_.arr.each(d,function(e){c.box._reorderItems(c,e._pid)})}},Initialize:function(){this.addTemplateKeys(["IMAGE"]);var c=this.getTemplate();delete c.$submap.items.ITEM.BAR.tabindex;c.$submap.items.ITEM.BAR.ITEMCAPTION.tabindex="{_tabindex}";this.setTemplate(c)},Static:{_focusNodeKey:"ITEMCAPTION",Appearances:{ITEMS:{},ITEM:{"white-space":"nowrap",position:"relative"},BAR:{zoom:linb.browser.ie?1:null,position:"relative",display:"block","font-size":"12px",padding:"0",border:"0"},SUB:{"*zoom":1,height:0,"font-size":"1px","line-height":"1px",position:"relative"},BOX:{left:0,overflow:"auto",position:"relative","background-color":"#FFF"},"BAR ITEMICON":{background:linb.UI.$bg("icons.gif","no-repeat 0 0",true),"background-position":"-244px -236px"},"BAR-fold ITEMICON":{$order:1,"background-position":"-260px -236px"},"BAR-expand ITEMICON":{$order:1,"background-position":"-276px -236px"},"IMAGE-vertical, IMAGE-path-1, IMAGE-path-2, IMAGE-path-3, IMAGE-fold-1, IMAGE-fold-2, IMAGE-fold-3":{$order:1,background:linb.UI.$bg("icons.gif","no-repeat 0 0",true),width:"16px",height:"18px","vertical-align":"middle"},"IMAGE-none":{width:"16px",height:"18px","vertical-align":"middle"},"IMAGE-path-1,IMAGE-path-2":{$order:2,"background-position":"-196px -236px"},"IMAGE-path-3":{$order:3,"background-position":"-212px -236px"},"IMAGE-fold-1":{$order:4,"background-position":"-196px -254px"},"IMAGE-fold-2":{$order:5,"background-position":"-212px -254px"},"IMAGE-fold-3":{$order:6,"background-position":"-228px -254px"},"IMAGE-fold-1-checked":{$order:7,"background-position":"-244px -254px"},"IMAGE-fold-2-checked":{$order:8,"background-position":"-260px -254px"},"IMAGE-fold-3-checked":{$order:9,"background-position":"-276px -254px"},"IMAGE-fold-1-mousedown":{$order:10,"background-position":"-196px -272px"},"IMAGE-fold-2-mousedown":{$order:11,"background-position":"-212px -272px"},"IMAGE-fold-3-mousedown":{$order:12,"background-position":"-228px -272px"},"IMAGE-fold-1-checked-mousedown":{$order:13,"background-position":"-244px -272px"},"IMAGE-fold-2-checked-mousedown":{$order:14,"background-position":"-260px -272px"},"IMAGE-fold-3-checked-mousedown":{$order:15,"background-position":"-276px -272px"},"IMAGE-vertical":{$order:16,"background-position":"-228px -236px"},ITEMCAPTION:{cursor:"pointer","outline-offset":"-1px","-moz-outline-offset":"-1px !important"},"ITEMCAPTION-mouseover":{$order:12,"background-color":"#eee"},"BAR-checked":{},"ITEMCAPTION-mousedown, BAR-checked ITEMCAPTION":{$order:14,"background-color":"#4E8FDF",color:"#fff"}},Behaviors:{HoverEffected:{ITEMCAPTION:"ITEMCAPTION"},ClickEffected:{TOGGLE:"TOGGLE",ITEMCAPTION:"ITEMCAPTION"},DraggableKeys:["ITEMCAPTION"],DroppableKeys:["BAR","TOGGLE","BOX"],BAR:{onDblclick:null,onClick:null,onKeydown:null,afterMouseover:null,afterMouseout:null,afterMousedown:null,afterMouseup:null,beforeDragbegin:null,beforeDragstop:null,beforeMousedown:null},ITEMCAPTION:{onDblclick:function(d,h,i){var c=d.properties,g=d.getItemByDom(i),f=d.onDblclick&&d.boxing().onDblclick(d,g,i);if(g.sub&&f!==false){d.getSubNode("TOGGLE",d.getSubId(i)).onClick()}},onClick:function(c,d,f){return c.box._onclickbar(c,d,linb.use(f).parent().linbid())},onKeydown:function(c,d,f){return c.box._onkeydownbar(c,d,linb.use(f).parent().linbid())}},MARK2:{onClick:function(c,d,f){return c.box._onclickbar(c,d,linb.use(f).parent().linbid())}},ITEMICON:{onClick:function(c,d,f){return c.box._onclickbar(c,d,linb.use(f).parent().linbid())}},BOX:{onScroll:null}},DataModel:{group:null},_buildIcon:function(c,d){return"<span class='"+c+d+"'></span>"},_getType:function(d,c){return d?c=="last"?"-fold-3":c=="first"?"-fold-1":"-fold-2":c=="last"?"-path-3":c=="first"?"-path-1":"-path-2"},_prepareItem:function(e,w,f,i,m,n){var c=e.properties,l=e.ItemIdMapSubSerialId,k=e.SubSerialIdMapItem,d,h,r,g,u=e.getClass("IMAGE"),s=this._buildIcon,q=this._getType;if(i){f._pid=i;if(d=k[l[i]]){f._deep=d._deep+1;h=_.copy(d._icons);h.push(m==n-1?"last":m===0?"first":"middle");f._icons=h;w.rulerStyle="width:"+(f._deep*16)+"px;";g="";r=h.length-1;_.arr.each(h,function(x,p){if(p!==r){g+=s(u,x=="last"?"-none":"-vertical")}});w.innerIcons=g;w.togglemark=u+q(w.sub,h[r])}}else{f._deep=0;f._icons=[m==n-1?"last":m===0?"first":"middle"];w.rulerStyle="";w.innerIcons="";w.togglemark=u+q(w.sub,f._icons[0])}w.imageDisplay="";w.cls_fold=w.sub?e.getClass("BAR","-fold"):"";w.disabled=w.disabled?e.getClass("KEY","-disabled"):"";w.itemDisplay=w.hidden?"display:none;":"";w.mark2Display=(c.selMode=="multi")?"":"display:none;";w._tabindex=c.tabindex},_reorderItems:function(e,g){var c=e.properties,l=e.ItemIdMapSubSerialId,i=e.SubSerialIdMapItem,w=e.getClass("IMAGE"),n=this._getType;var u=function(y,p){if(y.sub&&y.sub.length){var x=arguments.callee;_.arr.each(y.sub,function(z){if(z._icons){p.push(z)}x(z,p)})}};if(g&&!l[g]){return}var r=e.box.KEY+"-RULER:"+e.serialId+":",f=g?i[l[g]].sub:c.items,k=f.length,d,m,s=0,h,q;_.arr.each(f,function(y,x){if(y._icons){d=y._icons[y._icons.length-1];m=x==k-1?"last":x===0?"first":"middle";if(d!=m){q=[];h=null;y._icons[s=y._icons.length-1]=m;h=y;var p=[];u(y,p);_.arr.each(p,function(z){z._icons[s]=m;q.push(z.id)});if(h){e.getSubNodeByItemId("TOGGLE",h.id).replaceClass(new RegExp("\\b"+w+"-[\\w]+-[\\w]+((-[\\w]+)*)\\b","g"),w+n(h.sub,m)+"$1")}if(q.length){_.arr.each(q,function(A,z){q[z]=r+l[A]});q=linb(q).first();if(s){q=q.next(s)}q.removeClass(new RegExp("\\b"+w+"[-\\w]+\\b")).addClass(w+(m=="last"?"-none":"-vertical"))}}}})},_tofold:function(e,f,d){var c=e.getClass("IMAGE");e.getSubNodeByItemId("BAR",d).addClass(e.getClass("BAR","-fold"));e.getSubNodeByItemId("TOGGLE",d).replaceClass(new RegExp("\\b"+c+"-path([-\\w]+)\\b"),c+"-fold$1")}}});Class("linb.UI.PopMenu",["linb.UI.Widget","linb.absList"],{Instance:{adjustSize:function(){this.each(function(g){if(g.renderId){var d=g.getRoot(),e=g.getSubNode("ITEMS");itemNs=g.getSubNode("ITEM",true),border=g.getSubNode("BORDER"),size1=d.cssSize(),size2=border.cssSize(),pro=g.properties,ww=0,hh=0;hh=e.height();if(hh%2==0){hh+=2}else{hh+=1}e.addClass(g.getClass("ITEMS","-inline"));itemNs.each(function(h){ww=Math.max(ww,h.offsetWidth)});if(ww%2==0){ww+=2}else{ww+=1}e.removeClass(g.getClass("ITEMS","-inline"));var f=Math.min(pro._maxHeight,hh+size1.height-size2.height),c=Math.min(pro._maxWidth,ww+size1.width-size2.width);pro.width=c;pro.height=f;g.getSubNode("ITEMS").cssSize({width:ww,height:hh});d.cssSize({width:c,height:f});linb.UI.$doResize(g,c,f,true)}});return this._setScroll()},_setScroll:function(){return this.each(function(g){if(g.renderId){var i=g.getSubNode("ITEMS"),e=i.offsetTop(),f=i.offsetHeight(),c=g.getSubNode("BORDER"),d=c.offsetHeight();g.getSubNode("TOP").css("display",e===0?"none":"block");g.getSubNode("BOTTOM").css("display",(d>f+e)?"none":"block")}})},_scrollToBottom:function(){return this.each(function(g){var k=g.getSubNode("ITEMS"),e=g.getSubNode("BORDER"),l=k.offsetTop(),i,f=k.offsetHeight(),c=false,d=e.height();if(d<f+l){if(!g.$scrollStep){g.$scrollStep=1}if(g.$scrollStep<5){g.$scrollStep=g.$scrollStep*1.01}l-=g.$scrollStep;if(d>f+l){l=d-f;c=true}k.top(l);if(c){g.getSubNode("BOTTOM").css("display","none");g.$scrollTobottom=false;g.$scrollStep=null}else{g.getSubNode("TOP").css("display","block");if(g.$scrollTobottom){_.asyRun(arguments.callee,0,[g],this)}}}})},_scrollToTop:function(){return this.each(function(d){var e=d.getSubNode("ITEMS"),f=e.offsetTop(),c=false;if(f<0){if(!d.$scrollStep){d.$scrollStep=1}if(d.$scrollStep<5){d.$scrollStep=d.$scrollStep*1.01}f+=d.$scrollStep;if(f>=-1){f=0;c=true}e.top(f);if(c){d.getSubNode("TOP").css("display","none");d.$scrollToTop=false;d.$scrollStep=null}else{d.getSubNode("BOTTOM").css("display","block");if(d.$scrollToTop){_.asyRun(arguments.callee,0,[d],this)}}}})},pop:function(i,g,e){var d=this.get(0);if(!d.renderId){var k=d.boxing().render(true);linb.Dom.getEmptyDiv().append(k)}var c=d.getRoot();if(d.$highLight){linb([d.$highLight]).tagClass("-mouseover",false)}d._conainer=e;c.popToTop(i,g,e);var h=function(){var f=arguments.callee.profile;if(f.box){f.boxing().hide();f.$popGrp.length=0}};h.profile=d;if(!d.$popGrp||!d.$popGrp.length){d.$popGrp=[c._get(0)];c.setBlurTrigger(d.$linbid,null);c.setBlurTrigger(d.$linbid,h,d.$popGrp)}return this},hide:function(k){var e,g=this.get(0),d=g.getRoot(),f="$subPopMenuShowed",c="$childPopMenu";if(false!==k){if(false===g.boxing().beforeHide(g)){return this}}if(!d||d.css("display")=="none"){return}d.setBlurTrigger(g.$linbid,null);if(g.$hideMenuPool){g.$hideMenuPool.append(d)}else{d.css("display","none")}var i=g[c],h;if(e=g[f]){e.hide()}while(i){i.boxing().hide();i=(h=i)[c];h[c]=h[f]=null}g[c]=g[f]=null;if(e=g.$parentPopMenu){e[f]=null}_.arr.removeValue(g.$popGrp,d._get(0));if(false!==k){g.boxing().onHide(g)}return this}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.BORDER,{TOP:{},BOTTOM:{},BOX:{tagName:"div",ITEMS:{tagName:"div",text:"{items}"}},POOL:{tagName:"div",style:"display:none;"}},"all");c.$submap={items:function(i,h,f,e,d){var g;e=e+"."+f.type;if(g=f.object){d[d.length]=g.build(f)}else{if(h[e]){linb.UI.$doTemplate(i,h,f,e,d)}}},"items.split":{ITEMSPLIT:{style:"{itemDisplay}"}},"items.button":{ITEM:{tabindex:1,className:"{itemClass} {disabled}",style:"{itemStyle}{itemDisplay}",ICON:{$order:0,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2},SUB:{style:"{displaySub}"}}},"items.checkbox":{ITEM:{tabindex:1,className:"{itemClass} {disabled}",style:"{itemStyle}{itemDisplay}",CHECKBOX:{$order:0,className:"ui-icon {checkboxCls}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2}}},"items.radiobox":{ITEM:{tabindex:1,className:"{itemClass} {disabled}",style:"{itemStyle}{itemDisplay}",RADIOBOX:{$order:0,className:"ui-icon {radioboxCls}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2}}}};this.setTemplate(c)},Static:{$noDomRoot:true,Appearances:{KEY:{"font-size":"12px",visibility:"hidden"},BORDER:{border:"1px solid","border-color":"#FFF #ACA899 #ACA899 #FFF"},BOX:{"background-color":"#EEF7FF",overflow:"hidden",position:"absolute",left:0,top:0,"font-size":"12px","z-index":"3"},ITEMS:{position:"absolute",top:0,left:0,overflow:"hidden",background:linb.UI.$bg("bg.gif","repeat-y left top")},"ITEMS-inline ITEM":{$order:5,display:linb.$inlineBlock},ITEM:{display:"block",position:"relative",overflow:"visible","white-space":"nowrap",color:"#000","font-family":'"Verdana", "Helvetica", "sans-serif"',cursor:"pointer",padding:"2px 20px 2px 2px"},ITEMSPLIT:{display:"block",position:"relative",overflow:"visible","white-space":"nowrap","font-size":"1px","line-height":"1px",padding:"1px",margin:"2px 2px 2px 26px",background:linb.UI.$bg("split_horizontal.gif","repeat-x left top",true)},"ITEM-mouseover":{$order:1,"background-color":"#FFFA9F"},"ITEM-checked":{$order:2,"background-color":"#FFFA9F"},ICON:{margin:0},TOP:{cursor:"pointer",display:"none",position:"absolute","margin-left":"-8px",right:0,height:"16px",width:"16px","z-index":"10",top:0,background:linb.UI.$bg("icons.gif","no-repeat -48px -244px",true)},BOTTOM:{cursor:"pointer",display:"none",position:"absolute","margin-left":"-8px",right:0,height:"16px",width:"16px","z-index":"10",bottom:0,background:linb.UI.$bg("icons.gif","no-repeat -66px -244px",true)},"RADIOBOX, CHECKBOX, RADIOBOX-checked, CHECKBOX-checked":{cursor:"pointer","vertical-align":"middle",width:"16px",height:"16px"},CHECKBOX:{background:linb.UI.$bg("icons.gif","no-repeat -20px -70px",true),margin:0},"CHECKBOX-checked":{$order:1,background:linb.UI.$bg("icons.gif","no-repeat -0px -70px",true)},RADIOBOX:{background:linb.UI.$bg("icons.gif","no-repeat -60px -70px",true),margin:0},"RADIOBOX-checked":{$order:1,background:linb.UI.$bg("icons.gif","no-repeat -40px -70px",true)},CAPTION:{"vertical-align":linb.browser.ie6?"baseline":"middle","padding-left":"6px"},RULER:{width:"100px","font-size":0,"line-height":0},ADD:{position:"absolute",top:"3px",right:0,width:"80px","padding-right":"20px","text-align":"right","z-index":"10",zoom:linb.browser.ie?1:null},SUB:{position:"absolute",top:"2px",right:"2px",width:"8px",height:"16px",background:linb.UI.$bg("icons.gif","no-repeat -200px -70px",true)}},Behaviors:{ITEM:{onMouseover:function(i,l,d){var g="$subPopMenuShowed",q="$allPops",h="$highLight",p="$showpops",k="$popGrp";if(i[h]==d){return}var m=i.properties,x=i.getItemByDom(d),n=x.id,w=false,s,f,u;if(u=i[g]){if(u==_.get(i,[q,n])){w=true}else{u.hide();i[g]=null}}if(!w){if(u=i[h]){linb([u]).tagClass("-mouseover",false)}i[h]=d;linb.use(d).tagClass("-mouseover");try{linb.use(d).get(0).focus()}catch(l){}}if(!w&&x.sub){if(!(_.isArr(x.sub)&&x.sub.length)){if(i.onShowSubMenu){var c=i["$sub:"+x.id];if(c&&c["linb.UI"]&&!c.isEmpty()){}else{c=i.boxing().onShowSubMenu(i,x,d)}if(c&&c["linb.UI"]&&!c.isEmpty()){i[g]=c;c=c.reBoxing();c.onMouseout(function(y,r,z){i.box._mouseout(i,r,z)},null,-1);i[k].push(c._get(0));c.popToTop(d,2,i._conainer);return}else{if(c&&_.isArr(c)&&c.length){x.sub=c}}}}if(_.isArr(x.sub)&&x.sub.length){i[q]=i[q]||{};if(!(s=i[q][n])){s=(new linb.UI.PopMenu({position:"absolute",items:x.sub,autoHide:i.properties.autoHide})).render(true);s.onShowSubMenu(function(y,e,r){return i.boxing().onShowSubMenu(i,e,r)});s.onMenuSelected(function(y,e,r){return i.boxing().onMenuSelected(i,e,r)});f=s.get(0);f.$hideMenuPool=i.$hideMenuPool||i.getSubNode("POOL");i[q][n]=s;i[p]=i[p]||[i];f[p]=i[p];i[p].push(f)}else{f=s.get(0)}i[k].push(f.getRoot()._get(0));f[k]=i[k];f.$parentPopMenu=i;i.$childPopMenu=f;s.pop(d,2);i[g]=s}}},onMouseout:function(f,i,c){var k=f.properties,n=f.getItemByDom(c),l=n.id,g=true,p;if(p=f.$subPopMenuShowed){var d=i.toElement||i.relatedTarget,h=p.get(0).getRootNode();try{do{if(d==h){return}}while((d&&(d=d.parentNode)))}catch(m){}}linb.use(c).tagClass("-mouseover",false);f.$highLight=null},onClick:function(c,f,h){var i=c.properties,d=c.getItemByDom(h),g=d.id;if(i.disabled||d.disabled){return false}if(!d.sub){if(d.type=="checkbox"){c.getSubNodeByItemId("CHECKBOX",d.id).tagClass("-checked",d.value=!d.value)}else{if(d.type=="radiobox"){c.getSubNode("RADIOBOX",true).tagClass("-checked",false);_.arr.each(i.items,function(e){if(e.type=="radiobox"){e.value=false}});c.getSubNodeByItemId("RADIOBOX",d.id).tagClass("-checked",d.value=true)}}if(c.onMenuSelected){c.boxing().onMenuSelected(c,d,h)}if(i.hideAfterClick){linb.use(h).tagClass("-mouseover",false);_.asyRun(function(){var k=c,e;if(!k.renderId){return}while(k){k.boxing().hide();k=(e=k).$parentPopMenu;e.$parentPopMenu=e.$subPopMenuShowed=null}c.$subPopMenuShowed=null;c.$popGrp.length=0},100)}}return false},onFocus:function(d,i,k){var f=d.getSubNode("BOX"),g=f.scrollTop(),c=f.scrollHeight(),l=linb.use(k).offsetTop();if(l<g||l>g+c){linb.use(k).offsetTop(g)}linb.use(k).onMouseover()},onKeydown:function(g,i,d){var q=g.getItemByDom(d),k=g.properties.items,n=linb.Event.getKey(i).key,m=q.id,l,c,h,f,p;switch(n){case"enter":linb(d).onClick();break;case"up":c=true;l=false;_.arr.each(k,function(r,e){if(r.type=="split"){return}if(l){h=r.id;return c=false}if(r.id==m){l=true}},null,true);if(c){h=k[k.length-1].id}f=g.getSubNodeByItemId("ITEM",h).get(0);break;case"down":c=true;l=false;_.arr.each(k,function(r,e){if(r.type=="split"){return}if(l){h=r.id;return c=false}if(r.id==m){l=true}});if(c){h=k[0].id}f=g.getSubNodeByItemId("ITEM",h).get(0);break;case"left":if(p=g.$parentPopMenu){if(p=g.$parentPopMenu.$highLight){f=p}}break;case"right":if((p=g.$subPopMenuShowed)&&p==g.$allPops[m]){p.activate()}break}if(f&&f.tagName){try{f.focus()}catch(i){}}}},TOP:{onMouseover:function(c){c.$scrollToTop=true;c.boxing()._scrollToTop()},onMouseout:function(c){c.$scrollToTop=false;c.$scrollStep=null},onClick:function(c){c.$scrollStep*=2}},BOTTOM:{onMouseover:function(c){c.$scrollTobottom=true;c.boxing()._scrollToBottom()},onMouseout:function(c){c.$scrollTobottom=false;c.$scrollStep=null},onClick:function(c){c.$scrollStep*=2}},ITEMS:{afterKeydown:function(d,f){var c=linb.Event.getKey(f).key;if(c=="tab"||c=="enter"){return true}else{if(c=="esc"){do{d.boxing().hide()}while(d=d.$parentPopMenu);return false}else{return false}}}},BORDER:{onMouseout:function(c,d,f){c.box._mouseout(c,d,f)}}},DataModel:({dock:null,tabindex:null,tips:null,border:null,resizer:null,shadow:true,_maxHeight:260,_maxWidth:300,left:-10000,hideAfterClick:true,autoHide:false,height:100,width:300,position:"absolute",$hborder:1,$vborder:1}),EventHandlers:{onShowSubMenu:function(c,d,e){},beforeHide:function(c){},onHide:function(c){},onMenuSelected:function(c,d,e){}},RenderTrigger:function(){this.boxing().adjustSize()},_mouseout:function(f,h){if(f.properties.autoHide){var i=linb.Event.getPos(h),d,g,c;_.arr.each(f.$popGrp,function(e){e=linb([e]);g=e.offset();d=e.cssSize();if(i.left>g.left&&i.top>g.top&&i.left<g.left+d.width&&i.top<g.top+d.height){return c=1}});if(!c){while(c=f.$parentPopMenu){f=c}f.boxing().hide();f.$popGrp.length=0}}},_prepareItem:function(d,e){var c="display:none;";e.add=e.add||"";e.displayAdd=e.add?"":c;e.displaySub=e.sub?"":c;e.itemDisplay=e.hidden?c:"";e.type=e.type||"button";if(e.type=="checkbox"){e.checkboxCls=d.getClass("CHECKBOX",e.value?"-checked":"")}else{if(e.type=="radiobox"){e.radioboxCls=d.getClass("RADIOBOX",e.value?"-checked":"")}}},_onresize:function(f,e,c){var d=arguments.callee.upper.apply(this,arguments);f.getSubNode("BOX").cssSize(d)}}});Class("linb.UI.MenuBar",["linb.UI","linb.absList"],{Instance:{updateItem:function(f,e){var d=this,g=d.get(0),i=g.box,c=g.properties.items,k=g.queryItems(c,function(l){return typeof l=="object"?l.id===f:l==f},true,true,true),h;if(typeof e=="string"){e={caption:e}}if(k.length){k=k[0];if(typeof k[0]!="object"){h=k[2][k[1]]={id:k[0]}}else{h=k[0]}_.merge(h,e,"all");h.id=f;if(_.arr.indexOf(c,h)!=-1){arguments.callee.upper.apply(this,arguments)}else{_.each(g.$allPops,function(l){l.updateItem(f,e)})}}return d},_pop:function(l,d){var m=this,g=m.get(0);if(g.$curPop){m.hide()}if(!l.sub){return}if(g.beforePopMenu&&false==g.boxing().beforePopMenu(g,l,d)){return}else{linb.use(d).tagClass("-mousedown");var f,e=l.id,i=g.properties,h="$allPops";g.$curPop=e;g.$curElem=d;g.$menuPop=e;g[h]=g[h]||{};if(!g[h][e]){var k=function(n){var p=linb.create("PopMenu",{position:"absolute",items:n,autoHide:!!i.autoShowTime});g.getSubNode("POOL").append(p);p.onHide(function(q){m.hide(false)}).onMenuSelected(function(s,q,r){return g.boxing().onMenuSelected(g,s,q,r)}).onShowSubMenu(function(s,q,r){return g.boxing().onShowSubMenu(g,s,q,r)});p.get(0).$hideMenuPool=g.getSubNode("POOL");p.get(0)[h]=g[h];g[h][e]=p};if(_.isArr(l.sub)&&l.sub.length){k(l.sub)}else{if(g.onGetPopMenu){var c=g.boxing().onGetPopMenu(g,l,k);if(_.isArr(c)&&c.length){k(l.sub=c)}}}}if(g[h][e]){g[h][e].pop(linb(d),1,linb(i.parentID))}return false}},_afterInsertItems:function(){this.clearPopCache()},hide:function(){var c=this.get(0),e,f=c.$curPop,d=c.$curElem;if(e=c.$allPops[f]){if(false!==arguments[0]){e.hide(false)}c.getSubNode("POOL").append(e.reBoxing());linb([d]).tagClass("-mousedown",false)}c.$menuPop=c.$curPop=c.$curElem=null},clearPopCache:function(){var c=this.get(0);if(c.renderId){c.getSubNode("POOL").empty();c.$allPops=c.$curPop=c.$curElem=null}}},Initialize:function(){linb.SC("linb.UI.PopMenu")},Static:{Templates:{tagName:"div",POOL:{tagName:"div"},BORDER:{className:"uibg-bar uiborder-outset",tagName:"div",LIST:{tagName:"div",HANDLER:{style:"{handler}"},ITEMS:{$order:1,text:"{items}"}}},$submap:{items:{ITEM:{ITEMI:{ITEMC:{ITEMA:{tabindex:"{_tabindex}",className:" {typeCls} {disabled}",ICON:{$order:1,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:2,text:"{caption}",style:"{captionDisplay}"}}}}}}}},Appearances:{KEY:{"font-size":0,"line-height":0,position:"absolute",left:0,top:0},POOL:{width:0,height:0,visibility:"hidden",position:"absolute",left:"-10000px"},BORDER:{left:0,top:0,"font-size":0,"line-height":0},HANDLER:{height:"22px",width:"7px",background:linb.UI.$bg("handler.gif"," left top",true),cursor:"move","vertical-align":"middle"},LIST:{padding:"2px"},ITEMS:{"vertical-align":"middle"},"LIST-disabled":{"background-color":"#E4E4E4"},"ITEM-mouseover, ITEM-mouseover ITEMI, ITEM-mouseover ITEMC, ITEM-mousedown, ITEM-mousedown ITEMI, ITEM-mousedown ITEMC":{background:linb.UI.$bg("button.gif","no-repeat",true)},ITEM:{height:"22px","white-space":"nowrap","vertical-align":"top",overflow:"hidden",margin:"0  3px 0 3px","padding-right":"6px","font-size":0,"line-height":0},"ITEM *":{cursor:"pointer"},ITEMI:{height:"22px","padding-left":"6px","vertical-align":"top"},ITEMC:{height:"22px","padding-top":"3px","vertical-align":"top"},ITEMA:{display:linb.$inlineBlock},"ITEM-mouseover":{$order:2,"background-position":"right -90px"},"ITEM-mousedown":{$order:3,"background-position":"right -180px"},"ITEM-mouseover ITEMI":{$order:2,"background-position":"left -150px"},"ITEM-mousedown ITEMI":{$order:3,"background-position":"left -240px"},"ITEM-mouseover ITEMC":{$order:2,"background-position":"left -120px","background-repeat":"repeat-x"},"ITEM-mousedown ITEMC":{$order:3,"background-position":"left -210px","background-repeat":"repeat-x"},CAPTION:{"font-size":"12px","line-height":"14px","vertical-align":linb.browser.ie6?"baseline":"middle"}},Behaviors:{ITEM:{onMouseover:function(d,h,k){var g=d.properties,c=k;if(g.disabled){return}var f=d.getItemByDom(k),i=f.id;if(f.disabled){return}linb.use(c).tagClass("-mouseover");if(d.$menuPop){if(d.$menuPop!=i){d.boxing()._pop(f,c)}}else{if(g.autoShowTime){_.resetRun(d.$linbid+":autoShowTime",function(){d.boxing()._pop(f,c)},g.autoShowTime)}}},onMouseout:function(g,h,c){var d=g.properties;if(d.disabled){return}var n=g.getItemByDom(c);if(n.disabled){return}linb.use(c).tagClass("-mouseover",false);if(d.autoShowTime){var k=g.$allPops;if(k=k&&k[g.$curPop]){var f=k.get(0).getRoot(),l=linb.Event.getPos(h),q=f.cssSize(),m=3,i=f.offset();if(l.left>i.left&&l.top>i.top-m&&l.left<i.left+q.width&&l.top<i.top+q.height){}else{k.hide()}}_.resetRun(g.$linbid+":autoShowTime",null)}},onMousedown:function(c,g,i){var f=c.properties;if(f.disabled){return}var d=c.getItemByDom(i),h=d.id;if(d.disabled){return}linb.use(i).tagClass("-mousedown");return c.boxing()._pop(d,i)},onMouseup:function(c,f,g){var d=c.getItemByDom(g);if(c.$menuPop!=d.id){linb.use(g).tagClass("-mousedown",false)}},onKeydown:function(f,i,c){var n=linb.Event.getKey(i),m=n.key,d=n.shiftKey,l=linb(c),h=f.getRoot().nextFocus(true,true,false),k=f.getRoot().nextFocus(false,true,false);switch(linb.Event.getKey(i).key){case"tab":if(d){if(l.get(0)!=h.get(0)){h.focus();return false}}else{if(l.get(0)!=k.get(0)){k.focus();return false}}break;case"left":case"up":var g=l.nextFocus(false,true,false);if(l.get(0)==h.get(0)){k.focus()}else{l.nextFocus(false)}return false;break;case"right":case"down":var g=l.nextFocus(true,false,false);if(l.get(0)==k.get(0)){h.focus()}else{l.nextFocus()}return false;break;case"enter":l.onMousedown();break}},onClick:function(c,f,g){var d=c.getItemByDom(g);if(c.$menuPop!=d.id){if(c.onMenuBtnClick){c.boxing().onMenuBtnClick(c,d,g)}}}}},DataModel:{listKey:null,height:{ini:"auto",readonly:true},width:"auto",parentID:"",$hborder:1,$vborder:1,left:0,top:0,autoShowTime:200,handler:{ini:true,action:function(c){this.getSubNode("HANDLER").css("display",c?"":"none")}},position:"absolute",dock:{ini:"top",listbox:["top","bottom"]}},EventHandlers:{onGetPopMenu:function(c,d,e){},onMenuBtnClick:function(c,d,e){},beforePopMenu:function(c,d,e){},onShowSubMenu:function(c,f,d,e){},onMenuSelected:function(c,f,d,e){}},RenderTrigger:function(){if(this.properties.disabled){this.boxing().setDisabled(true,true)}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.handler=d.handler?"":"display:none";return d}}});Class("linb.UI.ToolBar",["linb.UI","linb.absList"],{Instance:{updateItem:function(c,q){if(q.type){return arguments.callee.upper.apply(this,[c,q,"items.sub"])}else{var p=this,d=p.get(0),e=d.box,i=d.properties.items,l=d.queryItems(i,function(r){return typeof r=="object"?r.id===c:r==c},true,true,true),n,h,g,f,m;if(_.isStr(q)){q={caption:q}}delete q.id;delete q._pid;if(l.length){l=l[0];if(n=l[0]){h=d.getSubNodeByItemId("ICON",c);g=d.getSubNodeByItemId("CAPTION",c);f=d.getSubNodeByItemId("ITEM",c);if("value" in q&&q.value!=n.value){d.getSubNodeByItemId("BTN",c).tagClass("-checked",!!q.value)}if("caption" in q&&q.caption!=n.caption){g.html(q.caption);if(q.caption&&!n.caption){d.getSubNode("CAPTION").css("display","")}if(!q.caption&&n.caption){d.getSubNode("CAPTION").css("display","none")}}if("disabled" in q&&q.disabled!=n.disabled){if(q.disabled){g.addClass("ui-itemdisabled")}else{g.removeClass("ui-itemdisabled")}}if("image" in q&&q.image!=n.image){h.css("background-image",q.image)}if("imagePos" in q&&q.imagePos!=n.imagePos){h.css("background-position",q.imagePos)}if("imageClass" in q&&q.imageClass!=n.imageClass){if(n.imageClass){h.removeClass(n.imageClass)}if(q.imageClass){h.addClass(q.imageClass)}}if("hidden" in q){var k=!!q.hidden;if(k){if(n.hidden!==true){f.css("display","none")}}else{if(n.hidden===true){f.css("display","")}}}_.merge(n,q,"all")}}return p}},showItem:function(d,c){return this.each(function(e){var f=e.getItemByItemId(d);if(f){f.hidden=c===false;e.getSubNodeByItemId("ITEM",d).css("display",c===false?"none":"")}})},showGroup:function(c,d){return this.each(function(e){_.arr.each(e.properties.items,function(f){if(f.id==c){f.hidden=d===false;return false}});e.getSubNodeByItemId("GROUP",c).css("display",d===false?"none":"");if(e.renderId&&e.getRootNode().offsetWidth){linb.UI.$dock(e,true,true)}})}},Static:{_focusNodeKey:"BTN",_ITEMKEY:"GROUP",Templates:{tagName:"div",ITEMS:{className:"uibg-bar uiborder-outset",tagName:"div",style:"{mode}",text:"{items}"},$submap:{items:{GROUP:{className:"{groupClass}",style:"{grpDisplay} {groupStyle}",HANDLER:{style:"{mode2}"},LIST:{$order:1,tagName:"text",text:"{sub}"}}},"items.sub":{ITEM:{style:"{itemDisplay}",IBWRAP:{tagName:"div",SPLIT:{style:"{splitDisplay}"},LABEL:{className:" {disabled}",style:"{labelDisplay}",text:"{label}"},BTN:{className:"ui-btn {itemcls} {itemClass}",style:"{itemStyle} {boxDisplay}",BTNI:{className:"ui-btni",BTNC:{className:"ui-btnc",BOX:{tabindex:"{_tabindex}",BOXWRAP:{tagName:"div",ICON:{$order:1,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat}  {imageDisplay}"},CAPTION:{$order:2,text:"{caption}",className:" {disabled}",style:"{captionDisplay}"},DROP:{$order:3,style:"{dropDisplay}"}}}}}}}}}}},Appearances:{KEY:{"font-size":0,"line-height":0,position:"absolute",left:0,top:0},"ITEM-object":{"vertical-align":"middle","margin-left":"4px"},ICON:{margin:0,"vertical-align":"top"},ITEMS:{display:"block","padding-bottom":"1px","font-size":0,"line-height":0},HANDLER:{height:"22px",width:"7px",background:linb.UI.$bg("handler.gif"," left top",true),cursor:"move","vertical-align":"middle"},GROUP:{"font-size":0,"line-height":0,position:"relative",padding:"2px 4px 0px 2px","vertical-align":"middle"},ITEM:{"vertical-align":"middle",padding:"1px"},"BTNC a":{padding:0},SPLIT:{$order:1,width:"6px",height:"19px","vertical-align":"middle",background:linb.UI.$bg("split_vertical.gif","repeat-y left top",true)},BTN:{"padding-right":"3px"},BTNI:{"padding-left":"3px"},DROP:{width:"14px",height:"16px","vertical-align":"top",background:linb.UI.$bg("drop.gif","no-repeat left center","Button")},"BTN-mouseover DROP":{$order:2,"background-position":"-16px center"},"BTN-mousedown DROP, BTN-checked DROP":{$order:2,"background-position":"-32px center"},"LABEL, CAPTION":{height:"16px","vertical-align":"middle","margin-left":"2px","margin-right":"2px",cursor:"default","font-size":"12px"},LABEL:{"padding-top":"3px"}},Behaviors:{HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},BTN:{onClick:function(f,h,i){if(f.properties.disabled){return}var d=linb.use(i).parent(3).id(),c=f.getItemByDom(d);if(c.disabled){return}var g=f.getItemByDom(i);if(g.disabled){return}linb.use(i).focus();if(g.statusButton){linb.use(i).tagClass("-checked",g.value=!g.value)}f.boxing().onClick(f,g,c,h,i);return false}}},DataModel:{listKey:null,height:{ini:"auto",readonly:true},width:"auto",left:0,top:0,handler:{ini:true,action:function(c){this.getSubNode("HANDLER",true).css("display",c?"":"none")}},position:"absolute",hAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("ITEMS",true).css("textAlign",c)}},dock:{ini:"top",listbox:["top","bottom"]}},EventHandlers:{onClick:function(c,d,g,f,h){}},_adjustItems:function(d){if(!d){d=[_()+""]}if(_.isStr(d)){d=[d]}var e=_.copy(d),c;_.arr.each(e,function(g,f){if(_.isArr(g)){g={id:_.id(),sub:g}}if(_.isHash(g)){e[f]=_.copy(g);e[f].sub=[];if(g.sub){_.arr.each(g.sub,function(h){e[f].sub.push(_.isHash(h)?_.copy(h):{id:h+""})})}}});return e},_prepareData:function(c){var f=arguments.callee.upper.call(this,c);var e=c.properties;f.mode=e.hAlign=="right"?"text-align:right;":"";return f},_prepareItem:function(d,e,q,k,l,m,f,g){var h="display:none",n=function(u,r,E,z,A,B,w,x){var s=r[linb.UI.$tag_subId]=typeof x=="string"?x:("a_"+u.pickSubId("aitem")),D;if(typeof E=="string"){E={caption:E}}if(false!==w){u.ItemIdMapSubSerialId[E.id]=s;u.SubSerialIdMapItem[s]=E}if(D=E.object){D=r.object=D["linb.absBox"]?D.get(0):D;if(D["linb.UIProfile"]){D.properties.position="relative";var C=u.getClass("ITEM","-object"),y=D.CC.KEY||(y=D.CC.KEY="");if(y.indexOf(C)===-1){D.CC.KEY=y+" "+C}}E.$linbid=D.$linbid;D.$item=E;D.$holder=u;if(!u.$attached){u.$attached=[]}u.$attached.push(D)}else{if(E.type=="split"){E.split=true}else{if(!E.caption){E.caption=""}}linb.UI.adjustData(u,E,r);if(E.statusButton&&!!E.value){r.itemcls=" ui-btn-checked "+u.getClass("BTN","-checked",!!E.value)}r.splitDisplay=r.split?"":h;r.labelDisplay=r.label?"":h;r.captionDisplay=r.caption?"":h;r.dropDisplay=E.dropButton?"":h;r.boxDisplay=(!r.split&&(r.caption||r.image||r.imageClass))?"":h}r.itemDisplay=E.hidden?h:"";E._pid=z};if(k){n(d,e,q,k,l,m,f,g)}else{var i=[],c,p=q.sub||[];k=q.id;e.mode2=d.properties.handler?"":h;e.grpDisplay=q.hidden?h:"";e.sub=i;_.arr.each(p,function(r){c={id:r.id};n(d,c,r,k,l,m,f,g);i.push(c)})}}}});Class("linb.UI.Layout",["linb.UI","linb.absList"],{Instance:{getPanel:function(c){return this.get(0).getSubNodeByItemId("PANEL",c)},append:function(d,c){var e=this.get(0);return arguments.callee.upper.call(this,d,c||"main")},insertItems:function(c,e,d){return this._insertItems(c,e,d)},_insertItems:function(h,d,p,q){var e,k,l,i,c,f,g,n="before",m=this._afterInsertItems;return this.each(function(s){g=s.box;l=s.properties.items;if(!q){i=_.arr.subIndexOf(l,"id",d);if(i==-1){n=p?"before":"after"}else{if(l[i].id=="main"){n=p?"before":"after"}else{n=l[i].pos}}k=g._adjustItems2(h,n)}else{k=h}if(i==-1){_.arr.insertAny(l,k,p?0:-1)}else{_.arr.insertAny(l,k,p?i:i+1)}if(s.renderId){f=g._prepareItems(s,k,d);c=s._buildItems("items",f);s.getRoot().prepend(c);var r=s.getRootNode().style;linb.UI.$tryResize(s,r.width,r.height,true);r=null}if(m){s.boxing()._afterInsertItems(s,f,d,p)}})},_afterRemoveItems:function(d){if(d.renderId){var c=d.getRootNode().style;linb.UI.$tryResize(d,c.width,c.height,true);c=null}},updateItem:function(d,r){var q=this,f=q.get(0),g=f.properties.type=="vertical",k=f.box,l=f.properties.items,m=f.queryItems(l,function(s){return typeof s=="object"?s.id===d:s==d},true,true,true),p,h,e,c,n;if(typeof r!="object"){return}delete r.id;if(m.length){m=m[0];if(typeof m[0]!="object"){p=m[2][m[1]]={id:m[0]}}else{p=m[0]}var i=false;e=f.getSubNodeByItemId("ITEM",d);if(!e.isEmpty()){if(r.hasOwnProperty("size")){r.size=parseInt(""+r.size);if(r.size!=p.size){p.size=r.size;if(g){e.height(r.size)}else{e.width(r.size)}i=true}}if(r.hasOwnProperty("hidden")){r.hidden=!!r.hidden;if(r.hidden!==p.hidden){f.getSubNodeByItemId("ITEM",d).css("display",r.hidden?"none":"");i=true}}if(r.hasOwnProperty("locked")){r.locked=!!r.locked;if(r.locked!==p.locked){f.getSubNodeByItemId("MOVE",d).css("display",r.locked?"none":"");i=true}}if(r.hasOwnProperty("folded")){r.folded=!!r.folded;if(r.folded!==p.folded){f.boxing().fireCmdClickEvent(d)}}if(r.hasOwnProperty("cmd")){r.cmd=!!r.cmd;if(r.cmd!==p.cmd){f.getSubNodeByItemId("CMD",d).css("display",r.cmd?"":"none")}}}_.merge(p,r,"all");if(i){var n=f.getRootNode().style;linb.UI.$tryResize(f,n.width,n.height,true);n=null}}return q},fireCmdClickEvent:function(c){this.getSubNodeByItemId("CMD",c).onMousedown();return this}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",text:"{items}",$submap:{items:{ITEM:{tagName:"div",className:"{cls1} {itemClass}",style:"{size};{itemStyle};{display}",MOVE:{$order:0,tagName:"div",className:"uibg-bar {cls2} ",style:"{moveDisplay}"},CMD:{$order:1,tagName:"div",style:"{cmdDisplay}",className:"{cls3} "},PANEL:{tagName:"div",className:"uibg-base",style:"position:absolute;left:0;top:0;",text:linb.UI.$childTag}}}}},Appearances:{".setting-linb-layout":{width:"9px"},KEY:{position:"absolute",overflow:"hidden",left:0,top:0,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},MOVE:{$order:0,position:"absolute","z-index":"10","font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},"MOVE-mouseover":{$order:1,"background-color":"#C8E1FA"},CMD:{position:"absolute",cursor:"pointer","z-index":"20","font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},ITEM:{position:"absolute","z-index":1,overflow:"hidden","border-width":linb.browser.opr?"0px":null,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},PANEL:{position:"absolute",overflow:"hidden","border-width":linb.browser.opr?"0px":null,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},"ITEM-MAIN":{left:0,right:0,top:0,bottom:0},"ITEM-TOP, ITEM-BOTTOM":{left:0,right:0},"ITEM-LEFT, ITEM-RIGHT":{top:0,bottom:0},"MOVE-TOP, MOVE-BOTTOM":{width:"100%",height:"7px",cursor:"n-resize","border-top":"solid 1px #c8e1fa","border-bottom":"solid 1px #648cb4"},"MOVE-LEFT, MOVE-RIGHT":{height:"100%",width:"7px",cursor:"w-resize","border-left":"solid 1px #c8e1fa","border-right":"solid 1px #648cb4"},"MOVE-TOP":{bottom:0},"MOVE-BOTTOM":{top:0},"MOVE-LEFT":{right:0},"MOVE-RIGHT":{left:0},"CMD-TOP, CMD-BOTTOM, CMD-LEFT, CMD-RIGHT":{background:linb.UI.$bg("icons.gif","no-repeat",true)},"CMD-TOP":{$order:1,left:"50%","margin-left":"-20px",bottom:0,width:"40px",height:"9px","background-position":"-360px -232px"},"CMD-BOTTOM":{$order:1,left:"50%","margin-left":"-20px",top:0,width:"40px",height:"9px","background-position":"-360px -258px"},"CMD-LEFT":{$order:1,top:"50%","margin-top":"-20px",right:0,height:"40px",width:"9px","background-position":"-310px -240px"},"CMD-RIGHT":{$order:1,top:"50%","margin-top":"-20px",left:0,height:"40px",width:"9px","background-position":"-336px -240px"},"CMD-TOP-mouseover":{$order:2,"background-position":"-360px -245px"},"CMD-BOTTOM-mouseover":{$order:2,"background-position":"-360px -271px"},"CMD-LEFT-mouseover":{$order:2,"background-position":"-323px -240px"},"CMD-RIGHT-mouseover":{$order:2,"background-position":"-349px -240px"},"MOVE-MAIN":{$order:5,display:"none"},"CMD-MAIN":{$order:5,display:"none"}},Behaviors:{DroppableKeys:["PANEL"],HoverEffected:{MOVE:"MOVE",CMD:"CMD"},onSize:linb.UI.$onSize,MOVE:{onMousedown:function(i,q,c){if(linb.Event.getBtn(q)!="left"){return}var r=i.getSubId(c),z=i.getItemByDom(c);if(z.folded){return}var l=i.getItemByItemId("main"),g=i.getSubNode("ITEM",r),k=i.getSubNodeByItemId("ITEM","main"),x=linb.use(c).css("cursor"),y=i.properties,n,s,p,u,f,d;i.pos=z.pos;if(y.type=="vertical"){n=i._cur=g.height();p=k.height();if(z.pos=="before"){f=n-z.min;d=z.max?Math.min(parseInt(z.max)-n,(p-l.min)):(p-l.min)}else{f=z.max?Math.min(parseInt(z.max)-n,(p-l.min)):(p-l.min);d=n-z.min}linb.use(c).startDrag(q,{dragType:"copy",targetReposition:false,verticalOnly:true,maxTopOffset:f,maxBottomOffset:d,dragCursor:x})}else{s=i._cur=g.width();u=k.width();if(z.pos=="before"){f=s-z.min;d=z.max?Math.min(parseInt(z.max)-s,(u-l.min)):(u-l.min)}else{f=z.max?Math.min(parseInt(z.max)-s,(u-l.min)):(u-l.min);d=s-z.min}linb.use(c).startDrag(q,{dragType:"copy",targetReposition:false,horizontalOnly:true,maxLeftOffset:f,maxRightOffset:d,dragCursor:x})}i._limited=0},onDrag:function(g,i,l){var f=g.properties,k=linb.DragDrop,h=linb.DragDrop._profile,c=0;if(f.type=="vertical"){if((h.y<=h.restrictedTop)||(h.y>=h.restrictedBottom)){c=true}}else{if(h.x<=h.restrictedLeft||h.x>=h.restrictedRight){c=true}}if(c){if(!g._limited){g._bg=h.proxyNode.css("backgroundColor");h.proxyNode.css("backgroundColor","#ff6600");g._limited=true}}else{if(g._limited){h.proxyNode.css("backgroundColor",g._bg);g._limited=0}}},onDragstop:function(d,h,k){var c=d.properties,i=linb.use(k).parent(),g=d.getRoot(),f=d.getItemByDom(k);if(c.type=="vertical"){i.height(f.size=d._cur+(d.pos=="before"?1:-1)*linb.DragDrop.getProfile().offset.y);linb.UI.$tryResize(d,null,g.height(),true)}else{i.width(f.size=d._cur+(d.pos=="before"?1:-1)*linb.DragDrop.getProfile().offset.x);linb.UI.$tryResize(d,g.width(),null,true)}d._limited=0}},CMD:{onMousedown:function(k,p,d){if(linb.Event.getBtn(p)!="left"){return}var u=k.properties,q=k.getSubId(d),s=k.getItemByDom(d),f=k.getRoot(),l=k.getItemByItemId("main"),i=k.getSubNodeByItemId("ITEM","main"),g=k.getSubNode("ITEM",q),c=k.getSubNode("PANEL",q),h=k.getSubNode("MOVE",q),n=linb.UI.$getCSSValue("setting-linb-layout","width");if(u.type=="vertical"){if(s.folded){if(s.size<=i.height()-l.min+n){g.height(s.size);c.show();s.folded=false;if(s.pos=="before"){linb.use(d).replaceClass(/bottom/g,"top")}else{linb.use(d).replaceClass(/top/g,"bottom")}if(!s.locked){h.css("cursor","n-resize")}k.getSubNode("MOVE").tagClass("-checked",false)}else{linb.message("no enough space!")}}else{g.height(n);c.hide();s.folded=true;if(s.pos=="before"){linb.use(d).replaceClass(/top/g,"bottom")}else{linb.use(d).replaceClass(/bottom/g,"top")}if(!s.locked){h.css("cursor","default")}k.getSubNode("MOVE").tagClass("-checked")}linb.UI.$tryResize(k,null,f.height(),true)}else{if(s.folded){if(s.size<=i.width()-l.min+n){g.width(s.size);c.show();s.folded=false;if(s.pos=="before"){linb.use(d).replaceClass(/right/g,"left")}else{linb.use(d).replaceClass(/left/g,"right")}if(!s.locked){h.css("cursor","w-resize")}k.getSubNode("MOVE").tagClass("-checked",false)}else{linb.message("no enough space!")}}else{g.width(n);c.hide();s.folded=true;if(s.pos=="before"){linb.use(d).replaceClass(/left/g,"right")}else{linb.use(d).replaceClass(/right/g,"left")}if(!s.locked){h.css("cursor","default")}k.getSubNode("MOVE").tagClass("-checked")}linb.UI.$tryResize(k,f.width(),null,true)}return false}}},DataModel:{disabled:null,position:"absolute",type:{listbox:["vertical","horizontal"],ini:"vertical",action:function(g,h){if(g!=h){var e=this,k="auto",c=e.getSubNode("ITEM",true),d=e.getSubNode("MOVE",true),i=e.getSubNode("CMD",true);d.merge(c).merge(i);if(g=="vertical"){d.replaceClass(/(-left)(\b)/ig,"-top$2");d.replaceClass(/(-right)(\b)/ig,"-bottom$2");c.each(function(l){linb(l).height(linb(l).width())}).css({left:0,top:k,right:k,bottom:k})}else{d.replaceClass(/(-top)(\b)/ig,"-left$2");d.replaceClass(/(-bottom)(\b)/ig,"-right$2");c.each(function(l){linb(l).width(linb(l).height())}).css({left:k,top:0,right:k,bottom:k})}var f=e.getRoot().cssSize();linb.UI.$tryResize(e,f.width,f.height,true)}}},dock:"fill",listKey:null,width:200,height:200,items:{ini:[],set:function(h){var k=this;if(k.renderId){var f=k.boxing(),c=linb.$getGhostDiv(),e=_.copy(k.children),i,g;k.children.length=0;_.arr.each(e,function(l){delete l[0].$dockParent;c.appendChild(l[0].getRootNode())});f.clearItems();g=k.box._adjustItems(h);f._insertItems(g,null,null,true);_.arr.each(e,function(l){f.append.apply(f,l)});c.innerHTML="";var d=k.getRoot().cssSize();linb.UI.$tryResize(k,d.width,d.height,true)}else{k.properties.items=_.copy(h)}}}},_adjustItems2:function(d,e){var c=[];_.arr.each(d,function(f){if(f.id!="main"){c.push(f=_.isHash(f)?f:{id:""+f});f.pos=e}});_.arr.each(c,function(f){f.id=_.isStr(f.id)?f.id:_.id();f.min=f.min||10;f.size=parseInt(f.size)||80;f.locked=typeof f.locked=="boolean"?f.locked:false;f.folded=typeof f.folded=="boolean"?f.folded:false;f.hidden=typeof f.hidden=="boolean"?f.hidden:false;f.cmd=typeof f.cmd=="boolean"?f.cmd:true});return c},_adjustItems:function(d){var c,e=[],f=[];_.arr.each(d,function(g){if(g.id=="main"){c=g}else{if(g.pos=="before"){e.push(g)}else{g.pos="after";f.push(g)}}});c=c||{};c.id="main";c.min=c.min||10;d.length=0;_.arr.insertAny(d,this._adjustItems2(e,"before"));_.arr.insertAny(d,c);_.arr.insertAny(d,this._adjustItems2(f,"after"));return d},_prepareData:function(c){var d=c.properties;if(!d.items||d.items.constructor!=Array){d.items=_.clone([{id:"before",pos:"before",locked:false,size:60,min:50,max:200},{id:"after",pos:"after",locked:false,size:60,min:50,max:200}])}d.items=this._adjustItems(d.items);return arguments.callee.upper.call(this,c)},_prepareItems:function(d,c){var e=arguments.callee.upper.apply(this,arguments);_.arr.each(c,function(f){delete f.caption});return e},_prepareItem:function(d,e){var c=d.properties;if(e.id=="main"){e.cls1=d.getClass("ITEM","-main");e.cls2=d.getClass("MOVE","-main");e.cls3=d.getClass("CMD","-main");return}if(c.type=="vertical"){e.size="height:"+e.size+"px"}else{e.size="width:"+e.size+"px"}var f;if(c.type=="vertical"){if(e.pos=="before"){f="top"}else{f="bottom"}}else{if(e.pos=="before"){f="left"}else{f="right"}}e.cls1=d.getClass("ITEM","-"+f);e.cls2=d.getClass("MOVE","-"+f);e.cls3=d.getClass("CMD","-"+f);e.display=e.hidden?"display:none":"";e.moveDisplay=e.locked?"display:none":"";e.cmdDisplay=e.cmd?"":"display:none"},RenderTrigger:function(){var c,d=this;_.arr.each(d.properties.items,function(e){if(e.id!="main"){if(e.folded&&(c=d.getSubIdByItemId(e.id))){e.folded=false;d.getSubNode("CMD",c).onMousedown()}}})},_onresize:function(i,e,x){var w,y=i.properties,k,g,r,f,d,u,s=i.keys.ITEM,c=i.keys.PANEL,h=i.getSubNode("MOVE",true),p=linb.UI.$getCSSValue("setting-linb-layout","width");var q={},l={};_.arr.each(y.items,function(m){r=i.getSubIdByItemId(m.id);q[r]={};l[r]={}});if(y.type!="vertical"){if(!_.isNull(e)){u=f=d=0;_.arr.each(y.items,function(m){if(m.id=="main"){return}r=i.getSubIdByItemId(m.id);if(m.pos=="before"){g=i.getSubNode("ITEM",r);if(m.hidden){k=0;l[r].width=m.size}else{if(m.folded){k=l[r].width=p}else{k=g.width()}}l[r].left=f;f+=k;l[r].right="auto";q[r].right="auto";q[r].left=0;q[r].width=k-(m.locked?0:p)}});_.arr.each(y.items,function(m){if(m.id=="main"){return}r=i.getSubIdByItemId(m.id);if(m.pos=="after"){g=i.getSubNode("ITEM",r);if(m.hidden){k=0;l[r].width=m.size}else{if(m.folded){k=l[r].width=p}else{k=g.width()}}l[r].right=d;d+=k;l[r].left="auto";q[r].right=0;q[r].left="auto";q[r].width=k-(m.locked?0:p)}},null,true);u=f+d;if(e-u>=0){w=i.getSubIdByItemId("main");q[w].width=e-u;l[w].width=e-u;l[w].left=f}}if(!_.isNull(x)){_.each(q,function(m,n){m.height=x;l[n].height=x})}}else{if(!_.isNull(x)){u=f=d=0;_.arr.each(y.items,function(m){if(m.id=="main"){return}r=i.getSubIdByItemId(m.id);if(m.pos=="before"){g=i.getSubNode("ITEM",r);if(m.hidden){k=0;l[r].height=m.size}else{if(m.folded){k=l[r].height=p}else{k=g.height()}}l[r].top=f;f+=k;l[r].bottom="auto";q[r].top=0;q[r].bottom="auto";q[r].height=k-(m.locked?0:p)}});_.arr.each(y.items,function(m){if(m.id=="main"){return}r=i.getSubIdByItemId(m.id);if(m.pos=="after"){g=i.getSubNode("ITEM",r);if(m.hidden){k=0;l[r].height=m.size}else{if(m.folded){k=l[r].height=p}else{k=g.height()}}l[r].bottom=d;d+=k;l[r].top="auto";q[r].bottom=0;q[r].top="auto";q[r].height=k-(m.locked?0:p)}},null,true);u=f+d;if(x-u>=0){w=i.getSubIdByItemId("main");q[w].height=x-u;l[w].height=x-u;l[w].top=f}}if(!_.isNull(e)){_.each(q,function(m,n){m.width=e;l[n].width=e})}}_.each(l,function(m,n){i.getSubNode("PANEL",n).cssRegion(q[n],true);i.getSubNode("ITEM",n).cssRegion(l[n])})}}});Class("linb.UI.ColLayout",["linb.UI","linb.absList"],{Dependency:["linb.UI.Panel"],Instance:{addPanel:function(g,e,k,l){var f=this.get(0),h=f.properties.items,d=f.properties;if(!e){e=h[0].id}if(_.arr.subIndexOf(h,"id",e)==-1){return this}if(!g.properties){g.properties={}}var i=this,f=i.get(0);_.merge(g.properties,{dock:"none",position:"relative",left:0,top:0,width:"auto",height:"auto",toggle:true,toggleBtn:true,dragKey:d.disabled?null:f.box.KEY+":"+f.$linbid,closeBtn:!d.disabled});var c=new linb.UI.Panel(g.properties,g.events,g.host,g.theme,g.CS,g.CC,g.CB,g.CF);return this.movePanel(c.get(0),e,k,l)},movePanel:function(h,d,k,g){var e=this.get(0);if(h["linb.UI"]){h=h.get(0)}if(k&&k["linb.UI"]){k=k.get(0)}if(h&&h!=k){if(h.parent!=e||h.childrenId!=d){this.append(h,d);c=1}var f,c,i=h.getRootNode();if(!k){f=this.getSubNodeByItemId("PANEL",d);if(f.last().isEmpty()||f.last().id()!=i.id){f.append(i);c=1}}else{if(g){f=k.getRoot();if(f.prev().isEmpty()||f.prev().id()!=i.id){f.addPrev(i);c=1}}else{f=k.getRoot();if(f.next().isEmpty()||f.next().id()!=i.id){f.addNext(i);c=1}}}if(c&&e.onRelayout){this.onRelayout(e)}}return this},append:function(e,c){var d=this.get(0).properties;if(c=c||(d.items&&d.items[0]&&d.items[0].id)){arguments.callee.upper.call(this,e,c)}return this}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",ITEMS:{$order:10,tagName:"div",text:"{items}"},COVER:{tagName:"div"},$submap:{items:{ITEM:{tagName:"div",style:"width:{width}",MOVE:{$order:1,tagName:"div",style:"{_display}"},PANEL:{$order:2,tagName:"div",text:linb.UI.$childTag}}}}},Appearances:{KEY:{position:"absolute","overflow-x":"hidden","overflow-y":"auto",border:"none",zoom:linb.browser.ie6?1:null},ITEMS:{position:"relative",overflow:"hidden",border:"none",zoom:linb.browser.ie6?1:null},COVER:{position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"none","z-index":10,background:linb.browser.ie?"url("+linb.ini.img_bg+")":null},MOVE:{$order:0,position:"relative","float":"right",width:"4px",height:"200px",cursor:"e-resize","background-color":"#f4f4f4","border-width":linb.browser.opr?"0":null,"font-size":linb.browser.ie?0:"","line-height":linb.browser.ie?0:""},"MOVE-mouseover":{$order:1,"background-color":"#f0f0f0"},ITEM:{position:"static","float":"left",overflow:"hidden","border-width":"0","font-size":linb.browser.ie?0:"","line-height":linb.browser.ie?0:""},PANEL:{position:"static",overflow:"hidden",zoom:linb.browser.ie6?1:null,"border-width":linb.browser.opr?"0":null,"font-size":linb.browser.ie?0:"","line-height":linb.browser.ie?0:""}},Behaviors:{HoverEffected:{MOVE:"MOVE"},DroppableKeys:["KEY"],MOVE:{onMousedown:function(h,m,d){if(linb.Event.getBtn(m)!="left"){return}var p=h.properties;if(p.disabled){return}var k=p.minWidth,q=linb.use(d).css("cursor"),i=h._pre=linb.use(d).parent(),n=h._preW=i.offsetWidth(),l=h._next=i.next(),c=h._nextW=l.offsetWidth(),g=n-k,f=c-k;if(g<0){g=0}if(f<0){f=0}h._bg=null;h._limited=0;linb.use(d).startDrag(m,{dragType:"copy",targetReposition:false,targetCSS:{background:"none"},horizontalOnly:true,widthIncrement:10,maxLeftOffset:g,maxRightOffset:f,dragCursor:q})},onDrag:function(c,f,g){var d=linb.DragDrop.getProfile();if(d.x<=d.restrictedLeft||d.x>=d.restrictedRight){if(!c._limited){c._bg=linb.use(g).css("backgroundColor");linb.use(g).css("backgroundColor","#ff6600");c._limited=true}}else{if(c._limited){linb.use(g).css("backgroundColor",c._bg);c._limited=0}}c._pre.width(c._preW+d.offset.x);c._next.width(c._nextW-d.offset.x)},onDragstop:function(f,m,c){var i=f.getSubNode("ITEM",true).get(),d=linb.use(c),g=f.getSubNode("ITEMS").width(),p=[],q,h=0;_.arr.each(i,function(k,e){if(e!=i.length-1){p[e]=linb([k]).offsetWidth()}});_.arr.each(i,function(k,e){if(e!=i.length-1){q=((p[e]/g)*100).toFixed(4);h+=+q;p[e]=k.style.width=q+"%"}});p[i.length-1]=i[i.length-1].style.width=(99-h).toFixed(4)+"%";if(f._limited){d.css("backgroundColor",f._bg);f._limited=0}if(f.onColResize){f.boxing().onColResize(f,p)}}},onMousemove:function(f,i){if(f.$$ondrag){var c=f.properties;if(c.disabled){return}if(linb.DragDrop.getProfile().isWorking){var h=f.box,l=f.$$height,n=f.$$dragitemid,k=h._checkpos(f,linb.Event.getPos(i));if(k){var d=k[0],m=k[1],g=k[2];if(d){if(m){f.$$droppable=h._checkDroppable(f,g?2:3,linb(m),l,n)}else{f.$$droppable=h._checkDroppable(f,1,linb(d),l,n)}}else{h._setNoDroppable(f);delete f.$$droppable}}}}}},DataModel:{position:"absolute",dock:"fill",listKey:null,width:200,height:200,minWidth:150,disabled:{ini:false,action:function(c){}},items:[{id:"1",width:"30.4%"},{id:"2",width:"30.4%"},{id:"3",width:"38.2%",_display:"display:none"}]},EventHandlers:{onColResize:function(c,d){},onRelayout:function(c){}},_preparePosSizeEtc:function(c){var n=c.getRoot(),k=c.getSubNode("ITEM",true),p=0,f=0,m,d,r,l=n.offset(),q=n.cssSize(),g=[],e=[];k.each(function(h){p=p+linb(h).offsetWidth();g.push([p,h.lastChild.id]);m=h.lastChild.childNodes;f=0;e.push([]);for(d=0;r=m[d];d++){if(!r.id||!linb.UIProfile.getFromDom(r)||!r.style||r.style.display=="none"||r.style.visibility=="hidden"){continue}f=f+r.offsetHeight;e[e.length-1].push([f,r.id])}});c._cachePosSizeData=[l,q,g,e];c._ddup=c._ddid=c._ddincol=c._ddi==null},_checkpos:function(g,q,c){var d=g._cachePosSizeData,r=d[0],x=d[1],n=d[2],m=d[3],k;var e,f=q.left-r.left,p=q.top-r.top,h=0,u,w,s=0,l;while(w=n[h++]){if(f<w[0]){if(g._ddincol===w[1]){break}k=true;g._ddi=h-1;g._ddincol=w[1];g._ddid=g._ddup=null;break}}if(g._ddi!==null){e=g._ddincol;l=m[g._ddi];h=0;while(w=l[h++]){if(p<w[0]){if(g._ddid!==w[1]){g._ddup=null}j=(p<(s+(w[0]-s)/2));if(g._ddid===w[1]&&g._ddup===j){break}g._ddid=w[1];g._ddup=j;k=true;break}s=w[0]}if(k||c){return[e,g._ddid,g._ddup]}}else{if(k||c){return[null]}else{return}}},_checkDroppable:function(i,h,k,d,f){var e=this,c=false,g=i._proxy||(i._proxy=linb.create('<div style="border:1px dashed #FF0000;">'));g.height(d||20);if(k.isEmpty()){return}if(h===1){if(k.last().isEmpty()||k.last().id()!=f){k.append(g);c=true}}else{if(h===2){if(k.id()!=f){if(k.prev().isEmpty()||k.prev().id()!=f){k.addPrev(g);c=true}}}else{if(k.id()!=f){if(k.next().isEmpty()||k.next().id()!=f){k.addNext(g);c=true}}}}if(c){linb.DragDrop.setDragIcon("add");return true}else{e._setNoDroppable(i);return false}},_setNoDroppable:function(c){if(c._proxy){c._proxy.remove();delete c._proxy}c._ddup=c._ddid=c._ddincol=c._ddi==null;linb.DragDrop.setDropFace()},_onDropMarkShow:function(){return false},_onDropMarkClear:function(c){c.box._setNoDroppable(c)},_onDragEnter:function(f,g,h){var d=linb.DragDrop.getProfile().$id;if(f.$$ddfalg!=d){f.$$ddfalg=d;f.box._preparePosSizeEtc(f)}var c=linb.DragDrop.getProfile().dragData.profile;if(c&&c.parent==f){f.$$dragitemid=linb.DragDrop.getProfile().dragData.profile.domId;f.$$height=linb.DragDrop.getProfile().dragData.profile.getRoot().offsetHeight()}f.getSubNode("COVER").css({display:"block"});f.$$ondrag=true;delete f.$$dropalbe},_onDragLeave:function(c){c.getSubNode("COVER").css({display:"none"});delete c.$$dragitemid;delete c.$$height;delete c.$$ondrag},_onDrop:function(f,h){if(f.$$droppable){var k=f.box._checkpos(f,linb.Event.getPos(h),true),i=linb.DragDrop.getProfile().dragData,g=i.profile,m=g.parent==f;if(k&&k[0]){var d=f.getItemIdByDom(k[0]),c=linb.UIProfile.getFromDom(k[1]),l=k[2];if(d){if(m){f.boxing().movePanel(g,d,c,l)}else{f.boxing().addPanel(i.data.properties,i.data.events,d,c,l)}}}}f.getSubNode("COVER").css({display:"none"});f.box._setNoDroppable(f);delete f._cachePosSizeData;delete f.$$height;delete f.$$ondrag},_prepareData:function(c){c.properties.dropKeys=c.box.KEY+":"+c.$linbid;return arguments.callee.upper.call(this,c)},_onresize:function(e,d,c){}}});Class("linb.UI.TreeGrid",["linb.UI","linb.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(f){if(!f.renderId){return}if(f.properties.activeMode=="none"){return}var m=f.boxing(),u=m.getUIValue(),d=f.properties,h=d.activeMode=="row"?"CELLS":"CELL",i=function(p,x){return f.getSubNode(p,x)},n=function(k){var x=f.rowMap2;if(d.activeMode=="row"){return x[k]}else{if(!k){return}var p=k.split("|");return _.get(f.rowMap,[x[p[0]],"_cells",p[1]])}};if(d.selMode=="single"){var s=n(u);if(u&&s){i(h,s).tagClass("-checked",false)}s=n(c);if(s){i(h,s).tagClass("-checked")}if(s){var e=i(h,s);if(e){var r=e.offsetTop(),q=i("SCROLL"),l=q.scrollHeight(),w=q.scrollTop(),g=q.height();if(l>g){if(r<w||r>w+g){q.scrollTop(r)}}}}}else{if(d.selMode=="multi"){u=u?u.split(";"):[];c=c?c.split(";"):[];_.arr.each(u,function(k){if(_.arr.indexOf(c,k)==-1){i(h,n(k)).tagClass("-checked",false)}});_.arr.each(c,function(k){if(_.arr.indexOf(u,k)==-1){i(h,n(k)).tagClass("-checked")}});if(c.length===0){i("HFMARK").tagClass("-checked",false);delete f._$checkAll}}}})},_insertRowsToDom:function(e,h,g,d,k){if(g){var l=e.rowMap[g];if(l&&!l._inited){return}}if(!h){h=[]}var f,i,i=e.getSubNode("HFCELL").width();_.arr.each(h,function(m){m._row0DfW=i?("width:"+i+"px"):"";_.arr.each(m.cells,function(n,p){n.width=n._col.width})});var c=e._buildItems("rows",h);if(!d){if(g){f=e.getSubNode("SUB",g)}else{f=e.getSubNode("BODY")}if(k){f.prepend(c)}else{f.append(c)}}else{f=e.getSubNode("ROW",d);if(k){f.addPrev(c)}else{f.addNext(c)}}_.arr.each(h,function(m){m.open=false});delete e.$allrowscache},_refreshHeader:function(f){var d=this.get(0),e=d.properties;_.breakO(d.colMap,2);if(!f){f=[]}f=d.box._adjustHeader(f);var c=d.box._prepareHeader(d,f);e.header=f;this.removeAllRows();d.getSubNode("HCELL",true).remove();if(c.length){d.getSubNode("HCELLS").append(d._buildItems("header",c))}d.box._ajdustBody(d);if(d.$col_pop){d.$col_pop.destroy();delete d.$col_pop}_.each(d.$cache_editor,function(g){g.destroy()});d.$cache_editor={}},_toggleRows:function(e,c){var d=this;if(e&&e.length){_.arr.each(e,function(f){d.toggleRow(f.id,c)})}},isDirtied:function(){var c=false;_.each(this.get(0).cellMap,function(d){if(d.oValue!==d.value){c=true;return false}});return c},getRows:function(f){var e=this.get(0).properties.rows;if(f=="data"){return _.clone(e,true)}else{if(f=="min"){var d=_.clone(e,true),c;_.arr.each(d,function(h,g){_.each(c=d[g]=d[g].cells,function(i,k){c[k]=i.value})});return d}else{return e}}},getRowbyRowId:function(h,g){var f=this.get(0),e=f.rowMap2[h];e=e?f.rowMap[e]:null;if(e){if(g=="data"){return _.clone(e,true)}else{if(g=="min"){var d=_.clone(e,true),c;_.each(c=d=d.cells,function(i,k){c[k]=i.value});return d}else{return e}}}},getRowbyCell:function(d,g){var f=d._row;if(f){if(g=="data"){return _.clone(f,true)}else{if(g=="min"){var e=_.clone(f,true),c;_.each(c=e=e.cells,function(h,i){c[i]=h.value});return e}else{return f}}}},toggleRow:function(f,c){var d=this.get(0),e=d.rowMap[d.rowMap2[f]];if(e&&e.sub){d.box._setSub(d,e,typeof c=="boolean"?c:!e._checked)}return this},updateRow:function(f,p){var k=this,c=k.getRowbyRowId(f);if(c){var l=c._serialId,n,h;if(!c){return k}if(typeof p!="object"){p={caption:p}}else{_.filter(p,true)}p.id=f;if(("group" in p&&p.group!=c.group)||"cells" in p||("sub" in p&&!((p.sub===true&&!c.sub)||(!p.sub&&c.sub===true)))){var d="__special",e=k.get(0),g=c._pid?e.rowMap[c._pid].id:null;c.id=d;e.rowMap2[d]=e.rowMap2[f];delete e.rowMap2[f];_.each(e.colMap,function(q){if(q._cells){delete q._cells[f]}});c=_.clone(c,true);_.merge(c,p,"all");if("sub" in p&&!p.sub){delete c.sub}k.insertRows([c],g,d,true);k.removeRows([d])}else{if("sub" in p){n=k.getSubNode("FCELLCMD",l);if(p.sub){n.removeClass("uicmd-empty").addClass("uicmd-toggle2")}else{n.removeClass("uicmd-toggle2").addClass("uicmd-empty")}}if(n=p.height){k.getSubNode("CELLS",l).height(n)}if(n=p.rowStyle){(h=k.getSubNode("CELLS",l)).attr("style",h.attr("style")+";"+n)}if(n=p.rowClass){k.getSubNode("CELLS",l).addClass(n)}if(p.hasOwnProperty("disabled")){var m=e.getClass("CELLS","-disabled");if(p.disabled){k.getSubNode("CELLS",l).addClass(m)}else{k.getSubNode("CELLS",l).removeClass(m)}}if(p.hasOwnProperty("readonly")){var m=e.getClass("CELLS","-readonly");if(p.readonly){k.getSubNode("CELLS",l).addClass(m)}else{k.getSubNode("CELLS",l).removeClass(m)}}if(n=p.firstCellStyle){(h=k.getSubNode("FCELL",l)).attr("style",h.attr("style")+";"+n)}if(n=p.firstCellClass){k.getSubNode("FCELL",l).addClass(n)}if(p.hasOwnProperty("caption")){k.getSubNode("FCELLCAPTION",l).get(0).innerHTML=p.caption}if(p.hasOwnProperty("preview")){if(p.preview){k.getSubNode("PREVIEW",l).css("display","block").html(p.preview)}else{k.getSubNode("PREVIEW",l).css("display","none")}}if(p.hasOwnProperty("summary")){if(p.summary){k.getSubNode("SUMMARY",l).css("display","block").html(p.summary)}else{k.getSubNode("SUMMARY",l).css("display","none")}}if(p.hasOwnProperty("rowResizer")){n=!!p.rowResizer;k.getSubNode("FHANDLER",l).css("display",(p.rowResizer=n)?"block":"none")}_.merge(c,p,"all")}}else{var i=k.get(0).queryItems(k.getRows(),function(q){return typeof q=="object"?q.id===f:q==f},true,true,true);if(i.length){_.merge(i[0][0],p,"all")}}return k},insertRows:function(i,h,d,q){if(!i||!_.isArr(i)||i.length<1){return this}var n=this.constructor,f=this.get(0),r=f.properties,e=f.rowMap2,p=f.rowMap,l,s,g;h=e[h];d=e[d];if(d){s=f.rowMap[d];if(s){h=s._pid}}i=n._adjustRows(i);if(!h){l=(r.rows||(r.rows=[]))}else{g=p[h];l=_.isArr(g.sub)?g.sub:(g.sub=[])}var u;if(f.renderId){if(!h||g._inited){u=n._prepareItems(f,i,h);this._insertRowsToDom(f,u,h,d,q)}}if(!d){_.arr.insertAny(l,i,q?0:-1)}else{var m=_.arr.subIndexOf(l,"_serialId",d);_.arr.insertAny(l,i,q?m:(m+1))}if(f.renderId){if(!r.iniFold){f.boxing()._toggleRows(u,true)}f.box._asy(f)}return this},removeRows:function(h){var f=this,g=f.get(0),i=g.properties,c=g.cellMap,e=[],d;h=_.isArr(h)?h:[h];_.arr.each(h,function(q){if(!(q=g.rowMap2[q])){return}var p;if(p=g.rowMap[q]){var m=p._cells,n=p.id,l;if(p.sub&&_.isArr(p.sub)){var k=[];_.arr.each(p.sub,function(r){k.push(r.id)});f.removeRows(k)}_.each(m,function(s,r){delete c[s]._col._cells[n];_.breakO(c[s]);delete c[s];g.reclaimSubId(s.slice(2),"cell")});if(l=p._pid?(l=g.rowMap[p._pid])?l.sub:null:g.properties.rows){if(_.isArr(l)){_.filter(l,function(r){return r._serialId!=q})}}delete g.rowMap2[n];_.breakO(g.rowMap[q]);delete g.rowMap[q];e.push(g.getSubNode("ROW",q).get(0))}g.reclaimSubId(q.slice(2),"row")});if(d=i.$UIvalue){if((d=d.split(";")).length>1){_.filter(d,function(k){return _.arr.indexOf(h,k)==-1});i.$UIvalue=d.join(";")}else{if(_.arr.indexOf(h,i.$UIvalue)!=-1){i.$UIvalue=null}}}linb(e).remove();if(g.$activeCell&&!linb.Dom.byId(g.$activeCell)){delete g.$activeCell}if(g.$activeRow&&!linb.Dom.byId(g.$activeRow)){delete g.$activeRow}delete g.$allrowscache;g.box._asy(g);return f},removeAllRows:function(){var d=this.get(0);for(var c in d.cellMap){d.reclaimSubId(c.slice(2),"cell")}for(var c in d.rowMap){d.reclaimSubId(c.slice(2),"row")}_.each(d.colMap,function(e){e._cells={}});_.breakO([d.rowMap,d.cellMap],3);d.rowMap={};d.cellMap={};d.rowMap2={};delete d.$activeCell;delete d.$activeRow;d.properties.rows.length=0;if(d.renderId){d.getSubNode("BODY").empty();d.getSubNode("SCROLL").scrollTop(0).scrollLeft(0)}delete d.$allrowscache;d.properties.$UIvalue=null;return this},resetRowValue:function(e){var d=this.get(0),f=this.getRowbyRowId(e),c=[];_.arr.each(f.cells,function(g){if(g.oValue!==g.value){g.oValue=g.value;delete g.dirty;if(d.properties.dirtyMark){c.push(d.getSubNode("CELLA",g._serialId).get(0))}}});if(d.properties.dirtyMark){linb(c).removeClass("ui-dirty")}},resetColValue:function(f){var e=this.get(0),d=this.getHeaderByColId(f),c=[];_.arr.each(d.cells,function(g){if(g.oValue!==g.value){g.oValue=g.value;delete g.dirty;if(e.properties.dirtyMark){c.push(e.getSubNode("CELLA",g._serialId).get(0))}}});if(e.properties.dirtyMark){linb(c).removeClass("ui-dirty")}},getActiveRow:function(){var c,d=this.get(0);if(d.properties.activeMode!="row"){return}if(!(c=d.$activeRow)){return}return d.rowMap[d.getSubId(c)]},setActiveRow:function(e){var d,f,c=this.get(0);if(c.properties.activeMode!="row"){return}delete c.$activeRow;if(!(f=this.getRowbyRowId(e))){return}if(!(d=c.getSubNode("CELLS",f._serialId)).isEmpty()){c.box._activeRow(c,d.get(0).id)}return this},getHeader:function(f){var e=this.get(0).properties.header;if(f=="data"){return _.clone(e,true)}else{if(f=="min"){var d=_.clone(e,true),c;_.arr.each(d,function(h,g){d[g]=h.id});return d}else{return e}}},getHeaderByColId:function(f,e){var c=this.get(0).properties.header,d=_.arr.subIndexOf(c,"id",f);return d==-1?null:e=="data"?_.clone(c[d],true):e=="min"?c[d].id:c[d]},getHeaderByCell:function(c,e){var d=c._col;return !d?null:e=="data"?_.clone(d,true):e=="min"?d.id:d},updateHeader:function(c,l){var h=this,e=h.getHeaderByColId(c);if(e){var i=e._serialId,k,f;if(typeof l!="object"){l={caption:l+""}}else{_.filter(l,true)}delete l.id;if(k=l.width){var d=[];d.push(h.getSubNode("HCELL",i).get(0));_.each(e._cells,function(m){d.push(h.getSubNode("CELL",m).get(0))});linb(d).width(k);h.constructor._ajdustBody(h.get(0))}if(k=l.headerStyle){(f=h.getSubNode("HCELL",i)).attr("style",f.attr("style")+";"+k)}if(k=l.headerClass){h.getSubNode("HCELL",i).addClass(k)}if(l.hasOwnProperty("caption")){h.getSubNode("HCELLCAPTION",i).get(0).innerHTML=l.caption}if("colResizer" in l){k=!!l.colResizer;h.getSubNode("HHANDLER",i).css("display",(l.colResizer=k)?"block":"none")}if(l.hasOwnProperty("visibility")&&!l.hasOwnProperty("hidden")){l.hidden=!l.visibility}if("hidden" in l){var g=!!l.hidden;if(g){if(e.hidden!==true){h.showColumn(c,false)}}else{if(e.hidden===true){h.showColumn(c,true)}}}_.merge(e,l,"all")}return h},showColumn:function(d,c){return this.each(function(h){var k=h.colMap2,i=h.colMap,g,e,f,l=[];if(g=i[e=k[d]]){l.push(h.getSubNode("HCELL",e).get(0));_.each(g._cells,function(m){l.push(h.getSubNode("CELL",m).get(0))});linb(l).css("display",(g.hidden=(c===false?true:false))?"none":"")}h.box._ajdustBody(h)})},getCell:function(g,f){var d=this,e=this.get(0),c;_.each(e.cellMap,function(h){if(h.id&&h.id===g){g=h._serialId;return false}});c=e.cellMap[g];return !c?null:f=="data"?_.merge({rowId:c._row.id,colId:c._col.id},_.clone(c,true)):f=="min"?c.value:c},getCellbyRowCol:function(g,f,e){var d=this.get(0),c;c=_.get(d.rowMap,[d.rowMap2[g],"_cells",f]);c=c&&d.cellMap[c];return !c?null:e=="data"?_.merge({rowId:c._row.id,colId:c._col.id},_.clone(c,true)):e=="min"?c.value:c},getCells:function(f,d,c){var e={};_.each(this.get(0).cellMap,function(g){if((f?(f==g._row.id):1)&&(d?(d==g._col.id):1)){e[g.id]=c=="data"?_.merge({rowId:g._row.id,colId:g._col.id},_.clone(g,true)):c=="min"?g.value:g}});return e},updateCellByRowCol:function(k,g,e,i,h){var f,d=this,c=d.constructor;if(f=c._getCellId(d.get(0),k,g)){c._updCell(d.get(0),f,e,i,h)}return d},updateCell:function(f,d,h,g){var c=this,e=this.get(0);_.each(e.cellMap,function(i){if(i.id&&i.id===f){f=i._serialId;return false}});c.constructor._updCell(e,f,d,h,g);return c},editCellbyRowCol:function(f,e){var d=this.get(0),c=d.box;c._editCell(d,c._getCellId(d,f,e));return this},editCell:function(c){this.constructor._editCell(this.get(0),c);return this},focusCellbyRowCol:function(g,e){var d=this.get(0),c=d.box,f=c._getCellId(d,g,e);d.getSubNode("CELLA",f).focus(true);return this},focusCell:function(c){var d=c._serialId;this.get(0).getSubNode("CELLA",d).focus(true);return this},getActiveCell:function(){var c,d=this.get(0);if(d.properties.activeMode!="cell"){return}if(!(c=d.$activeCell)){return}return d.cellMap[d.getSubId(c)]},setActiveCell:function(g,e){var f,c,d=this.get(0);if(d.properties.activeMode!="cell"){return}delete d.$activeCell;if(typeof g=="object"){c=g}else{c=this.getCellbyRowCol(g,e)}if(!c){return}if(!(f=d.getSubNode("CELL",c._serialId)).isEmpty()){d.box._activeCell(d,f.get(0).id)}return this},resetGridValue:function(){return this.each(function(c){_.each(c.cellMap,function(d){d.oValue=d.value;delete d.dirty});if(c.properties.dirtyMark){c.getSubNode("CELLA",true).removeClass("ui-dirty")}})},getDirtied:function(e,c){var d={};_.each(this.get(0).cellMap,function(f){if(f.oValue!==f.value&&(e?(e==f._row.id):1)&&(c?(c==f._col.id):1)){d[f.id]={rowId:f._row.id,colId:f._col.id,value:f.value,oValue:f.oValue}}});return d},getSubNodeInGrid:function(d,g,f){var e=this,c=(g&&f)?e.getCellbyRowCol(g,f):f?e.getHeaderByColId(f):g?e.getRowbyRowId(g):null;return e.getSubNode(d,(c&&c._serialId)||true)}},Initialize:function(){this.addTemplateKeys(["ALT","PROGRESS"])},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",BOX:{tagName:"div",HEADER:{$order:0,tagName:"div",style:"{showHeader}",HI:{tagName:"div",HCELLS:{tagName:"div",style:"{headerHeight};",HFCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"{cellCls}",HCELLA:{HHANDLER:{tagName:"div",style:"{colDDDisplay}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},HFMARK:{className:"uicmd-check",style:"{_rowMarkDisplay}"},GRIDCAPTION:{$order:2,text:"{gridHandlerCaption}"},SORT:{style:"{sortDisplay}"}}},OTHERHCELLS:{$order:1,tagName:"text",text:"{header}"}}}},SCROLL:{$order:1,tagName:"div",className:"uibg-base ",BODY:{tagName:"div",text:"{rows}"}},FOOTER:{$order:2},COLLIST:{tagName:"div"},ARROW:{}}},$submap:{header:{HCELL:{style:"width:{width}px;{colDisplay};",className:"{cellCls}",HCELLA:{className:"{headerClass}",style:"{headerStyle}",HCELLCAPTION:{text:"{caption}"},SORT:{style:"{sortDisplay}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},rows:{ROW:{tagName:"div",PREVIEW:{$order:1,tagName:"div",style:"{previewDisplay}",text:"{preview}"},CELLS:{$order:2,tagName:"div",className:"{rowCls} {rowClass}",style:"height:{rowHeight}px;{rowStyle}",FCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"{cellCls}",CELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"{cellClass}{firstCellClass}",FCELLRULER:{style:"width:{_rulerW}px"},FCELLCMD:{$order:2,className:"{subClass}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},FCELLINN:{$order:3,ROWNUM:{},FCELLCAPTION:{$order:1,text:"{caption}"}},MARK:{$order:1,style:"{_rowMarkDisplay}"}}},OTHERCELLS:{tagName:"text",$order:1,text:"{cells}"}},SUB:{$order:3,tagName:"div"},SUMMARY:{$order:4,tagName:"div",style:"{summaryDisplay}",text:"{summary}"}}},"rows.cells":function(g,f,e,d,c){var h=arguments.callee,i=h._m||(h._m={checkbox:".checkbox",button:".button",progress:".progress"});linb.UI.$doTemplate(g,f,e,d+(i[e.type]||".input"),c)},"rows.cells.input":{CELL:{style:"width:{width}px;{cellDisplay};",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{bgcolor};{color};{cellStyle}",tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.button":{CELL:{style:"width:{width}px;{cellDisplay};",className:"{cellCls}",CELLA:{tagName:"button",className:"{cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.checkbox":{CELL:{style:"width:{width}px;{cellDisplay}",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",CHECKBOX:{className:"{checkboxCls}"}}}},"rows.cells.progress":{CELL:{style:"width:{width}px;{cellDisplay}",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",PROGRESS:{tagName:"div",style:"width:{progress};",text:"{caption}"}}}}}},Appearances:{KEY:{display:"block",position:"absolute",overflow:"hidden"},BOX:{display:"block",position:"relative",overflow:"hidden"},HEADER:{background:linb.UI.$bg("head.gif","#CAE3FF repeat-x left top"),position:"relative",overflow:"hidden"},HI:{position:"relative"},SCROLL:{overflow:"auto",position:"relative"},ARROW:{position:"absolute","z-index":"20",left:0,top:0,display:"none",width:"14px",height:"18px",background:linb.UI.$bg("icons.gif","no-repeat -72px -270px",true)},COLLIST:{position:"absolute","z-index":"10",left:0,top:0,cursor:"pointer",visibility:"hidden",background:linb.UI.$bg("collist.gif","#FFF1A0 no-repeat center bottom"),border:"1px solid","border-color":"#fff #ACA899 #ACA899 #fff"},BODY:{overflow:"visible",position:"absolute","background-color":"#fff","padding-bottom":"1px",left:0,top:"0","font-size":0,"line-height":0},"SORT, SORT-checked":{width:"16px",height:"16px"},SORT:{background:linb.UI.$bg("icons.gif","no-repeat -110px -220px",true),position:"absolute",right:"2px",bottom:"2px"},"HCELL-mouseover SORT":{$order:1,"background-position":"-110px -240px"},"HCELL-mousedown SORT":{$order:2,"background-position":"-110px -260px"},"SORT-checked":{$order:3,"background-position":"-130px -220px"},"HCELL-mouseover SORT-checked":{$order:4,"background-position":"-130px -240px"},"HCELL-mousedown SORT-checked":{$order:5,"background-position":"-130px -260px"},HHANDLER:{position:"absolute",background:linb.browser.ie?"url("+linb.ini.img_bg+")":null,width:"4px",top:"0",right:"0",height:"100%",cursor:"e-resize","font-size":0,"line-height":0},"HCELLS, CELLS":{"overflow-y":linb.browser.ie?"hidden":"",position:"relative","white-space":"nowrap","font-size":"12px","line-height":"18px"},HCELLS:{"padding-bottom":"2px"},CELLS:{"border-bottom":"1px solid #A2BBD9"},"CELLS-group":{$order:1,"border-right":"1px solid #A2BBD9"},"CELLS-group FCELL":{"border-right":0,"padding-right":"1px",overflow:"visible"},"CELLS-group FCELLCAPTION, CELLS-group CELLA, CELLS-group FCELLINN":{"font-weight":"bold",color:"#3764A0",overflow:"visible"},"PREVIEW,SUMMARY":{position:"relative",display:"none","padding-left":"16px","border-right":"1px solid #A2BBD9"},PREVIEW:{$order:4,"border-bottom":"1px solid #A2BBD9"},SUMMARY:{$order:4,"border-bottom":"1px solid #A2BBD9"},"CELLS-mouseover":{$order:4,"background-color":"#DFE8F6"},"CELLS-readonly CELLA":{$order:5,color:"#808080"},"CELL-readonly CELLA":{$order:6,color:"#808080"},"CELLS-disabled":{$order:7,"background-color":"#EBEADB"},"CELLS-disabled CELLA":{$order:7,color:"#808080"},"CELL-disabled":{$order:8,"background-color":"#EBEADB"},"CELL-disabled CELLA":{$order:8,color:"#808080"},"CELLS-active, CELL-active":{$order:5,"background-color":"#A3BAE9"},"CELLS-checked, CELL-checked, CELLS-checked CELLA, CELL-checked CELLA":{$order:6,"background-color":"#7199E8",color:"#fff"},"FCELL CELLA":{"text-align":"left"},"HFCELL HCELLA":{"text-align":"center"},FHANDLER:{position:"absolute",height:"4px",left:"0px",width:"100%",bottom:"0px",cursor:"n-resize","z-index":10,"font-size":0,"line-height":0},"FCELLCAPTION, FCELLINN":{"vertical-align":"middle",overflow:"hidden"},"HFCELL, HCELL":{background:linb.UI.$bg("head.gif","#CAE3FF repeat-x left top"),height:"100%","border-left":"1px solid #fff","border-top":"1px solid #fff","border-right":"1px solid #A2BBD9","border-bottom":"1px solid #A2BBD9",padding:0,"vertical-align":"top","font-size":"12px","line-height":"14px"},"HFCELL-mouseover, HCELL-mouseover":{background:linb.UI.$bg("head-mouseover.gif","#FFF1A0 repeat-x left top")},ROW:{position:"relative",zoom:linb.browser.ie?1:null,width:linb.browser.ie?"100%":null,"font-size":0,"line-height":0},ROWNUM:{"padding-right":"6px",color:"#808080"},"FCELL, CELL":{"padding-left":"1px","border-right":"1px solid #A2BBD9",height:"100%",position:"relative",overflow:linb.browser.ie6?"hidden":"","font-size":"12px","line-height":"20px","vertical-align":"top"},ALT:{"background-color":"#EFF8FF"},"CELL-label a":{color:"#000"},"CELL-input":{},"CELL-number, CELL-spin, CELL-currency":{"text-align":"right"},"CELL-checkbox":{"text-align":"center"},"CELL-button CELLA":{width:"100%"},"CELL-mouseover":{$order:5,"background-color":"#DFE8F6"},"FCELL CELLA, HCELLA":{position:"relative"},HCELLA:{"text-align":"center"},"HCELLA, CELLA":{display:"block",overflow:"hidden","-moz-box-flex":"1","outline-offset":"-1px","-moz-outline-offset":"-1px !important",height:"100%",color:"#000",width:linb.browser.ie?"100%":"","line-height":"19px"},"CELLA-inline":{$order:5,display:linb.$inlineBlock,width:"auto","-moz-box-flex":0},PROGRESS:{height:"100%","background-color":"#00ffff","text-align":"center",overflow:"visible",opacity:0.7,"*filter":"alpha(opacity=70)"},"CHECKBOX, MARK":{cursor:"pointer",width:"16px",height:"16px","vertical-align":"middle",background:linb.UI.$bg("icons.gif","no-repeat -20px -70px",true)},"CELL-mouseover CHECKBOX":{$order:1,"background-position":"-20px -90px"},"CELL-mousedown CHECKBOX":{$order:2,"background-position":"-20px -110px"},"CHECKBOX-checked, CELLS-checked MARK":{$order:3,"background-position":"0 -70px"},"CELL-mouseover CHECKBOX-checked":{$order:4,"background-position":"0 -90px"},"CELL-mousedown CHECKBOX-checked":{$order:5,"background-position":"0 -110px"},SUB:{"*zoom":1,height:0,position:"relative",overflow:"hidden","font-size":"1px","line-height":"1px"}},Behaviors:{HoverEffected:{FCELLCMD:"FCELLCMD",HCELL:"HCELL",HFCELL:"HFCELL"},ClickEffected:{FCELLCMD:"FCELLCMD",CELL:"CELL",HCELL:"HCELL"},DroppableKeys:["SCROLL","CELLS","FCELLCMD"],DraggableKeys:["FCELL"],onSize:linb.UI.$onSize,HFMARK:{onClick:function(c,f,g){if(c.properties.selMode!="multi"){return}var d=[];_.each(c.rowMap,function(e){d.push(e.id)});if(c._$checkAll){delete c._$checkAll;c.boxing().setUIValue("");linb.use(g).tagClass("-checked",false)}else{c._$checkAll=true;linb.use(g).tagClass("-checked");c.boxing().setUIValue(d.join(";"))}return false}},SCROLL:{onScroll:function(d,f,g){var c=linb.use(g).get(0).scrollLeft||0;if(d.$sl!=c){d.getSubNode("HEADER").get(0).scrollLeft=d.$sl=c}}},HHANDLER:{onMousedown:function(k,m,c){if(linb.Event.getBtn(m)!="left"){return}var g=k.properties,h=linb(c),l=h.parent(2).width()-g._minColW,n=k.getSubNode("SCROLL"),f=n.offset().left+n.width()-linb.Event.getPos(m).left-4,d=k.getSubId(c),i=k.colMap[d];if(g.disabled){return false}if(i&&i.disabled){return false}h.startDrag(m,{horizontalOnly:true,dragType:"blank",dragDefer:2,maxLeftOffset:l,maxRightOffset:f,targetReposition:false});linb.use(c).parent(2).onMouseout(true,{$force:true}).onMouseup(true)},onDragbegin:function(c,d,f){linb.DragDrop.getProfile().proxyNode.css({height:c.getRoot().height()+"px",width:"4px",backgroundColor:"#ddd",cursor:"e-resize"})},onDrag:function(f,h,k){var i=linb.DragDrop,g=i.getProfile(),c=0;if(g.x<=g.restrictedLeft||g.x>=g.restrictedRight){c=true}if(c){if(!f._limited){g.proxyNode.css("backgroundColor","#ff6600");f._limited=true}}else{if(f._limited){g.proxyNode.css("backgroundColor","#ddd");f._limited=0}}},onDragstop:function(h,i,c){var f=linb(c).parent(2),l=f.width()+linb.DragDrop.getProfile().offset.x,g=h.colMap[h.getSubId(c)];f.width(l);if(g){g.width=l}var d=[],k=[];if(h.getKey(linb.use(c).parent(2).id())==h.keys.HFCELL){h.box._setRowHanderW(h,l)}else{var m=h.colMap[h.getSubId(c)]._cells;_.each(m,function(e){d.push(h.getSubNode(h.keys.CELL,e).id())});linb(d).width(l)}h.getSubNode("SCROLL").onScroll();h.box._ajdustBody(h);h._limited=0},onClick:function(){return false},onDblclick:function(h,l,c){if(h.getKey(linb.use(c).parent(2).id())==h.keys.HFCELL){h.box._setRowHanderW(h,true);return}var d=h.properties,f=h.getSubId(c),i=h.colMap[f],r=i._cells,s=h.getClass("CELLA","-inline"),g,m=[],k=[],q;_.each(r,function(e){g=h.getSubNode("CELLA",e);if(g._nodes.length){m.push(g.get(0));k.push(g.addClass(s).width())}});k.push(d._minColW);q=parseInt(Math.max.apply(null,k));if(q>d._maxColW){q=d._maxColW}linb(m).parent().width(q);linb.use(c).parent(2).width(i.width=q);linb(m).removeClass(s);h.box._ajdustBody(h);return false}},FHANDLER:{onMousedown:function(g,h,c){if(linb.Event.getBtn(h)!="left"){return}var d=g.properties,l=g.rowMap[g.getSubId(c)],f=linb(c),m=f.parent(3).height()-d._minRowH,k=g.getSubNode("SCROLL"),i=k.offset().top+k.height()-linb.Event.getPos(h).top-4;if(d.disabled||(l&&l.disabled)){return false}f.startDrag(h,{verticalOnly:true,dragType:"blank",dragDefer:2,maxTopOffset:m,maxBottomOffset:i,targetReposition:false});linb.use(c).parent(2).onMouseout(true,{$force:true}).onMouseup(true)},onDragbegin:function(c,d,f){linb.DragDrop.getProfile().proxyNode.css({width:c.getRoot().width()+"px",height:"4px",backgroundColor:"#ddd",cursor:"n-resize"})},onDrag:function(f,h,k){var i=linb.DragDrop,g=i.getProfile(),c=0;if(g.y<=g.restrictedTop||g.y>=g.restrictedBottom){c=true}if(c){if(!f._limited){g.proxyNode.css("backgroundColor","#ff6600");f._limited=true}}else{if(f._limited){g.proxyNode.css("backgroundColor","#ddd");f._limited=0}}},onDragstop:function(d,f,k){var i=linb(k).parent(3),c=i.height()+linb.DragDrop.getProfile().offset.y,g=d.rowMap[d.getSubId(k)];if(linb.browser.ie&&c%2==1){c+=1}i.height(c);if(d.getKey(linb.use(k).parent(2).id())==d.keys.HFCELL){d.properties.headerHeight=c;linb.UI.$tryResize(d,null,d.getRoot().height(),true)}else{g.height=c}d._limited=0},onDblclick:function(f,h,k){var g=f.properties,c=f.getSubId(k),i,d;if(c){i=f.rowMap[c];d=f.getSubNode("CELLS",c);d.height(i.height=d.height("auto").height())}else{d=f.getSubNode("HCELLS");d.height(f.properties.headerHeight=d.height("auto").height());linb.UI.$tryResize(f,null,f.getRoot().height(),true)}return false},onClick:function(){return false}},FCELLCMD:{onClick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(d.disabled||g.disabled){return false}if(!g.sub){return}c.box._setSub(c,g,!g._checked);return false}},HCELLA:{onClick:function(i,m,c){var f=i.properties,d=i.getSubId(c),g=i.colMap[d];if(!g){if(i.onClickGridHandler){i.boxing().onClickGridHandler(i,m,c)}if(f.disabled){return false}if(!f.colSortable){return}}else{if(f.disabled||g.disabled){return false}if(!(g.hasOwnProperty("colSortable")?g.colSortable:f.colSortable)){return}}var k=(g?g._order:i._order)||false,r=(g?g.type:null)||"input",s=g?g.sortby:null,l=g?_.arr.indexOf(f.header,g):-1,q=arguments.callee,n=q.fun||(q.fun=function(p,D,w,u,A,E){var y,x,C=arguments.callee;if(D){y=D.sub;x=p.getSubNode("SUB",D._serialId).get(0)}else{D={_inited:true};y=p.properties.rows;x=p.getSubNode("BODY").get(0)}var L=[],K=[],I=[],z,B;_.arr.each(y,function(M){if(M.sub&&M.sub.length>1){C(p,M,w,u,A,E)}L[L.length]=w==-1?M.caption:(z=M.cells)?(z=z[w])?z.value:"":M[w];K[K.length]=K.length});if(typeof A!="function"){switch(u){case"number":case"spin":case"currency":B=function(M){return parseFloat(M)||0};break;case"datetime":case"date":B=function(M){return _.isDate(M)?M.getTime():_.isFinite(M)?parseInt(M):0};break;default:B=function(M){return M||""}}A=function(M,N){M=B(L[M]);N=B(L[N]);return(M>N?1:M==N?0:-1)*(E?1:-1)}}K.sort(A);var H=D._inited,J=_.copy(y),G;if(H){L=x.childNodes}_.arr.each(K,function(N,M){y[M]=J[N];if(H){I[M]=L[N]}});if(H){var e=document.createDocumentFragment();for(var F=0;z=I[F];F++){e.appendChild(z)}x.appendChild(e)}});n(i,"",l,r,s,k);i.getSubNode("SORT",true).css("display","none");var h=(g?i.getSubNode("SORT",g._serialId):i.getSubNode("SORT")).css("display","");h.tagClass("-checked",g?(!(g._order=!g._order)):(!(i._order=!i._order)));i.box._asy(i);delete i.$allrowscache;return false},onMousedown:function(d,g,k){if(linb.Event.getBtn(g)!="left"){return}var f=d.properties;if(f.disabled){return}var c=d.colMap[d.getSubId(k)];if(!c){return}if(f.disabled||c.disabled){return false}if(!(c.hasOwnProperty("colMovable")?c.colMovable:f.colMovable)){return}if(false===d.boxing().beforeColDrag(d,c.id)){return}var l=linb.Event.getPos(g),i=linb(k),h=d.getSubId(k);i.startDrag(g,{dragType:"icon",shadowFrom:i.parent(),dragCursor:"pointer",targetLeft:l.left+12,targetTop:l.top+12,targetReposition:false,dragDefer:2,dragKey:d.$linbid+":col",dragData:i.parent().id()})},onDragbegin:function(c,d,f){linb(f).parent().onMouseout(true,{$force:true});linb(f).onMouseup(true)},beforeMouseover:function(f,h,i){var g=f.properties,k=f.getSubId(i),d=f.colMap[k];if(!d){return}if(g.disabled||d.disabled){return false}var c=linb.use(i).parent().linbid();if(false===f.box._colDragCheck(f,c)){return}linb.DragDrop.setDropElement(i).setDropFace(i,"move");f.getSubNode("ARROW").left(linb.use(c).get(0).offsetLeft-8).top(linb.use(c).get(0).offsetHeight).css("display","block")},beforeMouseout:function(f,h,i){var g=f.properties,k=f.getSubId(i),d=f.colMap[k];if(!d){return}if(g.disabled||d.disabled){return false}var c=linb.use(i).parent().linbid();linb.DragDrop.setDropElement(null).setDropFace(null,"none");if(false===f.box._colDragCheck(f,c)){return}f.getSubNode("ARROW").css("display","none")},onDrop:function(l,s,c){var i=l.properties,h=l.getSubId(c),k=l.colMap[h];if(!k){return}if(i.disabled||k.disabled){return false}var w=linb.use(c).parent().linbid();l.getSubNode("ARROW").css("display","none");if(false===l.box._colDragCheck(l,w)){return}var r=linb.DragDrop.getProfile().dragData,q=r&&l.getSubId(r),g=l.getSubId(w);var d=l.colMap,n=d[q],f=d[g];if(false===l.boxing().beforeColMoved(l,n.id,f.id)){return}linb.DragDrop.setDropFace(w,"none");var u=_.arr.subIndexOf(i.header,"_serialId",q),m=_.arr.subIndexOf(i.header,"_serialId",g);if(u===m||u===m-1){return}l.getSubNode("HCELL",g).addPrev(linb(linb.DragDrop.getProfile().dragData));_.each(f._cells,function(p,e){l.getSubNode("CELL",p).addPrev(l.getSubNode("CELL",n._cells[e]))});var y=i.header[u];_.arr.insertAny(i.header,y,m);_.arr.removeFrom(i.header,u+(u>m?1:0));var x=l.queryItems(i.rows,true,true);_.arr.each(x,function(e){e=e.cells?e.cells:e;if(!e||e.constructor!=Array){return}y=e[u];_.arr.removeFrom(e,u);_.arr.insertAny(e,y,m)});l.boxing().afterColMoved(l,n.id,f.id);delete l.$allrowscache},onMouseover:function(h,i,c){var f=h.properties,d=h.getSubId(c),g=h.colMap[d];if(g){if(f.disabled||g.disabled){return false}if(!(g.hasOwnProperty("colHidable")?g.colHidable:f.colHidable)){return}}else{if(f.disabled){return false}if(!f.colHidable){return}}_.resetRun(h.$linbid+":collist",null);var l={},k=linb.use(c).parent().offset(null,h.getSubNode("BOX")),m=linb.use(c).parent().cssSize();if(m.width<16){return}l.height=m.height;l.width=14;l.left=k.left;l.top=k.top;h.getSubNode("COLLIST").cssRegion(l).css("visibility","visible")},onMouseout:function(d,g,h){var f=d.properties,i=d.getSubId(h),c=d.colMap[i];if(c){if(f.disabled||c.disabled){return false}if(!(c.hasOwnProperty("colHidable")?c.colHidable:f.colHidable)){return}}else{if(f.disabled){return false}if(!f.colHidable){return}}_.resetRun(d.$linbid+":collist",function(){d.getSubNode("COLLIST").css({visibility:"hidden",left:0,top:0})})},onContextmenu:function(d,f,g){if(d.onContextmenu){var c=d.getSubId(g);return d.boxing().onContextmenu(d,f,g,c?d.colMap[c]:null)!==false}}},COLLIST:{onMouseover:function(c,d,f){_.resetRun(c.$linbid+":collist",null)},onMouseout:function(c,d,f){_.resetRun(c.$linbid+":collist",function(){linb.use(f).css("visibility","hidden")})},onClick:function(f,h,i){var g=f.properties;if(!f.$col_pop){var d=[],c;_.arr.each(f.properties.header,function(e){if(e.hasOwnProperty("colHidable")?e.colHidable:g.colHidable){d.push({id:e.id,caption:e.caption,type:"checkbox",value:e.hidden!==true})}});if(d.length){c=f.$col_pop=new linb.UI.PopMenu({hideAfterClick:false,items:d}).render(true);c.onMenuSelected(function(m,k,l){var e=1;_.arr.each(m.properties.items,function(n){if(n.value!==false){return e=false}});if(!e){f.boxing().showColumn(k.id,k.value)}else{m.getSubNodeByItemId("CHECKBOX",k.id).tagClass("-checked");k.value=true}})}}if(f.$col_pop){f.$col_pop.pop(i)}}},CELLS:{afterMouseover:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHover){return}if(d.activeMode=="row"){linb.use(g).tagClass("-mouseover")}},afterMouseout:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHover){return}if(d.activeMode=="row"){linb.use(g).tagClass("-mouseover",false)}},onDblclick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(d.disabled||g.disabled){return false}if(c.onDblclickRow){c.boxing().onDblclickRow(c,g,f,h)}return false},onClick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(g.group){c.getSubNode("FCELLCMD",g._serialId).onClick()}}},CELL:{afterMouseover:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHover){return}if(d.activeMode=="cell"){linb.use(g).tagClass("-mouseover")}},afterMouseout:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHover){return}if(d.activeMode=="cell"){linb.use(g).tagClass("-mouseover",false)}}},CELLA:{onDblclick:function(f,k,c){var m=f.cellMap[f.getSubId(c)];if(!m){return}if(f.properties.disabled){return}var i=f.box,h=i.getCellPro,l=h(f,m,"type"),g=h(f,m,"disabled"),d=h(f,m,"editable");if(!g&&(!d||(l=="button"||l=="label"))){f.boxing().onDblclickCell(f,m,k,c)}},onClick:function(i,r,c){var g=i.properties,n=i.box,m=n.getCellPro,u=i.cellMap[i.getSubId(c)],f;if(u){if(i.properties.disabled){return}var s=m(i,u,"type"),k=m(i,u,"disabled"),l=m(i,u,"readonly"),d=m(i,u,"event"),q=g.activeMode,h=m(i,u,"editable");if(!k&&(!h||(s=="button"||s=="label"))){if(typeof d=="function"&&false===d.call(i._host||i,i,u,null,null,r,c)){}else{i.boxing().onClickCell(i,u,r,c)}if(s=="button"){return false}}if(!k&&!l&&s=="checkbox"){if(h){n._updCell(i,u,!u.value,g.dirtyMark,true)}}if(!g.editable){if(q=="cell"){if(m(i,u,"disabled")){return false}f=linb(c).parent().id();n._sel(i,"cell",c,f,r)}else{if(q=="row"){if(g.disabled||u._row.disabled){return false}f=linb(c).parent(3).id();n._sel(i,"row",c,f,r)}}}}else{var w=i.rowMap[i.getSubId(c)];if(i.getKey(linb.Event.getSrc(r).id||"")==i.keys.MARK||!w.group){if(g.disabled||w.disabled){return false}if(g.activeMode=="row"){f=linb(c).parent(3).id();n._sel(i,"row",c,f,r)}}if(g.selMode=="none"){i.getSubNode("FCELLCMD",w._serialId).onClick()}}i.box._focuscell(i,r,c);i.$_focusbyclick=1;linb.use(c).focus();delete i.$_focusbyclick},onFocus:function(d,f,h){if(d.$_focusbyclick){delete d.$_focusbyclick}else{d.box._focuscell(d,f,h)}if(d.afterCellFocused){var c=d.cellMap[d.getSubId(h)],g;if(c){g=c._row}else{g=d.rowMap[d.getSubId(h)]}d.boxing().afterCellFocused(d,c,g)}},onKeydown:function(h,y,p){var s=linb.Event.getKey(y),B=s.key,x=s.shiftKey,g=linb(p),r=h.getSubNode("BODY"),n=r.nextFocus(true,true,false),q=r.nextFocus(false,true,false);switch(B){case"enter":linb(p).onClick();break;case"tab":if(x){if(p!=n.get(0)){n.focus();return false}}else{if(p!=q.get(0)){q.focus();return false}}break;case"left":if(g.get(0)==n.get(0)){q.focus()}else{g.nextFocus(false)}return false;break;case"right":if(g.get(0)==q.get(0)){n.focus()}else{g.nextFocus()}return false;break;case"up":if(g.get(0)==n.get(0)){q.focus();return}case"down":var l=1,z=g.parent().get(0),w=z.parentNode.childNodes.length;while(z=z.previousSibling){l++}z=g.parent(2).get(0);if(!h.$allrowscache){var f=h.getSubNode("CELLS",true).get();_.filter(f,function(e){return !!e.offsetWidth});h.$allrowscache=f}var m=_.arr.indexOf(h.$allrowscache,z),i=h.$allrowscache.length,A=0;if(B=="up"){m--;if(m==-1){m=i-1;l--;if(l==0){l=w}}}else{m++;if(m==i){A=1;m=0;l++;if(l==w+1){l=1}}}if(A&&h.onNewLineTriggerred){var d=h.cellMap[h.getSubId(p)],k;if(d){k=d._row}else{k=h.rowMap[h.getSubId(p)]}if(false===h.boxing().onNewLineTriggerred(h,d,k)){return false}}var u=linb(h.$allrowscache[m]).first(),c=u;if(l>1){c=c.next(l-1)}if(c.isEmpty()){c=u}if(c&&!c.isEmpty()){c=c.first()}if(!c.isEmpty()){c.focus()}return false;break}},onContextmenu:function(d,f,g){if(d.onContextmenu){var c=d.getSubId(g);return d.boxing().onContextmenu(d,f,g,c?(d.cellMap[c]||d.rowMap[c]):null)!==false}}}},DataModel:{directInput:true,listKey:null,currencyTpl:"",selMode:{ini:"none",listbox:["single","none","multi"],action:function(c){this.getSubNodes(["HFMARK","MARK"],true).css("display",c=="multi"?"":"none")}},dock:"fill",altRowsBg:{ini:false,action:function(g){var f=this;var e=f.getClass("ALT"),c=f.getSubNode("CELLS",true),h,d;c.removeClass(e);if(g){h=[];d=0;c.each(function(l,k){if(l.offsetHeight){l=linb([l]);if((d++)%2==1){if(!l.hasClass(e)){l.addClass(e)}}else{if(l.hasClass(e)){l.removeClass(e)}}}});linb(h).addClass(e)}}},rowNumbered:{ini:false,action:function(q){var p=this,m=p.CF.getNumberedStr||function(f){return f},e=p.getSubNode("ROWNUM",true),k=0,d=p.rowMap,w,n=0,h=0,g=[],c=[],u="",r,s;if(q){e.each(function(f){if(f.parentNode.offsetWidth){w=d[p.getSubId(f.id)];h=w._layer;if(h>n){g.push(k);c.push(u);u=u+k+".";k=0}else{if(h<n){while(h<n--){k=g.pop();u=c.pop()}}}k++;n=h;r=m(u+k);if(s=f.firstChild){if(s.nodeValue!=r){s.nodeValue=r}}else{f.appendChild(document.createTextNode(r))}}})}else{e.text("")}}},editable:false,$subMargin:16,iniFold:true,animCollapse:false,position:"absolute",width:300,height:200,_minColW:5,_maxColW:300,_minRowH:20,gridHandlerCaption:{ini:"",action:function(c){this.getSubNode("GRIDCAPTION").get(0).innerHTML=c}},rowHandlerWidth:{ini:50,set:function(c){var d=this;if(d.renderId){d.box._setRowHanderW(d,c)}else{d.properties.rowHandlerWidth=c}}},showHeader:{ini:true,action:function(c){this.getSubNode("HEADER").css("display",c?"":"none")}},headerHeight:{ini:18,action:function(c){this.getSubNode("HCELLS").height(c);linb.UI.$tryResize(this,this.getRoot().width(),this.getRoot().height(),true)}},rowHeight:{ini:20,action:function(c){this.getSubNode("CELLS",true).height(c)}},_colDfWidth:80,rowHandler:{ini:true,action:function(c){this.getSubNode("HFCELL").css("display",c?"":"none");this.getSubNode("FCELL",true).css("display",c?"":"none");this.box._ajdustBody(this)}},rowResizer:{ini:false,action:function(c){this.getSubNode("FHANDLER",true).css("display",c?"":"none")}},colHidable:false,colResizer:{ini:true,action:function(c){this.getSubNode("HHANDLER",true).css("display",c?"":"none")}},colSortable:{ini:true,action:function(c){if(!c){this.getSubNode("SORT",true).css("display","none")}}},colMovable:false,header:{ini:{},set:function(c){var d=this;if(d.renderId){d.boxing()._refreshHeader(c)}else{d.properties.header=_.copy(c)}}},rows:{ini:{},set:function(c){var d=this;if(d.renderId){d.boxing().removeAllRows().insertRows(c)}else{d.properties.rows=_.copy(c)}}},activeMode:{ini:"row",listbox:["row","cell","none"],action:function(d){var c=this;if(d!="cell"&&c.$activeCell){linb(c.$activeCell).tagClass("-active",false);delete c.$activeCell}if(d!="row"&&c.$activeRow){linb(c.$activeRow).tagClass("-active",false);delete c.$activeRow}}},noCtrlKey:true},EventHandlers:{afterCellFocused:function(d,c,e){},onNewLineTriggerred:function(d,c,e){},onGetContent:function(c,d,e){},onRowSelected:function(c,e,d){},beforeColDrag:function(c,d){},beforeColMoved:function(d,e,c){},afterColMoved:function(d,e,c){},beforeRowActive:function(c,d){},afterRowActive:function(c,d){},beforeCellActive:function(d,c){},afterCellActive:function(d,c){},beforeIniEditor:function(f,c,d,e){},beforeCellUpdated:function(e,c,d){},afterCellUpdated:function(e,c,d){},onDblclickRow:function(c,g,d,f){},beforeComboPop:function(f,d,c,i,g,h){},onClickCell:function(d,c,f,g){},onDblclickCell:function(d,c,f,g){},onClickGridHandler:function(c,d,f){}},RenderTrigger:function(){var d=this,e=d.properties,c=d.boxing();d.destroyTrigger=function(){var f=this,g=f.properties;_.breakO([f.colMap,f.rowMap,f.cellMap],3);g.header.length=0;g.rows.length=0};d.$cache_editor={};if(!e.iniFold){c._toggleRows(e.rows,true)}d.box._asy(d);d.box._ajdustBody(d)},_asy:function(d){var e=d.properties,c=d.boxing(),f=d.$linbid;if(e.altRowsBg){_.resetRun(f+"1",function(){c.setAltRowsBg(true,true)})}if(e.rowNumbered){_.resetRun(f+"2",function(){c.setRowNumbered(true,true)})}},_setRowHanderW:function(e,h){var l=e.properties,f=l.$subMargin,c=e.rowMap,i=e.getSubNode("HFCELL"),d,k;if(typeof h=="number"){k=h}else{if(h===true){var g=[],m;e.getSubNode("FCELLINN",true).each(function(n){if((m=n.parentNode).parentNode.offsetWidth>0&&linb.Dom.getStyle(m,"overflow")!="visible"){if(d=c[e.getSubId(n.id)]){g.push(linb([n]).width()+d._layer*f)}}});g.push(l._minColW);k=parseInt(Math.max.apply(null,g))+f*2}else{k=i.width()}}if(k){if(k<l._minColW){k=l._minColW}if(l.rowHandlerWidth!=k){i.width(l.rowHandlerWidth=k);e.getSubNode("FCELL",true).width(k);e.getSubNode("FCELLRULER",true).each(function(n){d=c[e.getSubId(n.id)];n.style.width=(4+d._layer*f)+"px"});e.box._ajdustBody(e)}}},_onStartDrag:function(c,d,f){var g=linb.Event.getPos(d);c.$_ond=f;linb.use(f).startDrag(d,{dragType:"icon",shadowFrom:linb.use(f).parent()._get(0),targetLeft:g.left+12,targetTop:g.top+12,dragCursor:"pointer",dragDefer:2,dragKey:c.box.getDragKey(c,f),dragData:c.box.getDragData(c,d,f)});return false},_onDropTest:function(d,l,c,p,i,r){var f=i&&i.domId,h=c,m=i&&i.profile,q;if(h){var g=d.getKey(h),n=d.keys,s=d.rowMap[d.getSubId(h)];if(g==n.FCELLCMD&&!s.sub){return false}}if(m&&m.$linbid==d.$linbid){if(f&&d.getSubId(f)==d.getSubId(h)){return false}q=d.$_ond;c=linb(c).get(0);if(_.get(c,["parentNode","previousSibling"])==q){return false}do{if(c==q){c=q=null;return false}}while(c&&(c=c.parentNode)&&c!==document&&c!==window);c=q=null}},_onDragstop:function(d,h,i,c,g,f){delete d.$_ond},_onDrop:function(h,n,f,r,m,u){linb.DragDrop.setDragIcon("none");if(!m.profile||!m.profile[h.KEY]){return}var l=h.getKey(f),g=m.profile,d=m.domId,i,q=h.keys,s=linb.absObj.$specialChars,p=h.boxing(),c=g.rowMap[g.getSubId(d)],w=h.rowMap[h.getSubId(f)];c=_.clone(c,function(k,e){return !s[(e+"").charAt(0)]});g.boxing().removeRows([c.id]);if(l==q.SCROLL){p.insertRows([c],null,null,false)}else{if((l==q.FCELLCMD)&&w.sub){p.insertRows([c],w.id,null,false)}else{if(l==q.CELLS){p.insertRows([c],w._pid,w.id,true)}}}return false},_beforeSerialized:function(e){var g=arguments.callee.upper.call(this,e),c=e.properties,f=linb.absObj.$specialChars,d;g.properties.header=_.clone(c.header,function(k,h){return !f[(h+"").charAt(0)]});g.properties.rows=_.clone(c.rows,function(k,h){return !f[(h+"").charAt(0)]});if(g.properties.header.length===0){delete g.properties.header}if(g.properties.rows.length===0){delete g.properties.rows}return g},_clsCache:{},_colDragCheck:function(f,h){var c=linb.DragDrop.getProfile(),e=c.dragKey,g=c.dragData,d=f.colMap[f.getSubId(h)];if(!(d.hasOwnProperty("colMovable")?d.colMovable:f.properties.colMovable)){return}if(!e||!g||e!=(f.$linbid+":col")){return false}if(g==linb.use(h).id()||g==linb.use(h).prev().id()){return false}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c),f="display:none";c.rowMap2={};c.rowMap={};c.cellMap={};var e=c.properties;d.showHeader=e.showHeader?"":f;d.colDDDisplay=e.colResizer?"":f;d.rowDDDisplay=e.rowResizer?"":f;d.rowHandlerDisplay=e.rowHandler?"":f;d.sortDisplay=f;d.headerHeight=d.headerHeight?("height:"+d.headerHeight+"px;"):"";d._rowMarkDisplay=e.selMode=="multi"?"":"display:none;";if(e.header&&e.header.constructor!=Array){e.header=[]}if(e.rows&&e.rows.constructor!=Array){e.rows=[]}e.header=this._adjustHeader(e.header);d.header=this._prepareHeader(c,e.header);d._row0DfW=d.rowHandlerWidth?("width:"+d.rowHandlerWidth+"px"):"";arguments.callee.upper.call(this,c);e.rows=this._adjustRows(e.rows);d.rows=this._prepareItems(c,e.rows);return d},_prepareHeader:function(d,f){var i=d.colMap2={},h=d.colMap={},c=linb.UI.$tag_subId,k=d.properties,e=[],l,m,g="display:none";_.arr.each(f,function(p,n){l="h_"+d.pickSubId("header");if(typeof p=="string"){p=f[n]={id:p}}if(typeof p.id!="string"){p.id=p.caption||(_()+"")}p._cells={};p[c]=l;h[l]=p;p.width=p.width||k._colDfWidth;m={sortDisplay:g,rowHandlerDisplay:k.rowHandler?"":g};m[c]=l;m._tabindex=k.tabindex;m.colDDDisplay=(("colResizer" in p)?p.colResizer:k.colResizer)?"":"display:none";if(p.hasOwnProperty("visibility")&&!p.hasOwnProperty("hidden")){p.hidden=!p.visibility}m.colDisplay=p.hidden===true?"display:none":"";if(!p.type){p.type="label"}if(!p.caption){p.caption=p.id}linb.UI.adjustData(d,p,m);i[p.id]=l;e.push(m)});return e},_renderCell:function(f,d,u,g){var B=f.box.getCellPro,y=u["linb.Dom"],D=y?d:u,h=B(f,d,"type"),l="",k="",z,w=(!y)&&u.caption,A=/</g,C=arguments.callee,E=C._dcls||(C._dcls=f.getClass("CELL","-disabled")),c=C._rcls||(C._rcls=f.getClass("CELL","-readonly")),e=C._ren||(C._ren=function(J,H,G,I){return(typeof H._$caption=="string"?H._$caption:typeof G.caption=="string"?G.caption:typeof(H.renderer||H._renderer)=="function"?(H.renderer||H._renderer).call(J,H):typeof I=="function"?I(H.value):(_.isSet(H.value)?String(H.value):""))||""}),x=C._f0=(C._f0=function(G){return G?linb.Date.getText(G,"ymdhn"):""}),s=C._f1=(C._f1=function(G){return G?linb.Date.getText(G,"ymd"):""}),r=C._f2=(C._f2=function(G){return G?(G.split("\n")[0]||"").replace(/ /g,"&nbsp;").replace(A,"&lt;"):""}),q=C._f3=(C._f3=function(G){if(!G&&G!==0){G=0}return(G*1000/10)+"%"}),n=C._f5=(C._f5=function(G){if(!G&&G!==0){G=0}return G+""}),p=C._f4=(C._f4=function(G){if(!G&&G!==0){G=0}G=G.toFixed(2);G=G.split(".");G[0]=G[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1,").split("").reverse().join("");return G.join(".")});switch(h){case"number":case"spin":var m=parseFloat(d.value);d.value=(m||m===0)?m:0;z=w||e(f,d,D,n);if(y){u.html(z,false)}break;case"currency":var m=parseFloat((d.value+"").replace(/[^\d.]/g,""));d.value=(m||m===0)?m:0;z=w||e(f,d,D,p);var F=B(f,d,"currencyTpl");if(F){z=F.replace("*",z)}if(y){u.html(z,false)}break;case"date":case"datepicker":d.value=_.isDate(d.value)?d.value:_.isFinite(d.value)?new Date(parseInt(d.value)):null;z=w||e(f,d,D,s);if(y){u.html(z,false)}break;case"datetime":d.value=_.isDate(d.value)?d.value:_.isFinite(d.value)?new Date(parseInt(d.value)):null;z=w||e(f,d,D,x);if(y){u.html(z,false)}break;case"textarea":d.value=d.value||"";z=w||e(f,d,D,r);if(y){u.html(z,false)}break;case"color":case"colorpicker":d.value="#"+linb.UI.ColorPicker._ensureValue(0,d.value);z=w||e(f,d,D);l=linb.UI.ColorPicker.getTextColor(d.value);if(y){u.html(z,false);u.css("color",l).css("backgroundColor",d.value)}else{u.color="color:"+l+";";u.bgcolor="background-color:"+d.value+";"}break;case"checkbox":d.value=!!d.value;z=d.value+"";if(y){u.first().tagClass("-checked",d.value)}else{u.checkboxCls=f.getClass("CHECKBOX",d.value?"-checked":"")}break;case"progress":d.value=parseFloat(d.value)||0;d.value=Math.min(Math.max(d.value,0),1);z=w||e(f,d,D,q);if(y){u.first().html(z,false).width(z)}else{u.progress=z}break;default:d.value=d.hasOwnProperty("value")?d.value:"";z=w||e(f,d,D);if(y){u.html((z===null||z===undefined)?d.value:z,false)}}d._$tips=z;var k=d.disabled||d._row.disabled||d._col.disabled,i=d.readonly||d._row.readonly||d._col.readonly;if(!y){u.cellCls=f.getClass("CELL","-"+h)+(k?(" "+E):"")+(i?(" "+c):"");u.type=h;u.value=d.value;u.caption=z;u.cellStyle=B(f,d,"cellStyle");u.cellClass=B(f,d,"cellClass")}else{if(k){u.addClass(E)}else{u.removeClass(E)}if(k=g.cellStyle){u.attr("style",u.attr("style")+";"+k)}if(k=g.cellClass){u.addClass(k)}}},_prepareItems:function(e,c,u){var w=this,n=e.properties,A=n.$subMargin,G=e.rowMap2,E=e.rowMap,D=e.cellMap,s=u?E[u]?(E[u]._layer+1):0:0,h=linb.UI.$tag_subId,H=arguments.callee,F=H._id||(H._id=new _.id()),p=[],C,f,r,k,B,y,q,m="display:none";for(var z=0,x=c.length;z<x;z++){if(!c[z].id||G[c[z].id]){while(G[r=F.next()]){}c[z].id=r}k=c[z];C="r_"+e.pickSubId("row");k[h]=C;E[C]=k;k._pid=u;k._cells={};k._layer=s;k._tabindex=n.tabindex;k._rowMarkDisplay=n.selMode=="multi"?"":m;r={id:k.id};r.rowCls="";if(k.disabled){r.rowCls+=e.getClass("CELLS","-disabled")}if(k.readonly){r.rowCls+=e.getClass("CELLS","-readonly")}if(k.group){r.rowCls+=e.getClass("CELLS","-group")}if(k.summary){r.summaryDisplay="display:block;"}if(k.preview){r.previewDisplay="display:block;"}r._row0DfW=n.rowHandlerWidth?("width:"+n.rowHandlerWidth+"px"):"";r._rulerW=4+s*A;r.rowHeight=k.height||n.rowHeight;r.rowHandlerDisplay=n.rowHandler?"":m;r.rowDDDisplay=(("rowResizer" in k)?k.rowResizer:n.rowResizer)?"":m;f=r.cells=[];r[h]=C;r.subClass=k.sub?"uicmd-toggle2":"uicmd-empty";G[k.id]=C;if(k.group){k.cells=null}if(!k.hasOwnProperty("caption")&&k.hasOwnProperty("value")){k.caption=""+k.value}if(k.caption&&!k.tips){k._$tips=k.caption}if(q=k.cells){_.arr.each(n.header,function(d,g){B=q[g]||(q[g]={});var i={};B._row=k;B._col=d;B[h]="c_"+e.pickSubId("cell");B.id=B.id||B[h];w._adjustCell(e,B,i);f.push(i);D[i[h]]=B;k._cells[d.id]=i[h];d._cells[k.id]=i[h]})}linb.UI.adjustData(e,k,r);p.push(r)}return p},_adjustCell:function(f,c,i){var d=this,h=f.properties,e=c._col,g;if(g=d.getCellPro(f,c,"cellRenderer")){c._renderer=g}linb.UI.adjustData(f,c,i);c.oValue=c.value;if(!i.width){i.width=e.width}i._tabindex=h.tabindex;i.cellDisplay=e.hidden===true?"display:none;":"";d._renderCell(f,c,i)},_setSub:function(g,u,n){var e=g.domId,p=g.properties,i=g.rowMap2[u.id],k=g.getSubNode("FCELLCMD",i),m=g.getSubNode("SUB",i);if(linb.Thread.isAlive(g.key+g.id)){return}if(u._checked){if(!n){var l=m.height();if(p.animCollapse){m.animate({height:[l,0]},null,function(){m.css({display:"none"})},100,5,"expoIn",g.key+g.id).start()}else{m.css({display:"none",height:0})}k.tagClass("-checked",false);u._checked=false;g.box._asy(g)}}else{if(n){var f=function(y,D,w,z,B,r){var C=y.boxing(),x=y.properties;if(!D._inited){delete D.sub;D._inited=true;if(typeof r=="string"){B.html(D.sub=r,false)}else{if(_.isArr(r)){C.insertRows(r,D.id)}else{if(r["linb.Template"]||r["linb.UI"]){B.append(D.sub=r.render(true))}}}C._setCtrlValue(C.getUIValue(),true)}var A=B.height(true);if(x.animCollapse){B.animate({height:[0,A]},function(){B.css({display:""})},function(){B.css({height:"auto"})},100,5,"expoOut",y.key+y.id).start()}else{B.css({display:"",height:"auto"})}z.tagClass("-checked");D._checked=true;y.box._asy(y)};var d=u.sub,q=function(h){f(g,u,e,k,m,h)},s;if((s=typeof d)=="string"||s=="object"){q(d)}else{if(g.onGetContent){var c=g.boxing().onGetContent(g,u,q);if(c){if(c===true){u._inited=true}q(c)}}}}}delete g.$allrowscache},_getCellId:function(c,e,d){return _.get(c.rowMap,[c.rowMap2[e],"_cells",d])},_updCell:function(e,c,n,m,i){var f=e.box,k=e.properties.dirtyMark,h=linb.absObj.$specialChars,l,d;if(typeof c=="string"){l=e.cellMap[c]}else{l=c;c=l._serialId}if(!l){return}if(!_.isHash(n)){n={value:n}}n=_.filter(n,function(q,p){return !h[p.charAt(0)]||p=="_$caption"});if(i&&false===e.boxing().beforeCellUpdated(e,l,n)){return}delete l.caption;_.merge(l,n,"all");d=e.getSubNode("CELLA",c);if("type" in n){var g={};f._adjustCell(e,l,g);d.parent().replace(e._buildItems("rows.cells",[g]))}else{f._renderCell(e,l,d,n)}if("value" in n){if(!k||m===false){l.oValue=l.value}else{if(l.value===l.oValue){d.removeClass("ui-dirty");delete l.dirty}else{d.addClass("ui-dirty");l.dirty=true}}}if(i){e.boxing().afterCellUpdated(e,l,n)}},_ensureValue:function(d,e){if(d.properties.selMode=="multi"){var c=(e||"").split(";");c.sort();return c.join(";")}else{return e}},_sel:function(f,g,k,r,y){var l=f.properties;if(l.activeMode!=g){return}var d=f.getSubId(r),z=g=="cell"?f.cellMap:f.rowMap,n=f.boxing(),m=z[d],A=linb.Event.getKey(y),h=g=="cell"?(m._row.id+"|"+m._col.id):m.id,p=l.selMode;switch(p){case"none":n.onRowSelected(f,m,k);break;case"multi":var u=n.getUIValue(),c=u?u.split(";"):[];if(c.length&&(A.ctrlKey||A.shiftKey||l.noCtrlKey)){if(A.shiftKey&&g=="row"){if(f.$firstV._pid!=m._pid){return false}var q=l.rows;if(m._pid){var B=z[m._pid];if(B){q=B.sub}}var w=_.arr.subIndexOf(q,"id",f.$firstV.id),s=_.arr.subIndexOf(q,"id",m.id),x;c.length=0;for(x=Math.min(w,s);x<=Math.max(w,s);x++){c.push(q[x].id)}}else{if(_.arr.indexOf(c,h)!=-1){_.arr.removeValue(c,h)}else{c.push(h)}}c.sort();u=c.join(";");if(n.getUIValue()!=u){n.setUIValue(u);if(n.get(0)&&n.getUIValue()==u){n.onRowSelected(f,m,k)}}break}case"single":if(n.getUIValue()!=h){f.$firstV=m;n.setUIValue(h);if(n.get(0)&&n.getUIValue()==h){n.onRowSelected(f,m,k)}}break}},_activeCell:function(e,g){if(e.properties.activeMode!="cell"){return}if(e.$activeCell==g){return}if(g!==false){var d=e.getSubId(g),f=e.cellMap,c=f[d];if(e.beforeCellActive&&(false===e.boxing().beforeCellActive(e,c))){return}}if(e.$activeCell){linb(e.$activeCell).tagClass("-active",false)}linb(e.$activeCell=g).tagClass("-active");if(g!==false){e.boxing().afterCellActive(e,c)}},_activeRow:function(e,g){if(e.properties.activeMode!="row"){return}if(e.$activeRow==g){return}if(g!==false){var c=e.getSubId(g),f=e.rowMap,d=f[c];if(e.beforeRowActive&&(false===e.boxing().beforeRowActive(e,d))){return}}if(e.$activeRow){linb(e.$activeRow).tagClass("-active",false)}linb(e.$activeRow=g).tagClass("-active");if(g!==false){e.boxing().afterRowActive(e,d)}},getCellPro:function(f,c,e){var d=c;return(d&&d.hasOwnProperty(e)&&_.isSet(d[e]))?d[e]:((d=c._row)&&d.hasOwnProperty(e)&&_.isSet(d[e]))?d[e]:((d=c._col)&&d.hasOwnProperty(e)&&_.isSet(d[e]))?d[e]:((d=f.properties)&&d.hasOwnProperty(e)&&_.isSet(d[e]))?d[e]:null},_editCell:function(l,D){var f=typeof D=="string"?l.cellMap[D]:D;if(!f){return}if(l.box.getCellPro(l,f,"disabled")||l.box.getCellPro(l,f,"readonly")){return}D=f._serialId;var r=l.getSubNode("CELL",D),g=f._col.id;var q=l.$curEditor;if(q){_.tryF(q.undo,[],q)}q=null;var e=this,d=l.getSubNode("SCROLL"),s=l.box,B=function(h){return s.getCellPro(l,f,h)};q=l.box.getCellPro(l,f,"customEditor");if(q&&typeof q.iniEditor=="function"){q.iniEditor(l,f,r);_.tryF(q.activate,[],q)}else{if(l.beforeIniEditor){q=l.boxing().beforeIniEditor(l,f,r,d);if(q===false){return}}if(!q||!q["linb.UI"]){var n=B("type")||"label",i=B("editorProperties"),u=B("editorEvents"),p=B("editorFormat"),A=B("editorMask"),C=B("editorReadonly"),y=B("editorDropListWidth"),m=B("editorDropListHeight"),w,k;if(n=="checkbox"){r.first().focus();return}else{if(n=="button"||n=="label"){return}}if(l.$cache_editor[n]){q=l.$cache_editor[n]}else{q=new linb.UI.ComboInput({dirtyMark:false,cachePopWnd:false,left:-1000,top:-1000,position:"absolute",visibility:"hidden",zIndex:100});switch(n){case"number":q.setType(n);q.setPrecision(-1);case"spin":case"currency":q.setType(n);break;case"progress":q.setType("spin").setMax(1).setMin(0).setPrecision(4).setIncrement(0.01);break;case"input":q.setType("none");break;case"textarea":q.setType("none").setMultiLines(true).setCommandBtn("save").onCommand(function(h){h.boxing().hide()});_.tryF(q.setResizer,[true],q);break;case"listbox":case"combobox":case"helpinput":case"time":case"timepicker":case"date":case"datepicker":case"color":case"colorpicker":case"getter":case"popbox":case"cmdbox":q.setType(n).beforeComboPop(function(H,I,F,G){var h=H.$cell,E=l.box.getCellPro(l,h,"event");if(l.box.getCellPro(l,h,"disabled")){return false}if(typeof E=="function"){return E.call(l._host||l,l,h,H,I,F,G)}else{return l.boxing().beforeComboPop(l,h,H,I,F,G)}});break}d.append(q);l.$cache_editor[n]=q}switch(n){case"listbox":case"combobox":case"helpinput":if(w=B("editorListItems")){q.setListKey(null);q.setItems(w)}else{if(w=B("editorListKey")){q.setItems(null);q.setListKey(w)}}break;case"cmdbox":case"popbox":if(q.setCaption){q.setCaption(f.caption||"")}}if(q.setInputReadonly&&C){q.setInputReadonly(true)}if(q.setDropListWidth&&y){q.setDropListWidth(y)}if(q.setDropListHeight&&m){q.setDropListHeight(m)}if(p){if(typeof p=="function"&&q.beforeFormatCheck){q.beforeFormatCheck(p)}else{if(typeof p=="string"&&q.setValueFormat){q.setValueFormat(p)}}}if(A&&q.setMask){q.setMask(A)}if(i){k={};var z=l.getProperties();_.each(i,function(E,h){k=z[h]});q.setProperties(i)}if(u){q.setEvents(u)}q.resetValue();q.setValue(f.$editorValue||f.value,true);delete f.$editorValue;if(f.$tag){if(q.setCaption){q.setCaption(f.$tag)}else{if(q.setValue){q.setValue(f.$tag)}}}q.get(0).$cell=f;q.get(0)._smartnav=true;q.undo=function(){var F=this;F.getSubNode("INPUT").onBlur(true);l.$curEditor=null;F.getRoot().setBlurTrigger(l.$linbid);if(!l.properties.directInput){F.afterUIValueSet(null).beforeNextFocus(null).onCancel(null);F.setValue("",true)}if(p){if(F.beforeFormatCheck){F.beforeFormatCheck(null)}if(F.setValueFormat){F.setValueFormat("")}}if(A){if(F.setMask){F.setMask("")}}if(C){if(F.setInputReadonly){F.setInputReadonly(false)}}if(y){if(F.setDropListWidth){F.setDropListWidth(0)}}if(m){if(F.setDropListHeight){F.setDropListHeight(0)}}if(k){F.setProperties(k);k=null}if(u){var E={};_.each(u,function(G,h){E[h]=null});F.setEvents(E)}delete F.get(0).$cell;delete F.get(0)._smartnav;F.setVisibility("hidden")};q.afterUIValueSet(function(I,G,E){var H=B("type"),h;switch(H){case"number":case"spin":E=parseFloat(E)||0;break;case"currency":E=parseFloat(E.replace(/[^\d.]/g,""))||0;break;case"cmdbox":case"popbox":case"combobox":case"listbox":case"helpinput":h=I.boxing().getShowValue();break}var F={value:E};if(_.isDefined(h)){F.caption=F._$caption=h}if(I.properties.hasOwnProperty("tagVar")){F.tagVar=I.properties.tagVar}e._updCell(l,D,F,l.properties.dirtyMark,true)}).beforeNextFocus(function(F,E){if(q){_.tryF(q.undo,[],q);var h=linb.Event.getEventPara(E);if(h.keyCode=="enter"){h.keyCode="down"}l.getSubNode("CELLA",f._serialId).onKeydown(true,h)}return false}).onCancel(function(){if(q){_.tryF(q.undo,[],q)}}).getRoot().setBlurTrigger(l.$linbid,function(){if(q){_.tryF(q.undo,[],q)}return false});var c=r.offset(null,d),x=r.cssSize();if(n=="textarea"){q.setWidth(Math.max(200,x.width+3)).setHeight(Math.max(100,x.height+2)).reLayout(true,true).reBoxing().popToTop(r,4,d)}else{q.setWidth(x.width+3).setHeight(x.height+2).reLayout(true);q.reBoxing().show((c.left-1)+"px",(c.top-1)+"px")}q.setVisibility("visible");_.asyRun(function(){_.tryF(q&&q.activate,[],q)})}}l.$curEditor=q},_ajdustBody:function(c){_.resetRun(c.$linbid+"4",function(){var k=c.getSubNode("BODY"),i=c.getSubNode("HCELLS"),q,f,n,p=c.keys,g;if(k.get(0).offsetHeight){if(i.get(0).offsetHeight){if(q=i.get(0).childNodes){f=q.length;while(f){if(q[f-1].offsetHeight){n=q[f-1];break}--f}}g=n?(n.offsetWidth+n.offsetLeft+100):0;i.parent().width(g);k.width(g)}else{if(q=k.get(0).childNodes){f=q.length;while(f){if(q[f-1].offsetHeight){n=q[f-1];break}--f}if(n){var e=c.getSubId(n.id);q=c.getSubNode("CELLS",e);if(q=q.get(0).childNodes){f=q.length;while(f){if(q[f-1].offsetHeight){n=q[f-1];break}--f}}}}}}if(n){k.width(n.offsetWidth+n.offsetLeft)}else{var d=c.properties,h=d.header,r=d.rows,m=d.rowHandler?(d.rowHandlerWidth+2):0;_.each(h,function(l){if(l.hidden!==true){m+=l.width+2}});k.width(m)}q=n=null})},_adjustHeader:function(d){var e=_.copy(d),c;_.arr.each(e,function(g,f){e[f]=_.copy(g)});return e},_adjustRows:function(d){var e,c;if(_.isArr(d)&&d.length&&typeof d[0]!="object"){e=[d]}else{e=_.copy(d)}_.arr.each(e,function(g,f){if(_.isArr(g)){e[f]={cells:g}}else{e[f]=_.copy(g)}c=e[f].cells=_.copy(e[f].cells);_.arr.each(c,function(k,h){if(!!k&&typeof k=="object"&&k.constructor==Object){c[h]=_.copy(k)}else{c[h]={value:k}}})});return e},_focuscell:function(g,l,c){if(g.properties.disabled||g.properties.readonly){return}var f=g.properties,i=g.box,h=i.getCellPro,n=g.cellMap[g.getSubId(c)],k=f.activeMode,d;if(n){var m=false;if(h(g,n,"editable")){if(h(g,n,"disabled")||h(g,n,"readonly")){m=false}else{m=true;i._editCell(g,n._serialId);_.asyRun(function(){linb.use(c).parent().onMouseout(true,{$force:true}).parent().onMouseout(true,{$force:true})})}}if(!m){if(n&&k=="cell"){d=linb.use(c).parent().id();i._activeCell(g,d)}}else{if(n&&k=="cell"){i._activeCell(g,false)}}}if(k=="row"){d=linb.use(c).parent(2).id();i._activeRow(g,d)}},_showTips:function(f,e,h){if(f.properties.disableTips){return}if(f.onShowTips){return f.boxing().onShowTips(f,e,h)}if(!linb.Tips){return}var i=f.keys,l,k=i.HCELL+":",d,c,g;if(f.properties.disabled){return}c=e.id;g=e.parentNode.id;d=f.getSubId(c);if(c.indexOf(i.FCELL)==0||g.indexOf(i.FCELL)==0){l=f.rowMap[d]}else{if(c.indexOf(i.HCELL)==0||g.indexOf(i.HCELL)==0){l=f.colMap[d]}else{if(c.indexOf(i.CELL)==0||g.indexOf(i.CELL)==0){l=f.cellMap[d]}}}if(l){linb.Tips.show(h,("tips" in l)?l.tips:(l._$tips||l.caption))}else{linb.Tips.hide()}return true},_onresize:function(g,f,c){g.getSubNode("BORDER").cssSize({width:f,height:c});var h=g.getSubNode("HEADER"),e=g.getSubNode("SCROLL"),d=0;g.getSubNode("BOX").cssSize({width:f,height:c});if(f){h.width(f)}if(c){d=h.offsetHeight()}e.cssSize({width:f,height:c?(c-d):null});_.asyRun(function(){e.onScroll()})}}});Class("linb.UI.Slider",["linb.UI","linb.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(i){var l=i.properties,h=l.steps,g=function(m){return i.getSubNode(m)},f=g("IND1"),e=g("IND2"),d=i.box._v2a(i,c),k=l.type=="vertical"?"top":"left";f[k](d[0]+"%");if(l.isRange){e[k](d[1]+"%")}})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["BOX"])}},Static:{Templates:{style:"{_style}",className:"{_className}",BOX:{tagName:"div",className:"{_cls}",BG:{tagName:"div"},RULER:{$order:1,tagName:"div",RULERLEFT:{},RULERRIGHT:{}},IND:{$order:2,IND1:{style:"{_showD}",tabindex:"{tabindex}"},IND2:{style:"{_showD2}",tabindex:"{tabindex}"}},DECREASE:{style:"{_showDes}",tabindex:"{tabindex}"},INCREASE:{style:"{_showIns}",tabindex:"{tabindex}"}}},Appearances:{"IND, BT, RULER, RULERLEFT, RULERRIGHT, IND1, IND2, DECREASE, INCREASE":{"font-size":0,"line-height":0,position:"absolute"},BOX:{position:"relative",left:0,top:0,width:"100%",height:"100%"},"BOX-h DECREASE, BOX-h INCREASE":{top:"50%",width:"17px",height:"17px","margin-top":"-8px"},"BOX-v DECREASE, BOX-v INCREASE, BOX-h DECREASE, BOX-h INCREASE, BOX-h IND1,BOX-h IND2, BOX-v IND1,BOX-v IND2":{background:linb.UI.$bg("icons.gif","no-repeat",true)},"BOX-h DECREASE":{$order:1,left:0,"background-position":"-80px -70px"},"BOX-h INCREASE":{$order:1,right:0,"background-position":"-100px -70px"},"BOX-h DECREASE-mouseover":{$order:2,"background-position":"-80px -90px"},"BOX-h DECREASE-mousedown":{$order:3,"background-position":"-80px -110px"},"BOX-h INCREASE-mouseover":{$order:2,"background-position":"-100px -90px"},"BOX-h INCREASE-mousedown":{$order:3,"background-position":"-100px -110px"},"BOX-h BG":{top:"50%"},"BOX-h IND, BOX-h RULER":{"z-index":1,top:"50%",height:"6px","margin-top":"-3px"},"BOX-h RULER, BOX-h RULERLEFT, BOX-h RULERRIGHT":{background:linb.UI.$bg("bar_vertical.gif","repeat-x",true)},"BOX-h RULER":{$order:2,"background-position":"left -482px"},"BOX-h RULERLEFT, BOX-h RULERRIGHT":{"z-index":1,height:"6px",width:"5px"},"BOX-h RULERLEFT":{$order:2,"background-position":"left -474px",left:"-4px",top:0},"BOX-h RULERRIGHT":{$order:2,"background-position":"left -490px",right:"-4px",top:0},"BOX-h IND1,BOX-h IND2":{$order:1,"z-index":2,"background-position":"-21px -282px",height:"18px",width:"8px",left:0,top:0,cursor:"e-resize","margin-top":"-6px"},"BOX-h IND1-mouseover,BOX-h IND2-mouseover":{$order:2,"background-position":"-31px -282px"},"BOX-h IND1-mousedown,BOX-h IND2-mousedown":{$order:3,"background-position":"-41px -282px"},"BOX-v DECREASE, BOX-v INCREASE":{$order:10,left:"50%",width:"17px",height:"17px","margin-left":"-8px"},"BOX-v DECREASE":{$order:10,top:0,"background-position":"-120px -70px"},"BOX-v INCREASE":{$order:10,bottom:0,"background-position":"-140px -70px"},"BOX-v DECREASE-mouseover":{$order:11,"background-position":"-120px -90px"},"BOX-v DECREASE-mousedown":{$order:12,"background-position":"-120px -110px"},"BOX-v INCREASE-mouseover":{$order:11,"background-position":"-140px -90px"},"BOX-v INCREASE-mousedown":{$order:12,"background-position":"-140px -110px"},"BOX-v BG":{$order:10,left:"50%"},"BOX-v IND, BOX-v RULER":{$order:10,"z-index":1,left:"50%",width:"6px","margin-left":"-3px"},"BOX-v RULER, BOX-v RULERLEFT, BOX-v RULERRIGHT":{background:linb.UI.$bg("bar_horizontal.gif","repeat-y",true)},"BOX-v RULER":{$order:10,"background-position":"-482px top"},"BOX-v RULERLEFT, BOX-v RULERRIGHT":{$order:10,"z-index":1,width:"6px",height:"5px"},"BOX-v RULERLEFT":{$order:12,"background-position":"-490px top",top:"-4px",left:0},"BOX-v RULERRIGHT":{$order:12,"background-position":"-474px top",bottom:"-4px",left:0},"BOX-v IND1,BOX-v IND2":{$order:10,"z-index":2,"background-position":"left -272px",width:"18px",height:"8px",left:0,top:0,cursor:"n-resize","margin-left":"-6px"},"BOX-v IND1-mouseover,BOX-v IND2-mouseover":{$order:11,"background-position":"left -282px"},"BOX-v IND1-mousedown,BOX-v IND2-mousedown":{$order:12,"background-position":"left -292px"}},Behaviors:{HoverEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},ClickEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},onSize:linb.UI.$onSize,IND:{onClick:function(f,m,c){var d=f.properties,w=linb.use(c).offset(),u=linb.Event.getPos(m),i=f.box._v2a(f,f.properties.$UIvalue),h,g,q=d.type=="vertical",n=q?"top":"left",l=q?"offsetTop":"offsetLeft",k=q?"offsetHeight":"offsetWidth",s=u[n]-w[n],r=(s/linb.use(c).get(0)[k])*100;if(!d.isRange){i[0]=r}else{h=f.getSubNode("IND1")[l](),g=f.getSubNode("IND2")[l]();if(Math.abs(h-s)<Math.abs(g-s)){i[0]=r}else{i[1]=r}}f.boxing().setUIValue(f.box._adjustValue(f,i))}},IND1:{onKeydown:function(f,h,i){var g=f.properties,d=g.type=="vertical",c=linb.Event.getKey(h).key;if(c==(d?"up":"left")){f.box._auto(f,false)}if(c==(d?"down":"right")){f.box._auto(f,true)}},onKeyout:function(c){linb.Thread.abort(c.$linbid+":auto")},onKeyup:function(c){linb.Thread.abort(c.$linbid+":auto")},onMousedown:function(d,i,l){if(linb.Event.getBtn(i)!="left"){return}var h=d.properties,c=h.type=="vertical",k=c?"offsetTop":"offsetLeft",g=c?"offsetHeight":"offsetWidth",f=d.box;linb.use(l).startDrag(i,{widthIncrement:h.steps?d._size/h.steps:null,dragType:"none",targetReposition:true,horizontalOnly:c?true:null,verticalOnly:c?null:true,maxLeftOffset:linb.use(l).get(0)[k],maxRightOffset:linb.use(l).parent().get(0)[g]-linb.use(l).get(0)[k],dragCursor:"default"});linb.use(l).css("zIndex",10).focus();d.getSubNode("IND2").css("zIndex",5)},beforeDragbegin:function(d,f,g){var c=d.properties.type=="vertical";linb(g)[c?"top":"left"](d.__x=linb.use(g).get(0)[c?"offsetTop":"offsetLeft"])},onDrag:function(f,g,i){var h=linb.DragDrop.getProfile().offset,d=f.properties.type=="vertical",c=f.box._v2a(f,f.properties.$UIvalue);c[0]=((f.__x+h[d?"y":"x"])/linb.use(i).parent().get(0)[d?"offsetHeight":"offsetWidth"])*100;f.boxing().setUIValue(f.box._adjustValue(f,c))},onDragstop:function(c,d,f){linb(f).onMouseout(true,{$force:true}).onMouseup(true)},onClick:function(){return false}},IND2:{onKeydown:function(f,h,i){var g=f.properties,d=g.type=="vertical",c=linb.Event.getKey(h).key;if(c==(d?"up":"left")){f.box._auto(f,false)}if(c==(d?"down":"right")){f.box._auto(f,true)}},onKeyout:function(c){linb.Thread.abort(c.$linbid+":auto")},onKeyup:function(c){linb.Thread.abort(c.$linbid+":auto")},onMousedown:function(d,i,l){if(linb.Event.getBtn(i)!="left"){return}var h=d.properties,c=h.type=="vertical",k=c?"offsetTop":"offsetLeft",g=c?"offsetHeight":"offsetWidth",f=d.box;linb.use(l).startDrag(i,{widthIncrement:h.steps?d._size/h.steps:null,dragType:"none",targetReposition:true,horizontalOnly:c?true:null,verticalOnly:c?null:true,maxLeftOffset:linb.use(l).get(0)[k],maxRightOffset:linb.use(l).parent().get(0)[g]-linb.use(l).get(0)[k],dragCursor:"default"});linb.use(l).css("zIndex",10).focus();d.getSubNode("IND1").css("zIndex",5)},beforeDragbegin:function(d,f,g){var c=d.properties.type=="vertical";linb(g)[c?"top":"left"](d.__x=linb.use(g).get(0)[c?"offsetTop":"offsetLeft"])},onDrag:function(f,g,i){var h=linb.DragDrop.getProfile().offset,d=f.properties.type=="vertical",c=f.box._v2a(f,f.properties.$UIvalue);c[1]=((f.__x+h[d?"y":"x"])/linb.use(i).parent().get(0)[d?"offsetHeight":"offsetWidth"])*100;f.boxing().setUIValue(f.box._adjustValue(f,c))},onDragstop:function(c,d,f){linb(f).onMouseout(true,{$force:true}).onMouseup(true)},onClick:function(){return false}},RULERRIGHT:{onClick:function(g,i,k){var h=g.properties,f=g.boxing(),l=g.box,d=l._v2a(g,h.$UIvalue);if(!h.isRange){d[0]=100}else{d[1]=100}f.setUIValue(g.box._adjustValue(g,d))}},DECREASE:{onMousedown:function(c){c.box._auto(c,false)},onMouseout:function(c){linb.Thread.abort(c.$linbid+":auto")},onMouseup:function(c){linb.Thread.abort(c.$linbid+":auto")}},INCREASE:{onMousedown:function(c){c.box._auto(c,true)},onMouseout:function(c){linb.Thread.abort(c.$linbid+":auto")},onMouseup:function(c){linb.Thread.abort(c.$linbid+":auto")}}},DataModel:{position:"absolute",width:{ini:200},height:{ini:50},steps:0,value:"0:0",type:{listbox:["vertical","horizontal"],ini:"horizontal",action:function(c){this.boxing().refresh()}},isRange:{ini:true,action:function(c){this.boxing().refresh()}},showIncreaseHandle:{ini:true,action:function(c){this.boxing().refresh()}},showDecreaseHandle:{ini:true,action:function(c){this.boxing().refresh()}}},_prepareData:function(c){var f=arguments.callee.upper.call(this,c),e="display:none";f._showDes=f.showDecreaseHandle?"":e,f._showIns=f.showIncreaseHandle?"":e,f._showD2=f.isRange?"":e;f._cls=c.getClass("BOX",f.type=="vertical"?"-v":"-h");return f},_adjustValue:function(d,e){var f=d.properties,c=[];c[0]=parseFloat(e[0])||0;c[1]=parseFloat(e[1])||0;if(f.steps){e=100/f.steps;c[0]=Math.ceil(c[0]/e);if(f.isRange){c[1]=Math.ceil(c[1]/e)}}return f.isRange?c.join(":"):(c[0]+"")},_ensureValue:function(d,l){var c=d.properties,k=String(l).split(":"),f=0,h=c.steps?c.steps:100,i=[],g=function(m){return parseFloat(m)||0},e=function(m){return Math.min(h,Math.max(f,m))};i[0]=g(k[0]);if(c.isRange){i[1]=g(k[1]);if(i[0]>i[1]){k=i[1];i[1]=i[0];i[0]=k}}i[0]=e(i[0]);if(c.isRange){i[1]=e(i[1])}return c.isRange?i.join(":"):(i[0]+"")},_v2a:function(f,d){var c=f.properties.steps,e;d=typeof d=="string"?d.split(":"):d;d[0]=parseFloat(d[0])||0;d[1]=parseFloat(d[1])||0;if(c){d[0]=d[0]*100/c}if(c){d[1]=d[1]*100/c}if(d[0]>d[1]){e=d[0];d[1]=d[0];d[0]=e}return d},_auto:function(g,i){var c=g.$linbid+":auto";if(linb.Thread.isAlive(c)){return}var d=g.properties,l,f=(d.steps?100/d.steps:1)*(i?1:-1),e={delay:300},h=g.box._v2a(g,d.$UIvalue),k=function(){h[0]+=f;if(d.isRange){h[1]+=f}g.boxing().setUIValue(g.box._adjustValue(g,h));e.delay*=0.8};e.task=k;linb.Thread(c,[e],500,null,k,null,true).start()},_onresize:function(g,d,q){var c=g.properties,m=c.type,l=function(f){return g.getSubNode(f)},s=l("RULER"),e=l("IND"),r=l("RULERLEFT");if(m=="vertical"){var n=r.height(),k=c.showDecreaseHandle?l("DECREASE").height():0,i=c.showIncreaseHandle?l("INCREASE").height():0,h=l("IND1").height();if(q){s.top(k+n).height(q-k-i-2*n);e.top(k).height(g._size=q-k-i-h)}}else{var n=r.width(),k=c.showDecreaseHandle?l("DECREASE").width():0,i=c.showIncreaseHandle?l("INCREASE").width():0,h=l("IND1").width();if(d){s.left(k+n).width(d-k-i-2*n);e.left(k).width(g._size=d-k-i-h)}}}}});Class("linb.UI.Dialog","linb.UI.Widget",{Instance:{showModal:function(c,e,d){this.show(c,true,e,d)},show:function(c,d,f,e){c=c||linb("body");return this.each(function(k){var i,l=k.properties,h=k.boxing(),g=function(){var n=k.boxing();if(f||f===0){n.setLeft(f)}if(e||e===0){n.setTop(e)}c.append(n);var q=k.box,m=k.getRoot();var p=k._$rs_args;linb.UI.$doResize(k,(p&&p[1])||l.width,(p&&p[2])||l.height);m.show(f?(parseInt(f)||0)+"px":null,e?(parseInt(e)||0)+"px":null);if(l.iframeAutoLoad){n.getSubNode("PANEL").css("overflow","hidden");if(typeof l.iframeAutoLoad=="string"){l.iframeAutoLoad={url:l.iframeAutoLoad}}var r=l.iframeAutoLoad,s=document.createElement("iframe");s.name="diframe:"+_();s.id=s.name;s.src=r.url;s.frameBorder="0";s.marginWidth="0";s.marginHeight="0";s.vspace="0";s.hspace="0";s.allowTransparency="true";s.width="100%";s.height="100%";n.append(s);linb.Dom.submit(r.url,r.query,r.method,s.name,r.enctype)}else{if(l.ajaxAutoLoad){if(typeof l.ajaxAutoLoad=="string"){l.ajaxAutoLoad={url:l.ajaxAutoLoad}}var r=l.ajaxAutoLoad;n.busy();linb.Ajax(r.url,r.query,function(u){var w=linb.create("div");w.html(u,false,true);n.append(w.children());n.free()},function(u){n.append("<div>"+u+"</div>");n.free()},null,r.options).start()}}if(d&&!k.$inModal){q._modal(k)}n.activate();if(k.onShow){k.boxing().onShow(k)}if(k.properties.status=="normal"){q._refreshRegion(k)}delete k.inShowing};if(k.inShowing){return}k.inShowing=1;if(i=l.fromRegion){linb.Dom.animate({border:"dashed 1px #ff0000"},{left:[i.left,l.left],top:[i.top,l.top],width:[i.width,l.width],height:[i.height,l.height]},null,g,360,12,"expoIn").start()}else{g()}})},hide:function(){this.each(function(f){var h=f.properties,g=f.box,d=f.getRoot();if(f.inHiding){return}f.inHiding=1;if(f.$inModal){g._unModal(f)}if(h.status=="max"||h.status=="min"){g._restore(f)}d.hide();var e=h.fromRegion,c=function(){delete f.inHiding};if(e){linb.Dom.animate({border:"dashed 1px #ff0000"},{left:[h.left,e.left],top:[h.top,e.top],width:[h.width,e.width],height:[h.height,e.height]},null,c,360,12,"expoOut").start()}else{c()}});return this},close:function(){return this.each(function(e){if(e.beforeClose&&false===e.boxing().beforeClose(e)){return}if(e.inClosing){return}e.inClosing=1;var f=e.properties,d=f.fromRegion,c=function(){e.boxing().destroy();delete e.inClosing};if(d){linb.Dom.animate({border:"dashed 1px #ff0000"},{left:[f.left,d.left],top:[f.top,d.top],width:[f.width,d.width],height:[f.height,d.height]},null,c,360,12,"expoOut").start()}else{c()}})},activate:function(c){var d=this.get(0);d.box._active(d,c);if(c!==false){_.resetRun("dlg_focus:"+d.$linbid,function(){d.getRoot().nextFocus()})}}},Initialize:function(){var d=this,c=d.getTemplate();_.merge(c.FRAME.BORDER,{TABSTOP1:{$order:-1},TBAR:{tagName:"div",className:"uibar-top",TBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"uibar-t",TBARTR:{tagName:"tr",TBARTDL:{tagName:"td",className:"uibar-tdl"},TBARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},TBARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}},BARCMDL:{$order:1,tagName:"div",className:"uibar-cmdl",ICON:{$order:0,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:1,text:"{caption}"}},BARCMDR:{$order:2,tagName:"div",className:"uibar-cmdr",OPT:{className:"uicmd-opt",style:"{optDisplay}",$order:1},PIN:{$order:2,className:"uicmd-pin",style:"{pinDisplay}"},LAND:{$order:3,className:"uicmd-land",style:"{landDisplay}"},REFRESH:{className:"uicmd-refresh",style:"{refreshDisplay}",$order:4},MIN:{$order:5,className:"uicmd-min",style:"{minDisplay}"},RESTORE:{$order:6,className:"uicmd-restore",style:"display:none;"},MAX:{$order:7,className:"uicmd-max",style:"{maxDisplay}"},CLOSE:{$order:8,className:"uicmd-close ",style:"{closeDisplay}"}}},MAIN:{$order:2,tagName:"div",className:"uicon-main",MAINI:{tagName:"div",className:"uicon-maini",PANEL:{tagName:"div",text:"{html}"+linb.UI.$childTag}}},BBAR:{$order:3,tagName:"div",className:"uibar-bottom",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"uibar-tdr"}}}},TABSTOP2:{$order:9}},"all");d.setTemplate(c);linb.alert=d.alert;linb.confirm=d.confirm;linb.pop=d.pop;linb.prompt=d.prompt},Static:{Appearances:{KEY:{overflow:"visible"},"TABSTOP1,TABSTOP2":{height:0,width:"16px",display:"inline",position:"absolute"},PANEL:{position:"relative",overflow:"auto","font-size":"12px","line-height":"14px"},CAPTION:{"font-size":"12px",display:"inline","vertical-align":linb.browser.ie6?"baseline":"middle"},BORDER:{position:"relative","font-size":0,"line-height":0}},Behaviors:{DroppableKeys:["PANEL"],DraggableKeys:["LAND"],HoverEffected:{OPT:"OPT",PIN:"PIN",MIN:"MIN",MAX:"MAX",RESTORE:"RESTORE",CLOSE:"CLOSE",REFRESH:"REFRESH",LAND:"LAND"},ClickEffected:{OPT:"OPT",PIN:"PIN",MIN:"MIN",MAX:"MAX",RESTORE:"RESTORE",CLOSE:"CLOSE",REFRESH:"REFRESH",LAND:"LAND"},onMousedown:function(c,d){c.box._active(c)},afterKeydown:function(h,k){var i=linb.Event.getKey(k);if((k.$key||k.keyCode||k.charCode)==9){if(linb.browser.ie){var l="linb::_specialforietab";if(!linb.Dom.byId(l)){linb("body").append("<div style='display:none;position:absolute;' id="+l+"></div>")}linb.Dom.byId(l).innerHTML=_()+""}var g=h.getSubNode("TABSTOP1").get(0),f=h.getSubNode("TABSTOP2").get(0),c=linb.Event.getSrc(k),d;if(i.shiftKey){if(c!==g){g.tabIndex=c.tabIndex}f.removeAttribute("tabIndex")}else{if(c!==f){f.tabIndex=c.tabIndex}g.removeAttribute("tabIndex")}g=f=c=null}},onDragstop:function(e){var g=e.getRoot().cssPos(),f=e.properties,c=null,d=null;if(f.left!==g.left){f.left=c=g.left}if(f.top!==g.top){f.top=d=g.top}if(e.onMove&&(c!==null||d!==null)){e.boxing().onMove(e,c,d,null,null)}},TABSTOP1:{onFocus:function(h,q,c){var m=parseInt(linb.use(c).get(0).tabIndex||1+"")-1;var f=h.getRoot().get(0).getElementsByTagName("*"),r,g;for(var p=0,k=f.length,d;d=f[p];p++){if(d.nodeType==1){if(d.tabIndex&&d.tabIndex<=m){if(!r){r=(g=d).tabIndex}if(d.tabIndex>r){r=(g=d).tabIndex}if(r===m){break}}}}if(d){linb(d).focus();linb.use(c).get(0).tabIndex=d.tabIndex}else{d=h.getRoot().nextFocus(false,true,false);linb(d).focus();linb.use(c).get(0).tabIndex=d.get(0).tabIndex}f=d=null}},TABSTOP2:{onFocus:function(h,p,c){tabindex=parseInt(linb.use(c).get(0).tabIndex||1+"")+1;var f=h.getRoot().get(0).getElementsByTagName("*"),q,g;for(var m=0,k=f.length,d;d=f[m];m++){if(d.nodeType==1){if(d.tabIndex&&d.tabIndex>=tabindex){if(!q){q=(g=d).tabIndex}if(d.tabIndex<q){q=(g=d).tabIndex}if(q===tabindex){break}}}}if(d){linb(d).focus();linb.use(c).get(0).tabIndex=d.tabIndex}else{d=h.getRoot().nextFocus(true,true,false);linb(d).focus();linb.use(c).get(0).tabIndex=d.get(0).tabIndex}f=d=null}},TBAR:{onMousedown:function(c,d,f){if(linb.Event.getBtn(d)!="left"){return}if(c.getKey(linb.Event.getSrc(d).parentNode.id)==c.keys.BARCMDR){return}if(c.properties.movable&&!c._locked){c.box._active(c);c.getRoot().startDrag(d,{dragDefer:1,maxTopOffset:c.getRoot().top(),maxLeftOffset:c.getRoot().left(),targetOffsetParent:c.getRoot().parent()})}},onDblclick:function(c,d,f){if(c.getKey(linb.Event.getSrc(d).parentNode.id)==c.keys.BARCMDR){return}if(!c.properties.maxBtn){return}if(c.properties.status=="max"){c.box._restore(c)}else{c.box._max(c)}}},PIN:{onClick:function(f,g,h){var d=f.keys.PIN,c=f.properties;c.pinned=!c.pinned;f.getSubNode("PIN").tagClass("-checked",c.pinned);f._locked=c.pinned;if(c.resizer){if(!c.pinned){if(c.status!="min"&&f.$resizer){f.$resizer.show()}}else{if(f.$resizer){f.$resizer.hide()}}}}},MIN:{onClick:function(c,d,f){c.box._min(c)}},MAX:{onClick:function(c,d,f){c.box._max(c)}},RESTORE:{onClick:function(c,d,f){c.box._restore(c)}},OPT:{onClick:function(c,d,f){c.boxing().onShowOptions(c,d,f)}},REFRESH:{onClick:function(c,d,f){c.boxing().onRefresh(c)}},CLOSE:{onClick:function(c,d,f){c.boxing().close()}}},DataModel:{tips:null,border:null,disabled:null,dock:{hidden:true},iframeAutoLoad:"",ajaxAutoLoad:"",html:{action:function(c){this.getSubNode("PANEL").html(c)}},caption:{ini:undefined,action:function(c){this.getSubNode("CAPTION").get(0).innerHTML=c}},image:{action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage","url("+(c||"")+")")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}},shadow:true,resizer:true,movable:true,minBtn:{ini:true,action:function(c){var d=this.getSubNode("MIN");if(c){d.setInlineBlock()}else{d.css("display","none")}}},maxBtn:{ini:true,action:function(c){var d=this.getSubNode("MAX");if(c){d.setInlineBlock()}else{d.css("display","none")}}},optBtn:{ini:false,action:function(c){this.getSubNode("OPT").css("display",c?"":"none")}},closeBtn:{ini:true,action:function(c){var d=this.getSubNode("CLOSE");if(c){d.setInlineBlock()}else{d.css("display","none")}}},refreshBtn:{ini:false,action:function(c){this.getSubNode("REFRESH").css("display",c?"":"none")}},pinBtn:{ini:false,action:function(c){var d=this.getSubNode("PIN");if(c){d.setInlineBlock()}else{d.css("display","none")}}},landBtn:{ini:false,action:function(c){var d=this.getSubNode("LAND");if(c){d.setInlineBlock()}else{d.css("display","none")}}},width:300,height:300,minWidth:200,minHeight:100,position:"absolute",fromRegion:{hidden:true,ini:null},status:{ini:"normal",listbox:["normal","min","max"],action:function(e,f){var d=this,c=d.box;if(e=="min"){c._min(d,f)}else{if(e=="max"){c._max(d,f)}else{c._restore(d,f)}}}}},EventHandlers:{onRefresh:function(c){},onShow:function(c){},beforeClose:function(c){},onShowOptions:function(c,d,f){}},RenderTrigger:function(){this.destroyTrigger=function(){var c=this;if(c.$inModal){c.box._unModal(c)}}},LayoutTrigger:function(){var d=this,e=d.properties,c=d.box;if(e.status=="min"){c._min(d)}else{if(e.status=="max"){c._max(d)}else{linb.UI.$tryResize(d,e.width,e.height)}}},_prepareData:function(e){var f=arguments.callee.upper.call(this,e),d="display:none";f.minDisplay=f.minBtn?"":d;f.maxDisplay=f.maxBtn?"":d;f.optDisplay=f.optBtn?"":d;f.closeDisplay=f.closeBtn?"":d;f.pinDisplay=f.pinBtn?"":d;f.landDisplay=f.landBtn?"":d;f.refreshDisplay=f.refreshBtn?"":d;f.statusDisplay=f.statusDisplay?"":d;f.statusHeight="height:"+f.statusHeight+"px";var c=e.properties.status;if(c=="min"||c=="max"){e.$noR=e.$noS=1}return f},_min:function(e,f){var d=e.getRoot(),i=e.box,c=d.parent(),m=e.properties;if(!f){f=m.status}if(f=="max"){i._unMax(e)}else{i._refreshRegion(e)}e.getSubNodes(["PANEL","STATUS"]).css("display","none");if(m.minBtn){e.getSubNode("RESTORE").setInlineBlock();e.getSubNode("MIN").css("display","none")}if(m.resizer&&e.$resizer){e.$resizer.hide()}if(m.shadow){e.boxing()._unShadow(false)}m.status="min";var l=d.height(),k=e.getSubNode("BORDER").height(),g=e.getSubNode("TBAR").height();d.cssSize({width:m.minWidth,height:g+l-k},true)},_max:function(f,c){var i=f.getRoot(),g=f.box,d=f.boxing(),h=i.parent(),e=f.properties;if(!c){c=e.status}if(c=="min"){g._unMin(f)}else{g._refreshRegion(f)}if(e.pinBtn){f.getSubNode("PIN").css("display","none")}if(e.maxBtn){f.getSubNode("MAX").css("display","none");f.getSubNode("RESTORE").setInlineBlock()}f.old_m=e.movable;e.movable=false;if(e.resizer&&f.$resizer){f.$resizer.hide()}if(e.shadow){d._unShadow(false)}e.status="max";d.setDock("fill")},_restore:function(e,c){var g=e.getRoot(),f=e.box,d=e.properties;if(!c){c=d.status}d.status="normal";if(c=="max"){f._unMax(e)}if(c=="min"){f._unMin(e)}e.getSubNode("RESTORE").css("display","none")},_unMax:function(e){var d=e.properties,c=e.boxing();e.getSubNode("MAX").setInlineBlock();if(d.pinBtn){e.getSubNode("PIN").setInlineBlock()}d.movable=e.old_m;if(d.shadow){c._shadow()}if(d.resizer&&!d.pinned){if(e.$resizer){e.$resizer.show()}else{c._resizer()}}c.setDock("none");linb.UI.$tryResize(e,d.width,d.height,true)},_unMin:function(e){var d=e.properties,c=e.boxing();e.getSubNodes(["PANEL","STATUS"]).css("display","block");e.getSubNode("MIN").setInlineBlock();if(d.shadow){c._shadow()}if(d.resizer&&!d.pinned){if(e.$resizer){e.$resizer.show()}else{c._resizer()}}e.getRoot().cssSize({width:d.width,height:d.height});linb.UI.$tryResize(e,d.width,d.height,true)},_active:function(f,c){var d=this;if(c!==false&&d.activeWndId==f.$linbid){return}d._deActive();if(c!==false){var h=linb(f.domId),g=h.topZindex(),e=h.css("zIndex");h.css("zIndex",g>e?g:e);f.getSubNode("TBAR").tagClass("-focus");d.activeWndId=f.$linbid}},_deActive:function(){var c;if(c=linb.UI._cache["$"+this.activeWndId]){c.getSubNode("TBAR").tagClass("-focus",false)}delete this.activeWndId},_modal:function(e){var d=e.getRoot(),c,g=d.parent(),f;if(!g.isEmpty()){if(!e.$inModal){f=e.$modalDiv;if(!f||!f.get(0)||!f.get(0).parentNode){f=e.$modalDiv=linb.create("<div style='left:0;top:0;position:absolute;overflow:hidden;display:block;z-index:0;cursor:wait;background-image:url("+linb.ini.img_bg+")'></div>")}g.append(f);if(g.get(0)===document.body||g.get(0)===document||g.get(0)===window){g=linb.win}f.css({display:"block",width:Math.max(g.width(),g.scrollWidth())+"px",height:Math.max(g.height(),g.scrollHeight())+"px"}).onMousedown(function(){return false}).topZindex(true);g.onSize(function(h){h=linb(h);f.width(h.width()).height(h.height());_.asyRun(function(){f.width(Math.max(h.width(),h.scrollWidth()));f.height(Math.max(h.height(),h.scrollHeight()))})},"dialog:"+e.serialId);d.css("zIndex",(parseInt(f.css("zIndex"))||0)+1);e.$inModal=true}}},_unModal:function(c){if(c.$inModal){var d=c.$modalDiv.parent();if(d.get(0)===document.body||d.get(0)===document||d.get(0)===window){d=linb.win}d.onSize(null,"dialog:"+c.serialId);c.getRoot().css("zIndex",0);c.getSubNode("BORDER").append(c.$modalDiv.css("display","none"));c.$inModal=false}},_refreshRegion:function(c){if(!c.renderId){return}var d=c.properties;return _.merge(d,c.getRoot().cssRegion(),function(f,e){return d[e]!="auto"})},_adjust:function(i,p,g,c,m){p=p||"";if(!g){g=p;p=""}var d=i.$div.reBoxing(),k="linb:temp:dialog",l=arguments.callee,n,e;if(!linb.Dom.byId(k)){f=l._cache=d.clone(false);linb("body").append(f);f.css({width:"auto",height:"auto",overflow:"visible",position:"absolute",visibility:"visible",left:linb.Dom.HIDE_VALUE,top:linb.Dom.HIDE_VALUE}).id(k,true)}var f=l._cache;f.html(g,false);var q=f.cssSize();d.html(g);if(q.width>500){q.width=500;f.width(500);q.height=f.offsetHeight()+10;f.width("auto")}f.html("",false);if(q.height>400){q.height=400}if(q.width<150){q.width=150}if(q.height<30){q.height=30}d.cssSize(q).css("overflow","auto").show();n=q.width+40;e=q.height+90;i.setCaption(p).setWidth(n).setHeight(e);i.$cmd.reBoxing().left((q.width+30-i.$cmd.reBoxing().width())/2)},alert:function(n,h,m,g,f,l){var k=arguments.callee,i;if(!(i=k.dialog)||(!i.get(0).renderId)){i=k.dialog=new linb.UI.Dialog({minBtn:false,maxBtn:false,pinBtn:false,resizer:false,left:200,top:200},{beforeClose:function(){i.hide();_.tryF(k.onClose);k.onClose=null;return false}});var e=i.$cmd=new linb.UI.Div({bottom:10,width:60,height:24}),d=i.$btn=new linb.UI.SButton({width:60,tabindex:1},{onClick:function(){i.hide();_.tryF(k.onClose);k.onClose=null}});e.append(d);var c=i.$div=new linb.UI.Div({left:10,top:10});i.append(e).append(c).render()}k.onClose=m;i.$btn.setCaption(g||linb.wrapRes("$inline.ok"));linb.UI.Dialog._adjust(i,n,h);i.show(linb("body"),true,f,l);_.resetRun("dlg_focus:"+i.get(0).$linbid,function(){i.$btn.activate()});return i},confirm:function(m,p,n,q,h,e,g,l){var k=arguments.callee,i;if(!(i=k.dialog)||(!i.get(0).renderId)){i=k.dialog=new linb.UI.Dialog({minBtn:false,maxBtn:false,pinBtn:false,resizer:false,left:200,top:200},{beforeClose:function(){i.hide();_.tryF(k.onNo,["close"]);k.onYest=k.onNo=null;return false}});var f=i.$cmd=new linb.UI.Div({bottom:10,width:140,height:24}),d=i.$btn1=new linb.UI.SButton({width:60,tabindex:1,left:0},{onClick:function(){i.hide();_.tryF(k.onYes);k.onYest=k.onNo=null}});f.append(d);d=i.$btn2=new linb.UI.SButton({tabindex:1,width:60,left:80},{onClick:function(){i.hide();_.tryF(k.onNo,["no"]);k.onYest=k.onNo=null}});f.append(d);var c=i.$div=new linb.UI.Div({left:10,top:10});i.append(f).append(c).render()}k.onYes=n;k.onNo=q;i.$btn1.setCaption(h||linb.wrapRes("$inline.yes"));i.$btn2.setCaption(e||linb.wrapRes("$inline.no"));linb.UI.Dialog._adjust(i,m,p);i.show(linb("body"),true,g,l);_.resetRun("dlg_focus:"+i.get(0).$linbid,function(){i.$btn2.activate()});return i},pop:function(i,e,d,h,g){var c=new linb.UI.Dialog({minBtn:false,maxBtn:false,pinBtn:false,resizer:false,left:200||h,top:200||g}),f=c.$cmd=new linb.UI.Div({bottom:10,width:"auto",height:24,CS:"text-align:center;"}).append(c.$btn=new linb.UI.SButton({caption:d||"$inline.ok",tabindex:1,position:"relative"},{onClick:function(){c.destroy()}})),k=c.$div=new linb.UI.Div({left:10,top:10,width:80}).setCustomStyle({KEY:"overflow:visible"});c.append(f).append(k).render();linb.UI.Dialog._adjust(c,i,e);c.show(linb("body"),false,h,g);_.resetRun("dlg_focus:"+c.get(0).$linbid,function(){c.$btn.activate()});return c},prompt:function(n,r,h,p,s,g,d,f,m){var i,l=arguments.callee;if(!(i=l.dialog)||(!i.get(0).renderId)){var q=function(){l.$inp.setValue("");l.onYes=l.onNo=null;l.dialog.hide();return false};i=l.dialog=new linb.UI.Dialog({minBtn:false,maxBtn:false,pinBtn:false,resizer:false,left:200,top:200,width:300,height:130},{beforeClose:function(){_.tryF(l.onNo);return q()}});var c=l.$con=new linb.UI.Div({top:4,left:10,width:270,height:18}),e=new linb.UI.Div({top:65,width:270,height:24}).setCustomStyle("KEY","text-align:center;").append(i.$btn1=new linb.UI.SButton({width:60,left:70,tabindex:1},{onClick:function(){if(false!==_.tryF(l.onYes,[l.$inp.getUIValue()])){return q()}}}));e.append(i.$btn2=new linb.UI.SButton({tabindex:1,left:140,width:60},{onClick:function(){_.tryF(l.onNo);return q()}}));var k=l.$inp=new linb.UI.Input({left:10,top:22,width:270,height:36,multiLines:true});i.append(c).append(e).append(k).render()}i.setCaption(n||"Prompt");l.$con.setHtml(r||"");l.$inp.setValue(h||"",true);l.onYes=p;l.onNo=s;i.$btn1.setCaption(g||linb.wrapRes("$inline.ok"));i.$btn2.setCaption(d||linb.wrapRes("$inline.cancel"));i.show(linb("body"),true,f,m);_.resetRun("dlg_focus:"+i.get(0).$linbid,function(){l.$inp.activate()});return i},_onresize:function(e,d,p,c){if(d&&e.properties.status=="min"){d=e.properties.minWidth}var r=arguments.callee.upper.apply(this,arguments),n={},m=e.getSubNode("TBAR"),l=e.getSubNode("PANEL"),k=e.getSubNode("BBAR"),h=e.getSubNode("MAIN"),g=e.getSubNode("MAINI"),i,f,q;if(p){if(p=="auto"){n.height=p}else{i=m.height(),f=k.height();if((q=r.height-i-f)>0){n.height=q}}}if(d){n.width=r.width-(parseInt(g.css("paddingRight"))||0)-(parseInt(h.css("paddingLeft"))||0)}l.cssSize(n,true)}}});